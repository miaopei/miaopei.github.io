<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Android学习笔记</title>
    <url>/2019/08/27/Android/android-learn-note/</url>
    <content><![CDATA[<h2 id="1-Android-开发者文档"><a href="#1-Android-开发者文档" class="headerlink" title="1. Android 开发者文档"></a>1. Android 开发者文档</h2><blockquote>
<p><a href="https://developer.android.com/">Android 官方 开发者文档</a></p>
<p><a href="hukai.me/android-training-course-in-chinese/index.html">中文翻译项目</a></p>
</blockquote>
<h2 id="2-Progressive-Web-App"><a href="#2-Progressive-Web-App" class="headerlink" title="2. Progressive Web App"></a>2. Progressive Web App</h2><blockquote>
<p><a href="https://juejin.im/post/5a6c86e451882573505174e7">简单介绍一下Progressive Web App(PWA)</a></p>
<p><a href="https://huangxuan.me/2017/02/09/nextgen-web-pwa/">下一代 Web 应用模型 —— Progressive Web App</a></p>
<p><a href="https://lavas.baidu.com/">LAVAS 基于 Vue.js 的 PWA 解决方案</a></p>
<p><a href="https://juejin.im/post/5abba6a7f265da239706ec60">PWA超简单入门</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/40236256">PWA，现代前端必会的黑科技</a></p>
</blockquote>
<h2 id="3-Java-知识汇总"><a href="#3-Java-知识汇总" class="headerlink" title="3. Java 知识汇总"></a>3. Java 知识汇总</h2><blockquote>
<p><a href="https://blog.csdn.net/zhandoushi1982/article/details/8458081">JAVA的abstract修饰符 &amp;&amp; 接口interface用法 &amp;&amp; 抽象类和interface的差别</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>架构师之路</title>
    <url>/2019/07/02/Architect/%E6%9E%B6%E6%9E%84%E5%B8%88%E4%B9%8B%E8%B7%AF/</url>
    <content><![CDATA[<h2 id="架构师入门"><a href="#架构师入门" class="headerlink" title="架构师入门"></a>架构师入门</h2><blockquote>
<p><a href="https://www.jianshu.com/p/a79dc35f4597">我的职业是架构师：12年经验带你入门</a></p>
<p><a href="http://www.ruanyifeng.com/blog/2016/09/software-architecture.html">软件架构入门 – 阮一峰</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/37078580">成为1个架构师的入门到进阶之路（学习路线图）</a></p>
</blockquote>
<blockquote>
<p><a href="https://mp.weixin.qq.com/s/RahJtAlTF9vkrsj4ZlqPig">架构师之路</a></p>
<p><a href="https://www.w3cschool.cn/architectroad/architectroad-awk.html">W3Cschool架构师之路</a></p>
</blockquote>
]]></content>
      <categories>
        <category>架构师</category>
      </categories>
      <tags>
        <tag>架构师</tag>
      </tags>
  </entry>
  <entry>
    <title>Dogs vs Cats (猫狗大战)</title>
    <url>/2018/01/03/DeepLearning/DogsVsCats/</url>
    <content><![CDATA[<blockquote>
<p>GitHub 项目地址：<a href="https://github.com/miaopei/cat_vs_dog">Dogs vs Cats (猫狗大战)</a></p>
</blockquote>
<h2 id="项目说明"><a href="#项目说明" class="headerlink" title="项目说明"></a>项目说明</h2><p>本项目是优达学城的一个毕业项目。项目要求使用深度学习方法识别一张图片是猫还是狗</p>
<ul>
<li>输入：一张彩色图片</li>
<li>输出：是猫还是狗</li>
</ul>
<span id="more"></span>

<h2 id="项目环境"><a href="#项目环境" class="headerlink" title="项目环境"></a>项目环境</h2><p>项目使用Anaconda搭建环境。可是使用environment目录下的yml进行环境安装。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">conda <span class="built_in">env</span> create -f environment.yml</span></span><br></pre></td></tr></table></figure>

<h2 id="数据来源"><a href="#数据来源" class="headerlink" title="数据来源"></a>数据来源</h2><p>数据集来自 kaggle 上的一个竞赛：<a href="https://www.kaggle.com/c/dogs-vs-cats-redux-kernels-edition/data">Dogs vs. Cats Redux: Kernels Edition</a>。</p>
<p>下载kaggle猫狗数据集解压后分为 3 个文件 train.zip、 test.zip 和 sample_submission.csv。</p>
<p>train 训练集包含了 25000 张猫狗的图片， 每张图片包含图片本身和图片名。命名规则根据“type.num.jpg”方式命名。</p>
<p>test 测试集包含了 12500 张猫狗的图片， 每张图片命名规则根据“num.jpg”，需要注意的是测试集编号从 1 开始， 而训练集的编号从 0 开始。</p>
<p>sample_submission.csv 需要将最终测试集的测试结果写入.csv 文件中，上传至 kaggle 进行打分。</p>
<h2 id="基准模型"><a href="#基准模型" class="headerlink" title="基准模型"></a>基准模型</h2><p>项目使用ResNet50, Xception, Inception V3 这三个模型完成。本项目的最低要求是 kaggle Public Leaderboard 前10%。在kaggle上，总共有1314只队伍参加了比赛，所以需要最终的结果排在131位之前，131位的得分是0.06127，所以目标是模型预测结果要小于0.06127。</p>
<h2 id="评估指标"><a href="#评估指标" class="headerlink" title="评估指标"></a>评估指标</h2><p>kaggle 官方的评估标准是 LogLoss，下面的表达式就是二分类问题的 LogLoss 定义。</p>
<div align="center"><a href="https://www.codecogs.com/eqnedit.php?latex=LogLoss&space;=&space;-\frac{1}{n}\sum_{i=1}^n&space;[y_ilog(\hat{y}_i)&plus;(1-y_i)log(1-&space;\hat{y}_i)]" target="_blank"><img data-src="https://latex.codecogs.com/gif.latex?LogLoss&space;=&space;-\frac{1}{n}\sum_{i=1}^n&space;[y_ilog(\hat{y}_i)&plus;(1-y_i)log(1-&space;\hat{y}_i)]" title="LogLoss = -\frac{1}{n}\sum_{i=1}^n [y_ilog(\hat{y}_i)+(1-y_i)log(1- \hat{y}_i)]" /></a></div>

<p>其中：</p>
<ul>
<li><p>n 是测试集中图片数量</p>
</li>
<li><p><a href="https://www.codecogs.com/eqnedit.php?latex=\hat{y}_i" target="_blank"><img data-src="https://latex.codecogs.com/gif.latex?\hat{y}_i" title="\hat{y}_i" /></a> 是图片预测为狗的概率</p>
</li>
<li><p><a href="https://www.codecogs.com/eqnedit.php?latex=y_i" target="_blank"><img data-src="https://latex.codecogs.com/gif.latex?y_i" title="y_i" /></a> 如果图像是狗，则为1，如果是猫，则为0</p>
</li>
<li><p><a href="https://www.codecogs.com/eqnedit.php?latex=log()" target="_blank"><img data-src="https://latex.codecogs.com/gif.latex?log()" title="log()" /></a> 是自然（基数 <a href="https://www.codecogs.com/eqnedit.php?latex=e" target="_blank"><img data-src="https://latex.codecogs.com/gif.latex?e" title="e" /></a>）对数</p>
</li>
</ul>
<p>对数损失越小，代表模型的性能越好。上述评估指标可用于评估该项目的解决方案以及基准模型。</p>
<h2 id="设计大纲"><a href="#设计大纲" class="headerlink" title="设计大纲"></a>设计大纲</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> model_graphviz/</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br></pre></td></tr></table></figure>

<img data-src="/2018/01/03/DeepLearning/DogsVsCats/model.png" class="" title="model">

<p>整个模型是在本地训练的，训练了三天才完成。建议使用云端 GPU 训练复现实验过程。</p>
<p><strong>1. 数据预处理</strong></p>
<ul>
<li>从kaggle下载好图片</li>
<li>将猫和狗的图片放在不同的文件夹以示分类，使用创建符号链接的方法</li>
<li>对图片进行resize，保持输入图片信息大小一致</li>
</ul>
<p><strong>2. 模型搭建</strong></p>
<p>Kera的应用模块Application提供了带有预训练权重的Keras模型，这些模型可以用来进行预测、特征提取和微调整和。</p>
<ul>
<li>Xception 默认输入图片大小是 <code>299*299*3</code></li>
<li>InceptionV3 默认输入图片大小是 <code>299*299*3</code></li>
<li>ResNet50 默认输入图片大小是 <code>224*224*3</code></li>
</ul>
<p>在Keras中载入模型并进行全局平均池化，只需要在载入模型的时候，设置<code>include_top=False</code>, <code>pooling=&#39;avg&#39;</code>. 每个模型都将图片处理成一个<code>1*2048</code>的行向量，将这三个行向量进行拼接，得到一个<code>1*6144</code>的行向量， 作为数据预处理的结果。</p>
<p><strong>3. 模型训练&amp;模型调参</strong></p>
<p>载入预处理的数据之后，先进行一次概率为0.5的dropout，然后直接连接输出层，激活函数为Sigmoid，优化器为Adam，输出一个零维张量，表示某张图片中有狗的概率。</p>
<p><strong>4. 模型评估</strong></p>
<ul>
<li>使用$Logloss$进行模型评估,上传Kaggle判断是否符合标准</li>
</ul>
<p><strong>5. 可视化</strong></p>
<ul>
<li>进行数据探索并且可视化原始数据</li>
<li>可视化模型训练过程的准确率曲线，损失函数曲线等</li>
</ul>
<h2 id="项目部署"><a href="#项目部署" class="headerlink" title="项目部署"></a>项目部署</h2><p>项目使用 Keras 和 Flask 搭建部署一个简单易用的深度学习图像网页应用，可以通过网页导入一张彩色猫或者狗的图片预测是猫或者狗的概率。</p>
<p>项目目录结构：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">├── README.md</span><br><span class="line">├── ResNet50_image_predict.ipynb</span><br><span class="line">├── app.py</span><br><span class="line">├── environmert.yml</span><br><span class="line">├── static</span><br><span class="line">│   ├── css</span><br><span class="line">│   │   └── main.css</span><br><span class="line">│   └── js</span><br><span class="line">│       └── main.js</span><br><span class="line">├── templates</span><br><span class="line">│   ├── base.html</span><br><span class="line">│   └── index.html</span><br><span class="line">├── models</span><br><span class="line">│   └── ResNet50_catdog_model.h5</span><br><span class="line">├── uploads</span><br><span class="line">│   ├── test01.jpg</span><br><span class="line">│   └── test02.jpg</span><br><span class="line">└── webapp_image_predict.ipynb</span><br></pre></td></tr></table></figure>

<h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">conda <span class="built_in">env</span> create -f environmert.yml</span></span><br></pre></td></tr></table></figure>

<h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">python app.py</span></span><br></pre></td></tr></table></figure>

<p>这时候用浏览器打开 <a href="http://localhost:5000/">http://localhost:5000/</a> 就可以进行网页导入图片预测图片是狗的概率了。</p>
<h3 id="快速复现webapp预测结果"><a href="#快速复现webapp预测结果" class="headerlink" title="快速复现webapp预测结果"></a>快速复现webapp预测结果</h3><p>如果不想搭建环境复现实验结果，可以按照以下操作分分钟复现实验结果：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker pull miaowmiaow/webapp:1.1.0</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -p 5000:5000 miaowmiaow/webapp:1.1.0</span></span><br></pre></td></tr></table></figure>

<p>到此就可以在浏览器中输入 <a href="http://localhost:5000/">http://localhost:5000</a> 就可以使用网页对导入的猫狗图片做预测了。</p>
<p>下图为预测的效果图：</p>
<img data-src="/2018/01/03/DeepLearning/DogsVsCats/webapp.gif" class="" title="webapp">]]></content>
      <categories>
        <category>DeepLearning</category>
      </categories>
      <tags>
        <tag>DeepLearning</tag>
      </tags>
  </entry>
  <entry>
    <title>机器学习深度学习-文章收藏</title>
    <url>/2018/01/13/DeepLearning/note-blog-link/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://github.com/Fabsqrt/BitTigerLab">沁原的硅谷创新课</a></p>
<p><a href="https://ai.yanxishe.com/page/blogDetail/10036">Github项目推荐 | 基于 deepfakes（视频换脸）的非官方项目deepfakes_faceswap</a></p>
</blockquote>
]]></content>
      <categories>
        <category>DeepLearning</category>
      </categories>
      <tags>
        <tag>DeepLearning</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker 学习笔记</title>
    <url>/2016/12/23/Docker/Docker-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="1-Docker基本命令"><a href="#1-Docker基本命令" class="headerlink" title="1. Docker基本命令"></a>1. Docker基本命令</h1><h2 id="1-1-常用Docker命令"><a href="#1-1-常用Docker命令" class="headerlink" title="1.1 常用Docker命令"></a>1.1 常用Docker命令</h2><span id="more"></span>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开启Docker守护进程调试模式</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker daemon -D</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看Docker信息</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker info</span> </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">停止或者启动Docker</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo service docker stop/start</span> </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">以命令行模式运行一个容器</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run -i -t ubuntu /bin/bash</span> </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">给容器命名</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run --name Micheal_container -i -t ubuntu /bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动或者停止运行的容器</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker start/stop Micheal_container</span> </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">附着到正在运行的容器</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker attach Micheal_container</span> </span><br></pre></td></tr></table></figure>

<p><strong>创建守护式容器</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run --name daemon_dave -d ubuntu /bin/sh -c <span class="string">&quot;while true; do echo hello world; sleep 1; done&quot;</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面的docker run 使用了<code>-d</code>参数，因此Docker会将容器放到后台运行。</p>
</blockquote>
<p><strong>Docker日志</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取守护式容器的日志</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker logs daemon_dave</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">跟踪守护式容器的日志</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker logs -f daemon_dave</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取日志的最后10行</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker logs --<span class="built_in">tail</span> 10 daemon_dave</span> </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">跟踪某个容器的最新日志</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker logs --<span class="built_in">tail</span> 0 -f daemon_dave</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-t 标志为每条日志项加上时间戳</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker logs -ft daemon_dave</span> </span><br></pre></td></tr></table></figure>

<p><strong>Docker日志驱动</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run --log-driver=<span class="string">&quot;syslog&quot;</span> --name daemon_dave -d ubuntu /bin/sh -c <span class="string">&quot;while true; do echo hello world; sleep 1; done&quot;</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用syslog将会禁用docker logs命令，并且将所有容器的日志输出都重定向到Syslog。</p>
</blockquote>
<p><strong>查看容器内的进程</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker top daemon_dave</span></span><br></pre></td></tr></table></figure>

<p><strong>Docker统计信息</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker stats daemon_dave daemon_kate daemon_clear daemon_sarah</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>以上命令可以看到一个守护容器的列表，以及他们的CPU、内存、网络I&#x2F;O以及存储I&#x2F;O的性能和指标。这对快速监控一台主机上的一组容器非常有用。</p>
</blockquote>
<p><strong>在容器内部运行进程</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker <span class="built_in">exec</span> -d daemon_dave <span class="built_in">touch</span> /etc/new_config_file</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>-d</code>表示需要运行一个后台进程</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在容器内运行交互命令</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker <span class="built_in">exec</span> -t -i daemon_dave /bin/bash</span> </span><br></pre></td></tr></table></figure>

<p><strong>自动重启容器</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run --restart=always --name daemon_dave -d ubuntu /bin/sh -c <span class="string">&quot;while true; do echo hello world; sleep 1; done&quot;</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>--restart</code>标志被设置为always。无论容器的退出代码是什么，Docker都会自动重启改容器。除了always，还可以将这个标志设为<code>on-failure</code>，这样，只有当容器的退出代码为非0值的时候，才会自动重启。另外，on-failure还接受一个可选的重启次数参数，<code>--restart=on-failure:5</code>,Docker会尝试自动重启改容器，最多重启5次。</p>
</blockquote>
<p><strong>深入容器</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker inspect daemon_dave</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>docker inspect命令会对容器进行详细的检查，然后返回其配置信息，包括名称、命令、网络配置以及很多有用的数据。可以使用<code>-f</code>或者<code>--format</code>标志来选定查看结果。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker inspect --format=<span class="string">&#x27;&#123;.State.Running&#125;&#x27;</span> daemon_dave</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>查看多个容器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker inspect --format <span class="string">&#x27;&#123;.Name&#125; &#123;.State.Running&#125;&#x27;</span> daemon_dave Micheal_container</span></span><br></pre></td></tr></table></figure>

<p><strong>删除容器</strong><br>​    </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker <span class="built_in">rm</span> daemon_dave</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除所有容器</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker <span class="built_in">rm</span> `sudo docker ps -a -q`</span></span><br></pre></td></tr></table></figure>

<p><strong>列出所有镜像</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker images</span></span><br></pre></td></tr></table></figure>

<p><strong>拉去镜像</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker pull ubuntu:16.04</span></span><br></pre></td></tr></table></figure>

<p><strong>运行一个带标签的Docker镜像</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run -i -t --name new_container ubuntu:16.04 /bin/bash</span></span><br></pre></td></tr></table></figure>

<p><strong>查找镜像</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker search puppet</span></span><br></pre></td></tr></table></figure>

<p><strong>构建镜像</strong></p>
<ul>
<li>使用<code>docker commit</code>命令</li>
<li>使用<code>docker build</code>命令和<code>Dockerfile</code>文件</li>
</ul>
<p><strong>用Docker的commit命令创建镜像</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run -i -t ubuntu /bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">接下来安装需要安装的工具，安装完成后<span class="built_in">exit</span>退出容器, eg：</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">apt-get -yqq update</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">apt-get -y install apache2</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定提交修改过的容器的ID（可以通过docker ps -l -q命令得到刚创建的容器的ID）</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker commit 4aab3cecb76 micheal/apache2</span>  </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查新创建的镜像</span></span><br><span class="line">sudo docker images micheal/apache2  </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">提交另一个新定制容器</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-m 选项用来指定新创建的镜像的提交信息，-a 用来列出该镜像的作者信息。</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker commit -m<span class="string">&quot;A new custom image&quot;</span> -a<span class="string">&quot;Micheal&quot;</span> 4aab3cecb76 micheal/apache2:webserver</span>  </span><br></pre></td></tr></table></figure>

<p><strong>用Dockerfile构建镜像</strong></p>
<p>Dockerfile文件示例：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Vsersion: 0.0.1</span></span><br><span class="line">FROM ubuntu:16.04</span><br><span class="line">MAINTAINER Micheal &quot;miaopei@baicells.com&quot;</span><br><span class="line">RUN apt-get -yqq update &amp;&amp; apt-get -y install nginx</span><br><span class="line">RUN echo &#x27;Hi, I an in your container&#x27; &gt; /usr/share/nginx/html/index.html</span><br><span class="line">EXPOSE 80</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Dockerfile中的指令会按照顺序从上到下执行，所以根据需要合理安排指令的顺序。</p>
<p>如果Dockerfile由于某些原因没有正常结束，那么用户得到了一个可以使用的镜像。这对调试非常有帮助：可以基于改镜像运行一个具备交互功能的容器，使用最后创建的镜像对为什么用户指令会失败进行调试。</p>
<p><strong>每个Dockerfile的第一条指令必须是FROM</strong>,FROM指令指定一个已经存在的镜像，后续指令都将基于该镜像进行，这个镜像被称为基础镜像。</p>
<p>MAINTAINER指令告诉Docker镜像的作者是谁，以及作者的电子邮件。有助于标识镜像的所有者和联系方式。</p>
</blockquote>
<blockquote>
<p>默认情况下，RUN指令会在shell里使用命令包装器<code>/bin/sh -c</code>来执行，如果是在一个不支持shell的平台上运行或者不希望在shell中运行（比如避免shell字符串篡改），也可以使用<code>exec</code>格式的RUN指令，如下所示：</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">RUN [ &quot;apt-get&quot;, &quot; install&quot;, &quot;-y&quot;, &quot;nginx&quot; ]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>EXPOSE指令告诉Docker该容器内的应用程序将会使用该容器的指定端口。</p>
</blockquote>
<p><strong>基于Dockerfile构建新镜像</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker build -t=<span class="string">&quot;micheal/static_web&quot;</span> .</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker build -t=<span class="string">&quot;micheal/static_web:v1&quot;</span> .</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这里Docker假设在这个Git仓库的根目录下存在Dockerfile文件</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker build -t=<span class="string">&quot;micheal/static_web:v1&quot;</span> git@github.com:micheal/docker_static_web</span>  </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">忽略Dockerfile的构建缓存</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker build --no-cache -t=<span class="string">&quot;micheal/static_web&quot;</span> .</span> </span><br></pre></td></tr></table></figure>

<p><strong>查看镜像</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">列出Docker镜像</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker images</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看镜像每一层，以及创建这些层的Dockerfile指令</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker <span class="built_in">history</span> micheal/static_web</span> </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run -d -p 80 --name statix_web micheal/static_web nginx -g <span class="string">&quot;daemon off;&quot;</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>nginx -g “daemon off;”,这将以前台的方式启动Nginx。</p>
<p><code>-p</code>标志用来控制Docker在运行时应该公开那些网络端口给外部（宿主机）。运行一个容器时，Docker可以通过两种方式来在宿主机上分配端口。</p>
<ul>
<li>Docker可以在宿主机上随机选择一个位于32768 ~ 61000的一个比较大的端口号来映射到容器中的80端口上。</li>
<li>可以在Docker宿主机只指定一个具体的端口号来映射到容器中的80端口上。</li>
</ul>
</blockquote>
<p><strong>查看Docker端口映射情况</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker ps -l</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">返回宿主机中映射的端口</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo socker port static_web 80</span> </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-p会将容器内的80端口绑定到宿主机的8080端口上</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run -d -p 8080:80 --name statix_web micheal/static_web nginx -g <span class="string">&quot;daemon off;&quot;</span></span> </span><br></pre></td></tr></table></figure>

<p><strong>Dockerfile指令</strong></p>
<ol>
<li>CMD</li>
</ol>
<blockquote>
<p>CMD指令用于指定一个容器启动时要运行的命令。这有点儿类似于RUN指令，只是RUN指令是指定容器镜像被构建时要运行的命令，而CMD是指定容器被启动时要运行的命令。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CMD [&quot;/bin/bash/&quot;, &quot;-l&quot;]</span><br></pre></td></tr></table></figure>

<ol>
<li>ENTRYPOINT</li>
</ol>
<blockquote>
<p>ENTRYPOINT和CMD指令非常类似，我们可在docker run命令行中覆盖CMD指令，而ENTRYPOINT指令提供的命令则不容易在启动容器的时候被覆盖。</p>
<p>可以组合使用ENTRYPOINT和CMD指令来完成一些巧妙的工作。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ENTRYPOINT [&quot;/usr/sbin/nginx&quot;]</span><br><span class="line">CMD [&quot;-h&quot;]</span><br></pre></td></tr></table></figure>

<ol>
<li>WORKDIR</li>
</ol>
<blockquote>
<p>WORKDIR指令用来在从镜像创建一个新容器时，在容器内部设置一个工作目录，ENTRYPOINT和&#x2F;或CMD指定的程序会在这个目录下执行。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">WORKDIR /opt/webapp/db</span><br><span class="line">RUN bundle install</span><br><span class="line">WORKDIR /opt/webapp</span><br><span class="line">ENTRYPOINT [&quot;rackup&quot;]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>可以通过<code>-w</code>标志在运行时覆盖工作目录</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run -ti -w /var/log ubuntu <span class="built_in">pwd</span>/var/log</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ENV</li>
</ol>
<blockquote>
<p>ENV指令用来在镜像构建过程中设置环境变量。这些变量会持久保存到从我们镜像创建的任何容器中。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ENV RVM_PATH /home/rvm</span><br></pre></td></tr></table></figure>

<blockquote>
<p>也可以使用docker run命令行的<code>-e</code>标志来传递环境变量。这些环境变量只会在运行时有效。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run -ti -e <span class="string">&quot;WEB_PORT=8080&quot;</span> ubuntu <span class="built_in">env</span></span></span><br></pre></td></tr></table></figure>

<ol>
<li>USER</li>
</ol>
<blockquote>
<p>USER指令用来指定该镜像会以什么样的用户身份来运行。我们可以指定用户名或者UID以及组或GID，甚至是两者的组合。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">USER user</span><br><span class="line">USER user:group</span><br><span class="line">USER uid</span><br><span class="line">USER uid:gid</span><br><span class="line">USER user:gid</span><br><span class="line">USER uid:group</span><br></pre></td></tr></table></figure>

<blockquote>
<p>也可以在docker run命令行中通过<code>-u</code>标志覆盖该指令指定的值。</p>
</blockquote>
<ol>
<li>VOLUME</li>
</ol>
<blockquote>
<p>VOLUME指令用来向基于镜像创建的容器添加卷。一个卷可以存在于一个或者多个容器内特定的目录，这个目录可以绕过联合文件系统，并提供如下共享数据或者对数据进行持久化的功能。</p>
<ul>
<li>卷可以在容器间共享和重用</li>
<li>一个容器可以不是必须和其他容器共享卷</li>
<li>对卷的修改是立即生效的</li>
<li>对卷的修改不会对更新镜像产生影响</li>
<li>卷会一直存在直到没有任何容器再使用它</li>
</ul>
<p>卷功能让我们可以将数据（如源代码）、数据库或者其他内容添加到镜像中而不是将这些内容提交到镜像中，并且允许我们在多个容器间共享这些内容，我们可以利用此功能来测试容器和内部应用程序代码，管理日志，或者处理容器内部的数据库。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">VOLUME [&quot;/opt/project&quot;]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这条指令将会基于此镜像的任何容器创建一个名为&#x2F;opt&#x2F;project的挂载点。</p>
<p>也可以通过指定数组的方式指定多个卷</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">VOLUME [&quot;/opt/project&quot;, &quot;/data&quot;]</span><br></pre></td></tr></table></figure>

<ol>
<li>ADD</li>
</ol>
<blockquote>
<p>ADD指令用来将构建环境下的文件和目录复制到镜像中。不能对构建目录或者上下文之外的文件进行ADD操作。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ADD software.lic /opt/application/software.lic</span><br><span class="line">ADD latest.tar.gz /var/www/wordpress/   //这条指令会将归档文件解开到指定的目录下</span><br></pre></td></tr></table></figure>

<ol>
<li>COPY</li>
</ol>
<blockquote>
<p>COPY指令非常类似ADD，它们根本不同是COPY只关心构建上下文中复制本地文件，而不会去做文件提取（extraction）和解压（decompression）的工作。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">COPY conf.d/ /etc/apache2/</span><br></pre></td></tr></table></figure>

<ol>
<li>LABEL</li>
</ol>
<blockquote>
<p>LABEL指令用于为Docker镜像添加元数据。元数据以键值对的形式展现</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">LABEL version=&quot;1.0&quot;</span><br><span class="line">LABEL location=&quot;New York&quot; type=&quot;Data Center&quot; role=&quot;Web Server&quot;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>可以使用docker inspect命令查看容器标签</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker inspect micheal/apache2</span></span><br></pre></td></tr></table></figure>

<ol>
<li>STOPSIGNAL</li>
</ol>
<blockquote>
<p>STOPSIGNAL指令用来设置停止容器时发送什么系统调用信号给容器。</p>
</blockquote>
<ol>
<li>ARG</li>
</ol>
<blockquote>
<p>ARG指令用来定义可以在docker build命令运行时传递给构建运行时的变量，我们只需要在构建时使用–build-arg标志即可。用户只能在构建时指定在Dockerfile文件汇总定义过的参数。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ARG build</span><br><span class="line">ARG webapp_user=user</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker build --build-arg build=1234 -t micheal/webapp .</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ONBUILD</li>
</ol>
<blockquote>
<p>ONBUILD指令能为镜像添加触发器（trigger）。当一个镜像被用做其他镜像的基础镜像时（比如用户的镜像需要从某未准备好的位置添加源代码，或者用户需要执行特定于构建镜像的环境的构建脚本），该镜像中的触发器将会被执行。</p>
<p>触发器会在构建过程中插入新指令，我们可以认为这些指令是紧跟在FROM之后指定的。触发器可以是任何构建指令。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ONBUILD ADD . /app/src</span><br><span class="line">ONBUILD RUN cd /app/src/ &amp;&amp; make</span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面的代码将会在创建的镜像中加入ONBUILD触发器，ONBUILD指令可以在镜像上运行docker inspect命令查看。</p>
</blockquote>
<p><strong>Docker Networking</strong></p>
<blockquote>
<p>容器之间的连接用网络创建，这被称为Docker Networking。Docker Networking允许用户创建自己的网络，容器可以通过这个网上互相通信。更重要的是，现在容器可以跨越不同的宿主机来通信，并且网络配置可以更灵活的定制。Docker Networking也和Docker Compose以及Swarm进行了集成。</p>
<p>要想使用Docker网络，需要先创建一个网络，然后在这个网络下启动容器。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker network create app</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里使用docker network命令创建了一个桥接网络，命名为app。可以使用docker network inspect命令查看新创建的这个网络。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker network inspect app</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>我们可以看到这个新网络是一个本地的桥接网络（这非常像docker0网络），而且现在没有容器再这个网络中运行。</p>
<p>可以使用<code>docker network ls</code>命令列出当前系统中所有的网络。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker network <span class="built_in">ls</span></span> </span><br></pre></td></tr></table></figure>

<blockquote>
<p>也可以使用 <code>docker network rm</code>命令删除一个Docker网络。</p>
<p>在Docker网络中创建Redis容器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run -d --net=app --name db micheal/redis</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>--net</code>标志指定了新容器将会在那个网络中运行。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker network inspect app</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>将已有容器连接到Docker网络</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker network connect app db2</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>可以通过<code>docker network disconnect</code> 命令断开一个容器与指定网络的连接</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker network disconnect app db2</span></span><br></pre></td></tr></table></figure>

<p><strong>通过Docker链接连接容器</strong></p>
<blockquote>
<p>启动一个Redis容器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run -d --name redis micheal/redis</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：这里没有公开容器的任何端口。一会就能看到这么做的原因。</p>
</blockquote>
<blockquote>
<p>链接Redis容器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo docker run -p 4567 --name webapp --<span class="built_in">link</span> redis:db -t -i -v <span class="variable">$PWD</span>/webapp_redis:/opt/webapp micheal/sinatra /bin/bash</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>这个命令做了不少事情，我们逐一解释。首先，我们使用<code>-p</code>标志公开4567端口，这样就能从外面访问web应用程序。</p>
<p>我们还使用<code>--name</code>标志给容器命名为webapp，并且使用了<code>-v</code>标志把web应用程序目录作为卷挂载到了容器里。</p>
<p>然而，这次我们使用了一个新标志<code>--link</code>。<code>--link</code>标志创建了两个容器间的客户-服务链接。这个标志需要两个参数：一个是要链接的容器的名字，另一个是链接的别名。这个例子中我们创建了客户联系，webapp容器是客户，redis容器是“服务”，并且为这个服务增加了db作为别名。这个别名让我们可以一致地访问容器公开信息，而无须关注底层容器的名字。链接让服务容器有能力与客户容器通信，并且能分享一些连接细节，这些细节有助于在应用程序中配置并使用这个链接。</p>
</blockquote>
<blockquote>
<p>连接也能得到一些安全上的好处。注意，启动 Redis 容器时，并没有使用<code>-p</code>标志公开Redis的端口。因为不需要这么做。通过把容器链接在一起，可以让客户直接访问任意服务容器的公开端口（即客户webapp容器可以连接到服务redis容器的6379端口）。更妙的是，只有使用<code>--link</code>标志链接到这个容器的容器才能连接到这个端口。容器的端口不需要对本地宿主机公开，现在我们已经拥有一个非常安全的模型。通过这个安全模型，就可以限制容器化应用程序被攻击面，减少应用暴露的网络。</p>
</blockquote>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>FFMPEG+SDL视频播放器</title>
    <url>/2019/05/18/FFmpeg/FFmpeg+SDL%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E5%99%A8/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://github.com/HatsuneMikuV/FFmpeg_Leixiaohua">GitHub</a></p>
<p><a href="https://blog.csdn.net/leixiaohua1020/column/info/ffmpeg-devel/7">FFmpeg</a></p>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/12677129">ffmpeg 源代码简单分析</a></p>
</blockquote>
<h1 id="100行代码实现最简单的基于FFMPEG-SDL的视频播放器"><a href="#100行代码实现最简单的基于FFMPEG-SDL的视频播放器" class="headerlink" title="100行代码实现最简单的基于FFMPEG+SDL的视频播放器"></a>100行代码实现最简单的基于FFMPEG+SDL的视频播放器</h1><blockquote>
<p><a href="https://github.com/leixiaohua1020/simplest_ffmpeg_player">simplest_ffmpeg_player</a></p>
</blockquote>
<p>该播放器虽然简单，但是几乎包含了使用FFMPEG播放一个视频所有必备的API，并且使用SDL显示解码出来的视频。</p>
<span id="more"></span>

<p>并且支持流媒体等多种视频输入，处于简单考虑，没有音频部分，同时视频播放采用直接延时40ms的方式</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E6%92%AD%E6%94%BE%E5%99%A8%E8%A7%A3%E7%A0%81%E7%9A%84%E6%B5%81%E7%A8%8B%E7%94%A8%E5%9B%BE.png" alt="播放器解码的流程用图"></p>
<p><img data-src="/images/imageFFmpeg/Thor/SDL%E6%98%BE%E7%A4%BAYUV%E5%9B%BE%E5%83%8F%E7%9A%84%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="SDL1.x显示YUV图像的流程图"></p>
<p><img data-src="/images/imageFFmpeg/Thor/SDL2.0%E6%98%BE%E7%A4%BAYUV%E7%9A%84%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="SDL2.0显示YUV的流程图"></p>
<p>对比SDL1.2的流程图，发现变化还是很大的。几乎所有的API都发生了变化。但是函数和变量有一定的对应关系：</p>
<p>SDL_SetVideoMode()————SDL_CreateWindow()</p>
<p>SDL_Surface————SDL_Window</p>
<p>SDL_CreateYUVOverlay()————SDL_CreateTexture()</p>
<p>SDL_Overlay————SDL_Texture</p>
<p>简单解释各个变量的作用：</p>
<ul>
<li>SDL_Window就是使用SDL的时候弹出的那个窗口。在SDL1.x版本中，只可以创建一个一个窗口。在SDL2.0版本中，可以创建多个窗口。</li>
<li>SDL_Texture用于显示YUV数据。一个SDL_Texture对应一帧YUV数据。</li>
<li>SDL_Renderer用于渲染SDL_Texture至SDL_Window。</li>
<li>SDL_Rect用于确定SDL_Texture显示的位置。注意：一个SDL_Texture可以指定多个不同的</li>
<li>SDL_Rect，这样就可以在SDL_Window不同位置显示相同的内容（使用SDL_RenderCopy()函数）。</li>
</ul>
<p>它们的关系如下图所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%85%B3%E7%B3%BB%E5%9B%BE.png"></p>
<p>下图举了个例子，指定了4个SDL_Rect，可以实现4分屏的显示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/SDL_Rect%E5%9B%9B%E5%88%86%E5%B1%8F%E6%98%BE%E7%A4%BA.png" alt="SDL_Rect四分屏显示"></p>
<h2 id="simplest-ffmpeg-player（标准版）代码"><a href="#simplest-ffmpeg-player（标准版）代码" class="headerlink" title="simplest_ffmpeg_player（标准版）代码"></a>simplest_ffmpeg_player（标准版）代码</h2><details><summary>最基础的版本，学习的开始。</summary>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 最简单的基于FFmpeg的视频播放器 2</span></span><br><span class="line"><span class="comment"> * Simplest FFmpeg Player 2</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 本程序实现了视频文件的解码和显示(支持HEVC，H.264，MPEG2等)。</span></span><br><span class="line"><span class="comment"> * 是最简单的FFmpeg视频解码方面的教程。</span></span><br><span class="line"><span class="comment"> * 通过学习本例子可以了解FFmpeg的解码流程。</span></span><br><span class="line"><span class="comment"> * This software is a simplest video player based on FFmpeg.</span></span><br><span class="line"><span class="comment"> * Suitable for beginner of FFmpeg.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __STDC_CONSTANT_MACROS</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _WIN32</span></span><br><span class="line"><span class="comment">//Windows</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;libavcodec/avcodec.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;libavformat/avformat.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;libswscale/swscale.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;libavutil/imgutils.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;SDL2/SDL.h&quot;</span></span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="comment">//Linux...</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    </span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libavcodec/avcodec.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libavformat/avformat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libswscale/swscale.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;SDL2/SDL.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libavutil/imgutils.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//Output YUV420P data as a file </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OUTPUT_YUV420P 0</span></span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">	AVFormatContext	*pFormatCtx; 		<span class="comment">// 音视频格式化上下文</span></span><br><span class="line">	<span class="type">int</span>				i, videoindex;</span><br><span class="line">	AVCodecContext	*pCodecCtx;			<span class="comment">// 音视频编解码器上下文</span></span><br><span class="line">	AVCodec			*pCodec;			<span class="comment">// 音视频编解码器</span></span><br><span class="line">	AVFrame			*pFrame, *pFrameYUV;	<span class="comment">// 音视频数据帧</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">char</span> 	*out_buffer;</span><br><span class="line">	AVPacket 		*packet;			<span class="comment">// 音视频数据包</span></span><br><span class="line">	<span class="type">int</span> 			y_size;</span><br><span class="line">	<span class="type">int</span> 			ret, got_picture;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">SwsContext</span> *<span class="title">img_convert_ctx</span>;</span> <span class="comment">// 视频图像转换上下文</span></span><br><span class="line"> </span><br><span class="line">	<span class="type">char</span> filepath[]=<span class="string">&quot;bigbuckbunny_480x272.h265&quot;</span>;</span><br><span class="line">	<span class="comment">//SDL---------------------------</span></span><br><span class="line">	<span class="type">int</span> screen_w=<span class="number">0</span>, screen_h=<span class="number">0</span>;</span><br><span class="line">	SDL_Window 		*screen; </span><br><span class="line">	SDL_Renderer	*sdlRenderer; 		<span class="comment">// SDL渲染器</span></span><br><span class="line">	SDL_Texture		*sdlTexture;		<span class="comment">// SDL纹理</span></span><br><span class="line">	SDL_Rect 		sdlRect;			<span class="comment">// 确定SDL_Texture显示的位置</span></span><br><span class="line"> </span><br><span class="line">	FILE *fp_yuv;</span><br><span class="line"> </span><br><span class="line">	av_register_all();					<span class="comment">// 注册所有的编解码器</span></span><br><span class="line">	avformat_network_init();</span><br><span class="line">	pFormatCtx = avformat_alloc_context();</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">if</span>(avformat_open_input(&amp;pFormatCtx, filepath, <span class="literal">NULL</span>, <span class="literal">NULL</span>) != <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Couldn&#x27;t open input stream.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(avformat_find_stream_info(pFormatCtx,<span class="literal">NULL</span>) &lt; <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Couldn&#x27;t find stream information.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	videoindex = <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;pFormatCtx-&gt;nb_streams; i++) </span><br><span class="line">		<span class="keyword">if</span>(pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type == AVMEDIA_TYPE_VIDEO)&#123;</span><br><span class="line">			videoindex = i;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">if</span>(videoindex == <span class="number">-1</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Didn&#x27;t find a video stream.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	pCodecCtx = pFormatCtx-&gt;streams[videoindex]-&gt;codec;</span><br><span class="line">	pCodec = avcodec_find_decoder(pCodecCtx-&gt;codec_id);</span><br><span class="line">	<span class="keyword">if</span>(pCodec == <span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Codec not found.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(avcodec_open2(pCodecCtx, pCodec,<span class="literal">NULL</span>) &lt; <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Could not open codec.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	pFrame = av_frame_alloc();</span><br><span class="line">	pFrameYUV = av_frame_alloc();</span><br><span class="line">	out_buffer = (<span class="type">unsigned</span> <span class="type">char</span> *)av_malloc(av_image_get_buffer_size(AV_PIX_FMT_YUV420P,  pCodecCtx-&gt;width, pCodecCtx-&gt;height, <span class="number">1</span>));</span><br><span class="line">	av_image_fill_arrays(pFrameYUV-&gt;data, pFrameYUV-&gt;linesize,out_buffer,</span><br><span class="line">		AV_PIX_FMT_YUV420P, pCodecCtx-&gt;width, pCodecCtx-&gt;height, <span class="number">1</span>);</span><br><span class="line">	</span><br><span class="line">	packet = (AVPacket *)av_malloc(<span class="keyword">sizeof</span>(AVPacket));</span><br><span class="line">	<span class="comment">//Output Info-----------------------------</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;--------------- File Information ----------------\n&quot;</span>);</span><br><span class="line">	av_dump_format(pFormatCtx, <span class="number">0</span>, filepath, <span class="number">0</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;-------------------------------------------------\n&quot;</span>);</span><br><span class="line">	img_convert_ctx = sws_getContext(pCodecCtx-&gt;width, pCodecCtx-&gt;height, pCodecCtx-&gt;pix_fmt, </span><br><span class="line">		pCodecCtx-&gt;width, pCodecCtx-&gt;height, AV_PIX_FMT_YUV420P, SWS_BICUBIC, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>); </span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">if</span> OUTPUT_YUV420P </span></span><br><span class="line">    fp_yuv=fopen(<span class="string">&quot;output.yuv&quot;</span>, <span class="string">&quot;wb+&quot;</span>);  </span><br><span class="line"><span class="meta">#<span class="keyword">endif</span>  </span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(SDL_Init(SDL_INIT_VIDEO | SDL_INIT_AUDIO | SDL_INIT_TIMER)) &#123;  </span><br><span class="line">		<span class="built_in">printf</span>( <span class="string">&quot;Could not initialize SDL - %s\n&quot;</span>, SDL_GetError()); </span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125; </span><br><span class="line"> </span><br><span class="line">	screen_w = pCodecCtx-&gt;width;</span><br><span class="line">	screen_h = pCodecCtx-&gt;height;</span><br><span class="line">	<span class="comment">//SDL 2.0 Support for multiple windows</span></span><br><span class="line">	screen = SDL_CreateWindow(<span class="string">&quot;Simplest ffmpeg player&#x27;s Window&quot;</span>, SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED,</span><br><span class="line">		screen_w, screen_h,</span><br><span class="line">		SDL_WINDOW_OPENGL);</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">if</span>(!screen) &#123;  </span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;SDL: could not create window - exiting:%s\n&quot;</span>,SDL_GetError()); </span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	sdlRenderer = SDL_CreateRenderer(screen, <span class="number">-1</span>, <span class="number">0</span>);  </span><br><span class="line">	<span class="comment">//IYUV: Y + U + V  (3 planes)</span></span><br><span class="line">	<span class="comment">//YV12: Y + V + U  (3 planes)</span></span><br><span class="line">	sdlTexture = SDL_CreateTexture(sdlRenderer, SDL_PIXELFORMAT_IYUV, SDL_TEXTUREACCESS_STREAMING, pCodecCtx-&gt;width, pCodecCtx-&gt;height);  </span><br><span class="line"> </span><br><span class="line">	sdlRect.x = <span class="number">0</span>;</span><br><span class="line">	sdlRect.y = <span class="number">0</span>;</span><br><span class="line">	sdlRect.w = screen_w;</span><br><span class="line">	sdlRect.h = screen_h;</span><br><span class="line"> </span><br><span class="line">	<span class="comment">//SDL End----------------------</span></span><br><span class="line">	<span class="keyword">while</span>(av_read_frame(pFormatCtx, packet)&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">		<span class="keyword">if</span>(packet-&gt;stream_index == videoindex)&#123;</span><br><span class="line">			ret = avcodec_decode_video2(pCodecCtx, pFrame, &amp;got_picture, packet);</span><br><span class="line">			<span class="keyword">if</span>(ret &lt; <span class="number">0</span>)&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;Decode Error.\n&quot;</span>);</span><br><span class="line">				<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(got_picture)&#123;</span><br><span class="line">				sws_scale(img_convert_ctx, (<span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span>* <span class="type">const</span>*)pFrame-&gt;data, pFrame-&gt;linesize, <span class="number">0</span>, pCodecCtx-&gt;height, </span><br><span class="line">					pFrameYUV-&gt;data, pFrameYUV-&gt;linesize);</span><br><span class="line">				</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> OUTPUT_YUV420P</span></span><br><span class="line">				y_size = pCodecCtx-&gt;width*pCodecCtx-&gt;height;  </span><br><span class="line">				fwrite(pFrameYUV-&gt;data[<span class="number">0</span>], <span class="number">1</span>, y_size, fp_yuv);    <span class="comment">//Y </span></span><br><span class="line">				fwrite(pFrameYUV-&gt;data[<span class="number">1</span>], <span class="number">1</span>, y_size/<span class="number">4</span>, fp_yuv);  <span class="comment">//U</span></span><br><span class="line">				fwrite(pFrameYUV-&gt;data[<span class="number">2</span>], <span class="number">1</span>, y_size/<span class="number">4</span>, fp_yuv);  <span class="comment">//V</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">				<span class="comment">//SDL---------------------------</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> 0</span></span><br><span class="line">				SDL_UpdateTexture(sdlTexture, <span class="literal">NULL</span>, pFrameYUV-&gt;data[<span class="number">0</span>], pFrameYUV-&gt;linesize[<span class="number">0</span>]);  </span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">				SDL_UpdateYUVTexture(sdlTexture, &amp;sdlRect,</span><br><span class="line">				pFrameYUV-&gt;data[<span class="number">0</span>], pFrameYUV-&gt;linesize[<span class="number">0</span>],</span><br><span class="line">				pFrameYUV-&gt;data[<span class="number">1</span>], pFrameYUV-&gt;linesize[<span class="number">1</span>],</span><br><span class="line">				pFrameYUV-&gt;data[<span class="number">2</span>], pFrameYUV-&gt;linesize[<span class="number">2</span>]);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span>	</span></span><br><span class="line">				</span><br><span class="line">				SDL_RenderClear(sdlRenderer);  </span><br><span class="line">				SDL_RenderCopy(sdlRenderer, sdlTexture, <span class="literal">NULL</span>, &amp;sdlRect);  </span><br><span class="line">				SDL_RenderPresent(sdlRenderer);  </span><br><span class="line">				<span class="comment">//SDL End-----------------------</span></span><br><span class="line">				<span class="comment">//Delay 40ms</span></span><br><span class="line">				SDL_Delay(<span class="number">40</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		av_free_packet(packet);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//flush decoder</span></span><br><span class="line">	<span class="comment">//FIX: Flush Frames remained in Codec</span></span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">		ret = avcodec_decode_video2(pCodecCtx, pFrame, &amp;got_picture, packet);</span><br><span class="line">		<span class="keyword">if</span> (ret &lt; <span class="number">0</span>)</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">if</span> (!got_picture)</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		sws_scale(img_convert_ctx, (<span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span>* <span class="type">const</span>*)pFrame-&gt;data, pFrame-&gt;linesize, <span class="number">0</span>, pCodecCtx-&gt;height, </span><br><span class="line">			pFrameYUV-&gt;data, pFrameYUV-&gt;linesize);</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> OUTPUT_YUV420P</span></span><br><span class="line">		<span class="type">int</span> y_size = pCodecCtx-&gt;width*pCodecCtx-&gt;height;  </span><br><span class="line">		fwrite(pFrameYUV-&gt;data[<span class="number">0</span>], <span class="number">1</span>, y_size, fp_yuv);    <span class="comment">//Y </span></span><br><span class="line">		fwrite(pFrameYUV-&gt;data[<span class="number">1</span>], <span class="number">1</span>, y_size/<span class="number">4</span>, fp_yuv);  <span class="comment">//U</span></span><br><span class="line">		fwrite(pFrameYUV-&gt;data[<span class="number">2</span>], <span class="number">1</span>, y_size/<span class="number">4</span>, fp_yuv);  <span class="comment">//V</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">		<span class="comment">//SDL---------------------------</span></span><br><span class="line">		SDL_UpdateTexture(sdlTexture, &amp;sdlRect, pFrameYUV-&gt;data[<span class="number">0</span>], pFrameYUV-&gt;linesize[<span class="number">0</span>]);  </span><br><span class="line">		SDL_RenderClear(sdlRenderer);  </span><br><span class="line">		SDL_RenderCopy(sdlRenderer, sdlTexture, <span class="literal">NULL</span>, &amp;sdlRect);  </span><br><span class="line">		SDL_RenderPresent(sdlRenderer);  </span><br><span class="line">		<span class="comment">//SDL End-----------------------</span></span><br><span class="line">		<span class="comment">//Delay 40ms</span></span><br><span class="line">		SDL_Delay(<span class="number">40</span>);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	sws_freeContext(img_convert_ctx);</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">if</span> OUTPUT_YUV420P </span></span><br><span class="line">    fclose(fp_yuv);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> </span></span><br><span class="line"> </span><br><span class="line">	SDL_Quit();</span><br><span class="line"> </span><br><span class="line">	av_frame_free(&amp;pFrameYUV);</span><br><span class="line">	av_frame_free(&amp;pFrame);</span><br><span class="line">	avcodec_close(pCodecCtx);</span><br><span class="line">	avformat_close_input(&amp;pFormatCtx);</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

<h2 id="simplest-ffmpeg-player-su（SU版）代码"><a href="#simplest-ffmpeg-player-su（SU版）代码" class="headerlink" title="simplest_ffmpeg_player_su（SU版）代码"></a>simplest_ffmpeg_player_su（SU版）代码</h2><p>标准版的基础之上引入了 SDL 的 Event。</p>
<p>效果如下：</p>
<ul>
<li>SDL弹出的窗口可以移动了</li>
<li>画面显示是严格的40ms一帧</li>
</ul>
<details><summary>代码：</summary>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 最简单的基于FFmpeg的视频播放器2(SDL升级版)</span></span><br><span class="line"><span class="comment"> * Simplest FFmpeg Player 2(SDL Update)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 本程序实现了视频文件的解码和显示(支持HEVC，H.264，MPEG2等)。</span></span><br><span class="line"><span class="comment"> * 是最简单的FFmpeg视频解码方面的教程。</span></span><br><span class="line"><span class="comment"> * 通过学习本例子可以了解FFmpeg的解码流程。</span></span><br><span class="line"><span class="comment"> * 本版本中使用SDL消息机制刷新视频画面。</span></span><br><span class="line"><span class="comment"> * This software is a simplest video player based on FFmpeg.</span></span><br><span class="line"><span class="comment"> * Suitable for beginner of FFmpeg.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 备注:</span></span><br><span class="line"><span class="comment"> * 标准版在播放视频的时候，画面显示使用延时40ms的方式。这么做有两个后果：</span></span><br><span class="line"><span class="comment"> * （1）SDL弹出的窗口无法移动，一直显示是忙碌状态</span></span><br><span class="line"><span class="comment"> * （2）画面显示并不是严格的40ms一帧，因为还没有考虑解码的时间。</span></span><br><span class="line"><span class="comment"> * SU（SDL Update）版在视频解码的过程中，不再使用延时40ms的方式，而是创建了</span></span><br><span class="line"><span class="comment"> * 一个线程，每隔40ms发送一个自定义的消息，告知主函数进行解码显示。这样做之后：</span></span><br><span class="line"><span class="comment"> * （1）SDL弹出的窗口可以移动了</span></span><br><span class="line"><span class="comment"> * （2）画面显示是严格的40ms一帧</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __STDC_CONSTANT_MACROS</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _WIN32</span></span><br><span class="line"><span class="comment">//Windows</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;libavcodec/avcodec.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;libavformat/avformat.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;libswscale/swscale.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;libavutil/imgutils.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;SDL2/SDL.h&quot;</span></span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="comment">//Linux...</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libavcodec/avcodec.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libavformat/avformat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libswscale/swscale.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libavutil/imgutils.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;SDL2/SDL.h&gt;</span>   </span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//Refresh Event</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SFM_REFRESH_EVENT  (SDL_USEREVENT + 1)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SFM_BREAK_EVENT  (SDL_USEREVENT + 2)</span></span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> thread_exit = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> thread_pause = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> <span class="title function_">sfp_refresh_thread</span><span class="params">(<span class="type">void</span> *opaque)</span>&#123;</span><br><span class="line">	thread_exit = <span class="number">0</span>;</span><br><span class="line">	thread_pause = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">while</span> (!thread_exit) &#123;</span><br><span class="line">		<span class="keyword">if</span>(!thread_pause)&#123;</span><br><span class="line">			SDL_Event event;</span><br><span class="line">			event.type = SFM_REFRESH_EVENT;</span><br><span class="line">			SDL_PushEvent(&amp;event);</span><br><span class="line">		&#125;</span><br><span class="line">		SDL_Delay(<span class="number">40</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	thread_exit = <span class="number">0</span>;</span><br><span class="line">	thread_pause = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">//Break</span></span><br><span class="line">	SDL_Event event;</span><br><span class="line">	event.type = SFM_BREAK_EVENT;</span><br><span class="line">	SDL_PushEvent(&amp;event);</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">	AVFormatContext	*pFormatCtx;</span><br><span class="line">	<span class="type">int</span>				i, videoindex;</span><br><span class="line">	AVCodecContext	*pCodecCtx;			<span class="comment">// 音视频编解码器上下文</span></span><br><span class="line">	AVCodec			*pCodec;</span><br><span class="line">	AVFrame			*pFrame, *pFrameYUV;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">char</span> 	*out_buffer;</span><br><span class="line">	AVPacket 		*packet;</span><br><span class="line">	<span class="type">int</span> 			ret, got_picture;</span><br><span class="line"> </span><br><span class="line">	<span class="comment">//------------SDL----------------</span></span><br><span class="line">	<span class="type">int</span> screen_w, screen_h;</span><br><span class="line">	SDL_Window 		*screen; </span><br><span class="line">	SDL_Renderer	*sdlRenderer;</span><br><span class="line">	SDL_Texture		*sdlTexture;</span><br><span class="line">	SDL_Rect 		sdlRect;</span><br><span class="line">	SDL_Thread 		*video_tid;</span><br><span class="line">	SDL_Event 		event;</span><br><span class="line"> </span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">SwsContext</span> *<span class="title">img_convert_ctx</span>;</span></span><br><span class="line"> </span><br><span class="line">	<span class="comment">//char filepath[]=&quot;bigbuckbunny_480x272.h265&quot;;</span></span><br><span class="line">	<span class="type">char</span> filepath[]=<span class="string">&quot;Titanic.ts&quot;</span>;</span><br><span class="line"> </span><br><span class="line">	av_register_all();	<span class="comment">// 注册所有的编解码器</span></span><br><span class="line">	avformat_network_init();</span><br><span class="line">	pFormatCtx = avformat_alloc_context(); 	<span class="comment">// 分配内存并设置默认值</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 该函数用于打开多媒体数据并且获得一些相关的信息,AVInputFormat的read_header()完成了视音频流对应的AVStream的创建</span></span><br><span class="line">	<span class="keyword">if</span>(avformat_open_input(&amp;pFormatCtx, filepath, <span class="literal">NULL</span>, <span class="literal">NULL</span>) != <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Couldn&#x27;t open input stream.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">// 该函数可以读取一部分视音频数据并且获得一些相关的信息,该函数主要用于给每个媒体流（音频/视频）的AVStream结构体赋值</span></span><br><span class="line">	<span class="keyword">if</span>(avformat_find_stream_info(pFormatCtx, <span class="literal">NULL</span>) &lt; <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Couldn&#x27;t find stream information.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	videoindex = <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;pFormatCtx-&gt;nb_streams; i++) </span><br><span class="line">		<span class="keyword">if</span>(pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type == AVMEDIA_TYPE_VIDEO)&#123;</span><br><span class="line">			videoindex = i;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">if</span>(videoindex == <span class="number">-1</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Didn&#x27;t find a video stream.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	pCodecCtx = pFormatCtx-&gt;streams[videoindex]-&gt;codec; <span class="comment">// 找到视频流编解码器</span></span><br><span class="line">	pCodec = avcodec_find_decoder(pCodecCtx-&gt;codec_id); </span><br><span class="line">	<span class="keyword">if</span>(pCodec == <span class="literal">NULL</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Codec not found.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">// 该函数用于初始化一个视音频编解码器的AVCodecContext</span></span><br><span class="line">    <span class="comment">//（1）为各种结构体分配内存（通过各种av_malloc()实现）。</span></span><br><span class="line">	<span class="comment">//（2）将输入的AVDictionary形式的选项设置到AVCodecContext。</span></span><br><span class="line">	<span class="comment">//（3）其他一些零零碎碎的检查，比如说检查编解码器是否处于“实验”阶段。</span></span><br><span class="line">	<span class="comment">//（4）如果是编码器，检查输入参数是否符合编码器的要求</span></span><br><span class="line">	<span class="comment">//（5）调用AVCodec的init()初始化具体的解码器。</span></span><br><span class="line">	<span class="keyword">if</span>(avcodec_open2(pCodecCtx, pCodec,<span class="literal">NULL</span>) &lt; <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Could not open codec.\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	pFrame = av_frame_alloc();</span><br><span class="line">	pFrameYUV = av_frame_alloc();</span><br><span class="line"> </span><br><span class="line">	out_buffer = (<span class="type">unsigned</span> <span class="type">char</span> *)av_malloc(av_image_get_buffer_size(AV_PIX_FMT_YUV420P, pCodecCtx-&gt;width, pCodecCtx-&gt;height, <span class="number">1</span>));</span><br><span class="line">	av_image_fill_arrays(pFrameYUV-&gt;data, pFrameYUV-&gt;linesize,</span><br><span class="line">                         out_buffer,AV_PIX_FMT_YUV420P, pCodecCtx-&gt;width, </span><br><span class="line">                         pCodecCtx-&gt;height, <span class="number">1</span>);</span><br><span class="line"> </span><br><span class="line">	<span class="comment">//Output Info-----------------------------</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;---------------- File Information ---------------\n&quot;</span>);</span><br><span class="line">	av_dump_format(pFormatCtx, <span class="number">0</span>, filepath, <span class="number">0</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;-------------------------------------------------\n&quot;</span>);</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// 初始化一个SwsContext</span></span><br><span class="line">    <span class="comment">// 参数说明：</span></span><br><span class="line">    <span class="comment">// 源图像的宽, 源图像的高, 源图像的像素格式, </span></span><br><span class="line">    <span class="comment">// 目标图像的宽, 目标图像的高, 目标图像的像素格式, 设定图像拉伸使用的算法</span></span><br><span class="line">	img_convert_ctx = sws_getContext(pCodecCtx-&gt;width, pCodecCtx-&gt;height, </span><br><span class="line">                                     pCodecCtx-&gt;pix_fmt, pCodecCtx-&gt;width, </span><br><span class="line">                                     pCodecCtx-&gt;height, AV_PIX_FMT_YUV420P, </span><br><span class="line">                                     SWS_BICUBIC, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>); </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(SDL_Init(SDL_INIT_VIDEO | SDL_INIT_AUDIO | SDL_INIT_TIMER)) &#123;  </span><br><span class="line">		<span class="built_in">printf</span>( <span class="string">&quot;Could not initialize SDL - %s\n&quot;</span>, SDL_GetError()); </span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="comment">//SDL 2.0 Support for multiple windows</span></span><br><span class="line">	screen_w = pCodecCtx-&gt;width;</span><br><span class="line">	screen_h = pCodecCtx-&gt;height;</span><br><span class="line">	screen = SDL_CreateWindow(<span class="string">&quot;Simplest ffmpeg player&#x27;s Window&quot;</span>, </span><br><span class="line">                              SDL_WINDOWPOS_UNDEFINED,SDL_WINDOWPOS_UNDEFINED,</span><br><span class="line">                              screen_w, screen_h, SDL_WINDOW_OPENGL);</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">if</span>(!screen) &#123;  </span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;SDL: could not create window - exiting:%s\n&quot;</span>,SDL_GetError()); </span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	sdlRenderer = SDL_CreateRenderer(screen, <span class="number">-1</span>, <span class="number">0</span>);  </span><br><span class="line">	<span class="comment">//IYUV: Y + U + V  (3 planes)</span></span><br><span class="line">	<span class="comment">//YV12: Y + V + U  (3 planes)</span></span><br><span class="line">	sdlTexture = SDL_CreateTexture(sdlRenderer, SDL_PIXELFORMAT_IYUV, </span><br><span class="line">                                   SDL_TEXTUREACCESS_STREAMING, </span><br><span class="line">                                   pCodecCtx-&gt;width, pCodecCtx-&gt;height);  </span><br><span class="line"> </span><br><span class="line">	sdlRect.x = <span class="number">0</span>;</span><br><span class="line">	sdlRect.y = <span class="number">0</span>;</span><br><span class="line">	sdlRect.w = screen_w;</span><br><span class="line">	sdlRect.h = screen_h;</span><br><span class="line"> </span><br><span class="line">	packet = (AVPacket *)av_malloc(<span class="keyword">sizeof</span>(AVPacket));</span><br><span class="line"> </span><br><span class="line">	video_tid = SDL_CreateThread(sfp_refresh_thread, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="comment">//------------SDL End------------</span></span><br><span class="line">	<span class="comment">//Event Loop	</span></span><br><span class="line">	<span class="keyword">for</span> (;;) &#123;</span><br><span class="line">		<span class="comment">//Wait</span></span><br><span class="line">		SDL_WaitEvent(&amp;event);</span><br><span class="line">		<span class="keyword">if</span>(event.type == SFM_REFRESH_EVENT)&#123;</span><br><span class="line">			<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="comment">// av_read_frame()的作用是读取码流中的音频若干帧或者视频一帧</span></span><br><span class="line">                <span class="comment">// 例如，解码视频的时候，每解码一个视频帧，需要先调用 av_read_frame()获得一帧视频的压缩数据，然后才能对该数据进行解码（例如H.264中一帧压缩数据通常对应一个NAL）</span></span><br><span class="line">                <span class="comment">// 参数说明：输入的AVFormatContext, 输出的AVPacket</span></span><br><span class="line">				<span class="keyword">if</span>(av_read_frame(pFormatCtx, packet)&lt;<span class="number">0</span>)</span><br><span class="line">					thread_exit = <span class="number">1</span>;</span><br><span class="line"> </span><br><span class="line">				<span class="keyword">if</span>(packet-&gt;stream_index == videoindex)</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">            <span class="comment">// 作用是解码一帧视频数据,输入一个压缩编码的结构体AVPacket，输出一个解码后的结构体AVFrame</span></span><br><span class="line">            <span class="comment">// avcodec_decode_video2()主要做了以下几个方面的工作：</span></span><br><span class="line">            <span class="comment">//（1）对输入的字段进行了一系列的检查工作：例如宽高是否正确，输入是否为视频等等。</span></span><br><span class="line">			<span class="comment">//（2）通过ret = avctx-&gt;codec-&gt;decode(avctx, picture, got_picture_ptr,&amp;tmp)这句代码，调用了相应AVCodec的decode()函数，完成了解码操作。</span></span><br><span class="line">			<span class="comment">//（3）对得到的AVFrame的一些字段进行了赋值，例如宽高、像素格式等等。</span></span><br><span class="line">			ret = avcodec_decode_video2(pCodecCtx, pFrame, &amp;got_picture, packet);</span><br><span class="line">			<span class="keyword">if</span>(ret &lt; <span class="number">0</span>)&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;Decode Error.\n&quot;</span>);</span><br><span class="line">				<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(got_picture)&#123;</span><br><span class="line">                <span class="comment">// sws_scale()是用于转换像素的函数</span></span><br><span class="line">                <span class="comment">// 参数说明：</span></span><br><span class="line">                <span class="comment">// 1）转换格式的上下文。也就是 sws_getContext 函数返回的结果。</span></span><br><span class="line">                <span class="comment">// 2）输入图像的每个颜色通道的数据指针</span></span><br><span class="line">                <span class="comment">// 3）输入图像的每个颜色通道的跨度</span></span><br><span class="line">                <span class="comment">// 4）参数int srcSliceY, int srcSliceH,定义在输入图像上处理区域，srcSliceY是起始位置，srcSliceH是处理多少行。</span></span><br><span class="line">                <span class="comment">// 如果srcSliceY=0，srcSliceH=height，表示一次性处理完整个图像。					// 这种设置是为了多线程并行，例如可以创建两个线程，第一个线程处理 [0, h/2-1]行，第二个线程处理 [h/2, h-1]行。并行处理加快速度。</span></span><br><span class="line">                <span class="comment">// 5）参数uint8_t *const dst[], const int dstStride[]定义输出图像信息（输出的每个颜色通道数据指针，每个颜色通道行字节数）</span></span><br><span class="line">				sws_scale(img_convert_ctx, </span><br><span class="line">                          (<span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span>* <span class="type">const</span>*)pFrame-&gt;data, </span><br><span class="line">                          pFrame-&gt;linesize, <span class="number">0</span>, pCodecCtx-&gt;height, </span><br><span class="line">                          pFrameYUV-&gt;data, pFrameYUV-&gt;linesize);</span><br><span class="line">				<span class="comment">//SDL---------------------------</span></span><br><span class="line">				SDL_UpdateTexture( sdlTexture, <span class="literal">NULL</span>, pFrameYUV-&gt;data[<span class="number">0</span>], pFrameYUV-&gt;linesize[<span class="number">0</span>] );  </span><br><span class="line">				SDL_RenderClear( sdlRenderer );  </span><br><span class="line">				<span class="comment">//SDL_RenderCopy( sdlRenderer, sdlTexture, &amp;sdlRect, &amp;sdlRect );  </span></span><br><span class="line">				SDL_RenderCopy( sdlRenderer, sdlTexture, <span class="literal">NULL</span>, <span class="literal">NULL</span>);  </span><br><span class="line">				SDL_RenderPresent( sdlRenderer );  </span><br><span class="line">				<span class="comment">//SDL End-----------------------</span></span><br><span class="line">			&#125;</span><br><span class="line">			av_free_packet(packet);</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(event.type == SDL_KEYDOWN)&#123;</span><br><span class="line">			<span class="comment">//Pause</span></span><br><span class="line">			<span class="keyword">if</span>(event.key.keysym.sym == SDLK_SPACE)</span><br><span class="line">				thread_pause =! thread_pause;</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(event.type == SDL_QUIT)&#123;</span><br><span class="line">			thread_exit = <span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(event.type == SFM_BREAK_EVENT)&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	sws_freeContext(img_convert_ctx);</span><br><span class="line"> </span><br><span class="line">	SDL_Quit();</span><br><span class="line">	<span class="comment">//--------------</span></span><br><span class="line">	av_frame_free(&amp;pFrameYUV);</span><br><span class="line">	av_frame_free(&amp;pFrame);</span><br><span class="line">	avcodec_close(pCodecCtx);</span><br><span class="line">	avformat_close_input(&amp;pFormatCtx);</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

<h3 id="av-read-packet"><a href="#av-read-packet" class="headerlink" title="av_read_packet()"></a>av_read_packet()</h3><p>通过 <code>av_read_packet()</code>，读取一个包，需要说明的是此函数必须是包含整数帧的，不存在半帧的情况。</p>
<p>以 ts 流为例，是读取一个完整的 PES 包（一个完整 pes 包包含若干视频或音频 es 包），读取完毕后，通过 <code>av_parser_parse2()</code> 分析出视频一帧（或音频若干帧），返回，下次进入循环的时候，如果上次的数据没有完全取完，则 <code>st = s-&gt;cur_st</code> ; 不会是NULL，即再此进入 <code>av_parser_parse2()</code> 流程，而不是下面的 <code>av_read_packet（）</code> 流程.</p>
<p>这样就保证了，如果读取一次包含了 N 帧视频数据（以视频为例），则调用 <code>av_read_frame（）</code> N 次都不会去读数据，而是返回第一次读取的数据，直到全部解析完毕。</p>
<p>函数调用结构图：</p>
<p><img data-src="/images/imageFFmpeg/Thor/av_read_packet.png" alt="av_read_packet"></p>
<h2 id="FFmpeg-源码分析"><a href="#FFmpeg-源码分析" class="headerlink" title="FFmpeg 源码分析"></a>FFmpeg 源码分析</h2><h3 id="av-register-all"><a href="#av-register-all" class="headerlink" title="av_register_all()"></a>av_register_all()</h3><ul>
<li><code>av_register_all()</code> - ffmpeg注册复用器，编码器</li>
</ul>
<p>该函数在所有基于ffmpeg的应用程序中几乎都是第一个被调用的。只有调用了该函数，才能使用复用器，编码器等。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 可见解复用器注册都是用</span></span><br><span class="line">REGISTER_DEMUXER  (X,x)</span><br><span class="line"><span class="comment">// 例如：</span></span><br><span class="line">REGISTER_DEMUXER  (AAC, aac)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可见复用器注册都是用</span></span><br><span class="line">REGISTER_MUXER    (X,x))</span><br><span class="line"><span class="comment">// 例如：</span></span><br><span class="line">REGISTER_MUXER    (ADTS, adts)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 既有解复用器又有复用器的话，可以用</span></span><br><span class="line">REGISTER_MUXDEMUX (X,x));</span><br><span class="line"><span class="comment">// 例如：</span></span><br><span class="line">REGISTER_MUXDEMUX (AC3, ac3);</span><br></pre></td></tr></table></figure>

<p>看一下宏的定义，这里以<strong>解复用器</strong>为例：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_DEMUXER(X,x) &#123; \</span></span><br><span class="line"><span class="meta">    extern AVInputFormat ff_##x##_demuxer; \</span></span><br><span class="line"><span class="meta">    <span class="keyword">if</span>(CONFIG_##X##_DEMUXER) av_register_input_format(&amp;ff_##x##_demuxer); &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 注意：define 里面的##可能不太常见，它的含义就是拼接两个字符串，比如</span></span><br><span class="line"><span class="comment"> * #define Conn(x,y) x##y</span></span><br><span class="line"><span class="comment"> * 那么</span></span><br><span class="line"><span class="comment"> * int n = Conn(123,456);  结果就是 n = 123456;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p>我们以 <code>REGISTER_DEMUXER  (AAC, aac)</code> 为例，则它等效于</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">extern</span> AVInputFormat ff_aac_demuxer; </span><br><span class="line"><span class="keyword">if</span>(CONFIG_AAC_DEMUXER) av_register_input_format(&amp;ff_aac_demuxer);</span><br></pre></td></tr></table></figure>

<p>从上面这段代码我们可以看出，真正注册的函数是 <code>av_register_input_format(&amp;ff_aac_demuxer)</code>，那我就看看这个和函数的作用，查看一下 <code>av_register_input_format()</code> 的代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">av_register_input_format</span><span class="params">(AVInputFormat *format)</span></span><br><span class="line">&#123;</span><br><span class="line">    AVInputFormat **p;</span><br><span class="line">    p = &amp;first_iformat;</span><br><span class="line">    <span class="keyword">while</span> (*p != <span class="literal">NULL</span>) p = &amp;(*p)-&gt;next;</span><br><span class="line">    *p = format;</span><br><span class="line">    format-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这段代码是比较容易理解的，首先先提一点，first_iformat 是个什么东东呢？其实它是 Input Format 链表的头部地址，是一个全局静态变量，定义如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** head of registered input format linked list */</span></span><br><span class="line"><span class="type">static</span> AVInputFormat *first_iformat = <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>

<p>由此我们可以分析出 <code>av_register_input_format()</code> 的含义，一句话概括就是：</p>
<ul>
<li>遍历链表并把当前的 Input Format 加到链表的尾部。</li>
</ul>
<p>至此 <code>REGISTER_DEMUXER  (X, x)</code> 分析完毕。</p>
<p>同理，<strong>复用器</strong>道理是一样的，只是注册函数改为 <code>av_register_output_format()</code>；</p>
<p><strong>既有解复用器又有复用器</strong>的话，有一个宏定义：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_MUXDEMUX(X,x)  REGISTER_MUXER(X,x); REGISTER_DEMUXER(X,x)</span></span><br></pre></td></tr></table></figure>

<p>可见是分别注册了复用器和解复用器。</p>
<p>此外还有网络协议的注册，注册函数为 <code>ffurl_register_protocol()</code>，在此不再详述。</p>
<details><summary>下面贴出它的源代码（allformats.c）</summary>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;avformat.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rtp.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rdt.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;url.h&quot;</span></span></span><br><span class="line"><span class="comment">// 定义的宏？宏的速度会快一点？注册 AVOutputFormat</span></span><br><span class="line"><span class="comment">// define中，#用来把参数转换成字符串，##则用来连接前后两个参数，把它们变成一个字符串。</span></span><br><span class="line"><span class="comment">// 感觉有点像JAva中的EL，可以随意拼接字符串</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_MUXER(X,x) &#123; \</span></span><br><span class="line"><span class="meta">    extern AVOutputFormat ff_##x##_muxer; \</span></span><br><span class="line"><span class="meta">    <span class="keyword">if</span>(CONFIG_##X##_MUXER) av_register_output_format(&amp;ff_##x##_muxer); &#125;</span></span><br><span class="line"><span class="comment">// 定义的宏？宏的速度会快一点？注册AVInputFormat</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_DEMUXER(X,x) &#123; \</span></span><br><span class="line"><span class="meta">    extern AVInputFormat ff_##x##_demuxer; \</span></span><br><span class="line"><span class="meta">    <span class="keyword">if</span>(CONFIG_##X##_DEMUXER) av_register_input_format(&amp;ff_##x##_demuxer); &#125;</span></span><br><span class="line"><span class="comment">// 注册函数 av_register_input_format</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 定义的宏？宏的速度会快一点？两个一起注册！</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_MUXDEMUX(X,x)  REGISTER_MUXER(X,x); REGISTER_DEMUXER(X,x)</span></span><br><span class="line"><span class="comment">// 定义的宏？宏的速度会快一点？注册URLProtocol</span></span><br><span class="line"><span class="comment">// extern URLProtocol ff_##x##_protocol;</span></span><br><span class="line"><span class="comment">// 在 librtmp 中，对应的就是 ff_rtmp_protocol</span></span><br><span class="line"><span class="comment">// 这样就把 librtmp 整合起来了</span></span><br><span class="line"><span class="comment">// 由此可见 URLProtocol 的名字是固定的</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_PROTOCOL(X,x) &#123; \</span></span><br><span class="line"><span class="meta">    extern URLProtocol ff_##x##_protocol; \</span></span><br><span class="line"><span class="meta">    <span class="keyword">if</span>(CONFIG_##X##_PROTOCOL) ffurl_register_protocol(&amp;ff_##x##_protocol, sizeof(ff_##x##_protocol)); &#125;</span></span><br><span class="line"><span class="comment">// 注册函数 ffurl_register_protocol</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">av_register_all</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> initialized;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (initialized)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    initialized = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// 注册所有的 codec</span></span><br><span class="line">    avcodec_register_all();</span><br><span class="line">    <span class="comment">// 注册所有的 MUXER（复用器和解复用器）</span></span><br><span class="line">    <span class="comment">/* (de)muxers */</span></span><br><span class="line">    REGISTER_MUXER    (A64, a64);</span><br><span class="line">    REGISTER_DEMUXER  (AAC, aac);</span><br><span class="line">    REGISTER_MUXDEMUX (AC3, ac3);</span><br><span class="line">    REGISTER_DEMUXER  (ACT, act);</span><br><span class="line">    REGISTER_DEMUXER  (ADF, adf);</span><br><span class="line">    REGISTER_MUXER    (ADTS, adts);</span><br><span class="line">    REGISTER_MUXDEMUX (ADX, adx);</span><br><span class="line">    REGISTER_DEMUXER  (AEA, aea);</span><br><span class="line">    REGISTER_MUXDEMUX (AIFF, aiff);</span><br><span class="line">    REGISTER_MUXDEMUX (AMR, amr);</span><br><span class="line">    REGISTER_DEMUXER  (ANM, anm);</span><br><span class="line">    REGISTER_DEMUXER  (APC, apc);</span><br><span class="line">    REGISTER_DEMUXER  (APE, ape);</span><br><span class="line">    REGISTER_DEMUXER  (APPLEHTTP, applehttp);</span><br><span class="line">    REGISTER_MUXDEMUX (ASF, asf);</span><br><span class="line">    REGISTER_MUXDEMUX (ASS, ass);</span><br><span class="line">    REGISTER_MUXER    (ASF_STREAM, asf_stream);</span><br><span class="line">    REGISTER_MUXDEMUX (AU, au);</span><br><span class="line">    REGISTER_MUXDEMUX (AVI, avi);</span><br><span class="line">    REGISTER_DEMUXER  (AVISYNTH, avisynth);</span><br><span class="line">    REGISTER_MUXER    (AVM2, avm2);</span><br><span class="line">    REGISTER_DEMUXER  (AVS, avs);</span><br><span class="line">    REGISTER_DEMUXER  (BETHSOFTVID, bethsoftvid);</span><br><span class="line">    REGISTER_DEMUXER  (BFI, bfi);</span><br><span class="line">    REGISTER_DEMUXER  (BINTEXT, bintext);</span><br><span class="line">    REGISTER_DEMUXER  (BINK, bink);</span><br><span class="line">    REGISTER_MUXDEMUX (BIT, bit);</span><br><span class="line">    REGISTER_DEMUXER  (BMV, bmv);</span><br><span class="line">    REGISTER_DEMUXER  (C93, c93);</span><br><span class="line">    REGISTER_MUXDEMUX (CAF, caf);</span><br><span class="line">    REGISTER_MUXDEMUX (CAVSVIDEO, cavsvideo);</span><br><span class="line">    REGISTER_DEMUXER  (CDG, cdg);</span><br><span class="line">    REGISTER_MUXER    (CRC, crc);</span><br><span class="line">    REGISTER_MUXDEMUX (DAUD, daud);</span><br><span class="line">    REGISTER_DEMUXER  (DFA, dfa);</span><br><span class="line">    REGISTER_MUXDEMUX (DIRAC, dirac);</span><br><span class="line">    REGISTER_MUXDEMUX (DNXHD, dnxhd);</span><br><span class="line">    REGISTER_DEMUXER  (DSICIN, dsicin);</span><br><span class="line">    REGISTER_MUXDEMUX (DTS, dts);</span><br><span class="line">    REGISTER_MUXDEMUX (DV, dv);</span><br><span class="line">    REGISTER_DEMUXER  (DXA, dxa);</span><br><span class="line">    REGISTER_DEMUXER  (EA, ea);</span><br><span class="line">    REGISTER_DEMUXER  (EA_CDATA, ea_cdata);</span><br><span class="line">    REGISTER_MUXDEMUX (EAC3, eac3);</span><br><span class="line">    REGISTER_MUXDEMUX (FFM, ffm);</span><br><span class="line">    REGISTER_MUXDEMUX (FFMETADATA, ffmetadata);</span><br><span class="line">    REGISTER_MUXDEMUX (FILMSTRIP, filmstrip);</span><br><span class="line">    REGISTER_MUXDEMUX (FLAC, flac);</span><br><span class="line">    REGISTER_DEMUXER  (FLIC, flic);</span><br><span class="line">    REGISTER_MUXDEMUX (FLV, flv);</span><br><span class="line">    REGISTER_DEMUXER  (FOURXM, fourxm);</span><br><span class="line">    REGISTER_MUXER    (FRAMECRC, framecrc);</span><br><span class="line">    REGISTER_MUXER    (FRAMEMD5, framemd5);</span><br><span class="line">    REGISTER_MUXDEMUX (G722, g722);</span><br><span class="line">    REGISTER_MUXDEMUX (G723_1, g723_1);</span><br><span class="line">    REGISTER_DEMUXER  (G729, g729);</span><br><span class="line">    REGISTER_MUXER    (GIF, gif);</span><br><span class="line">    REGISTER_DEMUXER  (GSM, gsm);</span><br><span class="line">    REGISTER_MUXDEMUX (GXF, gxf);</span><br><span class="line">    REGISTER_MUXDEMUX (H261, h261);</span><br><span class="line">    REGISTER_MUXDEMUX (H263, h263);</span><br><span class="line">    REGISTER_MUXDEMUX (H264, h264);</span><br><span class="line">    REGISTER_DEMUXER  (ICO, ico);</span><br><span class="line">    REGISTER_DEMUXER  (IDCIN, idcin);</span><br><span class="line">    REGISTER_DEMUXER  (IDF, idf);</span><br><span class="line">    REGISTER_DEMUXER  (IFF, iff);</span><br><span class="line">    REGISTER_MUXDEMUX (IMAGE2, image2);</span><br><span class="line">    REGISTER_MUXDEMUX (IMAGE2PIPE, image2pipe);</span><br><span class="line">    REGISTER_DEMUXER  (INGENIENT, ingenient);</span><br><span class="line">    REGISTER_DEMUXER  (IPMOVIE, ipmovie);</span><br><span class="line">    REGISTER_MUXER    (IPOD, ipod);</span><br><span class="line">    REGISTER_MUXER    (ISMV, ismv);</span><br><span class="line">    REGISTER_DEMUXER  (ISS, iss);</span><br><span class="line">    REGISTER_DEMUXER  (IV8, iv8);</span><br><span class="line">    REGISTER_MUXDEMUX (IVF, ivf);</span><br><span class="line">    REGISTER_DEMUXER  (JV, jv);</span><br><span class="line">    REGISTER_MUXDEMUX (LATM, latm);</span><br><span class="line">    REGISTER_DEMUXER  (LMLM4, lmlm4);</span><br><span class="line">    REGISTER_DEMUXER  (LOAS, loas);</span><br><span class="line">    REGISTER_DEMUXER  (LXF, lxf);</span><br><span class="line">    REGISTER_MUXDEMUX (M4V, m4v);</span><br><span class="line">    REGISTER_MUXER    (MD5, md5);</span><br><span class="line">    REGISTER_MUXDEMUX (MATROSKA, matroska);</span><br><span class="line">    REGISTER_MUXER    (MATROSKA_AUDIO, matroska_audio);</span><br><span class="line">    REGISTER_MUXDEMUX (MICRODVD, microdvd);</span><br><span class="line">    REGISTER_MUXDEMUX (MJPEG, mjpeg);</span><br><span class="line">    REGISTER_MUXDEMUX (MLP, mlp);</span><br><span class="line">    REGISTER_DEMUXER  (MM, mm);</span><br><span class="line">    REGISTER_MUXDEMUX (MMF, mmf);</span><br><span class="line">    REGISTER_MUXDEMUX (MOV, mov);</span><br><span class="line">    REGISTER_MUXER    (MP2, mp2);</span><br><span class="line">    REGISTER_MUXDEMUX (MP3, mp3);</span><br><span class="line">    REGISTER_MUXER    (MP4, mp4);</span><br><span class="line">    REGISTER_DEMUXER  (MPC, mpc);</span><br><span class="line">    REGISTER_DEMUXER  (MPC8, mpc8);</span><br><span class="line">    REGISTER_MUXER    (MPEG1SYSTEM, mpeg1system);</span><br><span class="line">    REGISTER_MUXER    (MPEG1VCD, mpeg1vcd);</span><br><span class="line">    REGISTER_MUXER    (MPEG1VIDEO, mpeg1video);</span><br><span class="line">    REGISTER_MUXER    (MPEG2DVD, mpeg2dvd);</span><br><span class="line">    REGISTER_MUXER    (MPEG2SVCD, mpeg2svcd);</span><br><span class="line">    REGISTER_MUXER    (MPEG2VIDEO, mpeg2video);</span><br><span class="line">    REGISTER_MUXER    (MPEG2VOB, mpeg2vob);</span><br><span class="line">    REGISTER_DEMUXER  (MPEGPS, mpegps);</span><br><span class="line">    REGISTER_MUXDEMUX (MPEGTS, mpegts);</span><br><span class="line">    REGISTER_DEMUXER  (MPEGTSRAW, mpegtsraw);</span><br><span class="line">    REGISTER_DEMUXER  (MPEGVIDEO, mpegvideo);</span><br><span class="line">    REGISTER_MUXER    (MPJPEG, mpjpeg);</span><br><span class="line">    REGISTER_DEMUXER  (MSNWC_TCP, msnwc_tcp);</span><br><span class="line">    REGISTER_DEMUXER  (MTV, mtv);</span><br><span class="line">    REGISTER_DEMUXER  (MVI, mvi);</span><br><span class="line">    REGISTER_MUXDEMUX (MXF, mxf);</span><br><span class="line">    REGISTER_MUXER    (MXF_D10, mxf_d10);</span><br><span class="line">    REGISTER_DEMUXER  (MXG, mxg);</span><br><span class="line">    REGISTER_DEMUXER  (NC, nc);</span><br><span class="line">    REGISTER_DEMUXER  (NSV, nsv);</span><br><span class="line">    REGISTER_MUXER    (<span class="literal">NULL</span>, null);</span><br><span class="line">    REGISTER_MUXDEMUX (NUT, nut);</span><br><span class="line">    REGISTER_DEMUXER  (NUV, nuv);</span><br><span class="line">    REGISTER_MUXDEMUX (OGG, ogg);</span><br><span class="line">    REGISTER_MUXDEMUX (OMA, oma);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_ALAW,  pcm_alaw);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_MULAW, pcm_mulaw);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_F64BE, pcm_f64be);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_F64LE, pcm_f64le);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_F32BE, pcm_f32be);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_F32LE, pcm_f32le);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_S32BE, pcm_s32be);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_S32LE, pcm_s32le);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_S24BE, pcm_s24be);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_S24LE, pcm_s24le);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_S16BE, pcm_s16be);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_S16LE, pcm_s16le);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_S8,    pcm_s8);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_U32BE, pcm_u32be);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_U32LE, pcm_u32le);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_U24BE, pcm_u24be);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_U24LE, pcm_u24le);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_U16BE, pcm_u16be);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_U16LE, pcm_u16le);</span><br><span class="line">    REGISTER_MUXDEMUX (PCM_U8,    pcm_u8);</span><br><span class="line">    REGISTER_DEMUXER  (PMP, pmp);</span><br><span class="line">    REGISTER_MUXER    (PSP, psp);</span><br><span class="line">    REGISTER_DEMUXER  (PVA, pva);</span><br><span class="line">    REGISTER_DEMUXER  (QCP, qcp);</span><br><span class="line">    REGISTER_DEMUXER  (R3D, r3d);</span><br><span class="line">    REGISTER_MUXDEMUX (RAWVIDEO, rawvideo);</span><br><span class="line">    REGISTER_DEMUXER  (RL2, rl2);</span><br><span class="line">    REGISTER_MUXDEMUX (RM, rm);</span><br><span class="line">    REGISTER_MUXDEMUX (ROQ, roq);</span><br><span class="line">    REGISTER_DEMUXER  (RPL, rpl);</span><br><span class="line">    REGISTER_MUXDEMUX (RSO, rso);</span><br><span class="line">    REGISTER_MUXDEMUX (RTP, rtp);</span><br><span class="line">    REGISTER_MUXDEMUX (RTSP, rtsp);</span><br><span class="line">    REGISTER_MUXDEMUX (SAP, sap);</span><br><span class="line">    REGISTER_DEMUXER  (SBG, sbg);</span><br><span class="line">    REGISTER_DEMUXER  (SDP, sdp);</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CONFIG_RTPDEC</span></span><br><span class="line">    av_register_rtp_dynamic_payload_handlers();</span><br><span class="line">    av_register_rdt_dynamic_payload_handlers();</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    REGISTER_DEMUXER  (SEGAFILM, segafilm);</span><br><span class="line">    REGISTER_MUXER    (SEGMENT, segment);</span><br><span class="line">    REGISTER_DEMUXER  (SHORTEN, shorten);</span><br><span class="line">    REGISTER_DEMUXER  (SIFF, siff);</span><br><span class="line">    REGISTER_DEMUXER  (SMACKER, smacker);</span><br><span class="line">    REGISTER_MUXDEMUX (SMJPEG, smjpeg);</span><br><span class="line">    REGISTER_DEMUXER  (SOL, sol);</span><br><span class="line">    REGISTER_MUXDEMUX (SOX, sox);</span><br><span class="line">    REGISTER_MUXDEMUX (SPDIF, spdif);</span><br><span class="line">    REGISTER_MUXDEMUX (SRT, srt);</span><br><span class="line">    REGISTER_DEMUXER  (STR, str);</span><br><span class="line">    REGISTER_MUXDEMUX (SWF, swf);</span><br><span class="line">    REGISTER_MUXER    (TG2, tg2);</span><br><span class="line">    REGISTER_MUXER    (TGP, tgp);</span><br><span class="line">    REGISTER_DEMUXER  (THP, thp);</span><br><span class="line">    REGISTER_DEMUXER  (TIERTEXSEQ, tiertexseq);</span><br><span class="line">    REGISTER_MUXER    (MKVTIMESTAMP_V2, mkvtimestamp_v2);</span><br><span class="line">    REGISTER_DEMUXER  (TMV, tmv);</span><br><span class="line">    REGISTER_MUXDEMUX (TRUEHD, truehd);</span><br><span class="line">    REGISTER_DEMUXER  (TTA, tta);</span><br><span class="line">    REGISTER_DEMUXER  (TXD, txd);</span><br><span class="line">    REGISTER_DEMUXER  (TTY, tty);</span><br><span class="line">    REGISTER_DEMUXER  (VC1, vc1);</span><br><span class="line">    REGISTER_MUXDEMUX (VC1T, vc1t);</span><br><span class="line">    REGISTER_DEMUXER  (VMD, vmd);</span><br><span class="line">    REGISTER_MUXDEMUX (VOC, voc);</span><br><span class="line">    REGISTER_DEMUXER  (VQF, vqf);</span><br><span class="line">    REGISTER_DEMUXER  (W64, w64);</span><br><span class="line">    REGISTER_MUXDEMUX (WAV, wav);</span><br><span class="line">    REGISTER_DEMUXER  (WC3, wc3);</span><br><span class="line">    REGISTER_MUXER    (WEBM, webm);</span><br><span class="line">    REGISTER_DEMUXER  (WSAUD, wsaud);</span><br><span class="line">    REGISTER_DEMUXER  (WSVQA, wsvqa);</span><br><span class="line">    REGISTER_MUXDEMUX (WTV, wtv);</span><br><span class="line">    REGISTER_DEMUXER  (WV, wv);</span><br><span class="line">    REGISTER_DEMUXER  (XA, xa);</span><br><span class="line">    REGISTER_DEMUXER  (XBIN, xbin);</span><br><span class="line">    REGISTER_DEMUXER  (XMV, xmv);</span><br><span class="line">    REGISTER_DEMUXER  (XWMA, xwma);</span><br><span class="line">    REGISTER_DEMUXER  (YOP, yop);</span><br><span class="line">    REGISTER_MUXDEMUX (YUV4MPEGPIPE, yuv4mpegpipe);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* external libraries */</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CONFIG_LIBMODPLUG</span></span><br><span class="line">    REGISTER_DEMUXER  (LIBMODPLUG, libmodplug);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    REGISTER_MUXDEMUX (LIBNUT, libnut);</span><br><span class="line">    <span class="comment">// 注册所有的 Protocol（位于 DEMUXER 之前（我的理解~~））</span></span><br><span class="line">    <span class="comment">// 文件也是一种Protocol</span></span><br><span class="line">    <span class="comment">/* protocols */</span></span><br><span class="line">    REGISTER_PROTOCOL (APPLEHTTP, applehttp);</span><br><span class="line">    REGISTER_PROTOCOL (CACHE, cache);</span><br><span class="line">    REGISTER_PROTOCOL (CONCAT, concat);</span><br><span class="line">    REGISTER_PROTOCOL (CRYPTO, crypto);</span><br><span class="line">    REGISTER_PROTOCOL (FILE, file);</span><br><span class="line">    REGISTER_PROTOCOL (GOPHER, gopher);</span><br><span class="line">    REGISTER_PROTOCOL (HTTP, http);</span><br><span class="line">    REGISTER_PROTOCOL (HTTPPROXY, httpproxy);</span><br><span class="line">    REGISTER_PROTOCOL (HTTPS, https);</span><br><span class="line">    REGISTER_PROTOCOL (MMSH, mmsh);</span><br><span class="line">    REGISTER_PROTOCOL (MMST, mmst);</span><br><span class="line">    REGISTER_PROTOCOL (MD5,  md5);</span><br><span class="line">    REGISTER_PROTOCOL (PIPE, pipe);</span><br><span class="line">    REGISTER_PROTOCOL (RTMP, rtmp);</span><br><span class="line"><span class="comment">// 如果包含了 LibRTMP</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> CONFIG_LIBRTMP</span></span><br><span class="line">    REGISTER_PROTOCOL (RTMP, rtmpt);</span><br><span class="line">    REGISTER_PROTOCOL (RTMP, rtmpe);</span><br><span class="line">    REGISTER_PROTOCOL (RTMP, rtmpte);</span><br><span class="line">    REGISTER_PROTOCOL (RTMP, rtmps);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    REGISTER_PROTOCOL (RTP, rtp);</span><br><span class="line">    REGISTER_PROTOCOL (TCP, tcp);</span><br><span class="line">    REGISTER_PROTOCOL (TLS, tls);</span><br><span class="line">    REGISTER_PROTOCOL (UDP, udp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

<p>整个代码没太多可说的，首先确定是不是已经初始化过了（initialized），如果没有，就调用 <code>avcodec_register_all()</code> 注册编解码器（这个先不分析），然后就是注册，注册，注册…直到完成所有注册。</p>
<p>PS：曾经研究过一阵子 RTMP 协议，以及对应的开源工程 librtmp。在这里发现有一点值得注意，ffmpeg自带了 RTMP 协议的支持，只有使用 <code>rtmpt://, rtmpe://, rtmpte://</code> 等的时候才会使用 librtmp 库。</p>
<p>函数调用关系图如下图所示。<code>av_register_all()</code> 调用了 <code>avcodec_register_all()</code> 。 <code>avcodec_register_all()</code> 注册了和编解码器有关的组件：硬件加速器，解码器，编码器，Parser，Bitstream Filter。<code>av_register_all()</code> 除了调用 <code>avcodec_register_all()</code> 之外，还注册了复用器，解复用器，协议处理器。</p>
<p><img data-src="/images/imageFFmpeg/Thor/av_register_all.png" alt="av_register_all 函数调用关系图"></p>
<p>下面附上复用器，解复用器，协议处理器的代码。</p>
<p>注册复用器的函数是 <code>av_register_output_format()</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">av_register_output_format</span><span class="params">(AVOutputFormat *format)</span></span><br><span class="line">&#123;</span><br><span class="line">    AVOutputFormat **p;</span><br><span class="line">    p = &amp;first_oformat;</span><br><span class="line">    <span class="keyword">while</span> (*p != <span class="literal">NULL</span>) p = &amp;(*p)-&gt;next;</span><br><span class="line">    *p = format;</span><br><span class="line">    format-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注册解复用器的函数是 <code>av_register_input_format()</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">av_register_input_format</span><span class="params">(AVInputFormat *format)</span></span><br><span class="line">&#123;</span><br><span class="line">    AVInputFormat **p;</span><br><span class="line">    p = &amp;first_iformat;</span><br><span class="line">    <span class="keyword">while</span> (*p != <span class="literal">NULL</span>) p = &amp;(*p)-&gt;next;</span><br><span class="line">    *p = format;</span><br><span class="line">    format-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注册协议处理器的函数是 <code>ffurl_register_protocol()</code> 。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">ffurl_register_protocol</span><span class="params">(URLProtocol *protocol)</span></span><br><span class="line">&#123;</span><br><span class="line">    URLProtocol **p;</span><br><span class="line">    p = &amp;first_protocol;</span><br><span class="line">    <span class="keyword">while</span> (*p)</span><br><span class="line">        p = &amp;(*p)-&gt;next;</span><br><span class="line">    *p = protocol;</span><br><span class="line">    protocol-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="avcodec-register-all"><a href="#avcodec-register-all" class="headerlink" title="avcodec_register_all()"></a>avcodec_register_all()</h3><p>ffmpeg注册编解码器等的函数 <code>avcodec_register_all()</code>（注意不是 <code>av_register_all()</code>，那是注册所有东西的）。该函数在所有基于ffmpeg的应用程序中几乎都是第一个被调用的。只有调用了该函数，才能使用编解码器等。</p>
<p>其实注册编解码器和注册复用器解复用器道理是差不多的，重复的内容不再多说。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 编码器的注册是：</span></span><br><span class="line">REGISTER_ENCODER (X,x);		REGISTER_ENCODER (LJPEG, ljpeg);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解码器的注册是：</span></span><br><span class="line">REGISTER_DECODER (X,x);		REGISTER_DECODER (H264, h264);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 既包含编码器有包含解码器的注册是：</span></span><br><span class="line">REGISTER_ENCDEC  (X,x);		REGISTER_ENCDEC  (BMP, bmp);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 此外还有几种注册：</span></span><br><span class="line"><span class="comment">// Parser：</span></span><br><span class="line">REGISTER_PARSER  (X,x);		REGISTER_PARSER  (H264, h264);</span><br><span class="line"></span><br><span class="line"><span class="comment">// BSF（bitstream filters，比特流滤镜，有一个常用：h264_mp4toannexb）：</span></span><br><span class="line">REGISTER_BSF     (X,x);		REGISTER_BSF (H264_MP4TOANNEXB, h264_mp4toannexb);</span><br><span class="line"></span><br><span class="line"><span class="comment">// HWACCEL（hardware accelerators，硬件加速器）：</span></span><br><span class="line">REGISTER_HWACCEL (X,x);		REGISTER_HWACCEL (H264_DXVA2, h264_dxva2);</span><br></pre></td></tr></table></figure>

<p>我们来看一下宏的定义，这里以编解码器为例：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_ENCODER(X,x) &#123; \</span></span><br><span class="line"><span class="meta">          extern AVCodec ff_##x##_encoder; \</span></span><br><span class="line"><span class="meta">          <span class="keyword">if</span>(CONFIG_##X##_ENCODER)  avcodec_register(&amp;ff_##x##_encoder); &#125;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_DECODER(X,x) &#123; \</span></span><br><span class="line"><span class="meta">          extern AVCodec ff_##x##_decoder; \</span></span><br><span class="line"><span class="meta">          <span class="keyword">if</span>(CONFIG_##X##_DECODER)  avcodec_register(&amp;ff_##x##_decoder); &#125;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_ENCDEC(X,x)  REGISTER_ENCODER(X,x); REGISTER_DECODER(X,x)</span></span><br></pre></td></tr></table></figure>

<p>在这里，我发现其实编码器和解码器用的注册函数都是一样的：<code>avcodec_register()</code></p>
<p>以 <code>REGISTER_DECODER (H264, h264)</code> 为例，就是等效于</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">extern</span> AVCodec ff_h264_decoder; </span><br><span class="line"><span class="keyword">if</span>(CONFIG_H264_DECODER)  avcodec_register(&amp;ff_h264_decoder);</span><br></pre></td></tr></table></figure>

<p>下面看一下 <code>avcodec_register()</code> 的源代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//注册所有的AVCodec</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">avcodec_register</span><span class="params">(AVCodec *codec)</span></span><br><span class="line">&#123;</span><br><span class="line">    AVCodec **p;</span><br><span class="line">    <span class="comment">//初始化</span></span><br><span class="line">    avcodec_init();</span><br><span class="line">    <span class="comment">//从第一个开始</span></span><br><span class="line">    p = &amp;first_avcodec;</span><br><span class="line">    <span class="keyword">while</span> (*p != <span class="literal">NULL</span>) p = &amp;(*p)-&gt;next;</span><br><span class="line">    *p = codec;</span><br><span class="line">    codec-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (codec-&gt;init_static_data)</span><br><span class="line">        codec-&gt;init_static_data(codec);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这段代码是比较容易理解的。首先先提一点，first_avcdec 是就是 AVCodec 链表的头部地址，是一个全局静态变量，定义如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* encoder management */</span></span><br><span class="line"><span class="type">static</span> AVCodec *first_avcodec = <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>

<p>由此我们可以分析出avcodec_register()的含义，一句话概括就是：遍历链表并把当前的AVCodec加到链表的尾部。<br>同理，<strong>Parser，BSF（bitstream filters，比特流滤镜），HWACCEL（hardware accelerators，硬件加速器）</strong>的注册方式都是类似的。不再详述。</p>
<details><summary>下面贴出它的原代码：</summary>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;avcodec.h&quot;</span></span></span><br><span class="line"><span class="comment">// 硬件加速</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_HWACCEL(X,x) &#123; \</span></span><br><span class="line"><span class="meta">          extern AVHWAccel ff_##x##_hwaccel; \</span></span><br><span class="line"><span class="meta">          <span class="keyword">if</span>(CONFIG_##X##_HWACCEL) av_register_hwaccel(&amp;ff_##x##_hwaccel); &#125;</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_ENCODER(X,x) &#123; \</span></span><br><span class="line"><span class="meta">          extern AVCodec ff_##x##_encoder; \</span></span><br><span class="line"><span class="meta">          <span class="keyword">if</span>(CONFIG_##X##_ENCODER)  avcodec_register(&amp;ff_##x##_encoder); &#125;</span></span><br><span class="line"><span class="comment">// 定义的宏？宏的速度会快一点？注册AVCodec</span></span><br><span class="line"><span class="comment">// extern AVCodec ff_##x##_decoder;</span></span><br><span class="line"><span class="comment">// 注意：extern 表明全局唯一</span></span><br><span class="line"><span class="comment">// 在h264中，对应的就是 ff_h264_decoder</span></span><br><span class="line"><span class="comment">// 由此可见 AVCodecParser 的名字是固定的</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_DECODER(X,x) &#123; \</span></span><br><span class="line"><span class="meta">          extern AVCodec ff_##x##_decoder; \</span></span><br><span class="line"><span class="meta">          <span class="keyword">if</span>(CONFIG_##X##_DECODER)  avcodec_register(&amp;ff_##x##_decoder); &#125;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_ENCDEC(X,x)  REGISTER_ENCODER(X,x); REGISTER_DECODER(X,x)</span></span><br><span class="line"><span class="comment">// 定义的宏？宏的速度会快一点？注册AVCodecParser</span></span><br><span class="line"><span class="comment">// extern AVCodecParser ff_##x##_parser;</span></span><br><span class="line"><span class="comment">// 在h264中，对应的就是ff_h264_parser</span></span><br><span class="line"><span class="comment">// 由此可见AVCodecParser的名字是固定的</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_PARSER(X,x) &#123; \</span></span><br><span class="line"><span class="meta">          extern AVCodecParser ff_##x##_parser; \</span></span><br><span class="line"><span class="meta">          <span class="keyword">if</span>(CONFIG_##X##_PARSER)  av_register_codec_parser(&amp;ff_##x##_parser); &#125;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REGISTER_BSF(X,x) &#123; \</span></span><br><span class="line"><span class="meta">          extern AVBitStreamFilter ff_##x##_bsf; \</span></span><br><span class="line"><span class="meta">          <span class="keyword">if</span>(CONFIG_##X##_BSF)     av_register_bitstream_filter(&amp;ff_##x##_bsf); &#125;</span></span><br><span class="line"> </span><br><span class="line"><span class="type">void</span> <span class="title function_">avcodec_register_all</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> initialized;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (initialized)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    initialized = <span class="number">1</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* hardware accelerators */</span></span><br><span class="line">    REGISTER_HWACCEL (H263_VAAPI, h263_vaapi);</span><br><span class="line">    REGISTER_HWACCEL (H264_DXVA2, h264_dxva2);</span><br><span class="line">    REGISTER_HWACCEL (H264_VAAPI, h264_vaapi);</span><br><span class="line">    REGISTER_HWACCEL (H264_VDA, h264_vda);</span><br><span class="line">    REGISTER_HWACCEL (MPEG1_VDPAU, mpeg1_vdpau);</span><br><span class="line">    REGISTER_HWACCEL (MPEG2_DXVA2, mpeg2_dxva2);</span><br><span class="line">    REGISTER_HWACCEL (MPEG2_VAAPI, mpeg2_vaapi);</span><br><span class="line">    REGISTER_HWACCEL (MPEG2_VDPAU, mpeg2_vdpau);</span><br><span class="line">    REGISTER_HWACCEL (MPEG4_VAAPI, mpeg4_vaapi);</span><br><span class="line">    REGISTER_HWACCEL (VC1_DXVA2, vc1_dxva2);</span><br><span class="line">    REGISTER_HWACCEL (VC1_VAAPI, vc1_vaapi);</span><br><span class="line">    REGISTER_HWACCEL (WMV3_DXVA2, wmv3_dxva2);</span><br><span class="line">    REGISTER_HWACCEL (WMV3_VAAPI, wmv3_vaapi);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* video codecs */</span></span><br><span class="line">    REGISTER_ENCODER (A64MULTI, a64multi);</span><br><span class="line">    REGISTER_ENCODER (A64MULTI5, a64multi5);</span><br><span class="line">    REGISTER_DECODER (AASC, aasc);</span><br><span class="line">    REGISTER_ENCDEC  (AMV, amv);</span><br><span class="line">    REGISTER_DECODER (ANM, anm);</span><br><span class="line">    REGISTER_DECODER (ANSI, ansi);</span><br><span class="line">    REGISTER_ENCDEC  (ASV1, asv1);</span><br><span class="line">    REGISTER_ENCDEC  (ASV2, asv2);</span><br><span class="line">    REGISTER_DECODER (AURA, aura);</span><br><span class="line">    REGISTER_DECODER (AURA2, aura2);</span><br><span class="line">    REGISTER_ENCDEC  (AVRP, avrp);</span><br><span class="line">    REGISTER_DECODER (AVS, avs);</span><br><span class="line">    REGISTER_DECODER (BETHSOFTVID, bethsoftvid);</span><br><span class="line">    REGISTER_DECODER (BFI, bfi);</span><br><span class="line">    REGISTER_DECODER (BINK, bink);</span><br><span class="line">    REGISTER_ENCDEC  (BMP, bmp);</span><br><span class="line">    REGISTER_DECODER (BMV_VIDEO, bmv_video);</span><br><span class="line">    REGISTER_DECODER (C93, c93);</span><br><span class="line">    REGISTER_DECODER (CAVS, cavs);</span><br><span class="line">    REGISTER_DECODER (CDGRAPHICS, cdgraphics);</span><br><span class="line">    REGISTER_DECODER (CINEPAK, cinepak);</span><br><span class="line">    REGISTER_ENCDEC  (CLJR, cljr);</span><br><span class="line">    REGISTER_DECODER (CSCD, cscd);</span><br><span class="line">    REGISTER_DECODER (CYUV, cyuv);</span><br><span class="line">    REGISTER_DECODER (DFA, dfa);</span><br><span class="line">    REGISTER_DECODER (DIRAC, dirac);</span><br><span class="line">    REGISTER_ENCDEC  (DNXHD, dnxhd);</span><br><span class="line">    REGISTER_ENCDEC  (DPX, dpx);</span><br><span class="line">    REGISTER_DECODER (DSICINVIDEO, dsicinvideo);</span><br><span class="line">    REGISTER_ENCDEC  (DVVIDEO, dvvideo);</span><br><span class="line">    REGISTER_DECODER (DXA, dxa);</span><br><span class="line">    REGISTER_DECODER (DXTORY, dxtory);</span><br><span class="line">    REGISTER_DECODER (EACMV, eacmv);</span><br><span class="line">    REGISTER_DECODER (EAMAD, eamad);</span><br><span class="line">    REGISTER_DECODER (EATGQ, eatgq);</span><br><span class="line">    REGISTER_DECODER (EATGV, eatgv);</span><br><span class="line">    REGISTER_DECODER (EATQI, eatqi);</span><br><span class="line">    REGISTER_DECODER (EIGHTBPS, eightbps);</span><br><span class="line">    REGISTER_DECODER (EIGHTSVX_EXP, eightsvx_exp);</span><br><span class="line">    REGISTER_DECODER (EIGHTSVX_FIB, eightsvx_fib);</span><br><span class="line">    REGISTER_DECODER (ESCAPE124, escape124);</span><br><span class="line">    REGISTER_DECODER (ESCAPE130, escape130);</span><br><span class="line">    REGISTER_ENCDEC  (FFV1, ffv1);</span><br><span class="line">    REGISTER_ENCDEC  (FFVHUFF, ffvhuff);</span><br><span class="line">    REGISTER_ENCDEC  (FLASHSV, flashsv);</span><br><span class="line">    REGISTER_ENCDEC  (FLASHSV2, flashsv2);</span><br><span class="line">    REGISTER_DECODER (FLIC, flic);</span><br><span class="line">    REGISTER_ENCDEC  (FLV, flv);</span><br><span class="line">    REGISTER_DECODER (FOURXM, fourxm);</span><br><span class="line">    REGISTER_DECODER (FRAPS, fraps);</span><br><span class="line">    REGISTER_DECODER (FRWU, frwu);</span><br><span class="line">    REGISTER_ENCDEC  (GIF, gif);</span><br><span class="line">    REGISTER_ENCDEC  (H261, h261);</span><br><span class="line">    REGISTER_ENCDEC  (H263, h263);</span><br><span class="line">    REGISTER_DECODER (H263I, h263i);</span><br><span class="line">    REGISTER_ENCODER (H263P, h263p);</span><br><span class="line">    REGISTER_DECODER (H264, h264);</span><br><span class="line">    REGISTER_DECODER (H264_CRYSTALHD, h264_crystalhd);</span><br><span class="line">    REGISTER_DECODER (H264_VDPAU, h264_vdpau);</span><br><span class="line">    REGISTER_ENCDEC  (HUFFYUV, huffyuv);</span><br><span class="line">    REGISTER_DECODER (IDCIN, idcin);</span><br><span class="line">    REGISTER_DECODER (IFF_BYTERUN1, iff_byterun1);</span><br><span class="line">    REGISTER_DECODER (IFF_ILBM, iff_ilbm);</span><br><span class="line">    REGISTER_DECODER (INDEO2, indeo2);</span><br><span class="line">    REGISTER_DECODER (INDEO3, indeo3);</span><br><span class="line">    REGISTER_DECODER (INDEO4, indeo4);</span><br><span class="line">    REGISTER_DECODER (INDEO5, indeo5);</span><br><span class="line">    REGISTER_DECODER (INTERPLAY_VIDEO, interplay_video);</span><br><span class="line">    REGISTER_ENCDEC  (JPEG2000, jpeg2000);</span><br><span class="line">    REGISTER_ENCDEC  (JPEGLS, jpegls);</span><br><span class="line">    REGISTER_DECODER (JV, jv);</span><br><span class="line">    REGISTER_DECODER (KGV1, kgv1);</span><br><span class="line">    REGISTER_DECODER (KMVC, kmvc);</span><br><span class="line">    REGISTER_DECODER (LAGARITH, lagarith);</span><br><span class="line">    REGISTER_ENCODER (LJPEG, ljpeg);</span><br><span class="line">    REGISTER_DECODER (LOCO, loco);</span><br><span class="line">    REGISTER_DECODER (MDEC, mdec);</span><br><span class="line">    REGISTER_DECODER (MIMIC, mimic);</span><br><span class="line">    REGISTER_ENCDEC  (MJPEG, mjpeg);</span><br><span class="line">    REGISTER_DECODER (MJPEGB, mjpegb);</span><br><span class="line">    REGISTER_DECODER (MMVIDEO, mmvideo);</span><br><span class="line">    REGISTER_DECODER (MOTIONPIXELS, motionpixels);</span><br><span class="line">    REGISTER_DECODER (MPEG_XVMC, mpeg_xvmc);</span><br><span class="line">    REGISTER_ENCDEC  (MPEG1VIDEO, mpeg1video);</span><br><span class="line">    REGISTER_ENCDEC  (MPEG2VIDEO, mpeg2video);</span><br><span class="line">    REGISTER_ENCDEC  (MPEG4, mpeg4);</span><br><span class="line">    REGISTER_DECODER (MPEG4_CRYSTALHD, mpeg4_crystalhd);</span><br><span class="line">    REGISTER_DECODER (MPEG4_VDPAU, mpeg4_vdpau);</span><br><span class="line">    REGISTER_DECODER (MPEGVIDEO, mpegvideo);</span><br><span class="line">    REGISTER_DECODER (MPEG_VDPAU, mpeg_vdpau);</span><br><span class="line">    REGISTER_DECODER (MPEG1_VDPAU, mpeg1_vdpau);</span><br><span class="line">    REGISTER_DECODER (MPEG2_CRYSTALHD, mpeg2_crystalhd);</span><br><span class="line">    REGISTER_DECODER (MSMPEG4_CRYSTALHD, msmpeg4_crystalhd);</span><br><span class="line">    REGISTER_DECODER (MSMPEG4V1, msmpeg4v1);</span><br><span class="line">    REGISTER_ENCDEC  (MSMPEG4V2, msmpeg4v2);</span><br><span class="line">    REGISTER_ENCDEC  (MSMPEG4V3, msmpeg4v3);</span><br><span class="line">    REGISTER_DECODER (MSRLE, msrle);</span><br><span class="line">    REGISTER_ENCDEC  (MSVIDEO1, msvideo1);</span><br><span class="line">    REGISTER_DECODER (MSZH, mszh);</span><br><span class="line">    REGISTER_DECODER (MXPEG, mxpeg);</span><br><span class="line">    REGISTER_DECODER (NUV, nuv);</span><br><span class="line">    REGISTER_ENCDEC  (PAM, pam);</span><br><span class="line">    REGISTER_ENCDEC  (PBM, pbm);</span><br><span class="line">    REGISTER_ENCDEC  (PCX, pcx);</span><br><span class="line">    REGISTER_ENCDEC  (PGM, pgm);</span><br><span class="line">    REGISTER_ENCDEC  (PGMYUV, pgmyuv);</span><br><span class="line">    REGISTER_DECODER (PICTOR, pictor);</span><br><span class="line">    REGISTER_ENCDEC  (PNG, png);</span><br><span class="line">    REGISTER_ENCDEC  (PPM, ppm);</span><br><span class="line">    REGISTER_ENCDEC  (PRORES, prores);</span><br><span class="line">    REGISTER_DECODER (PRORES_LGPL, prores_lgpl);</span><br><span class="line">    REGISTER_DECODER (PTX, ptx);</span><br><span class="line">    REGISTER_DECODER (QDRAW, qdraw);</span><br><span class="line">    REGISTER_DECODER (QPEG, qpeg);</span><br><span class="line">    REGISTER_ENCDEC  (QTRLE, qtrle);</span><br><span class="line">    REGISTER_ENCDEC  (R10K,  r10k);</span><br><span class="line">    REGISTER_ENCDEC  (R210,  r210);</span><br><span class="line">    REGISTER_ENCDEC  (RAWVIDEO, rawvideo);</span><br><span class="line">    REGISTER_DECODER (RL2, rl2);</span><br><span class="line">    REGISTER_ENCDEC  (ROQ, roq);</span><br><span class="line">    REGISTER_DECODER (RPZA, rpza);</span><br><span class="line">    REGISTER_ENCDEC  (RV10, rv10);</span><br><span class="line">    REGISTER_ENCDEC  (RV20, rv20);</span><br><span class="line">    REGISTER_DECODER (RV30, rv30);</span><br><span class="line">    REGISTER_DECODER (RV40, rv40);</span><br><span class="line">    REGISTER_DECODER (S302M, s302m);</span><br><span class="line">    REGISTER_ENCDEC  (SGI, sgi);</span><br><span class="line">    REGISTER_DECODER (SMACKER, smacker);</span><br><span class="line">    REGISTER_DECODER (SMC, smc);</span><br><span class="line">    REGISTER_ENCDEC  (SNOW, snow);</span><br><span class="line">    REGISTER_DECODER (SP5X, sp5x);</span><br><span class="line">    REGISTER_DECODER (SUNRAST, sunrast);</span><br><span class="line">    REGISTER_ENCDEC  (SVQ1, svq1);</span><br><span class="line">    REGISTER_DECODER (SVQ3, svq3);</span><br><span class="line">    REGISTER_ENCDEC  (TARGA, targa);</span><br><span class="line">    REGISTER_DECODER (THEORA, theora);</span><br><span class="line">    REGISTER_DECODER (THP, thp);</span><br><span class="line">    REGISTER_DECODER (TIERTEXSEQVIDEO, tiertexseqvideo);</span><br><span class="line">    REGISTER_ENCDEC  (TIFF, tiff);</span><br><span class="line">    REGISTER_DECODER (TMV, tmv);</span><br><span class="line">    REGISTER_DECODER (TRUEMOTION1, truemotion1);</span><br><span class="line">    REGISTER_DECODER (TRUEMOTION2, truemotion2);</span><br><span class="line">    REGISTER_DECODER (TSCC, tscc);</span><br><span class="line">    REGISTER_DECODER (TXD, txd);</span><br><span class="line">    REGISTER_DECODER (ULTI, ulti);</span><br><span class="line">    REGISTER_DECODER (UTVIDEO, utvideo);</span><br><span class="line">    REGISTER_ENCDEC  (V210,  v210);</span><br><span class="line">    REGISTER_DECODER (V210X, v210x);</span><br><span class="line">    REGISTER_ENCDEC  (V308, v308);</span><br><span class="line">    REGISTER_ENCDEC  (V410, v410);</span><br><span class="line">    REGISTER_DECODER (VB, vb);</span><br><span class="line">    REGISTER_DECODER (VBLE, vble);</span><br><span class="line">    REGISTER_DECODER (VC1, vc1);</span><br><span class="line">    REGISTER_DECODER (VC1_CRYSTALHD, vc1_crystalhd);</span><br><span class="line">    REGISTER_DECODER (VC1_VDPAU, vc1_vdpau);</span><br><span class="line">    REGISTER_DECODER (VC1IMAGE, vc1image);</span><br><span class="line">    REGISTER_DECODER (VCR1, vcr1);</span><br><span class="line">    REGISTER_DECODER (VMDVIDEO, vmdvideo);</span><br><span class="line">    REGISTER_DECODER (VMNC, vmnc);</span><br><span class="line">    REGISTER_DECODER (VP3, vp3);</span><br><span class="line">    REGISTER_DECODER (VP5, vp5);</span><br><span class="line">    REGISTER_DECODER (VP6, vp6);</span><br><span class="line">    REGISTER_DECODER (VP6A, vp6a);</span><br><span class="line">    REGISTER_DECODER (VP6F, vp6f);</span><br><span class="line">    REGISTER_DECODER (VP8, vp8);</span><br><span class="line">    REGISTER_DECODER (VQA, vqa);</span><br><span class="line">    REGISTER_ENCDEC  (WMV1, wmv1);</span><br><span class="line">    REGISTER_ENCDEC  (WMV2, wmv2);</span><br><span class="line">    REGISTER_DECODER (WMV3, wmv3);</span><br><span class="line">    REGISTER_DECODER (WMV3_CRYSTALHD, wmv3_crystalhd);</span><br><span class="line">    REGISTER_DECODER (WMV3_VDPAU, wmv3_vdpau);</span><br><span class="line">    REGISTER_DECODER (WMV3IMAGE, wmv3image);</span><br><span class="line">    REGISTER_DECODER (WNV1, wnv1);</span><br><span class="line">    REGISTER_DECODER (XAN_WC3, xan_wc3);</span><br><span class="line">    REGISTER_DECODER (XAN_WC4, xan_wc4);</span><br><span class="line">    REGISTER_DECODER (XL, xl);</span><br><span class="line">    REGISTER_ENCDEC  (XWD, xwd);</span><br><span class="line">    REGISTER_ENCDEC  (Y41P, y41p);</span><br><span class="line">    REGISTER_DECODER (YOP, yop);</span><br><span class="line">    REGISTER_ENCDEC  (YUV4, yuv4);</span><br><span class="line">    REGISTER_ENCDEC  (ZLIB, zlib);</span><br><span class="line">    REGISTER_ENCDEC  (ZMBV, zmbv);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* audio codecs */</span></span><br><span class="line">    REGISTER_ENCDEC  (AAC, aac);</span><br><span class="line">    REGISTER_DECODER (AAC_LATM, aac_latm);</span><br><span class="line">    REGISTER_ENCDEC  (AC3, ac3);</span><br><span class="line">    REGISTER_ENCODER (AC3_FIXED, ac3_fixed);</span><br><span class="line">    REGISTER_ENCDEC  (ALAC, alac);</span><br><span class="line">    REGISTER_DECODER (ALS, als);</span><br><span class="line">    REGISTER_DECODER (AMRNB, amrnb);</span><br><span class="line">    REGISTER_DECODER (AMRWB, amrwb);</span><br><span class="line">    REGISTER_DECODER (APE, ape);</span><br><span class="line">    REGISTER_DECODER (ATRAC1, atrac1);</span><br><span class="line">    REGISTER_DECODER (ATRAC3, atrac3);</span><br><span class="line">    REGISTER_DECODER (BINKAUDIO_DCT, binkaudio_dct);</span><br><span class="line">    REGISTER_DECODER (BINKAUDIO_RDFT, binkaudio_rdft);</span><br><span class="line">    REGISTER_DECODER (BMV_AUDIO, bmv_audio);</span><br><span class="line">    REGISTER_DECODER (COOK, cook);</span><br><span class="line">    REGISTER_ENCDEC  (DCA, dca);</span><br><span class="line">    REGISTER_DECODER (DSICINAUDIO, dsicinaudio);</span><br><span class="line">    REGISTER_ENCDEC  (EAC3, eac3);</span><br><span class="line">    REGISTER_DECODER (FFWAVESYNTH, ffwavesynth);</span><br><span class="line">    REGISTER_ENCDEC  (FLAC, flac);</span><br><span class="line">    REGISTER_ENCDEC  (G723_1, g723_1);</span><br><span class="line">    REGISTER_DECODER (G729, g729);</span><br><span class="line">    REGISTER_DECODER (GSM, gsm);</span><br><span class="line">    REGISTER_DECODER (GSM_MS, gsm_ms);</span><br><span class="line">    REGISTER_DECODER (IMC, imc);</span><br><span class="line">    REGISTER_DECODER (MACE3, mace3);</span><br><span class="line">    REGISTER_DECODER (MACE6, mace6);</span><br><span class="line">    REGISTER_DECODER (MLP, mlp);</span><br><span class="line">    REGISTER_DECODER (MP1, mp1);</span><br><span class="line">    REGISTER_DECODER (MP1FLOAT, mp1float);</span><br><span class="line">    REGISTER_ENCDEC  (MP2, mp2);</span><br><span class="line">    REGISTER_DECODER (MP2FLOAT, mp2float);</span><br><span class="line">    REGISTER_DECODER (MP3, mp3);</span><br><span class="line">    REGISTER_DECODER (MP3FLOAT, mp3float);</span><br><span class="line">    REGISTER_DECODER (MP3ADU, mp3adu);</span><br><span class="line">    REGISTER_DECODER (MP3ADUFLOAT, mp3adufloat);</span><br><span class="line">    REGISTER_DECODER (MP3ON4, mp3on4);</span><br><span class="line">    REGISTER_DECODER (MP3ON4FLOAT, mp3on4float);</span><br><span class="line">    REGISTER_DECODER (MPC7, mpc7);</span><br><span class="line">    REGISTER_DECODER (MPC8, mpc8);</span><br><span class="line">    REGISTER_ENCDEC  (NELLYMOSER, nellymoser);</span><br><span class="line">    REGISTER_DECODER (QCELP, qcelp);</span><br><span class="line">    REGISTER_DECODER (QDM2, qdm2);</span><br><span class="line">    REGISTER_ENCDEC  (RA_144, ra_144);</span><br><span class="line">    REGISTER_DECODER (RA_288, ra_288);</span><br><span class="line">    REGISTER_DECODER (SHORTEN, shorten);</span><br><span class="line">    REGISTER_DECODER (SIPR, sipr);</span><br><span class="line">    REGISTER_DECODER (SMACKAUD, smackaud);</span><br><span class="line">    REGISTER_ENCDEC  (SONIC, sonic);</span><br><span class="line">    REGISTER_ENCODER (SONIC_LS, sonic_ls);</span><br><span class="line">    REGISTER_DECODER (TRUEHD, truehd);</span><br><span class="line">    REGISTER_DECODER (TRUESPEECH, truespeech);</span><br><span class="line">    REGISTER_DECODER (TTA, tta);</span><br><span class="line">    REGISTER_DECODER (TWINVQ, twinvq);</span><br><span class="line">    REGISTER_DECODER (VMDAUDIO, vmdaudio);</span><br><span class="line">    REGISTER_ENCDEC  (VORBIS, vorbis);</span><br><span class="line">    REGISTER_DECODER (WAVPACK, wavpack);</span><br><span class="line">    REGISTER_DECODER (WMALOSSLESS, wmalossless);</span><br><span class="line">    REGISTER_DECODER (WMAPRO, wmapro);</span><br><span class="line">    REGISTER_ENCDEC  (WMAV1, wmav1);</span><br><span class="line">    REGISTER_ENCDEC  (WMAV2, wmav2);</span><br><span class="line">    REGISTER_DECODER (WMAVOICE, wmavoice);</span><br><span class="line">    REGISTER_DECODER (WS_SND1, ws_snd1);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* PCM codecs */</span></span><br><span class="line">    REGISTER_ENCDEC  (PCM_ALAW, pcm_alaw);</span><br><span class="line">    REGISTER_DECODER (PCM_BLURAY, pcm_bluray);</span><br><span class="line">    REGISTER_DECODER (PCM_DVD, pcm_dvd);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_F32BE, pcm_f32be);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_F32LE, pcm_f32le);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_F64BE, pcm_f64be);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_F64LE, pcm_f64le);</span><br><span class="line">    REGISTER_DECODER (PCM_LXF, pcm_lxf);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_MULAW, pcm_mulaw);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_S8, pcm_s8);</span><br><span class="line">    REGISTER_DECODER (PCM_S8_PLANAR, pcm_s8_planar);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_S16BE, pcm_s16be);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_S16LE, pcm_s16le);</span><br><span class="line">    REGISTER_DECODER (PCM_S16LE_PLANAR, pcm_s16le_planar);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_S24BE, pcm_s24be);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_S24DAUD, pcm_s24daud);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_S24LE, pcm_s24le);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_S32BE, pcm_s32be);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_S32LE, pcm_s32le);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_U8, pcm_u8);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_U16BE, pcm_u16be);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_U16LE, pcm_u16le);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_U24BE, pcm_u24be);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_U24LE, pcm_u24le);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_U32BE, pcm_u32be);</span><br><span class="line">    REGISTER_ENCDEC  (PCM_U32LE, pcm_u32le);</span><br><span class="line">    REGISTER_DECODER (PCM_ZORK , pcm_zork);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* DPCM codecs */</span></span><br><span class="line">    REGISTER_DECODER (INTERPLAY_DPCM, interplay_dpcm);</span><br><span class="line">    REGISTER_ENCDEC  (ROQ_DPCM, roq_dpcm);</span><br><span class="line">    REGISTER_DECODER (SOL_DPCM, sol_dpcm);</span><br><span class="line">    REGISTER_DECODER (XAN_DPCM, xan_dpcm);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* ADPCM codecs */</span></span><br><span class="line">    REGISTER_DECODER (ADPCM_4XM, adpcm_4xm);</span><br><span class="line">    REGISTER_ENCDEC  (ADPCM_ADX, adpcm_adx);</span><br><span class="line">    REGISTER_DECODER (ADPCM_CT, adpcm_ct);</span><br><span class="line">    REGISTER_DECODER (ADPCM_EA, adpcm_ea);</span><br><span class="line">    REGISTER_DECODER (ADPCM_EA_MAXIS_XA, adpcm_ea_maxis_xa);</span><br><span class="line">    REGISTER_DECODER (ADPCM_EA_R1, adpcm_ea_r1);</span><br><span class="line">    REGISTER_DECODER (ADPCM_EA_R2, adpcm_ea_r2);</span><br><span class="line">    REGISTER_DECODER (ADPCM_EA_R3, adpcm_ea_r3);</span><br><span class="line">    REGISTER_DECODER (ADPCM_EA_XAS, adpcm_ea_xas);</span><br><span class="line">    REGISTER_ENCDEC  (ADPCM_G722, adpcm_g722);</span><br><span class="line">    REGISTER_ENCDEC  (ADPCM_G726, adpcm_g726);</span><br><span class="line">    REGISTER_DECODER (ADPCM_IMA_AMV, adpcm_ima_amv);</span><br><span class="line">    REGISTER_DECODER (ADPCM_IMA_APC, adpcm_ima_apc);</span><br><span class="line">    REGISTER_DECODER (ADPCM_IMA_DK3, adpcm_ima_dk3);</span><br><span class="line">    REGISTER_DECODER (ADPCM_IMA_DK4, adpcm_ima_dk4);</span><br><span class="line">    REGISTER_DECODER (ADPCM_IMA_EA_EACS, adpcm_ima_ea_eacs);</span><br><span class="line">    REGISTER_DECODER (ADPCM_IMA_EA_SEAD, adpcm_ima_ea_sead);</span><br><span class="line">    REGISTER_DECODER (ADPCM_IMA_ISS, adpcm_ima_iss);</span><br><span class="line">    REGISTER_ENCDEC  (ADPCM_IMA_QT, adpcm_ima_qt);</span><br><span class="line">    REGISTER_DECODER (ADPCM_IMA_SMJPEG, adpcm_ima_smjpeg);</span><br><span class="line">    REGISTER_ENCDEC  (ADPCM_IMA_WAV, adpcm_ima_wav);</span><br><span class="line">    REGISTER_DECODER (ADPCM_IMA_WS, adpcm_ima_ws);</span><br><span class="line">    REGISTER_ENCDEC  (ADPCM_MS, adpcm_ms);</span><br><span class="line">    REGISTER_DECODER (ADPCM_SBPRO_2, adpcm_sbpro_2);</span><br><span class="line">    REGISTER_DECODER (ADPCM_SBPRO_3, adpcm_sbpro_3);</span><br><span class="line">    REGISTER_DECODER (ADPCM_SBPRO_4, adpcm_sbpro_4);</span><br><span class="line">    REGISTER_ENCDEC  (ADPCM_SWF, adpcm_swf);</span><br><span class="line">    REGISTER_DECODER (ADPCM_THP, adpcm_thp);</span><br><span class="line">    REGISTER_DECODER (ADPCM_XA, adpcm_xa);</span><br><span class="line">    REGISTER_ENCDEC  (ADPCM_YAMAHA, adpcm_yamaha);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* subtitles */</span></span><br><span class="line">    REGISTER_ENCDEC  (ASS, ass);</span><br><span class="line">    REGISTER_ENCDEC  (DVBSUB, dvbsub);</span><br><span class="line">    REGISTER_ENCDEC  (DVDSUB, dvdsub);</span><br><span class="line">    REGISTER_DECODER (PGSSUB, pgssub);</span><br><span class="line">    REGISTER_ENCDEC  (SRT, srt);</span><br><span class="line">    REGISTER_ENCDEC  (XSUB, xsub);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* external libraries */</span></span><br><span class="line">    REGISTER_ENCODER (LIBAACPLUS, libaacplus);</span><br><span class="line">    REGISTER_DECODER (LIBCELT, libcelt);</span><br><span class="line">    REGISTER_ENCDEC  (LIBDIRAC, libdirac);</span><br><span class="line">    REGISTER_ENCODER (LIBFAAC, libfaac);</span><br><span class="line">    REGISTER_ENCDEC  (LIBGSM, libgsm);</span><br><span class="line">    REGISTER_ENCDEC  (LIBGSM_MS, libgsm_ms);</span><br><span class="line">    REGISTER_ENCODER (LIBMP3LAME, libmp3lame);</span><br><span class="line">    REGISTER_ENCDEC  (LIBOPENCORE_AMRNB, libopencore_amrnb);</span><br><span class="line">    REGISTER_DECODER (LIBOPENCORE_AMRWB, libopencore_amrwb);</span><br><span class="line">    REGISTER_ENCDEC (LIBOPENJPEG, libopenjpeg);</span><br><span class="line">    REGISTER_ENCDEC  (LIBSCHROEDINGER, libschroedinger);</span><br><span class="line">    REGISTER_ENCDEC  (LIBSPEEX, libspeex);</span><br><span class="line">    REGISTER_DECODER (LIBSTAGEFRIGHT_H264, libstagefright_h264);</span><br><span class="line">    REGISTER_ENCODER (LIBTHEORA, libtheora);</span><br><span class="line">    REGISTER_DECODER (LIBUTVIDEO, libutvideo);</span><br><span class="line">    REGISTER_ENCODER (LIBVO_AACENC, libvo_aacenc);</span><br><span class="line">    REGISTER_ENCODER (LIBVO_AMRWBENC, libvo_amrwbenc);</span><br><span class="line">    REGISTER_ENCODER (LIBVORBIS, libvorbis);</span><br><span class="line">    REGISTER_ENCDEC  (LIBVPX, libvpx);</span><br><span class="line">    REGISTER_ENCODER (LIBX264, libx264);</span><br><span class="line">    REGISTER_ENCODER (LIBX264RGB, libx264rgb);</span><br><span class="line">    REGISTER_ENCODER (LIBXAVS, libxavs);</span><br><span class="line">    REGISTER_ENCODER (LIBXVID, libxvid);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* text */</span></span><br><span class="line">    REGISTER_DECODER (BINTEXT, bintext);</span><br><span class="line">    REGISTER_DECODER  (XBIN, xbin);</span><br><span class="line">    REGISTER_DECODER  (IDF, idf);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* parsers */</span></span><br><span class="line">    REGISTER_PARSER  (AAC, aac);</span><br><span class="line">    REGISTER_PARSER  (AAC_LATM, aac_latm);</span><br><span class="line">    REGISTER_PARSER  (AC3, ac3);</span><br><span class="line">    REGISTER_PARSER  (ADX, adx);</span><br><span class="line">    REGISTER_PARSER  (CAVSVIDEO, cavsvideo);</span><br><span class="line">    REGISTER_PARSER  (DCA, dca);</span><br><span class="line">    REGISTER_PARSER  (DIRAC, dirac);</span><br><span class="line">    REGISTER_PARSER  (DNXHD, dnxhd);</span><br><span class="line">    REGISTER_PARSER  (DVBSUB, dvbsub);</span><br><span class="line">    REGISTER_PARSER  (DVDSUB, dvdsub);</span><br><span class="line">    REGISTER_PARSER  (FLAC, flac);</span><br><span class="line">    REGISTER_PARSER  (GSM, gsm);</span><br><span class="line">    REGISTER_PARSER  (H261, h261);</span><br><span class="line">    REGISTER_PARSER  (H263, h263);</span><br><span class="line">    REGISTER_PARSER  (H264, h264);</span><br><span class="line">    REGISTER_PARSER  (MJPEG, mjpeg);</span><br><span class="line">    REGISTER_PARSER  (MLP, mlp);</span><br><span class="line">    REGISTER_PARSER  (MPEG4VIDEO, mpeg4video);</span><br><span class="line">    REGISTER_PARSER  (MPEGAUDIO, mpegaudio);</span><br><span class="line">    REGISTER_PARSER  (MPEGVIDEO, mpegvideo);</span><br><span class="line">    REGISTER_PARSER  (PNM, pnm);</span><br><span class="line">    REGISTER_PARSER  (RV30, rv30);</span><br><span class="line">    REGISTER_PARSER  (RV40, rv40);</span><br><span class="line">    REGISTER_PARSER  (VC1, vc1);</span><br><span class="line">    REGISTER_PARSER  (VP3, vp3);</span><br><span class="line">    REGISTER_PARSER  (VP8, vp8);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* bitstream filters */</span></span><br><span class="line">    REGISTER_BSF     (AAC_ADTSTOASC, aac_adtstoasc);</span><br><span class="line">    REGISTER_BSF     (CHOMP, chomp);</span><br><span class="line">    REGISTER_BSF     (DUMP_EXTRADATA, dump_extradata);</span><br><span class="line">    REGISTER_BSF     (H264_MP4TOANNEXB, h264_mp4toannexb);</span><br><span class="line">    REGISTER_BSF     (IMX_DUMP_HEADER, imx_dump_header);</span><br><span class="line">    REGISTER_BSF     (MJPEG2JPEG, mjpeg2jpeg);</span><br><span class="line">    REGISTER_BSF     (MJPEGA_DUMP_HEADER, mjpega_dump_header);</span><br><span class="line">    REGISTER_BSF     (MP3_HEADER_COMPRESS, mp3_header_compress);</span><br><span class="line">    REGISTER_BSF     (MP3_HEADER_DECOMPRESS, mp3_header_decompress);</span><br><span class="line">    REGISTER_BSF     (MOV2TEXTSUB, mov2textsub);</span><br><span class="line">    REGISTER_BSF     (NOISE, noise);</span><br><span class="line">    REGISTER_BSF     (REMOVE_EXTRADATA, remove_extradata);</span><br><span class="line">    REGISTER_BSF     (TEXT2MOVSUB, text2movsub);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

<p>整个代码的过程就是首先确定是不是已经初始化过了（initialized），如果没有，就注册，注册，注册…直到完成所有注册。</p>
<p>函数的调用关系图如下图所示。<code>av_register_all()</code> 调用了 <code>avcodec_register_all()</code>。因此如果调用过 <code>av_register_all() </code> 的话就不需要再调用 <code>avcodec_register_all()</code> 了。</p>
<p><img data-src="/images/imageFFmpeg/Thor/av_register_all.png" alt="av_register_all 函数调用关系图"></p>
<p>下面附上硬件加速器，编码器&#x2F;解码器，parser，Bitstream Filter的注册代码。</p>
<p>硬件加速器注册函数是 <code>av_register_hwaccel()</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">av_register_hwaccel</span><span class="params">(AVHWAccel *hwaccel)</span></span><br><span class="line">&#123;</span><br><span class="line">    AVHWAccel **p = last_hwaccel;</span><br><span class="line">    hwaccel-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">while</span>(*p || avpriv_atomic_ptr_cas((<span class="type">void</span> * <span class="keyword">volatile</span> *)p, <span class="literal">NULL</span>, hwaccel))</span><br><span class="line">        p = &amp;(*p)-&gt;next;</span><br><span class="line">    last_hwaccel = &amp;hwaccel-&gt;next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编解码器注册函数是 <code>avcodec_register()</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">av_cold <span class="type">void</span> <span class="title function_">avcodec_register</span><span class="params">(AVCodec *codec)</span></span><br><span class="line">&#123;</span><br><span class="line">    AVCodec **p;</span><br><span class="line">    avcodec_init();</span><br><span class="line">    p = last_avcodec;</span><br><span class="line">    codec-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">while</span>(*p || avpriv_atomic_ptr_cas((<span class="type">void</span> * <span class="keyword">volatile</span> *)p, <span class="literal">NULL</span>, codec))</span><br><span class="line">        p = &amp;(*p)-&gt;next;</span><br><span class="line">    last_avcodec = &amp;codec-&gt;next;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (codec-&gt;init_static_data)</span><br><span class="line">        codec-&gt;init_static_data(codec);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>parser注册函数是 <code>av_register_codec_parser()</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">av_register_codec_parser</span><span class="params">(AVCodecParser *parser)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        parser-&gt;next = av_first_parser;</span><br><span class="line">    &#125; <span class="keyword">while</span> (parser-&gt;next != avpriv_atomic_ptr_cas((<span class="type">void</span> * <span class="keyword">volatile</span> *)&amp;av_first_parser, parser-&gt;next, parser));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Bitstream Filter注册函数是 <code>av_register_bitstream_filter()</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">av_register_bitstream_filter</span><span class="params">(AVBitStreamFilter *bsf)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        bsf-&gt;next = first_bitstream_filter;</span><br><span class="line">    &#125; <span class="keyword">while</span>(bsf-&gt;next != avpriv_atomic_ptr_cas((<span class="type">void</span> * <span class="keyword">volatile</span> *)&amp;first_bitstream_filter, bsf-&gt;next, bsf));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>后两个函数中的 <code>avpriv_atomic_ptr_cas()</code> 定义如下。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> *<span class="title function_">avpriv_atomic_ptr_cas</span><span class="params">(<span class="type">void</span> * <span class="keyword">volatile</span> *ptr, <span class="type">void</span> *oldval, <span class="type">void</span> *newval)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (*ptr == oldval) &#123;</span><br><span class="line">        *ptr = newval;</span><br><span class="line">        <span class="keyword">return</span> oldval;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *ptr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>FFmpeg</category>
      </categories>
      <tags>
        <tag>FFmpeg</tag>
      </tags>
  </entry>
  <entry>
    <title>FFmpeg命令大全</title>
    <url>/2019/05/04/FFmpeg/FFmpeg%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1. 前言"></a>1. 前言</h2><p>FFMPEG 是特别强大的专门用于处理音视频的开源库。你既可以使用它的 API 对音视频进行处理，也可以使用它提供的工具，如 ffmpeg, ffplay, ffprobe，来编辑你的音视频文件。</p>
<p>本文将简要介绍一下 FFMPEG 库的基本目录结构及其功能，然后详细介绍一下我们在日常工作中，如何使用 ffmpeg 提供的工具来处理音视频文件。</p>
<span id="more"></span>

<h2 id="2-FFMPEG-目录及作用"><a href="#2-FFMPEG-目录及作用" class="headerlink" title="2. FFMPEG 目录及作用"></a>2. FFMPEG 目录及作用</h2><ul>
<li>libavcodec： 提供了一系列编码器的实现。</li>
<li>libavformat： 实现在流协议，容器格式及其本IO访问。</li>
<li>libavutil： 包括了hash器，解码器和各类工具函数。</li>
<li>libavfilter： 提供了各种音视频过滤器。</li>
<li>libavdevice： 提供了访问捕获设备和回放设备的接口。</li>
<li>libswresample： 实现了混音和重采样。</li>
<li>libswscale： 实现了色彩转换和缩放工能。</li>
</ul>
<h2 id="3-FFMPEG-基本概念"><a href="#3-FFMPEG-基本概念" class="headerlink" title="3. FFMPEG 基本概念"></a>3. FFMPEG 基本概念</h2><p>在讲解 FFMPEG 命令之前，我们先要介绍一些音视频格式的基要概念。</p>
<ul>
<li><p>音／视频流</p>
<p>在音视频领域，我们把一路音／视频称为一路<strong>流</strong>。如我们小时候经常使用VCD看港片，在里边可以选择粤语或国语声音，其实就是CD视频文件中存放了两路音频流，用户可以选择其中一路进行播放。</p>
</li>
<li><p>容器</p>
<p>我们一般把 MP4､ FLV、MOV 等文件格式称之为<strong>容器</strong>。也就是在这些常用格式文件中，可以存放多路音视频文件。以 MP4 为例，就可以存放一路视频流，多路音频流，多路字幕流。</p>
</li>
<li><p>channel</p>
<p>channel 是音频中的概念，称之为声道。在一路音频流中，可以有单声道，双声道或立体声。</p>
</li>
</ul>
<h2 id="4-FFMPEG-命令"><a href="#4-FFMPEG-命令" class="headerlink" title="4. FFMPEG 命令"></a>4. FFMPEG 命令</h2><p>我们按使用目的可以将 FFMPEG 命令分成以下几类：</p>
<ul>
<li>基本信息查询命令</li>
<li>录制</li>
<li>分解 &#x2F; 复用</li>
<li>处理原始数据</li>
<li>滤镜</li>
<li>切割与合并</li>
<li>图／视互转</li>
<li>直播相关</li>
</ul>
<p>除了 FFMPEG 的基本信息查询命令外，其它命令都按下图所示的流程处理音视频。</p>
<img data-src="/images/imageFFmpeg/音视频处理流程.png">

<p>然后将编码的数据包传送给解码器（除非为数据流选择了流拷贝，请参阅进一步描述）。 解码器产生未压缩的帧（原始视频&#x2F; PCM音频&#x2F; …），可以通过滤波进一步处理（见下一节）。 在过滤之后，帧被传递到编码器，编码器并输出编码的数据包。 最后，这些传递给复用器，将编码的数据包写入输出文件。</p>
<p>默认情况下，ffmpeg只包含输入文件中每种类型（视频，音频，字幕）的一个流，并将其添加到每个输出文件中。 它根据以下标准挑选每一个的“最佳”：对于视频，它是具有最高分辨率的流，对于音频，它是具有最多channel的流，对于字幕，是第一个字幕流。 在相同类型的几个流相等的情况下，选择具有最低索引的流。</p>
<p>您可以通过使用 <code>-vn / -an / -sn / -dn</code> 选项来禁用某些默认设置。 要进行全面的手动控制，请使用 <code>-map</code>选项，该选项禁用刚描述的默认设置。</p>
<p>下面我们就来详细介绍一下这些命令。</p>
<h2 id="5-基本信息查询命令"><a href="#5-基本信息查询命令" class="headerlink" title="5. 基本信息查询命令"></a>5. 基本信息查询命令</h2><p>FFMPEG 可以使用下面的参数进行基本信息查询。例如，想查询一下现在使用的 FFMPEG 都支持哪些 filter，就可以用 <code>ffmpeg -filters</code> 来查询。详细参数说明如下：</p>
<table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>-version</td>
<td>显示版本。</td>
</tr>
<tr>
<td>-formats</td>
<td>显示可用的格式（包括设备）。</td>
</tr>
<tr>
<td>-demuxers</td>
<td>显示可用的demuxers。</td>
</tr>
<tr>
<td>-muxers</td>
<td>显示可用的muxers。</td>
</tr>
<tr>
<td>-devices</td>
<td>显示可用的设备。</td>
</tr>
<tr>
<td>-codecs</td>
<td>显示libavcodec已知的所有编解码器。</td>
</tr>
<tr>
<td>-decoders</td>
<td>显示可用的解码器。</td>
</tr>
<tr>
<td>-encoders</td>
<td>显示所有可用的编码器。</td>
</tr>
<tr>
<td>-bsfs</td>
<td>显示可用的比特流filter。</td>
</tr>
<tr>
<td>-protocols</td>
<td>显示可用的协议。</td>
</tr>
<tr>
<td>-filters</td>
<td>显示可用的libavfilter过滤器。</td>
</tr>
<tr>
<td>-pix_fmts</td>
<td>显示可用的像素格式。</td>
</tr>
<tr>
<td>-sample_fmts</td>
<td>显示可用的采样格式。</td>
</tr>
<tr>
<td>-layouts</td>
<td>显示channel名称和标准channel布局。</td>
</tr>
<tr>
<td>-colors</td>
<td>显示识别的颜色名称。</td>
</tr>
</tbody></table>
<p>接下来介绍的是 FFMPEG 处理音视频时使用的命令格式与参数。</p>
<h2 id="6-命令基本格式及参数"><a href="#6-命令基本格式及参数" class="headerlink" title="6. 命令基本格式及参数"></a>6. 命令基本格式及参数</h2><p>下面是 FFMPEG 的基本命令格式：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg [global_options] &#123;[input_file_options] -i input_url&#125; ...</span></span><br><span class="line">                         &#123;[output_file_options] output_url&#125; ...</span><br></pre></td></tr></table></figure>

<p>ffmpeg 通过 <code>-i</code> 选项读取输任意数量的输入“文件”（可以是常规文件，管道，网络流，抓取设备等），并写入任意数量的输出“文件”。</p>
<p>原则上，每个输入 &#x2F; 输出“文件”都可以包含任意数量的不同类型的视频流（视频 &#x2F; 音频 &#x2F; 字幕 &#x2F; 附件 &#x2F; 数据）。 <strong>流的数量和 &#x2F; 或类型是由容器格式来限制</strong>。 选择从哪个输入进入到哪个输出将自动完成或使用 <code>-map</code> 选项。</p>
<p>要引用选项中的输入文件，您必须使用它们的索引（从 0 开始）。 例如。 第一个输入文件是0，第二个输入文件是1，等等。类似地，文件内的流被它们的索引引用。 <strong>例如： 2：3 是指第三个输入文件中的第四个流</strong>。</p>
<p>上面就是 FFMPEG 处理音视频的常用命令，下面是一些常用参数：</p>
<h3 id="6-1-主要参数"><a href="#6-1-主要参数" class="headerlink" title="6.1 主要参数"></a>6.1 主要参数</h3><table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>-f fmt（输入&#x2F;输出）</td>
<td>强制输入或输出文件格式。 格式通常是自动检测输入文件，并从输出文件的文件扩展名中猜测出来，所以在大多数情况下这个选项是不需要的。</td>
</tr>
<tr>
<td>-i url（输入）</td>
<td>输入文件的网址</td>
</tr>
<tr>
<td>-y（全局参数）</td>
<td>覆盖输出文件而不询问。</td>
</tr>
<tr>
<td>-n（全局参数）</td>
<td>不要覆盖输出文件，如果指定的输出文件已经存在，请立即退出。</td>
</tr>
<tr>
<td>-c [：stream_specifier] codec（输入&#x2F;输出，每个流）</td>
<td>选择一个编码器（当在输出文件之前使用）或解码器（当在输入文件之前使用时）用于一个或多个流。codec 是解码器&#x2F;编码器的名称或 copy（仅输出）以指示该流不被重新编码。如：<code>ffmpeg -i INPUT -map 0 -c:v libx264 -c:a copy OUTPUT</code></td>
</tr>
<tr>
<td>-codec [：stream_specifier]编解码器（输入&#x2F;输出，每个流）</td>
<td>同 -c</td>
</tr>
<tr>
<td>-t duration（输入&#x2F;输出）</td>
<td>当用作输入选项（在-i之前）时，限制从输入文件读取的数据的持续时间。当用作输出选项时（在输出url之前），在持续时间到达持续时间之后停止输出。</td>
</tr>
<tr>
<td>-ss位置（输入&#x2F;输出）</td>
<td>当用作输入选项时（在-i之前），在这个输入文件中寻找位置。 请注意，在大多数格式中，不可能精确搜索，因此ffmpeg将在位置之前寻找最近的搜索点。 当转码和-accurate_seek被启用时（默认），搜索点和位置之间的这个额外的分段将被解码和丢弃。 当进行流式复制或使用-noaccurate_seek时，它将被保留。当用作输出选项（在输出url之前）时，解码但丢弃输入，直到时间戳到达位置。</td>
</tr>
<tr>
<td>-frames [：stream_specifier] framecount（output，per-stream）</td>
<td>停止在帧计数帧之后写入流。</td>
</tr>
<tr>
<td>-filter [：stream_specifier] filtergraph（output，per-stream）</td>
<td>创建由filtergraph指定的过滤器图，并使用它来过滤流。filtergraph是应用于流的filtergraph的描述，并且必须具有相同类型的流的单个输入和单个输出。在过滤器图形中，输入与标签中的标签相关联，标签中的输出与标签相关联。有关filtergraph语法的更多信息，请参阅ffmpeg-filters手册。</td>
</tr>
</tbody></table>
<h3 id="6-2-视频参数"><a href="#6-2-视频参数" class="headerlink" title="6.2 视频参数"></a>6.2 视频参数</h3><table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>-vframes num（输出）</td>
<td>设置要输出的视频帧的数量。对于-frames：v，这是一个过时的别名，您应该使用它。</td>
</tr>
<tr>
<td>-r [：stream_specifier] fps（输入&#x2F;输出，每个流）</td>
<td>设置帧率（Hz值，分数或缩写）。作为输入选项，忽略存储在文件中的任何时间戳，根据速率生成新的时间戳。这与用于-framerate选项不同（它在FFmpeg的旧版本中使用的是相同的）。如果有疑问，请使用-framerate而不是输入选项-r。作为输出选项，复制或丢弃输入帧以实现恒定输出帧频fps。</td>
</tr>
<tr>
<td>-s [：stream_specifier]大小（输入&#x2F;输出，每个流）</td>
<td>设置窗口大小。作为输入选项，这是video_size专用选项的快捷方式，由某些分帧器识别，其帧尺寸未被存储在文件中。作为输出选项，这会将缩放视频过滤器插入到相应过滤器图形的末尾。请直接使用比例过滤器将其插入到开头或其他地方。格式是’wxh’（默认 - 与源相同）。</td>
</tr>
<tr>
<td>-aspect [：stream_specifier] 宽高比（输出，每个流）</td>
<td>设置方面指定的视频显示宽高比。aspect可以是浮点数字符串，也可以是num：den形式的字符串，其中num和den是宽高比的分子和分母。例如“4：3”，“16：9”，“1.3333”和“1.7777”是有效的参数值。如果与-vcodec副本一起使用，则会影响存储在容器级别的宽高比，但不会影响存储在编码帧中的宽高比（如果存在）。</td>
</tr>
<tr>
<td>-vn（输出）</td>
<td>禁用视频录制。</td>
</tr>
<tr>
<td>-vcodec编解码器（输出）</td>
<td>设置视频编解码器。这是 <code>-codec：v</code> 的别名。</td>
</tr>
<tr>
<td>-vf filtergraph（输出）</td>
<td>创建由filtergraph指定的过滤器图，并使用它来过滤流。</td>
</tr>
</tbody></table>
<h3 id="6-3-音频参数"><a href="#6-3-音频参数" class="headerlink" title="6.3 音频参数"></a>6.3 音频参数</h3><table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>-aframes（输出）</td>
<td>设置要输出的音频帧的数量。这是 <code>-frames：a</code> 的一个过时的别名。</td>
</tr>
<tr>
<td>-ar [：stream_specifier] freq（输入&#x2F;输出，每个流）</td>
<td>设置音频采样频率。对于输出流，它默认设置为相应输入流的频率。对于输入流，此选项仅适用于音频捕获设备和原始分路器，并映射到相应的分路器选件。</td>
</tr>
<tr>
<td>-ac [：stream_specifier]通道（输入&#x2F;输出，每个流）</td>
<td>设置音频通道的数量。对于输出流，它默认设置为输入音频通道的数量。对于输入流，此选项仅适用于音频捕获设备和原始分路器，并映射到相应的分路器选件。</td>
</tr>
<tr>
<td>-an（输出）</td>
<td>禁用录音。</td>
</tr>
<tr>
<td>-acodec编解码器（输入&#x2F;输出）</td>
<td>设置音频编解码器。这是-codec的别名：a。</td>
</tr>
<tr>
<td>-sample_fmt [：stream_specifier] sample_fmt（输出，每个流）</td>
<td>设置音频采样格式。使用-sample_fmts获取支持的样本格式列表。</td>
</tr>
<tr>
<td>-af filtergraph（输出）</td>
<td>创建由filtergraph指定的过滤器图，并使用它来过滤流。</td>
</tr>
</tbody></table>
<p>了解了这些基本信息后，接下来我们看看 FFMPEG 具体都能干些什么吧。</p>
<h2 id="7-录制"><a href="#7-录制" class="headerlink" title="7. 录制"></a>7. 录制</h2><p>首先通过下面的命令查看一下 mac 上都有哪些设备。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -f avfoundation -list_devices <span class="literal">true</span> -i <span class="string">&quot;&quot;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>录屏</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -f avfoundation -i 1 -r 30 out.yuv</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>-f 指定使用 avfoundation 采集数据。</p>
</li>
<li><p>-i 指定从哪儿采集数据，它是一个文件索引号。在我的MAC上，1代表桌面（可以通过上面的命令查询设备索引号）。</p>
</li>
<li><p>-r 指定帧率。按ffmpeg官方文档说-r与-framerate作用相同，但实际测试时发现不同。-framerate 用于限制输入，而 -r 用于限制输出。</p>
</li>
</ul>
<p>注意：桌面的输入对帧率没有要求，所以不用限制桌面的帧率。其实限制了也没用。</p>
<p><strong>录屏+声音</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg  -f avfoundation -i 1:0  -r 29.97 -c:v libx264 -crf 0 -c:a libfdk_aac -profile:a aac_he_v2 -b:a 32k  out.flv</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>-i 1:0 冒号前面的 “1” 代表的屏幕索引号。冒号后面的”0”代表的声音索相号。</p>
</li>
<li><p>-c:v 与参数 -vcodec 一样，表示视频编码器。c 是 codec 的缩写，v 是video的缩写。</p>
</li>
<li><p>-crf 是 x264 的参数。 0 表式无损压缩。</p>
</li>
<li><p>-c:a 与参数 -acodec 一样，表示音频编码器。</p>
</li>
<li><p>-profile 是 fdk_aac 的参数。 aac_he_v2 表式使用 AAC_HE v2 压缩数据。</p>
</li>
<li><p>-b:a 指定音频码率。 b 是 bitrate的缩写, a是 audio的缩与。</p>
</li>
</ul>
<p><strong>录视频</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -framerate 30 -f avfoundation -i 0 out.mp4</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>-framerate 限制视频的采集帧率。这个必须要根据提示要求进行设置，如果不设置就会报错。</p>
</li>
<li><p>-f 指定使用 avfoundation 采集数据。</p>
</li>
<li><p>-i 指定视频设备的索引号。</p>
</li>
</ul>
<p><strong>视频+音频</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -framerate 30 -f avfoundation -i 0:0 out.mp4</span> </span><br></pre></td></tr></table></figure>

<p><strong>录音</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -f avfoundation -i :0 out.wav</span></span><br></pre></td></tr></table></figure>

<p><strong>录制音频裸数据</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg  -f avfoundation -i :0 -ar 44100 -f s16le out.pcm</span></span><br></pre></td></tr></table></figure>

<h2 id="8-分解与复用"><a href="#8-分解与复用" class="headerlink" title="8. 分解与复用"></a>8. 分解与复用</h2><p>流拷贝是通过将 copy 参数提供给-codec选项来选择流的模式。它使得ffmpeg省略了指定流的解码和编码步骤，所以它只能进行多路分解和多路复用。 这对于更改容器格式或修改容器级元数据很有用。 在这种情况下，上图将简化为：</p>
<img data-src="/images/imageFFmpeg/分解与复用.png">

<p>由于没有解码或编码，速度非常快，没有质量损失。 但是，由于许多因素，在某些情况下可能无法正常工作。 应用过滤器显然也是不可能的，因为过滤器处理未压缩的数据。</p>
<p><strong>抽取音频流</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i input.mp4 -acodec copy -vn out.aac</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>acodec: 指定音频编码器，copy 指明只拷贝，不做编解码。</p>
</li>
<li><p>vn: v 代表视频，n 代表 no 也就是无视频的意思。</p>
</li>
</ul>
<p><strong>抽取视频流</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i input.mp4 -vcodec copy -an out.h264</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>vcodec: 指定视频编码器，copy 指明只拷贝，不做编解码。</p>
</li>
<li><p>an: a 代表视频，n 代表 no 也就是无音频的意思。</p>
</li>
</ul>
<p><strong>转格式</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i out.mp4 -vcodec copy -acodec copy out.flv</span></span><br></pre></td></tr></table></figure>

<p>上面的命令表式的是音频、视频都直接 copy，只是将 mp4 的封装格式转成了 flv。</p>
<p><strong>音视频合并</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i out.h264 -i out.aac -vcodec copy -acodec copy out.mp4</span></span><br></pre></td></tr></table></figure>

<h2 id="9-处理原始数据"><a href="#9-处理原始数据" class="headerlink" title="9. 处理原始数据"></a>9. <strong>处理原始数据</strong></h2><p><strong>提取YUV数据</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i input.mp4 -an -c:v rawvideo -pixel_format yuv420p out.yuv</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffplay -s wxh out.yuv</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>-c:v rawvideo 指定将视频转成原始数据</p>
</li>
<li><p>-pixel_format yuv420p 指定转换格式为 yuv420p</p>
</li>
</ul>
<p><strong>YUV 转 H264</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -f rawvideo -pix_fmt yuv420p -s 320x240 -r 30 -i out.yuv -c:v libx264 -f rawvideo out.h264</span></span><br></pre></td></tr></table></figure>

<p><strong>提取 PCM 数据</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i out.mp4 -vn -ar 44100 -ac 2 -f s16le out.pcm</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffplay -ar 44100 -ac 2 -f s16le -i out.pcm</span></span><br></pre></td></tr></table></figure>

<p><strong>PCM 转 WAV</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -f s16be -ar 8000 -ac 2 -acodec pcm_s16be -i input.raw output.wav</span></span><br></pre></td></tr></table></figure>

<h2 id="10-滤镜"><a href="#10-滤镜" class="headerlink" title="10. 滤镜"></a>10. <strong>滤镜</strong></h2><p>在编码之前，ffmpeg 可以使用 libavfilter 库中的过滤器处理原始音频和视频帧。 几个链式过滤器形成一个过滤器图形。 ffmpeg 区分两种类型的过滤器图形：简单和复杂。</p>
<h3 id="10-1-简单滤镜"><a href="#10-1-简单滤镜" class="headerlink" title="10.1 简单滤镜"></a>10.1 简单滤镜</h3><p>简单的过滤器图是那些只有一个输入和输出，都是相同的类型。 在上面的图中，它们可以通过在解码和编码之间插入一个额外的步骤来表示：</p>
<img data-src="/images/imageFFmpeg/简单滤镜.png">

<p>简单的 filtergraphs 配置了 per-stream-filter 选项（分别为视频和音频使用 <code>-vf</code> 和 <code>-af</code> 别名）。 一个简单的视频 filtergraph 可以看起来像这样的例子：</p>
<img data-src="/images/imageFFmpeg/简单滤镜-01.png">

<p>请注意，某些滤镜会更改帧属性，但不会改变帧内容。 例如。 上例中的 fps 过滤器会改变帧数，但不会触及帧内容。 另一个例子是 setpts 过滤器，它只设置时间戳，否则不改变帧。</p>
<h3 id="10-2-复杂滤镜"><a href="#10-2-复杂滤镜" class="headerlink" title="10.2 复杂滤镜"></a>10.2 复杂滤镜</h3><p>复杂的过滤器图是那些不能简单描述为应用于一个流的线性处理链的过滤器图。 例如，当图形有多个输入和&#x2F;或输出，或者当输出流类型与输入不同时，就是这种情况。 他们可以用下图来表示：</p>
<img data-src="/images/imageFFmpeg/复杂滤镜.png">

<p>复杂的过滤器图使用 <code>-filter_complex</code> 选项进行配置。 请注意，此选项是全局性的，因为复杂的过滤器图形本质上不能与单个流或文件明确关联。</p>
<p><code>-lavfi</code> 选项等同于 <code>-filter_complex</code>。</p>
<p>一个复杂的过滤器图的一个简单的例子是覆盖过滤器，它有两个视频输入和一个视频输出，包含一个视频叠加在另一个上面。 它的音频对应是 amix 滤波器。</p>
<p><strong>添加水印</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i out.mp4  -vf <span class="string">&quot;movie=logo.png,scale=64:48[watermask];[in][watermask] overlay=30:10 [out]&quot;</span> water.mp4</span></span><br></pre></td></tr></table></figure>

<ul>
<li>-vf 中的 movie 指定 logo 位置。scale 指定 logo 大小。overlay 指定 logo 摆放的位置。</li>
</ul>
<p><strong>删除水印</strong></p>
<p>先通过 ffplay 找到要删除 LOGO 的位置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffplay -i test.flv -vf delogo=x=806:y=20:w=70:h=80:show=1</span></span><br></pre></td></tr></table></figure>

<p>使用 delogo 滤镜删除 LOGO</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i test.flv -vf delogo=x=806:y=20:w=70:h=80 output.flv</span></span><br></pre></td></tr></table></figure>

<p><strong>视频缩小一倍</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i out.mp4 -vf scale=iw/2:-1 scale.mp4</span></span><br></pre></td></tr></table></figure>

<ul>
<li>-vf scale 指定使用简单过滤器 scale，<code>iw/2:-1</code> 中的 iw 指定按整型取视频的宽度。 -1 表示高度随宽度一起变化。</li>
</ul>
<p><strong>视频裁剪</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i VR.mov  -vf crop=in_w-200:in_h-200 -c:v libx264 -c:a copy -video_size 1280x720 vr_new.mp4</span></span><br></pre></td></tr></table></figure>

<p>crop 格式：<code>crop=out_w:out_h:x:y</code></p>
<ul>
<li><p>out_w: 输出的宽度。可以使用 in_w 表式输入视频的宽度。</p>
</li>
<li><p>out_h: 输出的高度。可以使用 in_h 表式输入视频的高度。</p>
</li>
<li><p>x : X坐标</p>
</li>
<li><p>y : Y坐标</p>
</li>
</ul>
<p>如果 x 和 y 设置为 0, 说明从左上角开始裁剪。如果不写是从中心点裁剪。</p>
<p><strong>倍速播放</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i out.mp4 -filter_complex <span class="string">&quot;[0:v]setpts=0.5*PTS[v];[0:a]atempo=2.0[a]&quot;</span> -map <span class="string">&quot;[v]&quot;</span> -map <span class="string">&quot;[a]&quot;</span> speed2.0.mp4</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>-filter_complex 复杂滤镜，<code>[0:v]</code> 表示第一个（文件索引号是 0）文件的视频作为输入。<code>setpts=0.5*PTS</code> 表示每帧视频的 pts 时间戳都乘 0.5 ，也就是差少一半。<code>[v]</code> 表示输出的别名。音频同理就不详述了。</p>
</li>
<li><p>map 可用于处理复杂输出，如可以将指定的多路流输出到一个输出文件，也可以指定输出到多个文件。”[v]” 复杂滤镜输出的别名作为输出文件的一路流。上面 map的用法是将复杂滤镜输出的视频和音频输出到指定文件中。</p>
</li>
</ul>
<p><strong>对称视频</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg  -i out.mp4 -filter_complex <span class="string">&quot;[0:v]pad=w=2*iw[a];[0:v]hflip[b];[a][b]overlay=x=w&quot;</span> duicheng.mp4</span></span><br></pre></td></tr></table></figure>

<ul>
<li>hflip 水平翻转</li>
</ul>
<p>如果要修改为垂直翻转可以用 vflip。</p>
<p><strong>画中画</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i out.mp4 -i out1.mp4 -filter_complex <span class="string">&quot;[1:v]scale=w=176:h=144:force_original_aspect_ratio=decrease[ckout];[0:v][ckout]overlay=x=W-w-10:y=0[out]&quot;</span> -map <span class="string">&quot;[out]&quot;</span> -movflags faststart new.mp4</span></span><br></pre></td></tr></table></figure>

<p><strong>录制画中画</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg  -f avfoundation -i <span class="string">&quot;1&quot;</span> -framerate 30 -f avfoundation -i <span class="string">&quot;0:0&quot;</span></span> </span><br><span class="line">-r 30 -c:v libx264 -preset ultrafast </span><br><span class="line">-c:a libfdk_aac -profile:a aac_he_v2 -ar 44100 -ac 2 </span><br><span class="line">-filter_complex &quot;[1:v]scale=w=176:h=144:force_original_aspect_ratio=decrease[a];[0:v][a]overlay=x=W-w-10:y=0[out]&quot; </span><br><span class="line">-map &quot;[out]&quot; -movflags faststart -map 1:a b.mp4</span><br></pre></td></tr></table></figure>

<p><strong>多路视频拼接</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg  -f avfoundation -i <span class="string">&quot;1&quot;</span> -framerate 30 -f avfoundation   -i <span class="string">&quot;0:0&quot;</span> -r 30 -c:v libx264 -preset ultrafast -c:a libfdk_aac -profile:a aac_he_v2 -ar 44100 -ac 2 -filter_complex <span class="string">&quot;[0:v]scale=320:240[a];[a]pad=640:240[b];[b][1:v]overlay=320:0[out]&quot;</span> -map <span class="string">&quot;[out]&quot;</span> -movflags faststart  -map 1:a  c.mp4</span></span><br></pre></td></tr></table></figure>

<h2 id="11-音视频的拼接与裁剪"><a href="#11-音视频的拼接与裁剪" class="headerlink" title="11. 音视频的拼接与裁剪"></a>11. <strong>音视频的拼接与裁剪</strong></h2><p><strong>裁剪</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i out.mp4 -ss 00:00:00 -t 10 out1.mp4</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>-ss 指定裁剪的开始时间，精确到秒</p>
</li>
<li><p>-t 被裁剪后的时长。</p>
</li>
</ul>
<p><strong>合并</strong></p>
<p>首先创建一个 inputs.txt 文件，文件内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">file <span class="string">&#x27;1.flv&#x27;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">file <span class="string">&#x27;2.flv&#x27;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">file <span class="string">&#x27;3.flv&#x27;</span></span></span><br></pre></td></tr></table></figure>

<p>然后执行下面的命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -f concat -i inputs.txt -c copy output.flv</span></span><br></pre></td></tr></table></figure>

<p><strong>hls切片</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i out.mp4 -c:v libx264 -c:a libfdk_aac -strict -2 -f hls  out.m3u8</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>-strict -2 指明音频使有AAC。</p>
</li>
<li><p>-f hls 转成 m3u8 格式。</p>
</li>
</ul>
<h2 id="12-视频图片互转"><a href="#12-视频图片互转" class="headerlink" title="12. 视频图片互转"></a>12. 视频图片互转</h2><p><strong>视频转 JPEG</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i test.flv -r 1 -f image2 image-%3d.jpeg</span></span><br></pre></td></tr></table></figure>

<p><strong>视频转 gif</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i out.mp4 -ss 00:00:00 -t 10 out.gif</span></span><br></pre></td></tr></table></figure>

<p><strong>图片转视频</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg  -f image2 -i image-%3d.jpeg images.mp4</span></span><br></pre></td></tr></table></figure>

<h2 id="13-直播相关"><a href="#13-直播相关" class="headerlink" title="13. 直播相关"></a>13. <strong>直播相关</strong></h2><p><strong>推流</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -re -i out.mp4 -c copy -f flv rtmp://server/live/streamName</span></span><br></pre></td></tr></table></figure>

<p><strong>拉流保存</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i rtmp://server/live/streamName -c copy dump.flv</span></span><br></pre></td></tr></table></figure>

<p><strong>转流</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i rtmp://server/live/originalStream -c:a copy -c:v copy -f flv rtmp://server/live/h264Stream</span></span><br></pre></td></tr></table></figure>

<p><strong>实时推流</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -framerate 15 -f avfoundation -i <span class="string">&quot;1&quot;</span> -s 1280x720 -c:v libx264  -f  flv rtmp://localhost:1935/live/room</span></span><br></pre></td></tr></table></figure>

<h2 id="14-ffplay"><a href="#14-ffplay" class="headerlink" title="14. ffplay"></a>14. <strong>ffplay</strong></h2><p><strong>播放 YUV 数据</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffplay -pix_fmt nv12 -s 192x144 1.yuv</span></span><br></pre></td></tr></table></figure>

<p><strong>播放 YUV 中的 Y 平面</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffplay -pix_fmt nv21 -s 640x480 -vf extractplanes=<span class="string">&#x27;y&#x27;</span> 1.yuv</span></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>FFmpeg</category>
      </categories>
      <tags>
        <tag>FFmpeg</tag>
      </tags>
  </entry>
  <entry>
    <title>FFmpeg入门</title>
    <url>/2019/04/20/FFmpeg/FFmpeg%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<blockquote>
<p>本文以文档的形式来描述FFmpeg怎么入门，这也是为以后写文档做的一个大题框架格式。</p>
</blockquote>
<h1 id="文档介绍"><a href="#文档介绍" class="headerlink" title="文档介绍"></a>文档介绍</h1><h2 id="文档目的"><a href="#文档目的" class="headerlink" title="文档目的"></a>文档目的</h2><p>整理出开源代码 ffmpeg 的资料，方便公司同事后续使用。</p>
<span id="more"></span>

<h2 id="文档范围"><a href="#文档范围" class="headerlink" title="文档范围"></a>文档范围</h2><p>较为详细的介绍 ffmpeg 的功能、使用以及二次开发。</p>
<h2 id="读者对象"><a href="#读者对象" class="headerlink" title="读者对象"></a>读者对象</h2><p>希望了解 ffmpeg 知识，从事 USM 及 IPTV 的同事。</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>TODO</p>
<h2 id="术语与缩写解释"><a href="#术语与缩写解释" class="headerlink" title="术语与缩写解释"></a>术语与缩写解释</h2><table>
<thead>
<tr>
<th>缩略语&#x2F;术语</th>
<th>全 称</th>
<th>说 明</th>
</tr>
</thead>
<tbody><tr>
<td>ffmpeg</td>
<td>Fast forword mpeg</td>
<td>音视频转换器</td>
</tr>
<tr>
<td>ffplay</td>
<td>Fast forword play</td>
<td>用 ffmpeg 实现的播放器</td>
</tr>
<tr>
<td>ffserver</td>
<td>Fast forword server</td>
<td>用 ffmpeg 实现的 rstp 服务器</td>
</tr>
<tr>
<td>ffprobe</td>
<td>Fast forword probe</td>
<td>用来输入分析输入流。</td>
</tr>
</tbody></table>
<h1 id="FFmpeg-支持能力说明"><a href="#FFmpeg-支持能力说明" class="headerlink" title="FFmpeg 支持能力说明"></a>FFmpeg 支持能力说明</h1><h2 id="FFmpeg-介绍及安装"><a href="#FFmpeg-介绍及安装" class="headerlink" title="FFmpeg 介绍及安装"></a>FFmpeg 介绍及安装</h2><h3 id="FFmpeg-简介"><a href="#FFmpeg-简介" class="headerlink" title="FFmpeg 简介"></a>FFmpeg 简介</h3><p>FFmpeg 是一个开源免费跨平台的视频和音频流方案，属于自由软件，采用 LGPL 或 GPL 许可证（依据你选择的组件）。它提供了录制、转换以及流化音视频的完整解决方案。它包含了非常先进的音频&#x2F;视频编解码库 libavcodec，为了保证高可移植性和编解码质量，libavcodec 里很多 codec 都是从头开发的。</p>
<p>FFmpeg 项目由以下几部分组成:</p>
<p>（1）ffmpeg 视频文件转换命令行工具, 也支持经过实时电视卡抓取和编码成视频文件.</p>
<p>（2）ffserver 基于 HTTP、RTSP 用于实时广播的多媒体服务器. 也支持时间平移</p>
<p>（3）ffplay 用 SDL 和 FFmpeg 库开发的一个简单的媒体播放器</p>
<p>（4）libavcodec 一个包含了所有 FFmpeg 音视频编解码器的库. 为了保证最优性能和高可复用性, 大多数编解码器从头开发的.</p>
<p>（5）libavformat 一个包含了所有的普通音视格式的解析器和产生器的库</p>
<h3 id="FFmpeg-安装"><a href="#FFmpeg-安装" class="headerlink" title="FFmpeg 安装"></a>FFmpeg 安装</h3><p>将所有源代码压缩在一个文件夹中，例如 <code>/绝对路径/ffmpeg</code>。</p>
<p>在终端输入以下指令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> /绝对路径/ffmpeg</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure   <span class="comment">#(此时，会出现问题。然后重新输入./configure –disable-yasm-)</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">Make</span></span><br></pre></td></tr></table></figure>

<p>至此，ffmpeg 安装编译通过，可以进行对音视频的操作。</p>
<p>ffplay 的编译需要依赖于 SDL 库，所以要想编译成功 ffplay，必须先安装 SDL 库，</p>
<p>安装方法：下载最新版本的 SDL 相应版本的 SDL 源码，编译，即可生成 SDL 库。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">首先下载 SDL 软件包</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">configure --prefix=/usr/local</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure>

<h2 id="FFmpeg-参数说明"><a href="#FFmpeg-参数说明" class="headerlink" title="FFmpeg 参数说明"></a>FFmpeg 参数说明</h2><h3 id="通用选项"><a href="#通用选项" class="headerlink" title="通用选项"></a>通用选项</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-L license</span><br><span class="line">-h 帮助</span><br><span class="line">-fromats 显示可用的格式，编解码的，协议的。</span><br><span class="line">-f fmt 强迫采用格式 fmt</span><br><span class="line">-i filename 输入文件</span><br><span class="line">-y 覆盖输出文件</span><br><span class="line">-t duration 设置纪录时间 hh:mm:ss[.xxx]格式的记录时间也支持</span><br><span class="line">-ss position 搜索到指定的时间 [-]hh:mm:ss[.xxx]的格式也支持</span><br><span class="line">-title string 设置标题</span><br><span class="line">-author string 设置作者</span><br><span class="line">-copyright string 设置版权</span><br><span class="line">-comment string 设置评论</span><br><span class="line">-target type 设置目标文件类型(vcd，svcd，dvd) 所有的格式选项（比特率，编解码以及缓冲区	大小）自动设置 ，只需要输入如下的就可以了：</span><br><span class="line">	ffmpeg -i myfile.avi -target vcd /tmp/vcd.mpg</span><br><span class="line">-hq 激活高质量设置</span><br><span class="line">-itsoffset offset 设置以秒为基准的时间偏移，该选项影响所有后面的输入文件。该偏移被加到输	 入文件的时戳，定义一个正偏移意味着相应的流被延迟了 offset 秒。</span><br><span class="line">	[-]hh:mm:ss[.xxx] 的格式也支持</span><br></pre></td></tr></table></figure>

<h3 id="视频选项"><a href="#视频选项" class="headerlink" title="视频选项"></a>视频选项</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-b bitrate 设置比特率，缺省 200kb/s</span><br><span class="line">-r fps 设置帧频 缺省 25</span><br><span class="line">-s size 设置帧大小 格式为 WXH 缺省 160X128.下面的简写也可以直接使用：</span><br><span class="line">	Sqcif 128X96 qcif 176X144 cif 252X288 4cif 704X576</span><br><span class="line">-aspect aspect 设置横纵比 4:3 16:9 或 1.3333 1.7777</span><br><span class="line">-croptop size 设置顶部切除带大小 像素单位</span><br><span class="line">-cropbottom size –cropleft size –cropright size 底部，左边，右边切除带大小。</span><br><span class="line">-padtop size 设置顶部补齐的大小 像素单位</span><br><span class="line">-padbottom size –padleft size –padright size –padcolor color 设置补齐条大小</span><br><span class="line">	和颜色(hex，6 个 16 进制的数，红:绿:兰排列，比如 000000 代表黑色)</span><br><span class="line">-vn 不做视频记录</span><br><span class="line">-bt tolerance 设置视频码率容忍度 kbit/s</span><br><span class="line">-maxrate bitrate 设置最大视频码率容忍度</span><br><span class="line">-minrate bitreate 设置最小视频码率容忍度</span><br><span class="line">-bufsize size 设置码率控制缓冲区大小</span><br><span class="line">-vcodec codec 强制使用 codec 编解码方式。 如果用 copy 表示原始编解码数据必须被拷贝。</span><br><span class="line">-sameq 使用同样视频质量作为源（VBR）</span><br><span class="line">-pass n 选择处理遍数（1 或者 2）。两遍编码非常有用。第一遍生成统计信息，第二遍生成精确的请求的码率</span><br><span class="line">-passlogfile file 选择两遍的纪录文件名为 file</span><br></pre></td></tr></table></figure>

<h3 id="高级视频选项"><a href="#高级视频选项" class="headerlink" title="高级视频选项"></a>高级视频选项</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-g gop_size 设置图像组大小</span><br><span class="line">-intra 仅适用帧内编码</span><br><span class="line">-qscale q 使用固定的视频量化标度(VBR)</span><br><span class="line">-qmin q 最小视频量化标度(VBR)</span><br><span class="line">-qmax q 最大视频量化标度(VBR)</span><br><span class="line">-qdiff q 量化标度间最大偏差 (VBR)</span><br><span class="line">-qblur blur 视频量化标度柔化(VBR)</span><br><span class="line">-qcomp compression 视频量化标度压缩(VBR)</span><br><span class="line">-rc_init_cplx complexity 一遍编码的初始复杂度</span><br><span class="line">-b_qfactor factor 在 p 和 b 帧间的 qp 因子</span><br><span class="line">-i_qfactor factor 在 p 和 i 帧间的 qp 因子</span><br><span class="line">-b_qoffset offset 在 p 和 b 帧间的 qp 偏差</span><br><span class="line">-i_qoffset offset 在 p 和 i 帧间的 qp 偏差</span><br><span class="line">-rc_eq equation 设置码率控制方程 默认 tex^qComp</span><br><span class="line">-rc_override override 特定间隔下的速率控制重载</span><br><span class="line">-me method 设置运动估计的方法 可用方法有 zero phods log x1 epzs(缺省) full</span><br><span class="line">-dct_algo algo 设置 dct 的算法可用的有 0 FF_DCT_AUTO 缺省的 DCT </span><br><span class="line">	1 FF_DCT_FASTINT </span><br><span class="line">	2 FF_DCT_INT </span><br><span class="line">	3 FF_DCT_MMX </span><br><span class="line">	4 FF_DCT_MLIB </span><br><span class="line">	5 FF_DCT_ALTIVEC</span><br><span class="line">-idct_algo algo 设置 idct 算法。可用的有 0 FF_IDCT_AUTO 缺省的 IDCT </span><br><span class="line">	1 FF_IDCT_INT </span><br><span class="line">	2 FF_IDCT_SIMPLE </span><br><span class="line">	3 FF_IDCT_SIMPLEMMX </span><br><span class="line">	4 FF_IDCT_LIBMPEG2MMX </span><br><span class="line">	5 FF_IDCT_PS2 </span><br><span class="line">	6 FF_IDCT_MLIB </span><br><span class="line">	7 FF_IDCT_ARM </span><br><span class="line">	8 FF_IDCT_ALTIVEC </span><br><span class="line">	9 FF_IDCT_SH4 </span><br><span class="line">	10 FF_IDCT_SIMPLEARM</span><br><span class="line">-er n 设置错误残留为 n 1 FF_ER_CAREFULL 缺省 </span><br><span class="line">	2 FF_ER_COMPLIANT </span><br><span class="line">	3 FF_ER_AGGRESSIVE </span><br><span class="line">	4 FF_ER_VERY_AGGRESSIVE</span><br><span class="line">-ec bit_mask 设置错误掩蔽为 bit_mask ， 该值为如下值的位掩码 </span><br><span class="line">	1 FF_EC_GUESS_MVS (default=enabled) </span><br><span class="line">	2 FF_EC_DEBLOCK (default=enabled)</span><br><span class="line">-bf frames 使用 frames B 帧，支持 mpeg1，mpeg2，mpeg4</span><br><span class="line">-mbd mode 宏块决策 0 FF_MB_DECISION_SIMPLE 使 用 mb_cmp </span><br><span class="line">	1 FF_MB_DECISION_BITS </span><br><span class="line">	2 FF_MB_DECISION_RD</span><br><span class="line">-4mv 使用 4 个运动矢量 仅用于 mpeg4</span><br><span class="line">-part 使用数据划分 仅用于 mpeg4</span><br><span class="line">-bug param 绕过没有被自动监测到编码器的问题</span><br><span class="line">-strict strictness 跟标准的严格性</span><br><span class="line">-aic 使能高级帧内编码 h263+</span><br><span class="line">-umv 使能无限运动矢量 h263+</span><br><span class="line">-deinterlace 不采用交织方法</span><br><span class="line">-interlace 强迫交织法编码 仅对 mpeg2 和 mpeg4 有效。当你的输入是交织的并且你想要保持交	织以最小图像损失的时候采用该选项。可选的方法是不交织，但是损失更大</span><br><span class="line">-psnr 计算压缩帧的 psnr</span><br><span class="line">-vstats 输出视频编码统计到 vstats_hhmmss.log</span><br><span class="line">-vhook module 插入视频处理模块 module 包括了模块名和参数，用空格分开</span><br></pre></td></tr></table></figure>

<h3 id="音频选项"><a href="#音频选项" class="headerlink" title="音频选项"></a>音频选项</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-ab bitrate 设置音频码率</span><br><span class="line">-ar freq 设置音频采样率</span><br><span class="line">-ac channels 设置通道 缺省为 1</span><br><span class="line">-an 不使能音频纪录</span><br><span class="line">-acodec codec 使用 codec 编解码</span><br></pre></td></tr></table></figure>

<h3 id="音频-视频捕获选项"><a href="#音频-视频捕获选项" class="headerlink" title="音频&#x2F;视频捕获选项"></a>音频&#x2F;视频捕获选项</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-vd device 设置视频捕获设备。比如/dev/video0</span><br><span class="line">-vc channel 设置视频捕获通道 DV1394 专用</span><br><span class="line">-tvstd standard 设置电视标准 NTSC PAL(SECAM)</span><br><span class="line">-dv1394 设置 DV1394 捕获</span><br><span class="line">-av device 设置音频设备 比如/dev/dsp</span><br></pre></td></tr></table></figure>

<h3 id="高级选项"><a href="#高级选项" class="headerlink" title="高级选项"></a>高级选项</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-map file:stream 设置输入流映射</span><br><span class="line">-debug 打印特定调试信息</span><br><span class="line">-benchmark 为基准测试加入时间</span><br><span class="line">-hex 倾倒每一个输入包</span><br><span class="line">-bitexact 仅使用位精确算法 用于编解码测试</span><br><span class="line">-ps size 设置包大小，以 bits 为单位</span><br><span class="line">-re 以本地帧频读数据，主要用于模拟捕获设备</span><br><span class="line">-loop 循环输入流。只工作于图像流，用于 ffserver 测试</span><br></pre></td></tr></table></figure>

<h3 id="FFmpeg-参数实例"><a href="#FFmpeg-参数实例" class="headerlink" title="FFmpeg 参数实例"></a>FFmpeg 参数实例</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./ffmpeg -y -i /rootVideoConverter/123.avi -ab 56 -ar 22050 -b 1500 -r 15 -qscale 10 –s 480x350 /root/VideoConverter/234.flv</span></span><br><span class="line">============================================================</span><br><span class="line">-y （覆盖输出文件，即如果 1.***文件已经存在的话，不经提示就覆盖掉了）</span><br><span class="line">-i &quot;1.avi&quot;（输入文件是和 ffmpeg 在同一目录下的 1.avi 文件，可以自己加路径，改名字）</span><br><span class="line">-s （输出的分辨率，注意片源一定要是 16:9 的不然会变形）</span><br><span class="line">-r （帧数，一般就用这个吧）</span><br><span class="line">-b 1500（视频数据流量，用-b xxxx 的指令则使用固定码率，数字随便改，1500 以上没效果；</span><br><span class="line">	还可以用动态码率如：-qscale 4 和-qscale 6，4 的质量比 6 高）</span><br><span class="line">-acodec aac（音频编码用 AAC）</span><br><span class="line">-ac 2 （声道数 1 或 2）</span><br><span class="line">-ar 24000（声音的采样频率，好像 PSP 只能支持 24000Hz）</span><br><span class="line">-ab 128 （ 音频数据流量，一般选择 32、64、96、128）</span><br><span class="line">-vol 200（200%的音量，自己改）</span><br><span class="line">-f psp （输出 psp 专用格式）</span><br><span class="line">-muxvb 768（给 PSP 机器识别的码率，一般选择 384、512 和 768）</span><br><span class="line">-ab bitrate 设置音频码率</span><br><span class="line">-ar freq 设置音频采样率</span><br><span class="line">-ss 指定时间点开始转换任务，(time_off set the start time offset)，-ss 后跟的时间单位为秒 .</span><br><span class="line">-s 320x240 指定分辨率</span><br><span class="line">-r 29.97 桢速率</span><br><span class="line">-bitexact 使用标准比特率</span><br><span class="line">-vcodec xvid 使用 xvid 压缩</span><br></pre></td></tr></table></figure>


<h2 id="FFmpeg-支持能力说明-1"><a href="#FFmpeg-支持能力说明-1" class="headerlink" title="FFmpeg 支持能力说明"></a>FFmpeg 支持能力说明</h2><h3 id="FFmpeg-对编码解码器的支持"><a href="#FFmpeg-对编码解码器的支持" class="headerlink" title="FFmpeg 对编码解码器的支持"></a>FFmpeg 对编码解码器的支持</h3><p>ffmpeg 支持的编解码器种类共有 280 多种，涵盖了几乎所有常见音视频编码格式，能解码几乎所有的音视频，每种音视频编解码器的实现都在 libavcodec 目录下有具体的C 语言实现，具体的支持情况参见：</p>
<blockquote>
<p><a href="">ffmpeg支持的编解码器</a></p>
</blockquote>
<p>注：编码器和解码器的名称不是完全匹配的，因此有些编码器没有对应相同名称的解码器，反之，<br>解码器也一样。即使编码和解码都支持也不一定是完全对应的，例如 h263 解码器对应有 h263p 和 h263 编码器。</p>
<h3 id="FFmpeg-对容器格式的支持"><a href="#FFmpeg-对容器格式的支持" class="headerlink" title="FFmpeg 对容器格式的支持"></a>FFmpeg 对容器格式的支持</h3><p>ffmpeg 支持对绝大多数的容器格式的读写操作，共计 190 多种，涵盖了互联网上各种常见媒体格式及日常生活中及专业应用中的各种媒体格式。详细的支持情况参见：</p>
<blockquote>
<p><a href="">FFmpeg支持的媒体文件格式</a></p>
</blockquote>
<h3 id="FFmpeg-对过滤器的支持"><a href="#FFmpeg-对过滤器的支持" class="headerlink" title="FFmpeg 对过滤器的支持"></a>FFmpeg 对过滤器的支持</h3><table>
<thead>
<tr>
<th>Filters</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>aformat</td>
<td>Convert the input audio to one of the specified formats.</td>
</tr>
<tr>
<td>anull</td>
<td>Pass the source unchanged to the output.</td>
</tr>
<tr>
<td>aresample</td>
<td>Resample audio data.</td>
</tr>
<tr>
<td>ashowinfo</td>
<td>Show textual information for each audio frame.</td>
</tr>
<tr>
<td>abuffer</td>
<td>Buffer audio frames， and make them accessible to the filterchain.</td>
</tr>
<tr>
<td>anullsrc</td>
<td>Null audio source， never return audio frames.</td>
</tr>
<tr>
<td>abuffersink</td>
<td>Buffer audio frames， and make them available to the end of the filter graph.</td>
</tr>
<tr>
<td>anullsink</td>
<td>Do absolutely nothing with the input audio.</td>
</tr>
<tr>
<td>copy</td>
<td>Copy the input video unchanged to the output.</td>
</tr>
<tr>
<td>crop</td>
<td>Crop the input video to <code>width:height:x:y</code>.</td>
</tr>
<tr>
<td>drawbox</td>
<td>Draw a colored box on the input video.</td>
</tr>
<tr>
<td>fade</td>
<td>Fade in&#x2F;out input video</td>
</tr>
<tr>
<td>fieldorder</td>
<td>Set the field order.</td>
</tr>
<tr>
<td>fifo</td>
<td>Buffer input images and send them when they are requested.</td>
</tr>
<tr>
<td>format</td>
<td>Convert the input video to one of the specified pixel formats.</td>
</tr>
<tr>
<td>gradfun</td>
<td>Debands video quickly using gradients.</td>
</tr>
<tr>
<td>hflip</td>
<td>Horizontally flip the input video.</td>
</tr>
<tr>
<td>lut</td>
<td>Compute and apply a lookup table to the RGB&#x2F;YUV input video.</td>
</tr>
<tr>
<td>lutrgb</td>
<td>Compute and apply a lookup table to the RGB input video.</td>
</tr>
<tr>
<td>lutyuv</td>
<td>Compute and apply a lookup table to the YUV input video.</td>
</tr>
<tr>
<td>negate</td>
<td>Negate input video.</td>
</tr>
<tr>
<td>noformat</td>
<td>Force libavfilter not to use any of the specified pixel formats for the input to the next filter.</td>
</tr>
<tr>
<td>null</td>
<td>Pass the source unchanged to the output.</td>
</tr>
<tr>
<td>overlay</td>
<td>Overlay a video source on top of the input.</td>
</tr>
<tr>
<td>pad</td>
<td>Pad input image to <code>width:height[:x:y[:color]] (default x and y: 0， default color: black)</code>.</td>
</tr>
<tr>
<td>pixdesctest</td>
<td>Test pixel format definitions.</td>
</tr>
<tr>
<td>scale</td>
<td>Scale the input video to width:height size and&#x2F;or convert the image format.</td>
</tr>
<tr>
<td>select</td>
<td>Select frames to pass in output.</td>
</tr>
<tr>
<td>setdar</td>
<td>Set the frame display aspect ratio.</td>
</tr>
<tr>
<td>setpts</td>
<td>Set PTS for the output video frame.</td>
</tr>
<tr>
<td>setsar</td>
<td>Set the pixel sample aspect ratio.</td>
</tr>
<tr>
<td>settb</td>
<td>Set timebase for the output link.</td>
</tr>
<tr>
<td>showinfo</td>
<td>Show textual information for each video frame.</td>
</tr>
<tr>
<td>slicify</td>
<td>Pass the images of input video on to next video filter as multiple slices.</td>
</tr>
<tr>
<td>split</td>
<td>Pass on the input to two outputs.</td>
</tr>
<tr>
<td>transpose</td>
<td>Transpose input video.</td>
</tr>
<tr>
<td>unsharp</td>
<td>Sharpen or blur the input video.</td>
</tr>
<tr>
<td>vflip</td>
<td>Flip the input video vertically.</td>
</tr>
<tr>
<td>buffer</td>
<td>Buffer video frames， and make them accessible to the filterchain.</td>
</tr>
<tr>
<td>color</td>
<td>Provide an uniformly colored input， syntax is: [color[:size[:rate]]]</td>
</tr>
<tr>
<td>movie</td>
<td>Read from a movie source.</td>
</tr>
<tr>
<td>nullsrc</td>
<td>Null video source， never return images.</td>
</tr>
<tr>
<td>rgbtestsrc</td>
<td>Generate RGB test pattern.</td>
</tr>
<tr>
<td>testsrc</td>
<td>Generate test pattern.</td>
</tr>
<tr>
<td>buffersink</td>
<td>Buffer video frames， and make them available to the end of the filter graph.</td>
</tr>
<tr>
<td>nullsink</td>
<td>Do absolutely nothing with the input video.</td>
</tr>
</tbody></table>
<h3 id="FFmpeg-对图像颜色空间的支持"><a href="#FFmpeg-对图像颜色空间的支持" class="headerlink" title="FFmpeg 对图像颜色空间的支持"></a>FFmpeg 对图像颜色空间的支持</h3><p>ffmpeg 支持常见的图像颜色空间，并且在 libavswcale 中定义了颜色空间转换的相关函数实现各种颜色模式的互转。具体的支持情况见:</p>
<blockquote>
<p><a href="">FFmpeg支持的图像颜色空间</a></p>
</blockquote>
<h2 id="FFmpeg-功能及使用说明"><a href="#FFmpeg-功能及使用说明" class="headerlink" title="FFmpeg 功能及使用说明"></a>FFmpeg 功能及使用说明</h2><h3 id="ffplay-对多媒体的支持能力验证"><a href="#ffplay-对多媒体的支持能力验证" class="headerlink" title="ffplay 对多媒体的支持能力验证"></a>ffplay 对多媒体的支持能力验证</h3><p><strong>一、视频</strong></p>
<p><code>3gp 177X144</code> 支持播放，在 windows 下播放正常，但是在 linux 下面偶有 BUG 如果发现画面无法显示而声音可以播放的情况下 可以试着切换全屏或者切换分辨率。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">AVI 	208X176 		支持</span><br><span class="line"> 		320X240 		支持</span><br><span class="line"> 		720X400 		支持</span><br><span class="line"> 		720X576 		支持</span><br><span class="line">DAT 3	52X288 			支持</span><br><span class="line">DiVX 	720X576 		支持</span><br><span class="line">MKV 	320X240 		支持</span><br><span class="line">		352X288 		支持</span><br><span class="line"> 		704X304 		支持</span><br><span class="line"> 		720X576 		支持</span><br><span class="line">MP4 	320X240 		支持</span><br><span class="line">		352X288 		支持</span><br><span class="line">        720X400 		支持</span><br><span class="line">MPG 	320X240 		支持</span><br><span class="line"> 		352X288 		支持</span><br><span class="line"> 		480X576 		支持</span><br><span class="line"> 		720X576 		支持</span><br><span class="line"> 		720X480 		支持</span><br><span class="line">VOB 	352X288 		支持</span><br><span class="line">XVID 	720X576 		支持</span><br><span class="line">MOV 					支持</span><br><span class="line">RMVB 					支持 </span><br></pre></td></tr></table></figure>

<p><strong>二、音频</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">AC3 	48KHZ 				支持</span><br><span class="line">APE 	11KHZ 				支持</span><br><span class="line"> 		22KHZ 				支持</span><br><span class="line"> 		44KHZ 				支持</span><br><span class="line"> 		48KHZ 				支持</span><br><span class="line">MP3 	32KHZ 	64Kbps 		支持</span><br><span class="line">        32KHZ 	128KbpS 	支持</span><br><span class="line">        32KHZ 	160Kbps 	支持</span><br><span class="line">        32KHZ 	192Kbps 	支持</span><br><span class="line">        32KHZ 	320Kbps 	支持</span><br><span class="line">        44KHZ	64Kbps 		支持</span><br><span class="line">        44KHZ 	128Kbps 	支持</span><br><span class="line">        44KHZ 	160Kbps 	支持</span><br><span class="line">        44KHZ 	192Kbps 	支持</span><br><span class="line">        44KHZ 	320Kbps 	支持</span><br><span class="line">        48KHZ 	64Kbps 		支持</span><br><span class="line">        48KHZ 	128Kbps 	支持</span><br><span class="line">        48KHZ 	160Kbps 	支持</span><br><span class="line">        48KHZ 	192Kbps 	支持</span><br><span class="line">        48KHZ 	320Kbps 	支持</span><br><span class="line">OGG 	32KHZ 	128Kbps 	支持</span><br><span class="line">        32KHZ 	192Kbps 	支持</span><br><span class="line">        44KHZ 	64Kbps 		支持</span><br><span class="line">        44KHZ 	128Kbps 	支持</span><br><span class="line">        44KHZ 	192Kbps 	支持</span><br><span class="line">        48KHZ 	64Kbps 		支持</span><br><span class="line">        44KHZ 	128Kbps 	支持</span><br><span class="line">        44KHZ 	192Kbps 	支持</span><br><span class="line">WAV 	11KHZ 				支持</span><br><span class="line">        22KHZ 	16Kbps 		支持</span><br><span class="line">        44KHZ 	16Kbps 		支持</span><br><span class="line">        48KHZ 	16Kbps 		支持</span><br><span class="line">WMA 	8KHZ 	16Kbps 		支持</span><br><span class="line">        11KHZ 	16Kbps 		支持</span><br><span class="line">        16KHZ 	16Kbps 		支持</span><br><span class="line">        22KHZ 	16Kbps 		支持</span><br><span class="line">        44KHZ 	16Kbps 		支持</span><br><span class="line">        48KHZ 	16Kbps 		支持</span><br></pre></td></tr></table></figure>

<p><strong>三、图像</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">PNG 		支持</span><br><span class="line">JPG 		支持</span><br><span class="line">JPEG 		支持</span><br><span class="line">GIF 		支持</span><br><span class="line">BMP 		支持</span><br></pre></td></tr></table></figure>


<h3 id="FFmpeg-格式转换"><a href="#FFmpeg-格式转换" class="headerlink" title="FFmpeg 格式转换"></a>FFmpeg 格式转换</h3><p><strong>第一步：准备媒体</strong></p>
<p>前面已经讲的很清楚了，ffmpeg 如何安装不在赘述。准备好相应的文件，如图 2-1所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/2-1.png" alt="图 2-1"></p>
<p><strong>第二步：启动 ffmpeg</strong></p>
<p>由于做的是格式转换，在 ffserver 上不能直观的看见结果，故我是在 linux 下进行的。打开终端，值得一提的是格式转换需要超级用户才能进行，故在命令行输入：<code>su，&lt;回车&gt;</code>，输入密码进入超级用户，本例中，以 FFmpeg 将 test.avi 转换为 test.mpg。在命令行中输入：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./ffmpeg –i test.avi –r 25 –s 720x400 test.mpg</span></span><br></pre></td></tr></table></figure>

<p>其中原格式分辨率为 320x240，将转为 720x400，-r 前面已经解释其含义，表示设置帧频为 25。转换成功后如图 2-2 所示，前后两种格式播放效果如图 2-3 所示。相应的，转换为其他格式做相应的变化即可。</p>
<p>同时还可以在转换格式时进行强制的音视频转换，如 <code>–vcodec + 格式</code>，将会强制将视频按指定格式编码，<code>-acodec +格式</code>，将会强制按指定格式编码音频信息。在转换中有很多其他参数可以指定，如码率、分辨率、帧率等，具体按照 ffmpeg 的参数说明指定参数即可。但有一条转低不转高的原则需要注意，即品质差的音视频转换不建议转换到品质好的音视频。</p>
<p><img data-src="/images/imageFFmpeg/Thor/2-2.png" alt="图 2-2"></p>
<p><img data-src="/images/imageFFmpeg/Thor/2-3.png" alt="图 2-3"></p>
<p>再说说如何在转换视频的时候将音频合成到视频中，且覆盖其原来的音频。这个现在摸索出两种方法。</p>
<p><strong>方法一</strong>：需要两条命令实现，先在命令行中输入：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./ffmpeg –i test.avi -an –r 25 test.mpg</span></span><br></pre></td></tr></table></figure>

<p>此时将生成一个没有声音的 test.mpg 视频，再在命令行中输入：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./ffmpeg –i test.mpg –i test.mp3 –r 25 test1.mpg</span></span><br></pre></td></tr></table></figure>

<p>此时将会生成一个名为 test1.mpg 的视频。该视频播放时视频为 test.avi 的视频，但音频变为了 test.mp3 的音频了。</p>
<p><strong>方法二</strong>：只要一条指令即可实现。在命令行中输入：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./ffmpeg –i test.avi –i test.mp3 –vcodec copy –acodec copy –r 25 test2.mpg</span></span><br></pre></td></tr></table></figure>

<p>此时将会生成一个名为 test2.mpg 的视频，播放时其视频为 test.avi 的视频，音频为 test.mp3。<code>–vcodec copy</code> 为 force video codec(‘copy’ to copy stream)。</p>
<p>有一点需要注意，文件命名不能有空格，否则会导致编译时不能通过。另外，<code>-an</code> 为不能使音频记录。</p>
<p><strong>第三步：播放媒体</strong></p>
<p>播放我们转换的媒体，看看是否满足我们当初的愿望，不出什么差错的话，是完全能够满足我们的要求的。</p>
<h3 id="FFmpeg-视频截图"><a href="#FFmpeg-视频截图" class="headerlink" title="FFmpeg 视频截图"></a>FFmpeg 视频截图</h3><p>截取一张 <code>300x200</code> 尺寸大小的格式为 jpg 的一张图片：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./ffmpeg –i test.avi –y –f image2 –t 0.001 –s 300x200 test.jpg</span></span><br></pre></td></tr></table></figure>

<p>要截取指定时间的图片，如 5 秒之后的：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./ffmpeg –i test.avi –y –f image2 –ss 5 –t 0.001 –s 300x200 test.jpg</span></span><br></pre></td></tr></table></figure>

<p>其中，<code>-ss</code> 后的单位为秒，也可写成：<code>-ss 00:00:05</code>。</p>
<p>把视频的前 30 帧转换为一个动态的 gif 图。需要说明的是，转换成功之后，如果用 ffplay 播放是看不出效果的，建议换成其他图片播放器播放。其转换命令为：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./ffmpeg –i test.avi –vframes 30 –pix_fmt rgb24–y –f gif test.gif</span></span><br></pre></td></tr></table></figure>

<p>也可以从视频中的第 10 秒开始截取后面的 5 秒内容转换为一个无限重播的动态 gif 图。其命令为：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./ffmpeg –i test.avi –pix_fmt rgb24 –ss 10 –t 5 –y –f gif test.gif</span></span><br></pre></td></tr></table></figure>

<p>上面两种动态 gif 都是只播一次，想让其一直播，可再加一个参数：<code>-loop_output 0</code>。</p>
<h3 id="FFmpeg-屏幕录制"><a href="#FFmpeg-屏幕录制" class="headerlink" title="FFmpeg 屏幕录制"></a>FFmpeg 屏幕录制</h3><p>屏幕录制其命令为：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./ffmpeg -f x11grab -r 25 -s wxga -i :0.0 /tmp/outputFile.mpg</span></span><br></pre></td></tr></table></figure>

<p>其他相关参数可自行添加。需要说明的是，各个版本的 ffmpeg 对屏幕录制的命令不一。如果你只想录制一个应用程序窗口或者桌面上的一个固定区域，那么可以指定偏移位置和区域大小。使用 <code>xwininfo -frame</code> 命令可以完成查找上述参数。</p>
<p>注：ffmpeg 的屏幕录制功能只能在 Linux 环境下有效。并且在配置时需要添加 <code>–enable-x11grub</code> 指令，默认关闭。</p>
<h3 id="FFmpeg-音视频采集"><a href="#FFmpeg-音视频采集" class="headerlink" title="FFmpeg 音视频采集"></a>FFmpeg 音视频采集</h3><p>把摄像头的实时视频录制下来，存储为文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./ffmpeg -f video4linux -s 320x240 -r 10 -i /dev/video0 test.asf</span></span><br></pre></td></tr></table></figure>

<p>录音，其命令为：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./ffmpeg –i /dev/dsp -f oss test.mp3</span></span><br></pre></td></tr></table></figure>

<h2 id="FFmpeg-应用实例"><a href="#FFmpeg-应用实例" class="headerlink" title="FFmpeg 应用实例"></a>FFmpeg 应用实例</h2><h3 id="用-FFserver-从文件生成流媒体"><a href="#用-FFserver-从文件生成流媒体" class="headerlink" title="用 FFserver 从文件生成流媒体"></a>用 FFserver 从文件生成流媒体</h3><p><strong>一、安装 ffmpeg</strong></p>
<p>在 ubuntu 下，运行 <code>sudo apt-get ffmpeg</code> 安装 ffmpeg，在其他 linux 操作系统下，见 ffmpeg 的编译过程（编译完成后可执行自动安装）。</p>
<p><strong>二、准备预播放的媒体文件</strong></p>
<p>如 test.Mp3，在本文档中，默认放入用户文件夹下得 Music 文件夹内.(直接从设备采集不在本文档叙述范围之内)</p>
<p><strong>三、修改 ffserver 配置信息</strong></p>
<p>ffserver 配置文件为: <code>/etc/ffserver.conf</code> 打开，填写配置信息.配置信息包括三方面:</p>
<p>（1）端口绑定等基本信息，在 ·&#x2F;etc&#x2F;ffserver.conf· 中有详细注释，在此不再重复，最终配置信息为：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Port 8090</span><br><span class="line">BindAddress 0.0.0.0</span><br><span class="line">MaxHTTPConnections 2000</span><br><span class="line">MaxClients 1000</span><br><span class="line">MaxBandwidth 1000</span><br></pre></td></tr></table></figure>

<p>（2）媒体文件配置信息.本信息根据具体的媒体文件类型直接在配置文件中取消注释掉相应文件类型的配置信息，然后填写文件路径即可:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">MP3 audio</span></span><br><span class="line">&lt;Stream test.mp3&gt;</span><br><span class="line">File &quot;/home/xiaoma/Music/test.mp3&quot;</span><br><span class="line">Format mp2</span><br><span class="line">NoVideo</span><br><span class="line">&lt;/Stream&gt;</span><br></pre></td></tr></table></figure>

<p><strong>四、启动 ffserver</strong></p>
<p>在终端中运行: <code>sudo ffserver -f /etc/ffserver.conf</code>  启动 ffserver.</p>
<p><strong>五、播放流媒体</strong></p>
<p>在浏览器中输入 <a href="">http://127.0.0.1:8090/test.mp3</a> 即可播放音乐.</p>
<p>在终端中输入 <code>ffplay http://localhost:8090/test.mp3</code> 可播放流媒体.</p>
<h3 id="用-FFserver-从设备生成实时流"><a href="#用-FFserver-从设备生成实时流" class="headerlink" title="用 FFserver 从设备生成实时流"></a>用 FFserver 从设备生成实时流</h3><p><strong>一、准备媒体</strong></p>
<p>按照上节步骤安装 ffmpeg，保证摄像头和声卡可用，将从摄像头和声卡获取音视频信息。</p>
<p><strong>二、修改 ffserver 配置信息</strong></p>
<p>ffserver 配置文件为: <code>/etc/ffserver.conf</code> 打开，填写配置信息.配置信息包括三方面:</p>
<p>（1）端口绑定等基本信息，在 <code>/etc/ffserver.conf</code> 中有详细注释，在此不再重复，最终配<br>置信息为:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Port 8090</span><br><span class="line">BindAddress 0.0.0.0</span><br><span class="line">MaxHTTPConnections 2000</span><br><span class="line">MaxClients 1000</span><br><span class="line">MaxBandwidth 1000</span><br></pre></td></tr></table></figure>

<p>（2）fend(传冲信息)，在文件播放中，基本不用动本配置信息，只需要根据具体情况分配缓冲文件.最终配置信息如下:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;Feed feed1.ffm&gt;</span><br><span class="line">File /tmp/feed1.ffm</span><br><span class="line">FileMaxSize 2M</span><br><span class="line">ACL allow 127.0.0.1</span><br><span class="line">&lt;/Feed&gt;</span><br></pre></td></tr></table></figure>

<p>（3）媒体文件配置信息.本信息根据具体的媒体文件类型直接在配置文件中取消注释掉相应文件类型的配置信息，然后填写文件路径即可:</p>
<p>(中间会有很多很多配置信息，都是关于音视频的，有些配置还不懂，慢慢摸索吧)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;Stream test1.mpg&gt;</span><br><span class="line">Feed feed1.ffm</span><br><span class="line">Format mpeg</span><br><span class="line">AudioBitRate 32</span><br><span class="line">AudioChannels 1</span><br><span class="line">AudioSampleRate 44100</span><br><span class="line">VideoBitRate 64</span><br><span class="line">VideoBufferSize 40</span><br><span class="line">VideoFrameRate 3</span><br><span class="line">VideoSize 160x128</span><br><span class="line">VideoGopSize 12</span><br><span class="line">&lt;/Stream&gt;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Flash</span></span><br><span class="line">&lt;Stream test.swf&gt;</span><br><span class="line">Feed feed1.ffm</span><br><span class="line">Format swf</span><br><span class="line">VideoFrameRate 2</span><br><span class="line">VideoIntraOnly</span><br><span class="line">NoAudio</span><br><span class="line">&lt;/Stream&gt;</span><br></pre></td></tr></table></figure>

<p><strong>三、启动 FFserver</strong></p>
<p>在终端中运行: <code>sudo ffserver -f /etc/ffserver.conf</code> 启动 ffserver.</p>
<p><strong>四、启动 ffmpeg</strong></p>
<p>本例中，以 ffmpeg 作为实时摄像头采集输入.在命令行中输入:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./ffmpeg -f video4linux2 -r 25 -i /dev/video0 /tmp/feed1.ffm</span></span><br></pre></td></tr></table></figure>

<p>如果有音频设备，则采集音频的命令如下:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./ffmpeg -f oss -i /dev/dsp -f video4linux2 -r 25 -i /dev/video0 /tmp/feed1.ffm</span></span><br></pre></td></tr></table></figure>

<p>(音频格式参数自己配置)</p>
<p><strong>五、播放流媒体</strong></p>
<p>在浏览器中输入 <a href="">http://127.0.0.1:8090/test1.mpg</a> 即可播放音乐.</p>
<p>在终端中输入 <code>ffplay http://localhost:8090/test.swf</code> 可播放流媒体.</p>
<h1 id="FFmpeg-架构"><a href="#FFmpeg-架构" class="headerlink" title="FFmpeg 架构"></a>FFmpeg 架构</h1><h2 id="FFmpeg-文件结构"><a href="#FFmpeg-文件结构" class="headerlink" title="FFmpeg 文件结构"></a>FFmpeg 文件结构</h2><p><img data-src="/images/imageFFmpeg/Thor/markdown-table.png" alt="markdown table"></p>
<table>
    <tr>
        <td>目录</td>
        <td>文件</td>
        <td>简要说明</td>
    </tr>
    <tr>
        <td rowspan="14">
            <font style="color:red;font-weight:bold;">libavformat</font> </br></br>
            主要存放ffmpeg</br>
            支持的各种编解码</br>
            器的实现及ffmpeg</br>
            编解码功能相关的</br>
            数据结构定义及函</br>
            数定义和声明
        </td>
           <td >allcodecs.c</td>
        <td>简单的注册类函数</td>
    </tr>
    <tr>
        <td >avcodec.h</td>
        <td >编解码相关结构体定义和函数原型声明</td>
    </tr>
    <tr>
        <td >dsputil.c</td>
        <td >限幅数组初始化</td>
    </tr>
    <tr>
        <td >dsputil.h</td>
        <td >限幅数组声明</td>
    </tr>
    <tr>
        <td >imgconvert.c</td>
        <td >颜色空间转换相关函数实现</td>
    </tr>
    <tr>
        <td >imgconvert_template.h</td>
        <td >颜色空间转换相关结构体定义和函数声明</td>
    </tr>
    <tr>
        <td >utils_codec.c </td>
        <td >一些解码相关的工具类函数的实现</td>
    </tr>
    <tr>
        <td >mpeg4audio.c</td>
        <td >mpeg4 音频编解码器的函数实现</td>
    </tr>
    <tr>
        <td >mpeg4audio.h</td>
        <td >mpeg4 音频编解码器的函数声明</td>
    </tr>
    <tr>
        <td >mpeg4data.h</td>
        <td >mpeg4 音视频编解码器的公用的函数声明及数据结构定义</td>
    </tr>
    <tr>
        <td >mpeg4video.c </td>
        <td >mpeg4 视频编解码器的函数实现</td>
    </tr>
    <tr>
        <td >mpeg4video.h</td>
        <td >mpeg4 视频编解码器的函数的声明及先关数据结构的定义</td>
    </tr>
    <tr>
        <td >mpeg4videodec.c</td>
        <td >mpeg4 视频解码器的函数实现</td>
    </tr>
    <tr>
        <td >mpeg4videoenc.c</td>
        <td >mpeg4 视频编码器的函数实现</td>
    </tr>
    <tr>
        <td rowspan="14">
            <font style="color:red;font-weight:bold;">libavformat</font> </br></br>
            主要存放ffmpeg支</br>
            持的各种媒体格式</br>
            MUXER/DEMUXER</br>
            和数据流协议的定</br>
            义和实现文件以及</br>
            ffmpeg解复用相</br>
            关的数据结构及</br>
            函数定
        </td>
           <td >allformats.c</td>
        <td>简单注册类函数</td>
    </tr>
    <tr>
        <td >avformat.h</td>
        <td >文件和媒体格式相关函数声明和数据结构定义</td>
    </tr>
    <tr>
        <td >avio.c</td>
        <td >无缓冲 IO 相关函数实现</td>
    </tr>
    <tr>
        <td >avio.h</td>
        <td >无缓冲 IO 相关结构定义和函数声明</td>
    </tr>
    <tr>
        <td >aviobuf.c</td>
        <td >有缓冲数据 IO 相关函数实现</td>
    </tr>
    <tr>
        <td >cutils.c</td>
        <td >简单的字符串操作函数</td>
    </tr>
    <tr>
        <td >utils_format.c</td>
        <td >文件和媒体格式相关的工具函数的实现</td>
    </tr>
    <tr>
        <td >file.c</td>
        <td >文件 io 相关函数</td>
    </tr>
    <tr>
        <td >......</td>
        <td >其他相关媒体流 IO 的函数和数据结构实现文件。如：rtsp、http 等。</td>
    </tr>
    <tr>
        <td >avi.c</td>
        <td >AVI 格式的相关函数定西</td>
    </tr>
    <tr>
        <td >avi.h</td>
        <td >AVI 格式的相关函数声明及数据结构定义</td>
    </tr>
    <tr>
        <td >avidec.c</td>
        <td >AVI 格式 DEMUXER 相关函数定义</td>
    </tr>
    <tr>
        <td >avienc.c</td>
        <td >AVI 格式 MUXER 相关函数定义</td>
    </tr>
    <tr>
        <td >......</td>
        <td >其他媒体格式的 muxer/demuxer 相关函数及数据结构定义和声明文件</td>
    </tr>
    <tr>
        <td rowspan="14">
            <font style="color:red;font-weight:bold;">libavutil</font> </br></br>
            主要存放ffmpeg</br>
            工具类函数的定义
        </td>
           <td >avutil.h</td>
        <td>简单的像素格式宏定义</td>
    </tr>
    <tr>
        <td >bswap.h</td>
        <td >简单的大小端转换函数的实现</td>
    </tr>
    <tr>
        <td >commom.h</td>
        <td >公共的宏定义和简单函数的实现</td>
    </tr>
<tr>
        <td >mathematics.c</td>
        <td >数学运算函数实现</td>
    </tr>
    <tr>
        <td >rational.h</td>
        <td >分数相关表示的函数实现</td>
    </tr>
</table>


<h2 id="I-O-模块分析"><a href="#I-O-模块分析" class="headerlink" title="I\O 模块分析"></a>I\O 模块分析</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>ffmpeg 项目的数据 IO 部分主要是在 libavformat 库中实现，某些对于内存的操作部分在 libavutil 库中。数据 IO 是基于文件格式（Format）以及文件传输协议(Protocol)的，与具体的编解码标准无关。</p>
<p>ffmpeg 工程转码时数据 IO 层次关系如图所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/ffmpeg%E8%BD%AC%E7%A0%81%E6%95%B0%E6%8D%AEIO%E6%B5%81%E7%A8%8B.png" alt="ffmpeg转码数据IO流程"></p>
<p>对于上面的数据 IO 流程，具体可以用下面的例子来说明，我们从一个 http 服务器获取音视频数据，格式是 flv 的，需要通过转码后变成 avi 格式，然后通过 udp 协议进行发布。其过程就如下所示：</p>
<ul>
<li>读入 http 协议数据流，根据 http 协议获取真正的文件数据（去除无关报文信息）；</li>
<li>根据 flv 格式对数据进行解封装；</li>
<li>读取帧进行转码操作；</li>
<li>按照目标格式 avi 进行封装；</li>
<li>通过 udp 协议发送出去。</li>
</ul>
<h3 id="相关数据结构介绍"><a href="#相关数据结构介绍" class="headerlink" title="相关数据结构介绍"></a>相关数据结构介绍</h3><p>在 libavformat 库中与数据 IO 相关的数据结构主要有 URLProtocol、URLContext、ByteIOContext、AVFormatContext 等，各结构之间的关系如图所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/libavformat%E5%BA%93%E4%B8%ADIO%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB.png" alt="libavformat库中IO相关数据结构之间的关系"></p>
<p><strong>1、URLProtocol 结构</strong></p>
<p>表示广义的输入文件，该结构体提供了很多的功能函数，每一种广义的输入文件（如：file、pipe、tcp、rtp 等等）对应着一个 <code>URLProtocol</code> 结构，在 <code>av_register_all()</code> 中将该结构体初始化为一个链表，表头为 <code>avio.c</code> 里的 <code>URLProtocol *first_protocol = NULL;</code> 保存所有支持的输入文件协议，该结构体的定义如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">URLProtocol</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *name;</span><br><span class="line">    <span class="type">int</span> (*url_open)(URLContext *h， <span class="type">const</span> <span class="type">char</span> *url， <span class="type">int</span> flags);</span><br><span class="line">    <span class="type">int</span> (*url_read)(URLContext *h， <span class="type">unsigned</span> <span class="type">char</span> *buf， <span class="type">int</span> size);</span><br><span class="line">    <span class="type">int</span> (*url_write)(URLContext *h， <span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> *buf， <span class="type">int</span> size);</span><br><span class="line">    <span class="type">int64_t</span> (*url_seek)(URLContext *h， <span class="type">int64_t</span> pos， <span class="type">int</span> whence);</span><br><span class="line">    <span class="type">int</span> (*url_close)(URLContext *h);</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">URLProtocol</span> *<span class="title">next</span>;</span></span><br><span class="line">    <span class="type">int</span> (*url_read_pause)(URLContext *h， <span class="type">int</span> pause);</span><br><span class="line">    <span class="type">int64_t</span> (*url_read_seek)(URLContext *h， <span class="type">int</span> stream_index，</span><br><span class="line">                             <span class="type">int64_t</span> timestamp， <span class="type">int</span> flags);</span><br><span class="line">    <span class="type">int</span> (*url_get_file_handle)(URLContext *h);</span><br><span class="line">    <span class="type">int</span> priv_data_size;</span><br><span class="line">    <span class="type">const</span> AVClass *priv_data_class;</span><br><span class="line">    <span class="type">int</span> flags;</span><br><span class="line">    <span class="type">int</span> (*url_check)(URLContext *h， <span class="type">int</span> mask);</span><br><span class="line">&#125; URLProtocol;</span><br></pre></td></tr></table></figure>

<p>注意到，<code>URLProtocol</code> 是一个链表结构，这是为了协议的统一管理，ffmpeg 项目中将所有的用到的协议都存放在一个全局变量 first_protocol 中，协议的注册是在 <code>av_register_all</code> 中完成的，新添加单个协议可以调用 <code>av_register_protocol2</code> 函数实现。而协议的注册就是将具体的协议对象添加至 <code>first_protocol</code> 链表的末尾。</p>
<p><code>URLProtocol</code> 在各个具体的文件协议中有一个具体的实例，如在 file 协议中定义为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">URLProtocol ff_file_protocol = &#123;</span><br><span class="line">    .name = <span class="string">&quot;file&quot;</span>，</span><br><span class="line">	.url_open = file_open，</span><br><span class="line">	.url_read = file_read，</span><br><span class="line">    .url_write = file_write，</span><br><span class="line">    .url_seek = file_seek，</span><br><span class="line">    .url_close = file_close，</span><br><span class="line">    .url_get_file_handle = file_get_handle，</span><br><span class="line">    .url_check = file_check，</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>2、URLContext 结构</strong></p>
<p>URLContext 提供了与当前打开的具体的文件协议（URL）相关数据的描述，在该结构中定义了指定当前 URL（即 filename 项）所要用到的具体的 URLProtocol，即：提供了一个在 URLprotocol 链表中找到具体项的依据，此外还有一些其它的标志性的信息，如 flags， is_streamed 等。它可以看成某一种协议的载体。其结构定义如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">URLContext</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">const</span> AVClass *av_class; <span class="comment">///&lt; information for av_log(). Set by url_open().</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">URLProtocol</span> *<span class="title">prot</span>;</span></span><br><span class="line">    <span class="type">int</span> flags;</span><br><span class="line">    <span class="type">int</span> is_streamed; <span class="comment">/**&lt; true if streamed (no seek possible)， default = false */</span></span><br><span class="line">    <span class="type">int</span> max_packet_size; <span class="type">void</span> *priv_data;</span><br><span class="line">    <span class="type">char</span> *filename; <span class="comment">/**&lt; specified URL */</span></span><br><span class="line">    <span class="type">int</span> is_connected;</span><br><span class="line">&#125; URLContext;</span><br></pre></td></tr></table></figure>

<p>那么 ffmpeg 依据什么信息初始化 URLContext？然后又是如何初始化 URLContext的呢？</p>
<p>在打开一个 URL 时，全局函数 ffurl_open 会根据 filename 的前缀信息来确定 URL所使用的具体协议，并为该协议分配好资源，再调用 ffurl_connect 函数打开具体协议，即调用协议的 url_open，调用关系如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">av_open_input_file</span><span class="params">(AVFormatContext **ic_ptr， <span class="type">const</span> <span class="type">char</span> *filename，</span></span><br><span class="line"><span class="params"> 						AVInputFormat *fmt，<span class="type">int</span> buf_size，AVFormatParameters *ap)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">avformat_open_input</span><span class="params">(AVFormatContext **ps ， <span class="type">const</span> <span class="type">char</span> *filename ，</span></span><br><span class="line"><span class="params">						AVInputFormat *fmt， AVDictionary **options)</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">init_input</span><span class="params">(AVFormatContext *s， <span class="type">const</span> <span class="type">char</span> *filename)</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">avio_open</span><span class="params">(AVIOContext **s， <span class="type">const</span> <span class="type">char</span> *filename， <span class="type">int</span> flags)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">ffurl_open</span><span class="params">(URLContext **puc， <span class="type">const</span> <span class="type">char</span> *filename， <span class="type">int</span> flags)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">ffurl_alloc</span><span class="params">(URLContext **puc， <span class="type">const</span> <span class="type">char</span> *filename， <span class="type">int</span> flags)</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">url_alloc_for_protocol</span><span class="params">(URLContext **puc， <span class="keyword">struct</span> URLProtocol *up，</span></span><br><span class="line"><span class="params">									<span class="type">const</span> <span class="type">char</span> *filename， <span class="type">int</span> flags)</span></span><br></pre></td></tr></table></figure>


<p>浅蓝色部分的函数完成了 URLContext 函数的初始化，URLContext 使 ffmpeg 外所暴露的接口是统一的，而不是对于不同的协议用不同的函数，这也是面向对象思维的体现。在此结构中还有一个值得说的是 priv_data 项，这是结构的一个可扩展项，具体协议可以根据需要添加相应的结构，将指针保存在这就行。</p>
<p><strong>3、AVIOContext 结构</strong></p>
<p>AVIOContext（即：ByteIOContext）是由 URLProtocol 和 URLContext 结构扩展而来，也是 ffmpeg 提供给用户的接口，它将以上两种不带缓冲的读取文件抽象为带缓冲的读取和写入，为用户提供带缓冲的读取和写入操作。数据结构定义如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> *buffer; <span class="comment">/**&lt; Start of the buffer. */</span></span><br><span class="line">    <span class="type">int</span> buffer_size; <span class="comment">/**&lt; Maximum buffer size */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> *buf_ptr; <span class="comment">/**&lt; Current position in the buffer */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> *buf_end;</span><br><span class="line">    <span class="type">void</span> *opaque; <span class="comment">//关联 URLContext</span></span><br><span class="line">    <span class="type">int</span> (*read_packet)(<span class="type">void</span> *opaque， <span class="type">uint8_t</span> *buf， <span class="type">int</span> buf_size);</span><br><span class="line">    <span class="type">int</span> (*write_packet)(<span class="type">void</span> *opaque， <span class="type">uint8_t</span> *buf， <span class="type">int</span> buf_size);</span><br><span class="line">    <span class="type">int64_t</span> (*seek)(<span class="type">void</span> *opaque， <span class="type">int64_t</span> offset， <span class="type">int</span> whence);</span><br><span class="line">    <span class="type">int64_t</span> pos;</span><br><span class="line">    <span class="type">int</span> must_flush;</span><br><span class="line">    <span class="type">int</span> eof_reached; <span class="comment">/**&lt; true if eof reached */</span></span><br><span class="line">    <span class="type">int</span> write_flag; <span class="comment">/**&lt; true if open for writing */</span></span><br><span class="line">    <span class="type">int</span> max_packet_size;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> checksum;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> *checksum_ptr;</span><br><span class="line">    <span class="type">unsigned</span> <span class="title function_">long</span> <span class="params">(*update_checksum)</span><span class="params">(<span class="type">unsigned</span> <span class="type">long</span> checksum， <span class="type">const</span> <span class="type">uint8_t</span> *buf，</span></span><br><span class="line"><span class="params">                                     <span class="type">unsigned</span> <span class="type">int</span> size)</span>;</span><br><span class="line">    <span class="type">int</span> error;</span><br><span class="line">    <span class="type">int</span> (*read_pause)(<span class="type">void</span> *opaque， <span class="type">int</span> pause);</span><br><span class="line">  	<span class="type">int64_t</span> (*read_seek)(<span class="type">void</span> *opaque， <span class="type">int</span> stream_index，<span class="type">int64_t</span> timestamp，<span class="type">int</span> flags);</span><br><span class="line">    <span class="type">int</span> seekable;</span><br><span class="line">&#125; AVIOContext;</span><br></pre></td></tr></table></figure>

<p>结构简单的为用户提供读写容易实现的四个操作，read_packet write_packet read_pause read_seek，极大的方便了文件的读取，四个函数在加了缓冲机制后被中转到，URLContext 指向的实际的文件协议读写函数中。</p>
<p>下面给出 0.8 版本中是如何将 AVIOContext 的读写操作中转到实际文件中的。</p>
<p>在 avio_open（）函数中调用了 ffio_fdopen（）函数完成了对 AVIOContex 的初始化，其调用过程如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">avio_open</span><span class="params">(AVIOContext **s， <span class="type">const</span> <span class="type">char</span> *filename， <span class="type">int</span> flags)</span></span><br><span class="line"><span class="title function_">ffio_fdopen</span><span class="params">(s， h)</span>; <span class="comment">//h 是 URLContext 指针</span></span><br><span class="line">ffio_init_context(*s， buffer， buffer_size，h-&gt;flags &amp; AVIO_FLAG_WRITE， h，</span><br><span class="line">					(<span class="type">void</span>*)ffurl_read，(<span class="type">void</span>*)ffurl_write，(<span class="type">void</span>*)ffurl_seek)</span><br></pre></td></tr></table></figure>

<p>函数调用完成了对 AVIOContext 的初始化，在初始化的过程中，将AVIOContext 的 read_packet 、 write_packet 、 seek 分别初始化为： ffurl_read ffurl_write ffurl_seek ， 而这三个函数又将具体的读写操作中转为：</p>
<p><code>h-&gt;prot-&gt;url_read、h-&gt;prot-&gt;url_write、h-&gt;prot-&gt;url_seek</code>，另外两个变量初始化时也被相应的中转，如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">(*s)-&gt;read_pause = (<span class="type">int</span> (*)(<span class="type">void</span> *， <span class="type">int</span>))h-&gt;prot-&gt;url_read_pause;</span><br><span class="line">(*s)-&gt;read_seek = (<span class="type">int64_t</span> (*)(<span class="type">void</span> *， <span class="type">int</span>， <span class="type">int64_t</span>， <span class="type">int</span>))h-&gt;prot-&gt;url_read_seek;</span><br></pre></td></tr></table></figure>

<p>所以，可以简要的描述为：AVIOContext 的接口口是加了缓冲后的 URLProtocol 的函数接口。</p>
<p>在 aviobuf.c 中定义了一系列关于 ByteIOContext 这个结构体的函数，如下</p>
<p><strong>put_xxx 系列：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">put_byte</span><span class="params">(ByteIOContext *s， <span class="type">int</span> b)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">put_buffer</span><span class="params">(ByteIOContext *s， <span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> *buf， <span class="type">int</span> size)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">put_le64</span><span class="params">(ByteIOContext *s， <span class="type">uint64_t</span> val)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">put_be64</span><span class="params">(ByteIOContext *s， <span class="type">uint64_t</span> val)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">put_le32</span><span class="params">(ByteIOContext *s， <span class="type">unsigned</span> <span class="type">int</span> val)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">put_be32</span><span class="params">(ByteIOContext *s， <span class="type">unsigned</span> <span class="type">int</span> val)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">put_le24</span><span class="params">(ByteIOContext *s， <span class="type">unsigned</span> <span class="type">int</span> val)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">put_be24</span><span class="params">(ByteIOContext *s， <span class="type">unsigned</span> <span class="type">int</span> val)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">put_le16</span><span class="params">(ByteIOContext *s， <span class="type">unsigned</span> <span class="type">int</span> val)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">put_be16</span><span class="params">(ByteIOContext *s， <span class="type">unsigned</span> <span class="type">int</span> val)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">put_tag</span><span class="params">(ByteIOContext *s， <span class="type">const</span> <span class="type">char</span> *tag)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>get_xxx 系列：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">get_buffer</span><span class="params">(ByteIOContext *s， <span class="type">unsigned</span> <span class="type">char</span> *buf， <span class="type">int</span> size)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">get_partial_buffer</span><span class="params">(ByteIOContext *s， <span class="type">unsigned</span> <span class="type">char</span> *buf， <span class="type">int</span> size)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">get_byte</span><span class="params">(ByteIOContext *s)</span>;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> <span class="title function_">get_le24</span><span class="params">(ByteIOContext *s)</span>;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> <span class="title function_">get_le32</span><span class="params">(ByteIOContext *s)</span>;</span><br><span class="line"><span class="type">uint64_t</span> <span class="title function_">get_le64</span><span class="params">(ByteIOContext *s)</span>;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> <span class="title function_">get_le16</span><span class="params">(ByteIOContext *s)</span>;</span><br><span class="line"><span class="type">char</span> *<span class="title function_">get_strz</span><span class="params">(ByteIOContext *s， <span class="type">char</span> *buf， <span class="type">int</span> maxlen)</span>;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> <span class="title function_">get_be16</span><span class="params">(ByteIOContext *s)</span>;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> <span class="title function_">get_be24</span><span class="params">(ByteIOContext *s)</span>;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> <span class="title function_">get_be32</span><span class="params">(ByteIOContext *s)</span>;</span><br><span class="line"><span class="type">uint64_t</span> <span class="title function_">get_be64</span><span class="params">(ByteIOContext *s)</span>;</span><br></pre></td></tr></table></figure>

<p>这些 put_xxx 及 get_xxx 函数是用于从缓冲区 buffer 中写入或者读取若干个字节，对于读写整型数据，分别实现了大端和小端字节序的版本。而缓冲区 buffer 中的数据又是从何而来呢，有一个 fill_buffer 的函数，在 fill_buffer 函数中调用了ByteIOContext 结构的 read_packet 接口。在调用 put_xxx 函数时，并没有直接进行真<br>正写入操作，而是先缓存起来，直到缓存达到最大限制或调用 flush_buffer 函数对缓冲区进行刷新，才使用 write_packet 函数进行写入操作。</p>
<h2 id="Demuxer-和-muxer-模块分析"><a href="#Demuxer-和-muxer-模块分析" class="headerlink" title="Demuxer 和 muxer 模块分析"></a>Demuxer 和 muxer 模块分析</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><p>ffmpeg 的 demuxer 和 muxer 接口分别在 AVInputFormat 和 AVOutputFormat 两个结构体中实现，在 av_register_all()函数中将两个结构分别静态初始化为两个链表，保存在全局变量：first_iformat 和 first_oformat 两个变量中。在 FFmpeg 的文件转换或者打开过程中，首先要做的就是根据传入文件和传出文件的后缀名匹配合适的 demuxer和 muxer，得到合适的信息后保存在 AVFormatContext 中。</p>
<h3 id="相关数据结构介绍-1"><a href="#相关数据结构介绍-1" class="headerlink" title="相关数据结构介绍"></a>相关数据结构介绍</h3><p><strong>1、AVInputFormat</strong></p>
<p>该结构被称为 demuxer，是音视频文件的一个解封装器，它的定义如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">AVInputFormat</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *name;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *long_name;</span><br><span class="line">    <span class="type">int</span> priv_data_size; <span class="comment">//具体文件容器格式对应的 Context 的大小，如：avicontext</span></span><br><span class="line">    <span class="type">int</span> (*read_probe)(AVProbeData *);</span><br><span class="line">    <span class="type">int</span> (*read_header)(<span class="keyword">struct</span> AVFormatContext *，AVFormatParameters *ap);</span><br><span class="line">    <span class="type">int</span> (*read_packet)(<span class="keyword">struct</span> AVFormatContext *， AVPacket *pkt);</span><br><span class="line">    <span class="type">int</span> (*read_close)(<span class="keyword">struct</span> AVFormatContext *);</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> FF_API_READ_SEEK</span></span><br><span class="line">    attribute_deprecated <span class="title function_">int</span> <span class="params">(*read_seek)</span><span class="params">(<span class="keyword">struct</span> AVFormatContext *，</span></span><br><span class="line"><span class="params">                               <span class="type">int</span> stream_index，<span class="type">int64_t</span> timestamp，<span class="type">int</span> flags)</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    <span class="type">int64_t</span> (*read_timestamp)(<span class="keyword">struct</span> AVFormatContext *s， <span class="type">int</span> stream_index，</span><br><span class="line">                              <span class="type">int64_t</span> *pos， <span class="type">int64_t</span> pos_limit);</span><br><span class="line">    <span class="type">int</span> flags;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *extensions;</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line">    <span class="type">int</span> (*read_play)(<span class="keyword">struct</span> AVFormatContext *);</span><br><span class="line">    <span class="type">int</span> (*read_pause)(<span class="keyword">struct</span> AVFormatContext *);</span><br><span class="line">    <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">AVCodecTag</span> * <span class="title">const</span> *<span class="title">codec_tag</span>;</span></span><br><span class="line">    <span class="type">int</span> (*read_seek2)(<span class="keyword">struct</span> AVFormatContext *s， <span class="type">int</span> stream_index， <span class="type">int64_t</span> min_ts，</span><br><span class="line">                      <span class="type">int64_t</span> ts， <span class="type">int64_t</span> max_ts， <span class="type">int</span> flags);</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> FF_API_OLD_METADATA2</span></span><br><span class="line">    <span class="type">const</span> AVMetadataConv *metadata_conv;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    <span class="type">const</span> AVClass *priv_class; <span class="comment">///&lt; AVClass for the private context</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">AVInputFormat</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125; AVInputFormat;</span><br></pre></td></tr></table></figure>

<p>对于不同的文件格式要实现相应的函数接口，这样每一种格式都有一个对应的demuxer，所有的 demuxer 都保存在全局变量 first_iformat 中。红色表示提供的接口。</p>
<p><strong>2、AVOutputFormat</strong></p>
<p>该结构与 AVInputFormat 类似也是在编译时静态初始化，组织为一个链表结构，提供了多个 muxer 的函数接口。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> (*write_header)(<span class="keyword">struct</span> AVFormatContext *);</span><br><span class="line"><span class="type">int</span> (*write_packet)(<span class="keyword">struct</span> AVFormatContext *， AVPacket *pkt);</span><br><span class="line"><span class="type">int</span> (*write_trailer)(<span class="keyword">struct</span> AVFormatContext *);</span><br></pre></td></tr></table></figure>

<p>对于不同的文件格式要实现相应的函数接口，这样每一种格式都有一个对应的 muxer，所有的 muxer 都保存在全局变量 first_oformat 中。</p>
<p><strong>3、AVFormatContext</strong></p>
<p>该结构表示与程序当前运行的文件容器格式使用的上下文，着重于所有文件容器共有的属性，在运行时动态的确定其值，是 AVInputFormat 和 AVOutputFormat 的载体，但同一个结构对象只能使 AVInputFormat 和 AVOutputFormat 中的某一个有效。每一个输入和输出文件，都在</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> AVFormatContext *output_files[MAX_FILES] 和</span><br><span class="line"><span class="type">static</span> AVFormatContext *input_files[MAX_FILES];</span><br></pre></td></tr></table></figure>

<p>定义的指针数组全局变量中有对应的实体。对于输入和输出，因为共用的是同一个结构体，所以需要分别对该结构中如下定义的 iformat 或 oformat 成员赋值。在转码时读写数据是通过 AVFormatContext 结构进行的。定义如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">AVFormatContext</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">const</span> AVClass *av_class;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">AVInputFormat</span> *<span class="title">iformat</span>;</span> <span class="comment">//指向具体的 demuxer</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">AVOutputFormat</span> *<span class="title">oformat</span>;</span> <span class="comment">//指向具体的 muxer</span></span><br><span class="line">    <span class="type">void</span> *priv_data; <span class="comment">//具体文件容器格式的 Context 如：avicontext</span></span><br><span class="line">    AVIOContext *pb; <span class="comment">//广义的输入输出；</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> nb_streams; <span class="comment">//本次打开的文件容器中流的数量</span></span><br><span class="line">    AVStream **streams; <span class="comment">//每个流的相关描述</span></span><br><span class="line">    <span class="type">char</span> filename[<span class="number">1024</span>]; <span class="comment">// input or output filename */</span></span><br><span class="line">    <span class="type">int64_t</span> timestamp;</span><br><span class="line">    <span class="type">int</span> ctx_flags;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">AVPacketList</span> *<span class="title">packet_buffer</span>;</span></span><br><span class="line">    ......</span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">CodecID</span> <span class="title">video_codec_id</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">CodecID</span> <span class="title">audio_codec_id</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">CodecID</span> <span class="title">subtitle_codec_id</span>;</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> max_index_size;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> max_picture_buffer;</span><br><span class="line">    ......</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">AVPacketList</span> *<span class="title">raw_packet_buffer</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">AVPacketList</span> *<span class="title">raw_packet_buffer_end</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">AVPacketList</span> *<span class="title">packet_buffer_end</span>;</span></span><br><span class="line">    ......</span><br><span class="line">&#125; AVFormatContext;</span><br></pre></td></tr></table></figure>

<p>注释部分的成员是 AVFormatContext 中最为重要的成员变量，这些变量的初始化是ffmpeg 能正常工作的必要条件，那么，AVFormatContext 是如何被初始化的呢？文件的格式是如何被探测到的呢？</p>
<p>首先我们来探讨：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AVInputFormat</span> *<span class="title">iformat</span>;</span> <span class="comment">//指向具体的 demuxer</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AVOutputFormat</span> *<span class="title">oformat</span>;</span> <span class="comment">//指向具体的 muxer</span></span><br><span class="line"><span class="type">void</span> *priv_data; <span class="comment">//具体文件容器格式的 Context 如：avicontext</span></span><br></pre></td></tr></table></figure>


<p>三个成员的初始化。</p>
<p>在 avformat_open_input() 函数中调用了 init_input() 函数，然后用调用了av_probe_input_format（）函数实现了对 AVFormatContext 的初始化。其调用关系如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">av_open_input_file</span><span class="params">(AVFormatContext **ic_ptr， <span class="type">const</span> <span class="type">char</span> *filename，</span></span><br><span class="line"><span class="params">						AVInputFormat *fmt，<span class="type">int</span> buf_size，AVFormatParameters *ap)</span>；</span><br><span class="line"><span class="type">int</span> <span class="title function_">avformat_open_input</span><span class="params">(ic_ptr， filename， fmt， &amp;opts)</span>；</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">init_input</span><span class="params">(s， filename)</span>；</span><br><span class="line"><span class="title function_">av_probe_input_format</span><span class="params">(&amp;pd， <span class="number">0</span>)</span>；</span><br><span class="line"><span class="title function_">av_probe_input_format</span> <span class="params">(AVProbeData *pd， <span class="type">int</span> is_opened， <span class="type">int</span> *score_max)</span></span><br></pre></td></tr></table></figure>

<p>函数用途是根据传入的 probe data 数据，依次调用每个 demuxer 的 read_probe 接口，来进行该 demuxer 是否和传入的文件内容匹配的判断。与 demuxer 的匹配不同，muxer的匹配是调用 guess_format 函数，根据 main( ) 函数的 argv 里的输出文件后缀名来进行的。至此完成了前三个重要成员的初始化，具体的做法就不在深入分析。</p>
<p>下面分别给出 av_read_frame 函数以及 av_write_frame 函数的基本流程。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">av_read_frame</span><span class="params">(AVFormatContext *s， AVPacket *pkt)</span>;</span><br><span class="line">	-&gt; av_read_frame_internel</span><br><span class="line">		-&gt; av_read_packet</span><br><span class="line">			-&gt; iformat-&gt;read_packet（在实现中会丢弃多余信息）</span><br><span class="line">				-&gt; av_get_packet</span><br><span class="line">					-&gt; get_xxx</span><br><span class="line">					</span><br><span class="line"><span class="type">int</span> <span class="title function_">av_write_frame</span><span class="params">(AVFormatContext *s， AVPacket *pkt)</span>;</span><br><span class="line">	-&gt; oformat-&gt;write_packet</span><br><span class="line">		-&gt; put_xxx</span><br></pre></td></tr></table></figure>

<p>由上可见，对 AVFormatContext 的读写操作最终是通过 ByteIOContext 来实现的，这样，AVFormatContext 与 URLContext 就由 ByteIOContext 结构联系到一起了。在AVFormat 结构体中有一个 packet 的缓冲区 raw_packet_buffer，是 AVPackList 的指针类型，av_read_packet 函数将读到的包添加至 raw_packet_buffer 链表末尾。</p>
<h2 id="Decoder-Encoder-模块"><a href="#Decoder-Encoder-模块" class="headerlink" title="Decoder&#x2F;Encoder 模块"></a>Decoder&#x2F;Encoder 模块</h2><h3 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h3><p>编解码模块主要包含的数据结构为：AVCodec、AVCodecContext 每一个解码类型都会有自己的 Codec 静态对像，Codec 的 int priv_data_size 记录该解码器上下文的结构大小，如 MsrleContext 。这些都是编译时确定的，程序运行时通过avcodec_register_all()将所有的解码器注册成一个链表。在 av_open_input_stream()函数中调用 AVInputFormat 的 read_header()中读文件头信息时，会读出数据流的CodecID，即确定了他的解码器 Codec。</p>
<p>在 main()函数中除了解析传入参数并初始化 demuxer 与 muxer 的 parse_options( )函数以外，其他的功能都是在 av_encode( )函数里完成的。在 libavcodec\utils.c 中有如下二个函数 : <code>AVCodec *avcodec_find_encoder(enum CodecID id)</code> 和 <code>AVCodec *avcodec_find_decoder(enum CodecID id)</code> 他们的功能就是根据传入的 CodecID，找到匹配的 encoder 和 decoder。在 av_encode( )函数的开头，首先初始化各个 AVInputStream和 AVOutputStream，然后分别调用上述二个函数，并将匹配上的 encoder 与 decoder 分<br>别保存在:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">AVInputStream-&gt;AVStream *st-&gt;AVCodecContext *codec-&gt;<span class="class"><span class="keyword">struct</span> <span class="title">AVCodec</span> *<span class="title">codec</span></span></span><br><span class="line"><span class="class">与 <span class="title">AVOutputStream</span>-&gt;</span>AVStream *st-&gt;AVCodecContext *codec-&gt;<span class="class"><span class="keyword">struct</span> <span class="title">AVCodec</span> *<span class="title">codec</span> 变量。</span></span><br></pre></td></tr></table></figure>

<h3 id="相关数据结构的初始化"><a href="#相关数据结构的初始化" class="headerlink" title="相关数据结构的初始化"></a>相关数据结构的初始化</h3><p>AVCodecContext 结构</p>
<p>AVCodecContext 保存 AVCodec 指针和与 codec 相关数据，如 video 的 width、height，audio 的 sample rate 等。</p>
<p>AVCodecContext 中的 codec_type，codec_id 二个变量对于 encoder&#x2F;decoder 的匹配来说，最为重要。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CodecType</span> <span class="title">codec_type</span>;</span> <span class="comment">/* see CODEC_TYPE_xxx */</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CodecID</span> <span class="title">codec_id</span>;</span> <span class="comment">/* see CODEC_ID_xxx */</span></span><br></pre></td></tr></table></figure>

<p>如上所示，codec_type 保存的是 CODEC_TYPE_VIDEO，CODEC_TYPE_AUDIO 等媒体类型，codec_id 保存的是 CODEC_ID_FLV1，CODEC_ID_VP6F 等编码方式。</p>
<p>以支持 flv 格式为例，在前述的 av_open_input_file(…… ) 函数中，匹配到正确的 AVInputFormat demuxer 后，通过 av_open_input_stream( )函数中调用 AVInputFormat的 read_header 接口来执行 flvdec.c 中的 flv_read_header( )函数。flv_read_header( )函数内，根据文件头中的数据，创建相应的视频或音频 AVStream，并设置 AVStream 中AVCodecContext 的正确的 codec_type 值。codec_id 值是在解码过程。flv_read_packet( )<br>函数执行时根据每一个 packet 头中的数据来设置的。</p>
<p>以 avidec 为例 有如下初始化，我们主要知道的就是 code_id 和 code_type 该字段关联具体的解码器，和解码类型（音视频或 subtitle）</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (st-&gt;codec-&gt;stream_codec_tag == AV_RL32(<span class="string">&quot;Axan&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    st-&gt;codec-&gt;codec_id = CODEC_ID_XAN_DPCM;</span><br><span class="line">    st-&gt;codec-&gt;codec_tag = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (amv_file_format)</span><br><span class="line">&#123;</span><br><span class="line">    st-&gt;codec-&gt;codec_id = CODEC_ID_ADPCM_IMA_AMV;</span><br><span class="line">    ast-&gt;dshow_block_align = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">    	<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> AVMEDIA_TYPE_SUBTITLE:</span><br><span class="line">        st-&gt;codec-&gt;codec_type = AVMEDIA_TYPE_SUBTITLE;</span><br><span class="line">        st-&gt;request_probe= <span class="number">1</span>;</span><br><span class="line">    	<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        st-&gt;codec-&gt;codec_type = AVMEDIA_TYPE_DATA;</span><br><span class="line">        st-&gt;codec-&gt;codec_id= CODEC_ID_NONE;</span><br><span class="line">        st-&gt;codec-&gt;codec_tag= <span class="number">0</span>;</span><br><span class="line">        avio_skip(pb， size);</span><br></pre></td></tr></table></figure>


<h2 id="其他重要数据结构的初始化"><a href="#其他重要数据结构的初始化" class="headerlink" title="其他重要数据结构的初始化"></a>其他重要数据结构的初始化</h2><h3 id="AVStream"><a href="#AVStream" class="headerlink" title="AVStream"></a>AVStream</h3><p>AVStream 结构保存与数据流相关的编解码器，数据段等信息。比较重要的有如下二个成员：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">AVCodecContext *codec; <span class="comment">/**&lt; codec context */</span></span><br><span class="line"><span class="type">void</span> *priv_data;</span><br></pre></td></tr></table></figure>

<p>其中 codec 指针保存的就是上节所述的 encoder 或 decoder 结构。priv_data 指针保存的是和具体编解码流相关的数据，如下代码所示，在 ASF 的解码过程中，priv_data保存的就是 ASFStream 结构的数据。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">AVStream *st;</span><br><span class="line">ASFStream *asf_st;</span><br><span class="line">......</span><br><span class="line">st-&gt;priv_data = asf_st;</span><br></pre></td></tr></table></figure>


<h3 id="AVInputStream-AVOutputStream"><a href="#AVInputStream-AVOutputStream" class="headerlink" title="AVInputStream&#x2F; AVOutputStream"></a>AVInputStream&#x2F; AVOutputStream</h3><p>根据输入和输出流的不同，前述的 AVStream 结构都是封装在 AVInputStream 和AVOutputStream 结构中，在 av_encode( )函数中使用。AVInputStream 中还保存的有与时间有关的信息。AVOutputStream 中还保存有与音视频同步等相关的信息。</p>
<h3 id="AVPacket"><a href="#AVPacket" class="headerlink" title="AVPacket"></a>AVPacket</h3><p>AVPacket 结构定义如下，其是用于保存读取的 packet 数据。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">AVPacket</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int64_t</span> pts; <span class="comment">///&lt; presentation time stamp in time_base units</span></span><br><span class="line">    <span class="type">int64_t</span> dts; <span class="comment">///&lt; decompression time stamp in time_base units</span></span><br><span class="line">    <span class="type">uint8_t</span> *data;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line">    <span class="type">int</span> stream_index;</span><br><span class="line">    <span class="type">int</span> flags;</span><br><span class="line">    <span class="type">int</span> duration; <span class="comment">///&lt; presentation duration in time_base units</span></span><br><span class="line">    <span class="type">void</span> (*destruct)(<span class="keyword">struct</span> AVPacket *);</span><br><span class="line">    <span class="type">void</span> *priv;</span><br><span class="line">    <span class="type">int64_t</span> pos; <span class="comment">///&lt; byte position in stream， -1 if unknown</span></span><br><span class="line">&#125; AVPacket;</span><br></pre></td></tr></table></figure>

<p>在 av_encode() 函数中，调用 AVInputFormat 的 <code>(*read_packet)(struct AVFormatContext *， AVPacket *pkt)</code> 接口，读取输入文件的一帧数据保存在当前输入 AVFormatContext 的 AVPacket 成员中。</p>
<h1 id="FFmpeg-裁剪说明"><a href="#FFmpeg-裁剪说明" class="headerlink" title="FFmpeg 裁剪说明"></a>FFmpeg 裁剪说明</h1><p>本文对 ffmpeg 进行裁剪采用的是配置所需的接口，不需要的不配置，而不是采用修改源代码的方式。</p>
<h2 id="configure-参数"><a href="#configure-参数" class="headerlink" title="configure 参数"></a>configure 参数</h2><h3 id="通用选项-1"><a href="#通用选项-1" class="headerlink" title="通用选项"></a>通用选项</h3><p>在 linux 下进入终端，找到 ffmpeg 解压位置，输入如下命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure –<span class="built_in">help</span></span></span><br></pre></td></tr></table></figure>

<p>得到 configure 的基本选项参数，其并没有中文解释。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--help 显示此帮助信息|print this message</span><br><span class="line">--log[=FILE|yes|no] 记录测试并输出到 config.err 文件|log tests and output to FILE [config.err]</span><br><span class="line">--prefix=PREFIX 安装程序到指定目录（默认/usr/local）|install in PREFIX [/usr/local]</span><br><span class="line">--libdir=DIR 安装库到指定目录（默认 prefix/lib）|install libs in DIR [PREFIX/lib]</span><br><span class="line">--shlibdir=DIR 指定共享库路径（默认 prefix/lib）|install shared libs in DIR [PREFIX/lib]</span><br><span class="line">--incdir=DIR 指定 includes 路径（默认 prefix/include/ffmpeg）|install includes in DIR[PREFIX/include/ffmpeg]</span><br><span class="line">--mandir=DIR 指定 man page 路径（默认 prefix/man）install man page in DIR [PREFIX/man]</span><br><span class="line">--enable-mp3lame 启用 mp3 编码 libmp3lame（默认关闭）enable MP3 encoding via libmp3lame[default=no]</span><br><span class="line">--enable-libogg 启用 ogg 支持 libogg（默认关闭）enable Ogg support via libogg [default=no]</span><br><span class="line">--enable-vorbis 启用 Vorbis 支持 libvorbis（默认关闭）enable Vorbis support via libvorbis [default=no]</span><br><span class="line">--enable-faad 启用 faad 支持 libfaad（默认关闭）enable FAAD support via libfaad [default=no]</span><br><span class="line">--enable-faadbin 启用 faad 运行时链接支持（默认关闭）build FAAD support with runtime linking[default=no]</span><br><span class="line">--enable-faac 启用 faac 支持 libfaac（默认关闭）enable FAAC support via libfaac [default=no]</span><br><span class="line">--enable-libgsm 启用 GSM 支持 libgsm（默认关闭）enable GSM support via libgsm [default=no]</span><br><span class="line">--enable-xvid 启用 xvid 支持 xvidcore（默认关闭）enable XviD support via xvidcore [default=no]</span><br><span class="line">--enable-x264 启 用 H.264 编码（默认关闭） enable H.264 encoding via x264 [default=no]</span><br><span class="line">--enable-mingw32 启用 MinGW 本地/交叉 win 环境编译|enable MinGW native/cross Windows compile</span><br><span class="line">--enable-mingwce 启用 MinGW 本地/交叉 winCE 环境编译 enable MinGW native/cross WinCE compile</span><br><span class="line">--enable-a52 启用 A52 支持（默认关闭）enable GPLed A52 support [default=no]</span><br><span class="line">--enable-a52bin 启用运行时打开 liba52.so.0（默认关闭）open liba52.so.0 at runtime [default=no]</span><br><span class="line">--enable-dts 启用 DTS 支持（默认关闭）enable GPLed DTS support [default=no]</span><br><span class="line">--enable-pp 启用后加工支持（默认关闭）enable GPLed postprocessing support [default=no]</span><br><span class="line">--enable-static 构建静态库（默认启用）build static libraries [default=yes]</span><br><span class="line">--disable-static 禁止构建静态库（默认关闭）do not build static libraries [default=no]</span><br><span class="line">--enable-shared 构建共享库（默认关闭）build shared libraries [default=no]</span><br><span class="line">--disable-shared 禁止构建共享库（默认启用）do not build shared libraries [default=yes]</span><br><span class="line">--enable-amr_nb 启用 amr_nb float 音频编解码器|enable amr_nb float audio codec</span><br><span class="line">--enable-amr_nb-fixed 启用 fixed amr_nb codec | use fixed point for amr-nb codec</span><br><span class="line">--enable-amr_wb 启用 amr_wb float 音频编解码器|enable amr_wb float audio codec</span><br><span class="line">--enable-amr_if2 启用 amr_wb IF2 音频编解码器|enable amr_wb IF2 audio codec</span><br><span class="line">--enable-sunmlib 启用 Sun medialib（默认关闭） | use Sun medialib [default=no]</span><br><span class="line">--enable-pthreads 启用 pthreads（多线程）（默认关闭）use pthreads [default=no]</span><br><span class="line">--enable-dc1394 启用 libdc1394、libraw1394 抓取 IIDC-1394（默认关闭）enable IIDC-1394 grabbing using libdc1394 and libraw1394 [default=no]</span><br><span class="line">--enable-swscaler 启用计数器支持？（默认关闭）software scaler support [default=no]</span><br><span class="line">--enable-avisynth 允许读取 AVISynth 脚本本件（默认关闭）allow reading AVISynth script files [default=no]</span><br><span class="line">--enable-gpl 允许使用 GPL（默认关闭）allow use of GPL code， the resulting libav* and ffmpeg will be under GPL [default=no] Advanced options (experts only): 高级选项参数（供专业人员使用）</span><br><span class="line">--source-path=PATH 源码的路径（当前为/root/flv/ffmpeg）| path to source code [/root/flv/ffmpeg]</span><br><span class="line">--cross-prefix=PREFIX 为编译工具指定路径 | use PREFIX for compilation tools []</span><br><span class="line">--cross-compile 假定使用了交叉编译 | assume a cross-compiler is used</span><br><span class="line">--cc=CC 指定使用何种 C 编译器（默认 gcc）use C compiler CC [gcc]</span><br><span class="line">--make=MAKE 使用特定的 make | use specified make [make]</span><br><span class="line">--extra-cflags=ECFLAGS 添加 ECFLAGS 到 CFLAGS | add ECFLAGS to CFLAGS []</span><br><span class="line">--extra-ldflags=ELDFLAGS 添加 ELDFLAGS 到 LDFLAGS（默认-Wl，--as-needed）| add ELDFLAGS to LDFLAGS [ -Wl，--as-needed]</span><br><span class="line">--extra-libs=ELIBS 添加 ELIBS | add ELIBS []</span><br><span class="line">--build-suffix=SUFFIX 为专用程序添加后缀 | suffix for application specific build []</span><br><span class="line">--arch=ARCH 选择机器架构（默认 x86）select architecture [x86]</span><br><span class="line">--cpu=CPU 选用最低的 cpu（影响指令的选择，可以在老 CPU 上出错）</span><br><span class="line">	| selects the minimum cpu required (affects instruction selection， may crash on older CPUs)</span><br><span class="line">--powerpc-perf-enable 启用 PPC 上面的性能报告（需要启用 PMC）enable performance report on PPC (requires enabling PMC)</span><br><span class="line">--disable-mmx 禁用 MMX | disable MMX usage</span><br><span class="line">--disable-armv5te 禁用 armv5te | disable armv5te usage</span><br><span class="line">--disable-iwmmxt 禁用 iwmmxt | disable iwmmxt usage</span><br><span class="line">--disable-altivec 禁用 AltiVec | disable AltiVec usage</span><br><span class="line">--disable-audio-oss 禁用 OSS 音频支持（默认启用）disable OSS audio support [default=no]</span><br><span class="line">--disable-audio-beos 禁用 BeOS 音频支持（默认启用）disable BeOS audio support [default=no]</span><br><span class="line">--disable-v4l 禁用 video4linux 提取（默认启用）disable video4linux grabbing [default=no]</span><br><span class="line">--disable-v4l2 禁用 video4linux2 提取（默认启用）disable video4linux2 grabbing [default=no]</span><br><span class="line">--disable-bktr 禁用 bktr 视频提取（默认启用）disable bktr video grabbing [default=no]</span><br><span class="line">--disable-dv1394 禁用 DV1394 提取（默认启用）disable DV1394 grabbing [default=no]</span><br><span class="line">--disable-network 禁用网络支持（默认支持）disable network support [default=no]</span><br><span class="line">--disable-ipv6 禁用 ipv6 支持（默认支持）disable ipv6 support [default=no]</span><br><span class="line">--disable-zlib 禁用 zlib（默认支持）disable zlib [default=no]</span><br><span class="line">--disable-simple_idct 禁用 simple IDCT 例程（默认启用）disable simple IDCT routines [default=no]</span><br><span class="line">--disable-vhook 禁用 video hooking 支持 | disable video hooking support</span><br><span class="line">--enable-gprof enable profiling with gprof [no]</span><br><span class="line">--disable-debug 禁用调试符号 | disable debugging symbols</span><br><span class="line">--disable-opts 禁用编译器最优化 | disable compiler optimizations</span><br><span class="line">--disable-mpegaudio-hp 启用更快的解码 MPEG 音频（但精确度较低）（默认禁用）faster (but less accurate) MPEG audio decoding [default=no]</span><br><span class="line">--disable-protocols 禁用 I/O 协议支持（默认启用）disable I/O protocols support [default=no]</span><br><span class="line">--disable-ffserver 禁用生成 ffserver | disable ffserver build</span><br><span class="line">--disable-ffplay 禁用生成 ffplay | disable ffplay build</span><br><span class="line">--enable-small 启用优化文件尺寸大小（牺牲速度）optimize for size instead of speed</span><br><span class="line">--enable-memalign-hack 启用模拟内存排列，由内存调试器干涉？ | emulate memalign，interferes with memory debuggers</span><br><span class="line">--disable-strip 禁用剥离可执行程序和共享库 | disable stripping of executables and shared libraries</span><br><span class="line">--disable-encoder=NAME 禁用 XX 编码器 | disables encoder NAME</span><br><span class="line">--enable-encoder=NAME 启用 XX 编码器 | enables encoder NAME</span><br><span class="line">--disable-decoder=NAME 禁用 XX 解码器 | disables decoder NAME</span><br><span class="line">--enable-decoder=NAME 启用 XX 解码器 | enables decoder NAME</span><br><span class="line">--disable-encoders 禁用所有编码器 | disables all encoders</span><br><span class="line">--disable-decoders 禁用所有解码器 | disables all decoders</span><br><span class="line">--disable-muxer=NAME 禁用 XX 混音器 | disables muxer NAME</span><br><span class="line">--enable-muxer=NAME 启用 XX 混音器 | enables muxer NAME</span><br><span class="line">--disable-muxers 禁用所有混音器 | disables all muxers</span><br><span class="line">--disable-demuxer=NAME 禁用 XX 解轨器 | disables demuxer NAME</span><br><span class="line">--enable-demuxer=NAME 启用 XX 解轨器 | enables demuxer NAME</span><br><span class="line">--disable-demuxers 禁用所有解轨器 | disables all demuxers</span><br><span class="line">--enable-parser=NAME 启用 XX 剖析器 | enables parser NAME</span><br><span class="line">--disable-parser=NAME 禁用 XX 剖析器 | disables parser NAME</span><br><span class="line">--disable-parsers 禁用所有剖析器 | disables all parsers</span><br></pre></td></tr></table></figure>

<h3 id="基本选项介绍"><a href="#基本选项介绍" class="headerlink" title="基本选项介绍"></a>基本选项介绍</h3><p>以下为配置 ffmpeg 的基本选项，其含义如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--cache-file=FILE</span><br></pre></td></tr></table></figure>

<p>configure 会在你的系统上测试存在的特性(或者 bug!)。为了加速随后进行的配置，测试的结果会存储在一个 cache file 里。当 configure 到每个子树里都有 configure 脚本的复杂的源码树时，一个很好的 cache file 的存在会有很大帮助。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--help</span><br></pre></td></tr></table></figure>

<p>输出帮助信息。即使是有经验的用户也偶尔需要使用使用 <code>--help</code> 选项，因为一个复杂的项目会包含附加的选项。例如，GCC 包里的 configure 脚本就包含了允许你控制是否生成和在 GCC 中使用 GNU 汇编器的选项。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--no-create</span><br></pre></td></tr></table></figure>

<p>configure 中的一个主要函数会制作输出文件。此选项阻止 configure 生成这个文件。你可以认为这是一种演习(dry run)，尽管缓存(cache)仍然被改写了。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--quiet</span><br><span class="line">--silent</span><br></pre></td></tr></table></figure>

<p>当 configure 进行他的测试时，会输出简要的信息来告诉用户正在作什么。这样做是因为 configure 可能会比较慢，没有这种输出的话用户将会被扔在一旁疑惑正在发生什么。使用这两个选项中的任何一个都会把你扔到一旁。(译注：这两句话比较有意思，原文是这样的：If there was no such output， the user would be left wondering what is happening. By using this option， you too can be left wondering!)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--version</span><br></pre></td></tr></table></figure>

<p>打印用来产生 ‘configure’ 脚本的 Autoconf 的版本号。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--prefix=PEWFIX</span><br></pre></td></tr></table></figure>

<p><code>--prefix</code> 是最常用的选项。制作出的 Makefile 会查看随此选项传递的参数，当一个包在安装时可以彻底的重新安置他的结构独立部分。举一个例子，当安装一个包，例如说Emacs，下面的命令将会使 Emacs Lisp file 被安装到”&#x2F;opt&#x2F;gnu&#x2F;share”：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure --prefix=/opt/gnu</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--exec-prefix=EPREFIX</span><br></pre></td></tr></table></figure>

<p>与 <code>--prefix</code> 选项类似，但是他是用来设置结构倚赖的文件的安装位置。编译好的 emacs 二进制文件就是这样一个问件。如果没有设置这个选项的话，默认使用的选项值将被设为和 <code>--prefix</code> 选项值一样。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--bindir=DIR</span><br></pre></td></tr></table></figure>

<p>指定二进制文件的安装位置。这里的二进制文件定义为可以被用户直接执行的程序。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--sbindir=DIR</span><br></pre></td></tr></table></figure>

<p>指定超级二进制文件的安装位置。这是一些通常只能由超级用户执行的程序。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--libexecdir=DIR</span><br></pre></td></tr></table></figure>

<p>指定可执行支持文件的安装位置。与二进制文件相反，这些文件从来不直接由用户执行，但是可以被上面提到的二进制文件所执行。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--datadir=DIR</span><br></pre></td></tr></table></figure>

<p>指定通用数据文件的安装位置。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--sysconfdir=DIR</span><br></pre></td></tr></table></figure>

<p>指定在单个机器上使用的只读数据的安装位置。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--sharedstatedir=DIR</span><br></pre></td></tr></table></figure>

<p>指定可以在多个机器上共享的可写数据的安装位置。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--localstatedir=DIR</span><br></pre></td></tr></table></figure>

<p>指定只能单机使用的可写数据的安装位置。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--libdir=DIR</span><br></pre></td></tr></table></figure>

<p>指定库文件的安装位置。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--includedir=DIR</span><br></pre></td></tr></table></figure>

<p>指定 C 头文件的安装位置。其他语言如 C++的头文件也可以使用此选项。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--oldincludedir=DIR</span><br></pre></td></tr></table></figure>

<p>指定为除 GCC 外编译器安装的 C 头文件的安装位置。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--infodir=DIR</span><br></pre></td></tr></table></figure>

<p>指定 Info 格式文档的安装位置。Info 是被 GNU 工程所使用的文档格式。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--mandir=DIR</span><br></pre></td></tr></table></figure>

<p>指定手册页的安装位置。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--srcdir=DIR</span><br></pre></td></tr></table></figure>

<p>这个选项对安装没有作用。他会告诉 configure 源码的位置。一般来说不用指定此选项，因为 configure 脚本一般和源码文件在同一个目录下。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--program-prefix=PREFIX</span><br></pre></td></tr></table></figure>

<p>指定将被加到所安装程序的名字上的前缀。例如，使用 <code>--program-prefix=g</code> 来 configure一个名为 tar 的程序将会使安装的程序被命名为 gtar。当和其他的安装选项一起使用时，这个选项只有当他被 Makefile.in 文件使用时才会工作。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--program-suffix=SUFFIX</span><br></pre></td></tr></table></figure>

<p>指定将被加到所安装程序的名字上的后缀。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--program-transform-name=PROGRAM</span><br></pre></td></tr></table></figure>

<p>这里的 PROGRAM 是一个 sed 脚本。当一个程序被安装时，他的名字将经过 <code>sed -e PROGRAM</code> 来产生安装的名字。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--build=BUILD</span><br></pre></td></tr></table></figure>

<p>指定软件包安装的系统平台。如果没有指定，默认值将是 <code>--host</code> 选项的值。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--host=HOST</span><br></pre></td></tr></table></figure>

<p>指定软件运行的系统平台。如果没有指定，将会运行 config.guess 来检测。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--target=GARGET</span><br></pre></td></tr></table></figure>

<p>指定软件面向(target to)的系统平台。这主要在程序语言工具如编译器和汇编器上下文中起作用。如果没有指定，默认将使用 <code>--host</code> 选项的值。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--disable-FEATURE</span><br></pre></td></tr></table></figure>

<p>一些软件包可以选择这个选项来提供为大型选项的编译时配置，例如使用 Kerberos认证系统或者一个实验性的编译器最优配置。如果默认是提供这些特性，可以使用 <code>--disable-FEATURE</code> 来禁用它，这里 FEATURE 是特性的名字。例如：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure --disable-gui</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--enable-FEATURE[=ARG]</span><br></pre></td></tr></table></figure>

<p>相反的，一些软件包可能提供了一些默认被禁止的特性，可以使用 <code>--enable-FEATURE</code> 来起用它。这里 FEATURE 是特性的名字。一个特性可能会接受一个可选的参数。例如：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure --enable-buffers=128</span></span><br></pre></td></tr></table></figure>

<p><code>--enable-FEATURE=no</code> 与上面提到的 <code>--disable-FEATURE</code> 是同义的。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--with-PACKAGE[=ARG]</span><br></pre></td></tr></table></figure>

<p>在自由软件社区里，有使用已有软件包和库的优秀传统。当用 configure 来配置一个源码树时，可以提供其他已经安装的软件包的信息。例如，倚赖于 Tcl 和 Tk 的 BLT 器件工具包。要配置 BLT，可能需要给 configure 提供一些关于我们把 Tcl 和 Tk 装的何处的信息：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure --with-tcl=/usr/local --with-tk=/usr/local</span></span><br></pre></td></tr></table></figure>

<p><code>--with-PACKAGE=no</code> 与下面将提到的 <code>--without-PACKAGE</code> 是同义的。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--without-PACKAGE</span><br></pre></td></tr></table></figure>

<p>有时候你可能不想让你的软件包与系统已有的软件包交互。例如，你可能不想让你的新编译器使用 GNU ld。通过使用这个选项可以做到这一点：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure --without-gnu-ld</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--x-includes=DIR</span><br></pre></td></tr></table></figure>

<p>这个选项是 <code>--with-PACKAGE</code> 选项的一个特例。在 Autoconf 最初被开发出来时，流行使用 configure 来作为 Imake 的一个变通方法来制作运行于 X 的软件。–x-includes 选项提供了向 configure 脚本指明包含 X11 头文件的目录的方法。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--x-libraries=DIR</span><br></pre></td></tr></table></figure>

<p>类似的，<code>--x-libraries</code> 选项提供了向 configure 脚本指明包含 X11 库的目录的方法。</p>
<h2 id="FFmpeg-裁剪优化实例"><a href="#FFmpeg-裁剪优化实例" class="headerlink" title="FFmpeg 裁剪优化实例"></a>FFmpeg 裁剪优化实例</h2><p>对 ffmpeg 的裁剪优化主要是对 ffplay 的裁剪优化，我们制定的需求是能播放测试文件（视频为 mpeg4 编码、音频为 mp2 编码，且为 AVI 复用），根据需求，找到相应的选项，或禁用或启用，最后的命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure --disable-yasm --disable-parsers --disable-decoders</span></span><br><span class="line">--disable-encoders --enable-decoder=mpeg4 --disable-muxers</span><br><span class="line">--disable-demuxers --enable-demuxer=avi --enable-decoder=mp2</span><br><span class="line">--disable-protocols --enable-protocol=file --disable-filters --disable-bsfs</span><br></pre></td></tr></table></figure>

<p>其中针对需求，</p>
<ul>
<li><p><code>--disable-parsers</code> 为禁用所有解析器，</p>
</li>
<li><p><code>--disable-decoders</code> 为禁用所有解码器，</p>
</li>
<li><p><code>--disable-encoders</code> 为禁用所有编码器，</p>
</li>
<li><p><code>--enable-decoder=mpeg4</code> 为启用 mpeg4 的编码器 ， </p>
</li>
<li><p><code>--disable-muxers</code> 为禁用所有复用， </p>
</li>
<li><p><code>--disable-demuxers</code> 为禁用所有解复用，</p>
</li>
<li><p><code>--enable-demuxer=avi</code> 为启用 AVI 复用，</p>
</li>
<li><p><code>--enable-decoder=mp2</code> 为启用 mp2 编码，</p>
</li>
<li><p><code>--disable-protocols</code> 为禁用所有协议， </p>
</li>
<li><p><code>--enable-protocol=file</code> 为启用文件协议，</p>
</li>
<li><p><code>--disable-filters</code> 为禁用所有过滤器，</p>
</li>
<li><p><code>--disable-bsfs</code> 为禁用所有码流过滤器。</p>
</li>
</ul>
<p>通过以上配置之后，编译，安装，就生成了我们要求的 ffplay，其大小为 1.8M（1864012 字节）。此次是在 linux 环境下进行的，在以后的配置中，如果需要其他的什么编码器或什么的，按照选项要求进行配置即可。</p>
<h2 id="裁剪优化前后文件比较"><a href="#裁剪优化前后文件比较" class="headerlink" title="裁剪优化前后文件比较"></a>裁剪优化前后文件比较</h2><p>前面已经提到本次裁剪优化的内容。经过裁剪优化之后，对其文件夹进行比较，主要有 3 个地方不同，分别是 config.fate、config.h 和 config.mak。在 config.fate 中，其记录的是配置命令，由于前后两次配置命令不同，故相应内容也不同。在config.h 中，其主要是根据配置命令来改变相应预定义的值，达到裁剪优化之效果。在 config.mak 中，改变的也是配置命令中需要改变的选项。</p>
<h1 id="FFmpeg-SDK"><a href="#FFmpeg-SDK" class="headerlink" title="FFmpeg SDK"></a>FFmpeg SDK</h1><p>FFMpeg 中比较重要的函数以及数据结构如下：</p>
<p><strong>1、数据结构：</strong></p>
<p><strong>(1) AVFormatContext</strong></p>
<p><strong>(2) AVOutputFormat</strong></p>
<p><strong>(3) AVInputFormat</strong></p>
<p><strong>(4) AVCodecContext</strong></p>
<p><strong>(5) AVCodec</strong></p>
<p><strong>(6) AVFrame</strong></p>
<p><strong>(7) AVPacket</strong></p>
<p><strong>(8) AVPicture</strong></p>
<p>(9) AVStream</p>
<p><strong>2、初始化函数：</strong></p>
<p>(1) av_register_all()</p>
<p>(2) avcodec_open()</p>
<p>(3) avcodec_close()</p>
<p>(4) av_open_input_file()</p>
<p>(5) av_find_input_format()</p>
<p>(6) av_find_stream_info()</p>
<p>(7) av_close_input_file()</p>
<p><strong>3、音视频编解码函数：</strong></p>
<p>(1) avcodec_find_decoder()</p>
<p>(2) avcodec_alloc_frame()</p>
<p>(3) avpicture_get_size()</p>
<p>(4) avpicture_fill()</p>
<p>(5) img_convert()</p>
<p>(6) avcodec_alloc_context()</p>
<p>(7) avcodec_decode_video()</p>
<p>(8) av_free_packet()</p>
<p>(9) av_free()</p>
<p><strong>4、文件操作：</strong></p>
<p>(1) avnew_steam()</p>
<p>(2) av_read_frame()</p>
<p>(3) av_write_frame()</p>
<p>(4) dump_format()</p>
<p><strong>5、其他函数：</strong></p>
<p>(1) avpicture_deinterlace()</p>
<p>(2) ImgReSampleContext() </p>
<h1 id="FFmpeg-编译"><a href="#FFmpeg-编译" class="headerlink" title="FFmpeg 编译"></a>FFmpeg 编译</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> http://source.ffmpeg.org/git/ffmpeg.git ffmpeg</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> ffmpeg</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure --prefix=./install --enable-gpl --enable-nonfree \</span></span><br><span class="line"><span class="language-bash">--enable-libass --enable-libfdk-aac --enable-libfreetype \</span></span><br><span class="line"><span class="language-bash">--enable-libmp3lame --enable-libopus --enable-libtheora \</span></span><br><span class="line"><span class="language-bash">--enable-libvorbis --enable-libvpx --enable-libx264 --enable-libxvid \</span></span><br><span class="line"><span class="language-bash">--enable-shared --enable-static</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make &amp;&amp; sudo make install</span></span><br></pre></td></tr></table></figure>

<p>注意：在执行各自的 configure 创建编译配置文件时，最好都强制带上 –enable-static 和 –enable-shared 参数以确保生成静态库和动态库。另外因为是在 Mac OS X 环境下编译，因此在各自编译完后，都要执行 sudo make install，安装到默认的 &#x2F;usr&#x2F;local 目录下相应位置（Mac OS X 下不推荐 &#x2F;usr），因此不要在 configure 时指定 –prefix，就用默认的 &#x2F;usr&#x2F;local 目录前缀即可。完成编译安装后，FFmpeg 的头文件将会复制到 &#x2F;usr&#x2F;local&#x2F;include 下面相应位置，静态库及动态库会被复制到 &#x2F;usr&#x2F;local&#x2F;lib 目录下，FFmpeg 的可执行程序（ffmpeg、ffprobe、ffserver）会被复制到 &#x2F;usr&#x2F;local&#x2F;bin 目录下，这样 FFmpeg 的开发环境就构建好了。</p>
]]></content>
      <categories>
        <category>FFmpeg</category>
      </categories>
      <tags>
        <tag>FFmpeg</tag>
      </tags>
  </entry>
  <entry>
    <title>FFmpeg 源代码结构（编解码解析）</title>
    <url>/2019/05/25/FFmpeg/FFmpeg%E6%BA%90%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84note/</url>
    <content><![CDATA[<blockquote>
<p>特别说明，此文参考至<a href="https://blog.csdn.net/leixiaohua1020/article/details/44220151">雷神笔记</a>，做一个备忘录。</p>
</blockquote>
<h2 id="FFmpeg源代码结构图-解码"><a href="#FFmpeg源代码结构图-解码" class="headerlink" title="FFmpeg源代码结构图 - 解码"></a>FFmpeg源代码结构图 - 解码</h2><p>下图表明了 FFmpeg 在解码一个视频的时候的函数调用流程。为了保证结构清晰，其中仅列出了最关键的函数，剔除了其它不是特别重要的函数。</p>
<span id="more"></span>

<p><img data-src="/images/imageFFmpeg/Thor/FFmpeg%E6%BA%90%E7%A0%81API%E7%BB%93%E6%9E%84%E5%9B%BE-%E8%A7%A3%E7%A0%81.png" alt="FFmpeg源代码结构图 - 解码"></p>
<p>下面解释一下图中关键标记的含义。</p>
<h3 id="函数背景色"><a href="#函数背景色" class="headerlink" title="函数背景色"></a>函数背景色</h3><p>函数在图中以方框的形式表现出来。不同的背景色标志了该函数不同的作用：</p>
<ul>
<li>粉红色背景函数：FFmpeg 的 API函数。</li>
<li>白色背景的函数：FFmpeg 的内部函数。</li>
<li>黄色背景的函数：URLProtocol 结构体中的函数，包含处理协议（Protocol）的功能。</li>
<li>绿色背景的函数：AVInputFormat 结构体中的函数，包含处理封装格式（Format）的功能。</li>
<li>蓝色背景的函数：AVCodec 结构体中的函数，包含了编解码器（Codec）的功能。</li>
</ul>
<blockquote>
<p>PS：URLProtocol，AVInputFormat，AVCodec在FFmpeg开始运行并且注册完组件之后，都会分别被连接成一个个的链表。因此实际上是有很多的URLProtocol，AVInputFormat，AVCodec的。图中画出了解码一个输入协议是“文件”（其实就是打开一个文件。“文件”也被当做是一种广义的协议），封装格式为FLV，视频编码格式是H.264的数据的函数调用关系。</p>
</blockquote>
<h3 id="区域"><a href="#区域" class="headerlink" title="区域"></a>区域</h3><p>整个架构图可以分为以下几个区域：</p>
<ul>
<li><strong>左边区域——架构函数区域</strong>：这些函数并不针对某一特定的视频格式。</li>
<li><strong>右上方黄色区域——协议处理函数区域</strong>：不同的协议（RTP，RTMP，FILE）会调用不同的协议处理函数。</li>
<li><strong>右边中间绿色区域——封装格式处理函数区域</strong>：不同的封装格式（MKV，FLV，MPEGTS，AVI）会调用不同的封装格式处理函数。</li>
<li><strong>右边下方蓝色区域——编解码函数区域</strong>：不同的编码标准（HEVC，H.264，MPEG2）会调用不同的编解码函数。</li>
</ul>
<h3 id="箭头线"><a href="#箭头线" class="headerlink" title="箭头线"></a>箭头线</h3><p>为了把调用关系表示的更明显，图中的箭头线也使用了不同的颜色：</p>
<ul>
<li><p>黑色箭头线：标志了函数之间的调用关系。</p>
</li>
<li><p>红色的箭头线：标志了解码的流程。</p>
</li>
<li><p>其他颜色的箭头线：标志了函数之间的调用关系。其中：</p>
<ul>
<li>调用 URLProtocol 结构体中的函数用<strong>黄色箭头线</strong>标识；</li>
<li>调用 AVInputFormat 结构体中的函数用<strong>绿色箭头线</strong>标识；</li>
<li>调用 AVCodec 结构体中的函数用<strong>蓝色箭头线</strong>标识。</li>
</ul>
</li>
</ul>
<h3 id="函数所在的文件"><a href="#函数所在的文件" class="headerlink" title="函数所在的文件"></a>函数所在的文件</h3><p>每个函数旁边标识了它所在的文件的路径。</p>
<p>此外，还有一点需要注意的是，一些 API 函数内部也调用了另一些API函数。也就是说，API函数并不一定全部都调用FFmpeg的内部函数，他也有可能调用其他的API函数。例如从图中可以看出来， <code>avformat_close_input()</code> 调用了 <code>avformat_free_context()</code> 和 <code>avio_close()</code>。这些在内部代码中被调用的API函数也标记为粉红色。</p>
<h3 id="函数调用关系"><a href="#函数调用关系" class="headerlink" title="函数调用关系"></a>函数调用关系</h3><p>下面简单列出几个区域中函数之间的调用关系（函数之间的调用关系使用缩进的方式表现出来）。详细的函数分析可以参考相关的《FFmpeg源代码分析》系列文章。</p>
<h4 id="左边区域（FFmpeg架构函数）"><a href="#左边区域（FFmpeg架构函数）" class="headerlink" title="左边区域（FFmpeg架构函数）"></a>左边区域（FFmpeg架构函数）</h4><p><strong><font color=red>1.  av_register_all()【函数简单分析】</font>&gt;</strong></p>
<ul>
<li><strong><font color=red>1)  avcodec_register_all()</font></strong><ul>
<li><strong>(a) REGISTER_HWACCEL()</strong></li>
<li><strong>(b) REGISTER_ENCODER()</strong></li>
<li><strong>(c) REGISTER_DECODER()</strong></li>
<li><strong>(d) REGISTER_PARSER()</strong></li>
<li><strong>(e) REGISTER_BSF()</strong></li>
</ul>
</li>
<li><strong>2)  REGISTER_MUXER()</strong></li>
<li><strong>3)  REGISTER_DEMUXER()</strong></li>
<li><strong>4)  REGISTER_PROTOCOL()</strong></li>
</ul>
<p><strong><font color=red>2.  avformat_alloc_context()【函数简单分析】</font></strong></p>
<ul>
<li><p><strong>1) av_malloc(sizeof(AVFormatContext))</strong></p>
</li>
<li><p><strong>2) avformat_get_context_defaults()</strong></p>
<ul>
<li><strong>(a) av_opt_set_defaults()</strong></li>
</ul>
</li>
</ul>
<p><strong><font color=red>3.  avformat_open_input()【函数简单分析】</font></strong></p>
<ul>
<li><strong>1) init_input()</strong><ul>
<li><strong><font color=red>(a) avio_open2()【函数简单分析】</font></strong><ul>
<li><strong>a) ffurl_open()</strong><ul>
<li><strong>i. ffurl_alloc()</strong><ul>
<li><strong>url_find_protocol()</strong></li>
<li><strong>url_alloc_for_protocol()</strong></li>
</ul>
</li>
<li><strong>ii. ffurl_connect()</strong><ul>
<li><strong><font color=#FFC000>URLProtocol-&gt;url_open()</font></strong></li>
</ul>
</li>
</ul>
</li>
<li><strong>b) ffio_fdopen()</strong><ul>
<li><strong>i. av_malloc(buffer_size)</strong></li>
<li><strong>ii. <font color=red>avio_alloc_context()</font></strong><ul>
<li><strong>av_mallocz(sizeof(AVIOContext))</strong></li>
<li><strong>ffio_init_context()</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong><font color=red>(b) av_probe_input_buffer2()</font></strong><ul>
<li><strong><font color=red>a) avio_read()</font></strong><ul>
<li><strong>i.  <font color=#009900>AVInputFormat-&gt;read_packet()</font></strong></li>
</ul>
</li>
<li><strong><font color=red>b) av_probe_input_format2()</font></strong></li>
<li><strong><font color=red>c) av_probe_input_format3()</font></strong><ul>
<li><strong>i. <font color=red>av_iformat_next()</font></strong></li>
<li><strong>ii. <font color=red>av_match_name()</font></strong></li>
<li><strong>iii. <font color=red>av_match_ext()</font></strong></li>
<li><strong>iv. <font color=#009900>AVInputFormat-&gt;read_probe()</font></strong></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>2) <font color=#009900>AVInputFormat-&gt;read_header()</font></strong></li>
</ul>
<p><strong><font color=red>4. avformat_find_stream_info()【函数简单分析】</font></strong></p>
<ul>
<li><strong>1) find_decoder()</strong><ul>
<li><strong><font color=red>(a) avcodec_find_decoder()</font></strong></li>
</ul>
</li>
<li><strong><font color=red>2) avcodec_open2()</font></strong></li>
<li><strong>3) read_frame_internal()</strong></li>
<li><strong>4) try_decode_frame()</strong><ul>
<li><strong><font color=red>(a) avcodec_decode_video2()</font></strong></li>
</ul>
</li>
<li><strong><font color=red>5) avcodec_close()</font></strong></li>
<li><strong>6) estimate_timings()</strong><ul>
<li><strong>(a)  estimate_timings_from_pts()</strong></li>
<li><strong>(b)  estimate_timings_from_bit_rate()</strong></li>
<li><strong>(c)  update_stream_timings()</strong></li>
</ul>
</li>
</ul>
<p><strong><font color=red>5. avcodec_find_decoder()【函数简单分析】</font></strong></p>
<ul>
<li><strong>1) find_encdec()</strong></li>
</ul>
<p><strong><font color=red>6. avcodec_open2()【函数简单分析】</font></strong></p>
<ul>
<li><strong><font color=#3072C2>1) AVCodec-&gt;init()</font></strong></li>
</ul>
<p><strong><font color=red>7. av_read_frame()【函数简单分析】</font></strong></p>
<ul>
<li><p><strong>1) read_from_packet_buffer()</strong></p>
</li>
<li><p><strong>2) read_frame_internal()</strong></p>
<ul>
<li><strong>(a) ff_read_packet()</strong><ul>
<li><strong><font color=#009900>a) AVInputFormat-&gt;read_packet()</font></strong></li>
</ul>
</li>
<li><strong>(b) parse_packet()</strong><ul>
<li><strong>a) av_parser_parse2()</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong><font color=red>8. avcodec_decode_video2()【函数简单分析】</font></strong></p>
<ul>
<li><p><strong>1) av_packet_split_side_data()</strong></p>
</li>
<li><p><strong>2) <font color=#3072C2>AVCodec</font>-&gt; <font color=red>decode()</font></strong></p>
</li>
<li><p><strong>3) av_frame_set_pkt_pos()</strong></p>
</li>
<li><p><strong>4) av_frame_set_best_effort_timestamp()</strong></p>
</li>
</ul>
<p><strong><font color=red>9. avcodec_close()【函数简单分析】</font></strong></p>
<ul>
<li><strong><font color=#3072C2>1) AVCodec-&gt;close()</font></strong></li>
</ul>
<p><strong><font color=red>10. avformat_close_input()【函数简单分析】</font></strong></p>
<ul>
<li><p><strong><font color=#009900>1) AVInputFormat-&gt;read_close()</font></strong></p>
</li>
<li><p><strong>2) avformat_free_context()</strong></p>
<ul>
<li><strong>(a) ff_free_stream()</strong></li>
</ul>
</li>
<li><p><strong>3) avio_close()</strong></p>
<ul>
<li><strong>(a) avio_flush()</strong><ul>
<li><strong>a) flush_buffer()</strong></li>
</ul>
</li>
<li><strong>(b) ffurl_close()</strong><ul>
<li><strong>a) ffurl_closep()</strong><ul>
<li><strong><font color=#FFC000>URLProtocol-&gt;url_close()</font></strong></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="右上区域（URLProtocol协议处理函数）"><a href="#右上区域（URLProtocol协议处理函数）" class="headerlink" title="右上区域（URLProtocol协议处理函数）"></a>右上区域（URLProtocol协议处理函数）</h4><p>URLProtocol结构体包含如下协议处理函数指针：</p>
<ul>
<li><strong><font color=#FFC000>url_open()：打开</font></strong></li>
<li><strong><font color=#FFC000>url_read()：读取</font></strong></li>
<li><strong><font color=#FFC000>url_write()：写入</font></strong></li>
<li><strong><font color=#FFC000>url_seek()：调整进度</font></strong></li>
<li><strong><font color=#FFC000>url_close()：关闭</font></strong></li>
</ul>
<p>【例子】不同的协议对应着上述接口有不同的实现函数，举几个例子：</p>
<p><strong>File协议（即文件）对应的URLProtocol结构体 <code>ff_file_protocol</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">url_open() -&gt; file_open() -&gt; open()</span><br><span class="line">url_read() -&gt; file_read() -&gt; read()</span><br><span class="line">url_write() -&gt; file_write() -&gt; write()</span><br><span class="line">url_seek() -&gt; file_seek() -&gt; lseek()</span><br><span class="line">url_close() -&gt; file_close() -&gt; close()</span><br></pre></td></tr></table></figure>

<p><strong>RTMP协议（libRTMP）对应的URLProtocol结构体 <code>ff_librtmp_protocol</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">url_open() -&gt; rtmp_open() -&gt; RTMP_Init(), RTMP_SetupURL(), RTMP_Connect(), RTMP_ConnectStream()</span><br><span class="line">url_read() -&gt; rtmp_read() -&gt; RTMP_Read()</span><br><span class="line">url_write() -&gt; rtmp_write() -&gt; RTMP_Write()</span><br><span class="line">url_seek() -&gt; rtmp_read_seek() -&gt; RTMP_SendSeek()</span><br><span class="line">url_close() -&gt; rtmp_close() -&gt; RTMP_Close()</span><br></pre></td></tr></table></figure>

<p><strong>UDP协议对应的URLProtocol结构体 <code>ff_udp_protocol</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">url_open() -&gt; udp_open()</span><br><span class="line">url_read() -&gt; udp_read()</span><br><span class="line">url_write() -&gt; udp_write()</span><br><span class="line">url_seek() -&gt; udp_close()</span><br><span class="line">url_close() -&gt; udp_close()</span><br></pre></td></tr></table></figure>

<h4 id="右中区域（AVInputFormat封装格式处理函数）"><a href="#右中区域（AVInputFormat封装格式处理函数）" class="headerlink" title="右中区域（AVInputFormat封装格式处理函数）"></a>右中区域（AVInputFormat封装格式处理函数）</h4><p>AVInputFormat包含如下封装格式处理函数指针：</p>
<ul>
<li><strong><font color=#009900>read_probe()：检查格式</font></strong></li>
<li><strong><font color=#009900>read_header()：读取文件头</font></strong></li>
<li><strong><font color=#009900>read_packet()：读取一帧数据</font></strong></li>
<li><strong><font color=#009900>read_seek()：调整进度</font></strong></li>
<li><strong><font color=#009900>read_close()：关闭</font></strong></li>
</ul>
<p>【例子】不同的封装格式对应着上述接口有不同的实现函数，举几个例子：</p>
<p><strong>FLV封装格式对应的AVInputFormat结构体 <code>ff_flv_demuxer</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">read_probe() -&gt; flv_probe() –&gt; probe()</span><br><span class="line">read_header() -&gt; flv_read_header() -&gt; create_stream() -&gt; avformat_new_stream()</span><br><span class="line">read_packet() -&gt; flv_read_packet()</span><br><span class="line">read_seek() -&gt; flv_read_seek()</span><br><span class="line">read_close() -&gt; flv_read_close()</span><br></pre></td></tr></table></figure>

<p><strong>MKV封装格式对应的AVInputFormat结构体 <code>ff_matroska_demuxer</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">read_probe() -&gt; matroska_probe()</span><br><span class="line">read_header() -&gt; matroska_read_header()</span><br><span class="line">read_packet() -&gt; matroska_read_packet()</span><br><span class="line">read_seek() -&gt; matroska_read_seek()</span><br><span class="line">read_close() -&gt; matroska_read_close()</span><br></pre></td></tr></table></figure>

<p><strong>MPEG2TS封装格式对应的AVInputFormat结构体 <code>ff_mpegts_demuxer</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">read_probe() -&gt; mpegts_probe()</span><br><span class="line">read_header() -&gt; mpegts_read_header()</span><br><span class="line">read_packet() -&gt; mpegts_read_packet() </span><br><span class="line">read_close() -&gt; mpegts_read_close()</span><br></pre></td></tr></table></figure>

<p><strong>AVI封装格式对应的AVInputFormat结构体 <code>ff_avi_demuxer</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">read_probe() -&gt; avi_probe()</span><br><span class="line">read_header() -&gt; avi_read_header()</span><br><span class="line">read_packet() -&gt; avi_read_packet()</span><br><span class="line">read_seek() -&gt; avi_read_seek()</span><br><span class="line">read_close() -&gt; avi_read_close()</span><br></pre></td></tr></table></figure>

<h4 id="右下区域（AVCodec编解码函数）"><a href="#右下区域（AVCodec编解码函数）" class="headerlink" title="右下区域（AVCodec编解码函数）"></a>右下区域（AVCodec编解码函数）</h4><p>AVCodec包含如下编解码函数指针：</p>
<ul>
<li><strong><font color=#3072C2>init()：初始化</font></strong></li>
<li><strong><font color=red>decode()</font>：解码一帧数据</strong></li>
<li><strong><font color=#3072C2>close()：关闭</font></strong></li>
</ul>
<p>【例子】不同的编解码器对应着上述接口有不同的实现函数，举几个例子：</p>
<p><strong>HEVC解码对应的AVCodec结构体 <code>ff_hevc_decoder</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">init() -&gt; hevc_decode_init()</span><br><span class="line">decode() -&gt; hevc_decode_frame() -&gt; decode_nal_units()</span><br><span class="line">close() -&gt; hevc_decode_free()</span><br></pre></td></tr></table></figure>

<p><strong>H.264解码对应的AVCodec结构体 <code>ff_h264_decoder</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">init() -&gt; ff_h264_decode_init()</span><br><span class="line">decode() -&gt; h264_decode_frame() -&gt; decode_nal_units()</span><br><span class="line">close() -&gt; h264_decode_end()</span><br></pre></td></tr></table></figure>

<p><strong>VP8解码（libVPX）对应的AVCodec结构体 <code>ff_libvpx_vp8_decoder</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">init() -&gt; vpx_init() -&gt; vpx_codec_dec_init()</span><br><span class="line">decode() -&gt; vp8_decode() -&gt; vpx_codec_decode(), vpx_codec_get_frame()</span><br><span class="line">close() -&gt; vp8_free() -&gt; vpx_codec_destroy()</span><br></pre></td></tr></table></figure>

<p><strong>MPEG2解码对应的AVCodec结构体 <code>ff_mpeg2video_decoder</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">init() -&gt; mpeg_decode_init()</span><br><span class="line">decode() -&gt; mpeg_decode_frame()</span><br><span class="line">close() -&gt; mpeg_decode_end()</span><br></pre></td></tr></table></figure>

<h3 id="avformat-open-input-函数"><a href="#avformat-open-input-函数" class="headerlink" title="avformat_open_input() 函数"></a>avformat_open_input() 函数</h3><p><img data-src="/images/imageFFmpeg/Thor/avformat_open_input.png" alt="avformat_open_input"></p>
<h2 id="FFmpeg源代码结构图-编码"><a href="#FFmpeg源代码结构图-编码" class="headerlink" title="FFmpeg源代码结构图 - 编码"></a>FFmpeg源代码结构图 - 编码</h2><h3 id="函数调用关系图"><a href="#函数调用关系图" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p>下图表明了FFmpeg在编码一个视频的时候的函数调用流程。为了保证结构清晰，其中仅列出了最关键的函数，剔除了其它不是特别重要的函数。</p>
<p><img data-src="/images/imageFFmpeg/Thor/FFmpeg%E6%BA%90%E7%A0%81API%E7%BB%93%E6%9E%84%E5%9B%BE-%E7%BC%96%E7%A0%81.png" alt="FFmpeg源代码结构图 - 编码"></p>
<p>下面解释一下图中关键标记的含义。</p>
<h3 id="函数背景色-1"><a href="#函数背景色-1" class="headerlink" title="函数背景色"></a>函数背景色</h3><p>函数在图中以方框的形式表现出来。不同的背景色标志了该函数不同的作用：</p>
<ul>
<li>粉红色背景函数：FFmpeg 的 API 函数。</li>
<li>白色背景的函数：FFmpeg 的内部函数。</li>
<li>黄色背景的函数：URLProtocol 结构体中的函数，包含了读写各种协议的功能。</li>
<li>绿色背景的函数：AVOutputFormat 结构体中的函数，包含了读写各种封装格式的功能。</li>
<li>蓝色背景的函数：AVCodec 结构体中的函数，包含了编解码的功能。</li>
</ul>
<h3 id="区域-1"><a href="#区域-1" class="headerlink" title="区域"></a>区域</h3><p>整个关系图可以分为以下几个区域：</p>
<ul>
<li><strong>左边区域——架构函数区域</strong>：这些函数并不针对某一特定的视频格式。</li>
<li><strong>右上方黄色区域——协议处理函数区域</strong>：不同的协议（RTP，RTMP，FILE）会调用不同的协议处理函数。</li>
<li><strong>右边中间绿色区域——封装格式处理函数区域</strong>：不同的封装格式（MKV，FLV，MPEG2TS，AVI）会调用不同的封装格式处理函数。</li>
<li><strong>右边下方蓝色区域——编解码函数区域</strong>：不同的编码标准（HEVC，H.264，MPEG2）会调用不同的编解码函数。</li>
</ul>
<h3 id="箭头线-1"><a href="#箭头线-1" class="headerlink" title="箭头线"></a>箭头线</h3><p>为了把调用关系表示的更明显，图中的箭头线也使用了不同的颜色：</p>
<ul>
<li><p>红色的箭头线：标志了编码的流程。</p>
</li>
<li><p>其他颜色的箭头线：标志了函数之间的调用关系。其中：</p>
<ul>
<li>调用 URLProtocol 结构体中的函数用<strong>黄色箭头线</strong>标识；</li>
<li>调用 AVOutputFormat 结构体中的函数用<strong>绿色箭头线</strong>标识；</li>
<li>调用 AVCodec 结构体中的函数用<strong>蓝色箭头线</strong>标识。</li>
</ul>
</li>
</ul>
<h3 id="函数所在的文件-1"><a href="#函数所在的文件-1" class="headerlink" title="函数所在的文件"></a>函数所在的文件</h3><p>每个函数标识了它所在的文件路径。</p>
<h3 id="函数功能简述"><a href="#函数功能简述" class="headerlink" title="函数功能简述"></a>函数功能简述</h3><p>下面简单列出几个区域中函数之间的调用关系（函数之间的调用关系使用缩进的方式表现出来）。详细的函数分析可以参考相关的《FFmpeg源代码分析》系列文章。</p>
<h4 id="左边区域（架构函数）"><a href="#左边区域（架构函数）" class="headerlink" title="左边区域（架构函数）"></a>左边区域（架构函数）</h4><p><strong><font color=red>1. av_register_all()【函数简单分析】</font></strong></p>
<ul>
<li><p><strong><font color=red>1) avcodec_register_all()</font></strong></p>
<ul>
<li><strong>(a) REGISTER_HWACCEL()</strong></li>
<li><strong>(b) REGISTER_ENCODER()</strong></li>
<li><strong>(c) REGISTER_DECODER()</strong></li>
<li><strong>(d) REGISTER_PARSER()</strong></li>
<li><strong>(e) REGISTER_BSF()</strong></li>
</ul>
</li>
<li><p><strong>2) REGISTER_MUXER()</strong></p>
</li>
<li><p><strong>3) REGISTER_DEMUXER()</strong></p>
</li>
<li><p><strong>4) REGISTER_PROTOCOL()</strong></p>
</li>
</ul>
<p><strong><font color=red>2. avformat_alloc_output_context2()【函数简单分析】</font></strong></p>
<ul>
<li><p><strong><font color=red>1) avformat_alloc_context()</font></strong></p>
<ul>
<li><p><strong>(a) av_malloc(sizeof(AVFormatContext))</strong></p>
</li>
<li><p><strong>(b) avformat_get_context_defaults()</strong></p>
<ul>
<li><strong>a) av_opt_set_defaults()</strong></li>
</ul>
</li>
</ul>
</li>
<li><p><strong><font color=red>2) av_guess_format()</font></strong></p>
<ul>
<li><strong><font color=red>(a) av_oformat_next()</font></strong></li>
<li><strong><font color=red>(b) av_match_name()</font></strong></li>
<li><strong><font color=red>(c) av_match_ext()</font></strong></li>
</ul>
</li>
</ul>
<p><strong><font color=red>3. avio_open2()【函数简单分析】</font></strong></p>
<ul>
<li><p><strong>1) ffurl_open()</strong></p>
<ul>
<li><strong>(a) ffurl_alloc()</strong><ul>
<li><strong>a) url_find_protocol()</strong></li>
<li><strong>b) url_alloc_for_protocol()</strong></li>
</ul>
</li>
<li><strong>(b) ffurl_connect()</strong><ul>
<li><strong><font color=#FFC000>a) URLProtocol-&gt;url_open()</font></strong></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>2) ffio_fdopen()</strong></p>
<ul>
<li><strong>(a) av_malloc(buffer_size)</strong></li>
<li><strong><font color=red>(b) avio_alloc_context()</font></strong><ul>
<li><strong>a) av_mallocz(sizeof(AVIOContext))</strong></li>
<li><strong>b) ffio_init_context()</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong><font color=red>4. avformat_new_stream()【函数简单分析】</font></strong></p>
<ul>
<li><p><strong>1) av_mallocz(sizeof(AVStream))</strong></p>
</li>
<li><p><strong><font color=red>2) avcodec_alloc_context3()</font></strong></p>
<ul>
<li><strong>(a) av_malloc(sizeof(AVCodecContext))</strong></li>
<li><strong>(b) avcodec_get_context_defaults3()</strong></li>
</ul>
</li>
</ul>
<p><strong><font color=red>5. avcodec_find_encoder()【函数简单分析】</font></strong></p>
<ul>
<li><strong>1) find_encdec()</strong></li>
</ul>
<p><strong><font color=red>6. avcodec_open2()【函数简单分析】</font></strong></p>
<ul>
<li><strong>1) AVCodec-&gt;init()</strong></li>
</ul>
<p><strong><font color=red>7. avformat_write_header()【函数简单分析】</font></strong></p>
<ul>
<li><p><strong>1) init_muxer()</strong></p>
</li>
<li><p><strong><font color=#009900>2) AVOutputFormat-&gt;write_header()</font></strong></p>
</li>
<li><p><strong>3) init_pts()</strong></p>
</li>
</ul>
<p><strong><font color=red>8. avcodec_encode_video2()【函数简单分析】</font></strong></p>
<ul>
<li><strong><font color=#3072C2>1) AVCodec-&gt;encode2()</font></strong></li>
</ul>
<p><strong><font color=red>9. av_write_frame()【函数简单分析】</font></strong></p>
<ul>
<li><p><strong>1) check_packet()</strong></p>
</li>
<li><p><strong>2) compute_pkt_fields2()</strong></p>
</li>
<li><p><strong>3) write_packet()</strong></p>
<ul>
<li><strong><font color=#009900>(a) AVOutputFormat-&gt;write_packet()</font></strong></li>
</ul>
</li>
</ul>
<p><strong><font color=red>10. av_write_trailer()【函数简单分析】</font></strong></p>
<ul>
<li><p><strong>1) write_packet()</strong></p>
</li>
<li><p><strong><font color=#009900>2) AVOutputFormat-&gt;write_trailer()</font></strong></p>
</li>
</ul>
<p><strong><font color=red>11. avcodec_close()【函数简单分析】</font></strong></p>
<ul>
<li><strong><font color=#3072C2>1) AVCodec-&gt;close()</font></strong></li>
</ul>
<p><strong><font color=red>12. avformat_free_context()【函数简单分析】</font></strong></p>
<ul>
<li><strong>1) ff_free_stream()</strong></li>
</ul>
<p><strong><font color=red>13. avio_close()【函数简单分析】</font></strong></p>
<ul>
<li><strong>1) avio_flush()</strong><ul>
<li><strong>(a) flush_buffer()</strong></li>
</ul>
</li>
<li><strong>2) ffurl_close()</strong><ul>
<li><strong>(a) ffurl_closep()</strong><ul>
<li><strong><font color=#FFC000>a) URLProtocol-&gt;url_close()</font></strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="右上区域（URLProtocol协议处理函数）-1"><a href="#右上区域（URLProtocol协议处理函数）-1" class="headerlink" title="右上区域（URLProtocol协议处理函数）"></a>右上区域（URLProtocol协议处理函数）</h4><p>URLProtocol结构体包含如下协议处理函数指针：</p>
<ul>
<li><strong><font color=#FFC000>url_open()：打开</font></strong></li>
<li><strong><font color=#FFC000>url_read()：读取</font></strong></li>
<li><strong><font color=#FFC000>url_write()：写入</font></strong></li>
<li><strong><font color=#FFC000>url_seek()：调整进度</font></strong></li>
<li><strong><font color=#FFC000>url_close()：关闭</font></strong></li>
</ul>
<p>【例子】不同的协议对应着上述接口有不同的实现函数，举几个例子：</p>
<p><strong>File协议（即文件）对应的URLProtocol结构体 <code>ff_file_protocol</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">url_open() -&gt; file_open() -&gt; open()</span><br><span class="line">url_read() -&gt; file_read() -&gt; read()</span><br><span class="line">url_write() -&gt; file_write() -&gt; write()</span><br><span class="line">url_seek() -&gt; file_seek() -&gt; lseek()</span><br><span class="line">url_close() -&gt; file_close() -&gt; close()</span><br></pre></td></tr></table></figure>

<p><strong>RTMP协议（libRTMP）对应的URLProtocol结构体 <code>ff_librtmp_protocol</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">url_open() -&gt; rtmp_open() -&gt; RTMP_Init(), RTMP_SetupURL(), RTMP_Connect(), RTMP_ConnectStream()</span><br><span class="line">url_read() -&gt; rtmp_read() -&gt; RTMP_Read()</span><br><span class="line">url_write() -&gt; rtmp_write() -&gt; RTMP_Write()</span><br><span class="line">url_seek() -&gt; rtmp_read_seek() -&gt; RTMP_SendSeek()</span><br><span class="line">url_close() -&gt; rtmp_close() -&gt; RTMP_Close()</span><br></pre></td></tr></table></figure>

<p><strong>UDP协议对应的URLProtocol结构体 <code>ff_udp_protocol</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">url_open() -&gt; udp_open()</span><br><span class="line">url_read() -&gt; udp_read()</span><br><span class="line">url_write() -&gt; udp_write()</span><br><span class="line">url_seek() -&gt; udp_close()</span><br><span class="line">url_close() -&gt; udp_close()</span><br></pre></td></tr></table></figure>

<h4 id="右中区域（AVOutputFormat封装格式处理函数）"><a href="#右中区域（AVOutputFormat封装格式处理函数）" class="headerlink" title="右中区域（AVOutputFormat封装格式处理函数）"></a>右中区域（AVOutputFormat封装格式处理函数）</h4><p>AVOutputFormat包含如下封装格式处理函数指针：</p>
<ul>
<li><strong><font color=#009900>write_header()：写文件头</font></strong></li>
<li><strong><font color=#009900>write_packet()：写一帧数据</font></strong></li>
<li><strong><font color=#009900>write_trailer()：写文件尾</font></strong></li>
</ul>
<p>【例子】不同的封装格式对应着上述接口有不同的实现函数，举几个例子：</p>
<p><strong>FLV封装格式对应的AVOutputFormat结构体 <code>ff_flv_muxer</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">write_header() -&gt; flv_write_header()</span><br><span class="line">write_packet() –&gt; flv_write_packet()</span><br><span class="line">write_trailer() -&gt; flv_write_trailer()</span><br></pre></td></tr></table></figure>

<p><strong>MKV封装格式对应的AVOutputFormat结构体 <code>ff_matroska_muxer</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">write_header() -&gt; mkv_write_header()</span><br><span class="line">write_packet() –&gt; mkv_write_flush_packet()</span><br><span class="line">write_trailer() -&gt; mkv_write_trailer()</span><br></pre></td></tr></table></figure>

<p><strong>MPEG2TS封装格式对应的AVOutputFormat结构体 <code>ff_mpegts_muxer</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">write_header() -&gt; mpegts_write_header()</span><br><span class="line">write_packet() –&gt; mpegts_write_packet()</span><br><span class="line">write_trailer() -&gt; mpegts_write_end()</span><br></pre></td></tr></table></figure>

<p><strong>AVI封装格式对应的AVOutputFormat结构体 <code>ff_avi_muxer</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">write_header() -&gt; avi_write_header()</span><br><span class="line">write_packet() –&gt; avi_write_packet()</span><br><span class="line">write_trailer() -&gt; avi_write_trailer()</span><br></pre></td></tr></table></figure>

<h4 id="右下区域（AVCodec编解码函数）-1"><a href="#右下区域（AVCodec编解码函数）-1" class="headerlink" title="右下区域（AVCodec编解码函数）"></a>右下区域（AVCodec编解码函数）</h4><p>AVCodec包含如下编解码函数指针：</p>
<ul>
<li><strong><font color=#3072C2>init()：初始化</font></strong></li>
<li><strong><font color=#3072C2>encode2()：编码一帧数据</font></strong></li>
<li><strong><font color=#3072C2>close()：关闭</font></strong></li>
</ul>
<p>【例子】不同的编解码器对应着上述接口有不同的实现函数，举几个例子：</p>
<p><strong>HEVC编码器对应的AVCodec结构体 <code>ff_libx265_encoder</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">init() -&gt; libx265_encode_init() -&gt; x265_param_alloc(), x265_param_default_preset(), x265_encoder_open()</span><br><span class="line">encode2() -&gt; libx265_encode_frame() -&gt; x265_encoder_encode()</span><br><span class="line">close() -&gt; libx265_encode_close() -&gt; x265_param_free(), x265_encoder_close()</span><br></pre></td></tr></table></figure>

<p><strong>H.264编码器对应的AVCodec结构体 <code>ff_libx264_encoder</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">init() -&gt; X264_init() -&gt; x264_param_default(), x264_encoder_open(), x264_encoder_headers()</span><br><span class="line">encode2() -&gt; X264_frame() -&gt; x264_encoder_encode()</span><br><span class="line">close() -&gt; X264_close() -&gt; x264_encoder_close()</span><br></pre></td></tr></table></figure>

<p><strong>VP8编码器（libVPX）对应的AVCodec结构体 <code>ff_libvpx_vp8_encoder</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">init() -&gt; vpx_init() -&gt; vpx_codec_enc_config_default()</span><br><span class="line">encode2() -&gt; vp8_encode() -&gt; vpx_codec_enc_init(), vpx_codec_encode()</span><br><span class="line">close() -&gt; vp8_free() -&gt; vpx_codec_destroy()</span><br></pre></td></tr></table></figure>

<p><strong>MPEG2编码器对应的AVCodec结构体 <code>ff_mpeg2video_encoder</code>：</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">init() -&gt; encode_init()</span><br><span class="line">encode2() -&gt; ff_mpv_encode_picture()</span><br><span class="line">close() -&gt; ff_mpv_encode_end()</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>FFmpeg</category>
      </categories>
      <tags>
        <tag>FFmpeg</tag>
      </tags>
  </entry>
  <entry>
    <title>FFmpeg框架详解</title>
    <url>/2019/05/27/FFmpeg/FFmpeg%E6%A1%86%E6%9E%B6%E5%87%BD%E6%95%B0%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/84499632">[总结]FFMPEG视音频编解码零基础学习方法</a></p>
</blockquote>
<h1 id="架构图"><a href="#架构图" class="headerlink" title="架构图"></a>架构图</h1><h2 id="FFMPEG-SDL的视频播放器"><a href="#FFMPEG-SDL的视频播放器" class="headerlink" title="FFMPEG+SDL的视频播放器"></a>FFMPEG+SDL的视频播放器</h2><blockquote>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/38868499">最简单的基于FFMPEG+SDL的视频播放器 ver2 （采用SDL2.0）</a></p>
</blockquote>
<p><strong>FFmpeg 解码一个视频流程：</strong></p>
<span id="more"></span>

<p><img data-src="/images/imageFFmpeg/Thor/%E6%92%AD%E6%94%BE%E5%99%A8%E8%A7%A3%E7%A0%81%E7%9A%84%E6%B5%81%E7%A8%8B%E7%94%A8%E5%9B%BE.png" alt="FFmpeg解码一个视频流程"></p>
<p><strong>SDL2.0 显示 YUV 的流程：</strong></p>
<p><img data-src="/images/imageFFmpeg/Thor/SDL2.0%E6%98%BE%E7%A4%BAYUV%E7%9A%84%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="SDL2.0显示YUV的流程"></p>
<h2 id="FFMPEG的视频编码器（YUV编码为H-264）"><a href="#FFMPEG的视频编码器（YUV编码为H-264）" class="headerlink" title="FFMPEG的视频编码器（YUV编码为H.264）"></a>FFMPEG的视频编码器（YUV编码为H.264）</h2><blockquote>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/25430425">最简单的基于FFMPEG的视频编码器（YUV编码为H.264）</a></p>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/39770947">最简单的基于FFmpeg的视频编码器-更新版（YUV编码为HEVC(H.265)）</a></p>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/42181271">最简单的基于FFmpeg的编码器-纯净版（不包含libavformat）</a></p>
</blockquote>
<h3 id="FFmpeg编码视频的流程图"><a href="#FFmpeg编码视频的流程图" class="headerlink" title="FFmpeg编码视频的流程图"></a>FFmpeg编码视频的流程图</h3><p>通过该流程，不仅可以编码H.264&#x2F;H.265的码流，而且可以编码MPEG4&#x2F;MPEG2&#x2F;VP9&#x2F;VP8等多种码流。实际上使用FFmpeg编码视频的方式都是一样的。图中蓝色背景的函数是实际输出数据的函数。浅绿色的函数是视频编码的函数。</p>
<p><img data-src="/images/imageFFmpeg/Thor/FFmpeg%E7%BC%96%E7%A0%81%E8%A7%86%E9%A2%91%E7%9A%84%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="FFmpeg编码视频的流程图"></p>
<p>简单介绍一下流程中各个函数的意义：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">av_register_all()  <span class="comment">// 注册FFmpeg所有编解码器。</span></span><br><span class="line">avformat_alloc_output_context2()  <span class="comment">// 初始化输出码流的AVFormatContext。</span></span><br><span class="line">avio_open()  <span class="comment">// 打开输出文件。</span></span><br><span class="line">av_new_stream()  <span class="comment">// 创建输出码流的AVStream。</span></span><br><span class="line">avcodec_find_encoder()  <span class="comment">// 查找编码器。</span></span><br><span class="line">avcodec_open2()  <span class="comment">// 打开编码器。</span></span><br><span class="line">avformat_write_header()  <span class="comment">// 写文件头（对于某些没有文件头的封装格式，不需要此函数。比如说MPEG2TS）。</span></span><br><span class="line">avcodec_encode_video2()  <span class="comment">// 编码一帧视频。即将AVFrame（存储YUV像素数据）编码为AVPacket（存储H.264等格式的码流数据）。</span></span><br><span class="line">av_write_frame()  <span class="comment">// 将编码后的视频码流写入文件。</span></span><br><span class="line">flush_encoder()  <span class="comment">// 输入的像素数据读取完成后调用此函数。用于输出编码器中剩余的AVPacket。</span></span><br><span class="line">av_write_trailer()  <span class="comment">// 写文件尾（对于某些没有文件头的封装格式，不需要此函数。比如说MPEG2TS）。</span></span><br></pre></td></tr></table></figure>

<h3 id="“纯净”的基于FFmpeg的视频编码器"><a href="#“纯净”的基于FFmpeg的视频编码器" class="headerlink" title="“纯净”的基于FFmpeg的视频编码器"></a>“纯净”的基于FFmpeg的视频编码器</h3><p>以下记录一个更加 “纯净” 的基于 FFmpeg 的视频编码器。此前记录过一个基于 FFmpeg 的视频编码器：</p>
<p><a href="http://blog.csdn.net/leixiaohua1020/article/details/39770947"> 《最简单的基于FFmpeg的视频编码器-更新版（YUV编码为HEVC(H.265)）》</a></p>
<p>这个视频编码器调用了 FFmpeg 中的 libavformat 和 libavcodec 两个库完成了视频编码工作。但是这不是一个 “纯净” 的编码器。</p>
<p>上述两个库中 libavformat 完成封装格式处理，而 libavcodec 完成编码工作。</p>
<p>一个 “纯净” 的编码器，理论上说只需要使用 libavcodec 就足够了，并不需要使用 libavformat。一下记录的编码器就是这样的一个 “纯净” 的编码器，它仅仅通过调用 libavcodec 将 YUV 数据编码为 H.264&#x2F;HEVC 等格式的压缩视频码流。</p>
<p><strong>仅使用libavcodec（不使用libavformat）编码视频的流程：</strong></p>
<p><img data-src="/images/imageFFmpeg/Thor/%E4%BB%85%E4%BD%BF%E7%94%A8libavcodec%E7%BC%96%E7%A0%81%E8%A7%86%E9%A2%91%E7%9A%84%E6%B5%81%E7%A8%8B.png" alt="仅使用libavcodec（不使用libavformat）编码视频的流程"></p>
<p>流程图中关键函数的作用如下所列：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">avcodec_register_all()  <span class="comment">// 注册所有的编解码器。</span></span><br><span class="line">avcodec_find_encoder()  <span class="comment">// 查找编码器。</span></span><br><span class="line">avcodec_alloc_context3()  <span class="comment">// 为AVCodecContext分配内存。</span></span><br><span class="line">avcodec_open2()  <span class="comment">// 打开编码器。</span></span><br><span class="line">avcodec_encode_video2()  <span class="comment">// 编码一帧数据。</span></span><br></pre></td></tr></table></figure>

<p>两个存储数据的结构体如下所列：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">AVFrame  <span class="comment">// 存储一帧未编码的像素数据。</span></span><br><span class="line">AVPacket  <span class="comment">// 存储一帧压缩编码数据。</span></span><br></pre></td></tr></table></figure>

<p><strong>对比：</strong></p>
<p>简单记录一下这个只使用 libavcodec 的 “纯净版” 视频编码器和使用 libavcodec+libavformat 的视频编码器的不同。</p>
<p>（1）	下列与libavformat相关的函数在“纯净版”视频编码器中都不存在。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">av_register_all注册所有的编解码器，复用/解复用器等等组件。其中调用了</span><br><span class="line">avcodec_register_all()  <span class="comment">// 注册所有编解码器相关的组件。</span></span><br><span class="line">avformat_alloc_context()  <span class="comment">// 创建AVFormatContext结构体。</span></span><br><span class="line">avformat_alloc_output_context2()  <span class="comment">// 初始化一个输出流。</span></span><br><span class="line">avio_open()  <span class="comment">// 打开输出文件。</span></span><br><span class="line">avformat_new_stream()  <span class="comment">// 创建AVStream结构体。avformat_new_stream()中会调用</span></span><br><span class="line">avcodec_alloc_context3()  <span class="comment">// 创建AVCodecContext结构体。</span></span><br><span class="line">avformat_write_header()  <span class="comment">// 写文件头。</span></span><br><span class="line">av_write_frame()  <span class="comment">// 写编码后的文件帧。</span></span><br><span class="line">av_write_trailer()  <span class="comment">// 写文件尾。</span></span><br></pre></td></tr></table></figure>

<p>（2）	新增了如下几个函数</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">avcodec_register_all()  <span class="comment">// 只注册编解码器有关的组件。</span></span><br><span class="line">avcodec_alloc_context3()  <span class="comment">// 创建AVCodecContext结构体。</span></span><br></pre></td></tr></table></figure>

<p>可以看出，相比于“完整”的编码器，这个纯净的编码器函数调用更加简单，功能相对少一些，相对来说更加的“轻量”。</p>
<h2 id="解码框架图"><a href="#解码框架图" class="headerlink" title="解码框架图"></a>解码框架图</h2><p><img data-src="/images/imageFFmpeg/Thor/FFmpeg%E6%BA%90%E7%A0%81API%E7%BB%93%E6%9E%84%E5%9B%BE-%E8%A7%A3%E7%A0%81.png" alt="FFmpeg解码"></p>
<h2 id="编码框架图"><a href="#编码框架图" class="headerlink" title="编码框架图"></a>编码框架图</h2><p><img data-src="/images/imageFFmpeg/Thor/FFmpeg%E6%BA%90%E7%A0%81API%E7%BB%93%E6%9E%84%E5%9B%BE-%E7%BC%96%E7%A0%81.png" alt="FFmpeg编码"></p>
<h1 id="通用函数解析"><a href="#通用函数解析" class="headerlink" title="通用函数解析"></a>通用函数解析</h1><blockquote>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/44220151">函数解析</a></p>
</blockquote>
<h2 id="av-register-all"><a href="#av-register-all" class="headerlink" title="av_register_all()"></a>av_register_all()</h2><p>ffmpeg 注册复用器，编码器等的函数 <code>av_register_all()</code>。该函数在所有基于ffmpeg的应用程序中几乎都是第一个被调用的。只有调用了该函数，才能使用复用器，编码器等。</p>
<p>函数调用关系图如下图所示。<code>av_register_all()</code> 调用了 <code>avcodec_register_all()</code>。<code>avcodec_register_all()</code> 注册了和编解码器有关的组件：硬件加速器，解码器，编码器，Parser，Bitstream Filter。<code>av_register_all()</code> 除了调用 <code>avcodec_register_all()</code> 之外，还注册了复用器，解复用器，协议处理器。</p>
<p><img data-src="/images/imageFFmpeg/Thor/av_register_all.png" alt="av_register_all"></p>
<h2 id="内存的分配和释放（av-malloc-、av-free-等）"><a href="#内存的分配和释放（av-malloc-、av-free-等）" class="headerlink" title="内存的分配和释放（av_malloc()、av_free()等）"></a>内存的分配和释放（av_malloc()、av_free()等）</h2><p>内存操作的常见函数位于 <code>libavutil\mem.c</code> 中。本文记录FFmpeg开发中最常使用的几个函数：<code>av_malloc()</code>，<code>av_realloc()</code>，<code>av_mallocz()</code>，<code>av_calloc()</code>，<code>av_free()</code>，<code>av_freep()</code>。</p>
<p><code>av_malloc()</code> 就是简单的封装了系统函数malloc()，并做了一些错误检查工作。</p>
<h3 id="关于size-t"><a href="#关于size-t" class="headerlink" title="关于size_t"></a>关于size_t</h3><p>size _t  这个类型在 FFmpeg 中多次出现，简单解释一下其作用。size _t 是为了增强程序的可移植性而定义的。不同系统上，定义 size_t 可能不一样。它实际上就是 unsigned int。</p>
<h3 id="为什么要内存对齐？"><a href="#为什么要内存对齐？" class="headerlink" title="为什么要内存对齐？"></a>为什么要内存对齐？</h3><p>FFmpeg 内存分配方面多次涉及到 “内存对齐”（memory alignment）的概念。</p>
<p>这方面内容在 IBM 的网站上有一篇文章，讲的挺通俗易懂的，在此简单转述一下。</p>
<p>程序员通常认为内存就是一个字节数组，每次可以一个一个字节存取内存。例如在 C 语言中使用 <code>char *</code> 指代 “一块内存”，Java 中使用 <code>byte[]</code> 指代一块内存。如下所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90-01.png"></p>
<p>但那实际上计算机处理器却不是这样认为的。处理器相对比较 “懒惰”，它会以 2 字节，4 字节，8 字节，16 字节甚至 32 字节来存取内存。例如下图显示了以 4 字节为单位读写内存的处理器 “看待” 上述内存的方式。</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90-02.png"></p>
<p>上述的存取单位的大小称之为内存存取粒度。</p>
<p>下面看一个实例，分别从地址0，和地址 1 读取 4 个字节到寄存器。</p>
<p>从程序员的角度来看，读取方式如下图所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90-03.png"></p>
<p>而 2 字节存取粒度的处理器的读取方式如下图所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90-04.png"></p>
<p>可以看出 2 字节存取粒度的处理器从地址 0 读取 4 个字节一共读取 2 次；从地址 1 读取 4 个字节一共读取了 3 次。由于每次读取的开销是固定的，因此从地址 1 读取 4 字节的效率有所下降。</p>
<p>4 字节存取粒度的处理器的读取方式如下图所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90-05.png"></p>
<p>可以看出 4 字节存取粒度的处理器从地址 0 读取 4 个字节一共读取 1 次；从地址 1 读取 4 个字节一共读取了 2 次。从地址 1 读取的开销比从地址 0 读取多了一倍。由此可见内存不对齐对 CPU 的性能是有影响的。 </p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">av_malloc()  <span class="comment">// 是FFmpeg中最常见的内存分配函数, av_malloc()就是简单的封装了系统函数malloc()</span></span><br><span class="line">av_realloc()  <span class="comment">// 用于对申请的内存的大小进行调整。</span></span><br><span class="line">av_mallocz()  <span class="comment">// 可以理解为av_malloc()+zeromemory</span></span><br><span class="line">av_calloc()  <span class="comment">// 则是简单封装了av_mallocz()</span></span><br><span class="line">av_free()  <span class="comment">// 用于释放申请的内存</span></span><br><span class="line">av_freep()  <span class="comment">// 简单封装了av_free()。并且在释放内存之后将目标指针设置为NULL</span></span><br></pre></td></tr></table></figure>

<h2 id="常见结构体的初始化和销毁（AVFormatContext，AVFrame等）"><a href="#常见结构体的初始化和销毁（AVFormatContext，AVFrame等）" class="headerlink" title="常见结构体的初始化和销毁（AVFormatContext，AVFrame等）"></a>常见结构体的初始化和销毁（AVFormatContext，AVFrame等）</h2><blockquote>
<p><a href="http://blog.csdn.net/leixiaohua1020/article/details/11693997">FFMPEG中最关键的结构体之间的关系</a></p>
</blockquote>
<p>常见的结构体如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 统领全局的基本结构体。主要用于处理封装格式（FLV/MKV/RMVB 等）</span></span><br><span class="line">AVFormatContext</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输入输出对应的结构体，用于输入输出（读写文件，RTMP 协议等）</span></span><br><span class="line">AVIOContext</span><br><span class="line"></span><br><span class="line"><span class="comment">// 视音频流对应的结构体，用于视音频编解码</span></span><br><span class="line">AVStream，AVCodecContext</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存储非压缩的数据（视频对应 RGB/YUV 像素数据，音频对应 PCM 采样数据）</span></span><br><span class="line">AVFrame</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存储压缩数据（视频对应 H.264 等码流数据，音频对应 AAC/MP3 等码流数据）</span></span><br><span class="line">AVPacket</span><br></pre></td></tr></table></figure>

<p>他们之间的关系如下图所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%B8%B8%E8%A7%81%E7%BB%93%E6%9E%84%E4%BD%93%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB.png" alt="常见结构体之间的关系"></p>
<p>简单分析一下上述几个结构体的初始化和销毁函数。这些函数列表如下。</p>
<table>
<thead>
<tr>
<th>结构体</th>
<th>初始化</th>
<th>销毁</th>
</tr>
</thead>
<tbody><tr>
<td>AVFormatContext</td>
<td>avformat_alloc_context()</td>
<td>avformat_free_context()</td>
</tr>
<tr>
<td>AVIOContext</td>
<td>avio_alloc_context()</td>
<td></td>
</tr>
<tr>
<td>AVStream</td>
<td>avformat_new_stream()</td>
<td></td>
</tr>
<tr>
<td>AVCodecContext</td>
<td>avcodec_alloc_context3()</td>
<td></td>
</tr>
<tr>
<td>AVFrame</td>
<td>av_frame_alloc();<br />av_image_fill_arrays()</td>
<td>av_frame_free()</td>
</tr>
<tr>
<td>AVPacket</td>
<td>av_init_packet();<br />av_new_packet()</td>
<td>av_free_packet()</td>
</tr>
</tbody></table>
<h3 id="avformat-alloc-context"><a href="#avformat-alloc-context" class="headerlink" title="avformat_alloc_context()"></a>avformat_alloc_context()</h3><p><code>avformat_alloc_context()</code> 的定义位于 <code>libavformat\options.c</code>。</p>
<p><code>avformat_alloc_context()</code> 调用 <code>av_malloc()</code> 为 AVFormatContext 结构体分配了内存，而且同时也给 AVFormatContext 中的 <code>internal</code> 字段分配内存（这个字段是 FFmpeg 内部使用的，先不分析）。此外调用了一个 <code>avformat_get_context_defaults()</code> 函数。该函数用于设置 AVFormatContext 的字段的默认值。它的定义也位于 <code>libavformat\options.c</code>，确切的说就位于 <code>avformat_alloc_context()</code>上面</p>
<p><code>avformat_get_context_defaults()</code> 首先调用 <code>memset()</code> 将 AVFormatContext 的所有字段置 0。而后调用了一个函数 <code>av_opt_set_defaults()</code> 。<code>av_opt_set_defaults()</code> 用于给字段设置默认值。</p>
<p><code>avformat_alloc_context()</code> 代码的函数调用关系如下图所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/avformat_alloc_context.png" alt="avformat_alloc_context"></p>
<p><code>avformat_free_context()</code> 的声明位于 <code>libavformat\avformat.h</code></p>
<p><code>avformat_free_context()</code> 的定义位于 <code>libavformat\options.c</code></p>
<p><code>avformat_free_context()</code> 调用了各式各样的销毁函数：<code>av_opt_free()</code>，<code>av_freep()</code>，<code>av_dict_free()</code>。这些函数分别用于释放不同种类的变量，在这里不再详细讨论。</p>
<p>在这里看一个释放 AVStream 的函数 <code>ff_free_stream()</code>。该函数的定义位于 <code>libavformat\options.c</code>（其实就在 <code>avformat_free_context()</code> 上方）, 与释放 AVFormatContext 类似，释放 AVStream 的时候，也是调用了 <code>av_freep()</code>，<code>av_dict_free()</code> 这些函数释放有关的字段。如果使用了 parser 的话，会调用 <code>av_parser_close()</code> 关闭该 parser。</p>
<h3 id="avio-alloc-context"><a href="#avio-alloc-context" class="headerlink" title="avio_alloc_context()"></a>avio_alloc_context()</h3><p>AVIOContext 的初始化函数是 <code>avio_alloc_context()</code>，销毁的时候使用 <code>av_free()</code> 释放掉其中的缓存即可。它的声明位于 <code>libavformat\avio.h</code> 中</p>
<p><code>avio_alloc_context()</code> 定义位于 <code>libavformat\aviobuf.c</code> 中</p>
<p><code>avio_alloc_context()</code> 首先调用 <code>av_mallocz()</code> 为 AVIOContext 分配内存。而后调用了一个函数 <code>ffio_init_context()</code> 。该函数完成了真正的初始化工作</p>
<h3 id="avformat-new-stream"><a href="#avformat-new-stream" class="headerlink" title="avformat_new_stream()"></a>avformat_new_stream()</h3><p><code>avformat_new_stream()</code> 的声明位于 <code>libavformat\avformat.h</code> 中</p>
<p>AVStream 的初始化函数是 <code>avformat_new_stream()</code>，销毁函数使用销毁 AVFormatContext 的 <code>avformat_free_context()</code> 就可以了。</p>
<p><code>avformat_new_stream()</code> 的定义位于 <code>libavformat\utils.c</code> 中</p>
<p><code>avformat_new_stream()</code> 首先调用 <code>av_mallocz()</code>  为 AVStream 分配内存。接着给新分配的AVStream 的各个字段赋上默认值。然后调用了另一个函数 <code>avcodec_alloc_context3()</code> 初始化 AVStream 中的 AVCodecContext。</p>
<h3 id="avcodec-alloc-context3"><a href="#avcodec-alloc-context3" class="headerlink" title="avcodec_alloc_context3()"></a>avcodec_alloc_context3()</h3><p><code>avcodec_alloc_context3()</code> 的声明位于 <code>libavcodec\avcodec.h</code> 中</p>
<p><code>avcodec_alloc_context3()</code> 的定义位于 <code>libavcodec\options.c</code> 中</p>
<p><code>avcodec_alloc_context3()</code> 首先调用 <code>av_malloc()</code> 为 AVCodecContext 分配存储空间，然后调用了一个函数 <code>avcodec_get_context_defaults3()</code> 用于设置该 AVCodecContext 的默认值</p>
<p><code>avformat_new_stream()</code> 函数的调用结构如下所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/avformat_new_stream.png" alt="avformat_new_stream"></p>
<h3 id="av-frame-alloc"><a href="#av-frame-alloc" class="headerlink" title="av_frame_alloc()"></a>av_frame_alloc()</h3><p>AVFrame 的初始化函数是 <code>av_frame_alloc()</code>，销毁函数是 <code>av_frame_free()</code>。在这里有一点需要注意，旧版的 FFmpeg 都是使用 <code>avcodec_alloc_frame()</code> 初始化 AVFrame 的，但是我在写这篇文章的时候，<code>avcodec_alloc_frame()</code> 已经被标记为 “过时的” 了，为了保证与时俱进，决定分析新的<code>API——av_frame_alloc()</code>。</p>
<p><code>av_frame_alloc()</code> 的声明位于 <code>libavutil\frame.h</code></p>
<p><code>av_frame_alloc()</code> 的定义位于 <code>libavutil\frame.c</code></p>
<p><code>av_frame_alloc()</code> 首先调用 <code>av_mallocz()</code> 为 AVFrame 结构体分配内存。而后调用了一个函数<code>get_frame_defaults()</code> 用于设置一些默认参数</p>
<p>从 <code>av_frame_alloc()</code> 的代码我们可以看出，该函数并没有为 AVFrame 的像素数据分配空间。因此AVFrame 中的像素数据的空间需要自行分配空间，例如使用 <code>avpicture_fill()</code>， <code>av_image_fill_arrays()</code> 等函数。</p>
<p><code>av_frame_alloc()</code> 函数的调用结构如下所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/av_frame_alloc.png" alt="av_frame_alloc"></p>
<h4 id="avpicture-fill"><a href="#avpicture-fill" class="headerlink" title="avpicture_fill()"></a>avpicture_fill()</h4><p><code>avpicture_fill()</code> 的声明位于 <code>libavcodec\avcodec.h</code></p>
<p><code>avpicture_fill()</code> 的定义位于 <code>libavcodec\avpicture.c</code></p>
<p><code>avpicture_fill()</code> 仅仅是简单调用了一下 <code>av_image_fill_arrays()</code>。也就是说这两个函数实际上是等同的</p>
<h4 id="av-image-fill-arrays"><a href="#av-image-fill-arrays" class="headerlink" title="av_image_fill_arrays()"></a>av_image_fill_arrays()</h4><p><code>av_image_fill_arrays()</code> 的声明位于 <code>libavutil\imgutils.h</code> 中</p>
<p><code>av_image_fill_arrays()</code> 的定义位于 <code>libavutil\imgutils.c</code> 中</p>
<p><code>av_image_fill_arrays()</code> 函数中包含 3 个函数：<code>av_image_check_size()</code>，<code>av_image_fill_linesizes()</code>，<code>av_image_fill_pointers()</code>。<code>av_image_check_size()</code> 用于检查输入的宽高参数是否合理，即不能太大或者为负数。<code>av_image_fill_linesizes()</code> 用于填充dst_linesize。<code>av_image_fill_pointers()</code> 则用于填充 dst_data。它们的定义相对比较简单，不再详细分析。</p>
<p><code>avpicture_fill()</code> 函数调用关系如下图所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/avpicture_fill.png" alt="avpicture_fill"></p>
<h3 id="av-init-packet"><a href="#av-init-packet" class="headerlink" title="av_init_packet()"></a>av_init_packet()</h3><p><code>av_init_packet()</code> 的声明位于 <code>libavcodec\avcodec.h</code></p>
<p><code>av_init_packet()</code> 的定义位于 <code>libavcodec\avpacket.c</code></p>
<h3 id="av-new-packet"><a href="#av-new-packet" class="headerlink" title="av_new_packet()"></a>av_new_packet()</h3><p><code>av_new_packet()</code> 的声明位于 <code>libavcodec\avcodec.h</code></p>
<p><code>av_new_packet()</code> 的定义位于 <code>libavcodec\avpacket.c</code></p>
<p><code>av_new_packet()</code> 调用了 <code>av_init_packet(pkt)</code>。此外还调用了一个函数 <code>packet_alloc()</code></p>
<p><code>packet_alloc()</code> 中调用 <code>av_buffer_realloc()</code> 为 AVPacket 分配内存。然后调用 <code>memset()</code> 将分配的内存置 0。</p>
<p>PS：发现 AVPacket 的结构随着 FFmpeg 的发展越发复杂了。原先 AVPacket 中的数据仅仅存在一个 uint8_t 类型的数组里，而现在已经使用一个专门的结构体 AVBufferRef 存储数据。</p>
<p><code>av_new_packet()</code> 代码的函数调用关系如下图所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/av_new_packet.png" alt="av_new_packet"></p>
<p><code>av_free_packet()</code> 的声明位于 <code>libavcodec\avcodec.h</code></p>
<p><code>av_free_packet()</code> 的定义位于 <code>libavcodec\avpacket.c</code></p>
<p><code>av_free_packet()</code> 调用 <code>av_buffer_unref()</code> 释放 AVPacket 中的数据，而后还调用了<code>av_packet_free_side_data()</code> 释放了 side_data（存储封装格式可以提供的额外的数据）。</p>
<h2 id="avio-open2"><a href="#avio-open2" class="headerlink" title="avio_open2()"></a>avio_open2()</h2><p>该函数用于打开 FFmpeg 的输入输出文件。<code>avio_open2()</code> 的声明位于 <code>libavformat\avio.h</code> 文件中</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">avio_open2</span><span class="params">(AVIOContext **s, <span class="type">const</span> <span class="type">char</span> *url, <span class="type">int</span> flags,</span></span><br><span class="line"><span class="params">               <span class="type">const</span> AVIOInterruptCB *int_cb, AVDictionary **options)</span>;</span><br></pre></td></tr></table></figure>

<p><code>avio_open2()</code> 函数参数的含义如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">s：函数调用成功之后创建的AVIOContext结构体。</span><br><span class="line">url：输入输出协议的地址（文件也是一种“广义”的协议，对于文件来说就是文件的路径）。</span><br><span class="line">flags：打开地址的方式。可以选择只读，只写，或者读写。取值如下。</span><br><span class="line">AVIO_FLAG_READ：只读。</span><br><span class="line">AVIO_FLAG_WRITE：只写。</span><br><span class="line">AVIO_FLAG_READ_WRITE：读写。</span><br><span class="line">int_cb：目前还没有用过。</span><br><span class="line">options：目前还没有用过。</span><br></pre></td></tr></table></figure>

<p>函数调用结构图：</p>
<p><img data-src="/images/imageFFmpeg/Thor/avio_open2.png" alt="avio_open2"></p>
<h2 id="av-find-decoder-和-av-find-encoder"><a href="#av-find-decoder-和-av-find-encoder" class="headerlink" title="av_find_decoder() 和 av_find_encoder()"></a>av_find_decoder() 和 av_find_encoder()</h2><p><code>avcodec_find_encoder()</code> 用于查找 FFmpeg 的编码器，</p>
<p><code>avcodec_find_decoder()</code> 用于查找 FFmpeg 的解码器。</p>
<p><code>avcodec_find_encoder()</code> 的声明位于 <code>libavcodec\avcodec.h</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">AVCodec *<span class="title function_">avcodec_find_encoder</span><span class="params">(<span class="keyword">enum</span> AVCodecID id)</span>;</span><br></pre></td></tr></table></figure>

<p>函数的参数是一个编码器的 ID，返回查找到的编码器（没有找到就返回NULL）。</p>
<p><code>avcodec_find_decoder()</code> 的声明也位于 <code>libavcodec\avcodec.h</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">AVCodec *<span class="title function_">avcodec_find_decoder</span><span class="params">(<span class="keyword">enum</span> AVCodecID id)</span>;</span><br></pre></td></tr></table></figure>

<p>函数的参数是一个解码器的 ID，返回查找到的解码器（没有找到就返回NULL）。</p>
<p><code>avcodec_find_encoder()</code> 和 <code>avcodec_find_decoder()</code> 的函数调用关系图如下所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/avcodec_find_encoder.png" alt="函数调用关系图"></p>
<p><code>avcodec_find_encoder()</code> 的源代码位于 <code>libavcodec\utils.c</code></p>
<p><code>avcodec_find_encoder()</code> 调用了一个 <code>find_encdec()</code>，注意它的第二个参数是 1。</p>
<p><code>find_encdec()</code> 的源代码位于 <code>libavcodec\utils.c</code></p>
<p><code>find_encdec()</code> 中有一个循环，该循环会遍历 AVCodec 结构的链表，逐一比较输入的 ID 和每一个编码器的 ID，直到找到 ID 取值相等的编码器。</p>
<p>在这里有几点需要注意：</p>
<p>（1）first_avcodec 是一个全局变量，存储 AVCodec 链表的第一个元素。</p>
<p>（2）<code>remap_deprecated_codec_id()</code> 用于将一些过时的编码器 ID 映射到新的编码器 ID。</p>
<p>（3）函数的第二个参数 encoder 用于确定查找编码器还是解码器。当该值为 1 的时候，用于查找编码器，此时会调用 <code>av_codec_is_encoder()</code> 判断 AVCodec 是否为编码器；当该值为 0 的时候，用于查找解码器，此时会调用 <code>av_codec_is_decoder()</code> 判断 AVCodec 是否为解码器。</p>
<p><code>avcodec_find_decoder()</code> 的源代码位于 <code>libavcodec\utils.c</code></p>
<p><code>avcodec_find_decoder()</code> 同样调用了 <code>find_encdec()</code>，只是第 2 个参数设置为 0。</p>
<h2 id="avcodec-open2"><a href="#avcodec-open2" class="headerlink" title="avcodec_open2()"></a>avcodec_open2()</h2><p>该函数用于初始化一个视音频编解码器的 AVCodecContext。</p>
<p><code>avcodec_open2()</code> 的声明位于 <code>libavcodec\avcodec.h</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">avcodec_open2</span><span class="params">(AVCodecContext *avctx, <span class="type">const</span> AVCodec *codec, AVDictionary **options)</span>;</span><br></pre></td></tr></table></figure>

<p>用中文简单转述一下avcodec_open2()各个参数的含义：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">avctx：需要初始化的 AVCodecContext。</span><br><span class="line">codec：输入的 AVCodec</span><br><span class="line">options：一些选项。例如使用 libx264 编码的时候，“preset”，“tune”等都可以通过该参数设置。</span><br></pre></td></tr></table></figure>

<p><code>avcodec_open2()</code> 函数调用关系非常简单，如下图所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/avcodec_open2.png" alt="avcodec_open2"></p>
<p><code>avcodec_open2()</code> 的定义位于 <code>libavcodec\utils.c</code></p>
<p><code>avcodec_open2()</code> 的源代码量是非常长的，但是它的调用关系非常简单——它只调用了一个关键的函数，即 AVCodec 的 <code>init()</code>，后文将会对这个函数进行分析。</p>
<p>我们可以简单梳理一下 <code>avcodec_open2()</code> 所做的工作，如下所列：</p>
<p>（1）为各种结构体分配内存（通过各种 <code>av_malloc()</code> 实现）。</p>
<p>（2）将输入的 AVDictionary 形式的选项设置到 AVCodecContext。</p>
<p>（3）其他一些零零碎碎的检查，比如说检查编解码器是否处于 “实验” 阶段。</p>
<p>（4）如果是编码器，检查输入参数是否符合编码器的要求</p>
<p>（5）调用 AVCodec 的 <code>init()</code> 初始化具体的解码器。</p>
<p>前几步比较简单，不再分析。在这里我们分析一下第4步和第5步。</p>
<h3 id="检查输入参数是否符合编码器要求"><a href="#检查输入参数是否符合编码器要求" class="headerlink" title="检查输入参数是否符合编码器要求"></a>检查输入参数是否符合编码器要求</h3><p>在这里简单分析一下第 4 步，即 “检查输入参数是否符合编码器的要求”。这一步中检查了很多的参数，在这里我们随便选一个参数 pix_fmts（像素格式）看一下，如下所示。</p>
<details><summary>代码：</summary>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//检查像素格式</span></span><br><span class="line">        <span class="keyword">if</span> (avctx-&gt;codec-&gt;pix_fmts) &#123;</span><br><span class="line">            <span class="keyword">for</span> (i = <span class="number">0</span>; avctx-&gt;codec-&gt;pix_fmts[i] != AV_PIX_FMT_NONE; i++)</span><br><span class="line">                <span class="keyword">if</span> (avctx-&gt;pix_fmt == avctx-&gt;codec-&gt;pix_fmts[i])</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span> (avctx-&gt;codec-&gt;pix_fmts[i] == AV_PIX_FMT_NONE</span><br><span class="line">                &amp;&amp; !((avctx-&gt;codec_id == AV_CODEC_ID_MJPEG || avctx-&gt;codec_id == AV_CODEC_ID_LJPEG)</span><br><span class="line">                     &amp;&amp; avctx-&gt;strict_std_compliance &lt;= FF_COMPLIANCE_UNOFFICIAL)) &#123;</span><br><span class="line">                <span class="type">char</span> buf[<span class="number">128</span>];</span><br><span class="line">                <span class="built_in">snprintf</span>(buf, <span class="keyword">sizeof</span>(buf), <span class="string">&quot;%d&quot;</span>, avctx-&gt;pix_fmt);</span><br><span class="line">                av_log(avctx, AV_LOG_ERROR, <span class="string">&quot;Specified pixel format %s is invalid or not supported\n&quot;</span>,</span><br><span class="line">                       (<span class="type">char</span> *)av_x_if_null(av_get_pix_fmt_name(avctx-&gt;pix_fmt), buf));</span><br><span class="line">                ret = AVERROR(EINVAL);</span><br><span class="line">                <span class="keyword">goto</span> free_and_end;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (avctx-&gt;codec-&gt;pix_fmts[i] == AV_PIX_FMT_YUVJ420P ||</span><br><span class="line">                avctx-&gt;codec-&gt;pix_fmts[i] == AV_PIX_FMT_YUVJ411P ||</span><br><span class="line">                avctx-&gt;codec-&gt;pix_fmts[i] == AV_PIX_FMT_YUVJ422P ||</span><br><span class="line">                avctx-&gt;codec-&gt;pix_fmts[i] == AV_PIX_FMT_YUVJ440P ||</span><br><span class="line">                avctx-&gt;codec-&gt;pix_fmts[i] == AV_PIX_FMT_YUVJ444P)</span><br><span class="line">                avctx-&gt;color_range = AVCOL_RANGE_JPEG;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

</details>

<p>可以看出，该代码首先进入了一个 <code>for()</code> 循环，将 AVCodecContext 中设定的 <code>pix_fmt</code> 与编码器AVCodec 中的 <code>pix_fmts</code> 数组中的元素逐一比较。</p>
<p>先简单介绍一下 AVCodec 中的 <code>pix_fmts</code> 数组。AVCodec 中的 <code>pix_fmts</code> 数组存储了该种编码器支持的像素格式，并且规定以 AV_PIX_FMT_NONE（AV_PIX_FMT_NONE 取值为 -1）为结尾。例如，libx264 的 <code>pix_fmts</code> 数组的定义位于 <code>libavcodec\libx264.c</code>，如下所示。</p>
<details><summary>代码：</summary>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">enum</span> <span class="title">AVPixelFormat</span> <span class="title">pix_fmts_8bit</span>[] =</span> &#123;</span><br><span class="line">    AV_PIX_FMT_YUV420P,</span><br><span class="line">    AV_PIX_FMT_YUVJ420P,</span><br><span class="line">    AV_PIX_FMT_YUV422P,</span><br><span class="line">    AV_PIX_FMT_YUVJ422P,</span><br><span class="line">    AV_PIX_FMT_YUV444P,</span><br><span class="line">    AV_PIX_FMT_YUVJ444P,</span><br><span class="line">    AV_PIX_FMT_NV12,</span><br><span class="line">    AV_PIX_FMT_NV16,</span><br><span class="line">    AV_PIX_FMT_NONE</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</details>

<p>从 <code>pix_fmts_8bit</code> 的定义可以看出 libx264 主要支持的是以 YUV 为主的像素格式。</p>
<p>现在回到 “检查输入 <code>pix_fmt</code> 是否符合编码器的要求” 的那段代码。如果 <code>for()</code> 循环从 <code>AVCodec-&gt;pix_fmts</code> 数组中找到了符合 <code>AVCodecContext-&gt;pix_fmt</code> 的像素格式，或者完成了 <code>AVCodec-&gt;pix_fmts</code> 数组的遍历，都会跳出循环。如果发现 <code>AVCodec-&gt;pix_fmts</code> 数组中索引为 <code>i</code> 的元素是 AV_PIX_FMT_NONE（即最后一个元素，取值为 -1）的时候，就认为没有找到合适的像素格式，并且最终提示错误信息。</p>
<h3 id="AVCodec-init"><a href="#AVCodec-init" class="headerlink" title="AVCodec-&gt;init()"></a>AVCodec-&gt;init()</h3><p><code>avcodec_open2()</code> 中最关键的一步就是调用 AVCodec 的 <code>init()</code> 方法初始化具体的编码器。AVCodec 的 <code>init()</code> 是一个函数指针，指向具体编解码器中的初始化函数。这里我们以 libx264 为例，看一下它对应的 AVCodec 的定义。</p>
<p>libx264 对应的 AVCodec 的定义位于 <code>libavcodec\libx264.c</code></p>
<details><summary>代码：</summary>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">AVCodec ff_libx264_encoder = &#123;</span><br><span class="line">    .name             = <span class="string">&quot;libx264&quot;</span>,</span><br><span class="line">    .long_name        = NULL_IF_CONFIG_SMALL(<span class="string">&quot;libx264 H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10&quot;</span>),</span><br><span class="line">    .type             = AVMEDIA_TYPE_VIDEO,</span><br><span class="line">    .id               = AV_CODEC_ID_H264,</span><br><span class="line">    .priv_data_size   = <span class="keyword">sizeof</span>(X264Context),</span><br><span class="line">    .init             = X264_init,</span><br><span class="line">    .encode2          = X264_frame,</span><br><span class="line">    .close            = X264_close,</span><br><span class="line">    .capabilities     = CODEC_CAP_DELAY | CODEC_CAP_AUTO_THREADS,</span><br><span class="line">    .priv_class       = &amp;x264_class,</span><br><span class="line">    .defaults         = x264_defaults,</span><br><span class="line">    .init_static_data = X264_init_static,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</details>

<p>可以看出在 <code>ff_libx264_encoder</code> 中 <code>init()</code> 指向 <code>X264_init()</code> 。<code>X264_init()</code> 的定义同样位于<code>libavcodec\libx264.c</code></p>
<p><code>X264_init()</code> 的代码以后研究 X264 的时候再进行细节的分析，在这里简单记录一下它做的两项工作：</p>
<p>（1）设置 X264Context 的参数。X264Context 主要完成了 libx264 和 FFmpeg 对接的功能。可以看出代码主要在设置一个 params 结构体变量，该变量的类型即是 x264 中存储参数的结构体 <code>x264_param_t</code>。<br>（2）调用 libx264 的 API 进行编码器的初始化工作。例如调用 <code>x264_param_default()</code> 设置默认参数，调用 <code>x264_param_apply_profile()</code> 设置 profile，调用 <code>x264_encoder_open()</code> 打开编码器等等。</p>
<p>最后附上 X264Context 的定义，位于 <code>libavcodec\libx264.c</code></p>
<h2 id="avcodec-close"><a href="#avcodec-close" class="headerlink" title="avcodec_close()"></a>avcodec_close()</h2><p>该函数用于关闭编码器。<code>avcodec_close()</code> 函数的声明位于 <code>libavcodec\avcodec.h</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">avcodec_close</span><span class="params">(AVCodecContext *avctx)</span>;</span><br></pre></td></tr></table></figure>

<p>该函数只有一个参数，就是需要关闭的编码器的 AVCodecContext。</p>
<p>函数的调用关系图如下所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/avcodec_close.png" alt="avcodec_close"></p>
<p><code>avcodec_close()</code> 的定义位于 <code>libavcodec\utils.c</code></p>
<p>从 <code>avcodec_close()</code> 的定义可以看出，该函数释放 AVCodecContext 中有关的变量，并且调用了 AVCodec 的 <code>close()</code> 关闭了解码器。</p>
<h1 id="解码"><a href="#解码" class="headerlink" title="解码"></a>解码</h1><h2 id="图解-FFMPEG-打开媒体的函数-avformat-open-input"><a href="#图解-FFMPEG-打开媒体的函数-avformat-open-input" class="headerlink" title="图解 FFMPEG 打开媒体的函数 avformat_open_input"></a>图解 FFMPEG 打开媒体的函数 avformat_open_input</h2><p>FFMPEG打开媒体的的过程开始于avformat_open_input，因此该函数的重要性不可忽视。</p>
<p>在该函数中，FFMPEG完成了：</p>
<ul>
<li><p>输入输出结构体 AVIOContext 的初始化；</p>
</li>
<li><p>输入数据的协议（例如 RTMP，或者 file）的识别（通过一套评分机制）:</p>
<ul>
<li>判断文件名的后缀 </li>
<li>读取文件头的数据进行比对；</li>
</ul>
</li>
<li><p>使用获得最高分的文件协议对应的 URLProtocol，通过函数指针的方式，与 FFMPEG 连接（非专业用词）；</p>
</li>
</ul>
<p>剩下的就是调用该 URLProtocol 的函数进行 open, read 等操作了</p>
<p>以下是通过 eclipse+MinGW 调试 FFMPEG 源代码获得的函数调用关系图：</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%9B%BE%E8%A7%A3FFMPEG%E6%89%93%E5%BC%80%E5%AA%92%E4%BD%93%E7%9A%84%E5%87%BD%E6%95%B0avformat_open_input.png"></p>
<p>可见最终都调用了 URLProtocol 结构体中的函数指针。</p>
<p>URLProtocol 结构如下，是一大堆函数指针的集合（avio.h文件）</p>
<details><summary>代码</summary>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">URLProtocol</span> &#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *name;</span><br><span class="line">    <span class="built_in">int</span> (*url_open)(URLContext *h, <span class="type">const</span> <span class="type">char</span> *url, <span class="type">int</span> flags);</span><br><span class="line">    <span class="built_in">int</span> (*url_read)(URLContext *h, <span class="type">unsigned</span> <span class="type">char</span> *buf, <span class="type">int</span> size);</span><br><span class="line">    <span class="built_in">int</span> (*url_write)(URLContext *h, <span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> *buf, <span class="type">int</span> size);</span><br><span class="line">    <span class="built_in">int64_t</span> (*url_seek)(URLContext *h, <span class="type">int64_t</span> pos, <span class="type">int</span> whence);</span><br><span class="line">    <span class="built_in">int</span> (*url_close)(URLContext *h);</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">URLProtocol</span> *next;</span><br><span class="line">    <span class="built_in">int</span> (*url_read_pause)(URLContext *h, <span class="type">int</span> pause);</span><br><span class="line">    <span class="built_in">int64_t</span> (*url_read_seek)(URLContext *h, <span class="type">int</span> stream_index,</span><br><span class="line">                             <span class="type">int64_t</span> timestamp, <span class="type">int</span> flags);</span><br><span class="line">    <span class="built_in">int</span> (*url_get_file_handle)(URLContext *h);</span><br><span class="line">    <span class="type">int</span> priv_data_size;</span><br><span class="line">    <span class="type">const</span> AVClass *priv_data_class;</span><br><span class="line">    <span class="type">int</span> flags;</span><br><span class="line">    <span class="built_in">int</span> (*url_check)(URLContext *h, <span class="type">int</span> mask);</span><br><span class="line">&#125; URLProtocol;</span><br></pre></td></tr></table></figure>

</details>

<p>URLProtocol 功能就是完成各种输入协议的读写等操作</p>
<p>但输入协议种类繁多，它是怎样做到 “大一统” 的呢？</p>
<p>原来，每个具体的输入协议都有自己对应的 URLProtocol。</p>
<p>比如 file 协议（FFMPEG 把文件也当做一种特殊的协议）（<code>*file.c</code> 文件）</p>
<details><summary>代码：</summary>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">URLProtocol ff_pipe_protocol = &#123;</span><br><span class="line">    .name                = <span class="string">&quot;pipe&quot;</span>,</span><br><span class="line">    .url_open            = pipe_open,</span><br><span class="line">    .url_read            = file_read,</span><br><span class="line">    .url_write           = file_write,</span><br><span class="line">    .url_get_file_handle = file_get_handle,</span><br><span class="line">    .url_check           = file_check,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</details>

<p>或者rtmp协议（此处使用了librtmp）（librtmp.c文件）</p>
<details><summary>代码：</summary>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">URLProtocol ff_rtmp_protocol = &#123;</span><br><span class="line">    .name                = <span class="string">&quot;rtmp&quot;</span>,</span><br><span class="line">    .url_open            = rtmp_open,</span><br><span class="line">    .url_read            = rtmp_read,</span><br><span class="line">    .url_write           = rtmp_write,</span><br><span class="line">    .url_close           = rtmp_close,</span><br><span class="line">    .url_read_pause      = rtmp_read_pause,</span><br><span class="line">    .url_read_seek       = rtmp_read_seek,</span><br><span class="line">    .url_get_file_handle = rtmp_get_file_handle,</span><br><span class="line">    .priv_data_size      = <span class="built_in">sizeof</span>(RTMP),</span><br><span class="line">    .flags               = URL_PROTOCOL_FLAG_NETWORK,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</details>

<p>可见它们把各自的函数指针都赋值给了 URLProtocol 结构体的函数指针</p>
<p>因此 <code>avformat_open_input</code> 只需调用 url_open, url_read 这些函数就可以完成各种具体输入协议的 open, read 等操作了</p>
<h2 id="avformat-open-input"><a href="#avformat-open-input" class="headerlink" title="avformat_open_input()"></a>avformat_open_input()</h2><blockquote>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/11885813">FFMPEG源码分析：avformat_open_input()（媒体打开函数）</a></p>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/44064715">avformat_open_input()</a></p>
</blockquote>
<p>个人感觉这个函数确实太重要了，可以算作 FFmpeg 的 “灵魂”</p>
<p>函数用于打开多媒体数据并且获得一些相关的信息。它的声明位于 <code>libavformat\avformat.h</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">avformat_open_input</span><span class="params">(AVFormatContext **ps, <span class="type">const</span> <span class="type">char</span> *filename, AVInputFormat *fmt, AVDictionary **options)</span>;</span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ps：函数调用成功之后处理过的 AVFormatContext 结构体。</span><br><span class="line">file：打开的视音频流的 URL。</span><br><span class="line">fmt：强制指定 AVFormatContext 中 AVInputFormat 的。这个参数一般情况下可以设置为 NULL，这样 FFmpeg 可以自动检测 AVInputFormat。</span><br><span class="line">dictionay：附加的一些选项，一般情况下可以设置为 NULL。</span><br></pre></td></tr></table></figure>

<p>函数执行成功的话，其返回值大于等于 0。</p>
<p>函数调用结构图如下所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/avformat_open_input.png" alt="avformat_open_input"></p>
<p><code>avformat_open_input()</code> 定义位于 <code>libavformat\utils.c</code> 中</p>
<p><code>avformat_open_input()</code> 源代码比较长，一部分是一些容错代码，比如说如果发现传入的 AVFormatContext 指针没有初始化过，就调用 <code>avformat_alloc_context()</code> 初始化该结构体；还有一部分是针对一些格式做的特殊处理，比如 id3v2 信息的处理等等。有关上述两种信息不再详细分析，在这里只选择它关键的两个函数进行分析：</p>
<ul>
<li><p>**<code>init_input()</code>**：绝大部分初始化工作都是在这里做的。</p>
</li>
<li><p>**<code>s-&gt;iformat-&gt;read_header()</code>**：读取多媒体数据文件头，根据视音频流创建相应的 AVStream。</p>
</li>
</ul>
<h3 id="init-input"><a href="#init-input" class="headerlink" title="init_input()"></a>init_input()</h3><p><code>init_input()</code> 作为一个内部函数，竟然包含了一行注释（一般内部函数都没有注释），足可以看出它的重要性。它的主要工作就是打开输入的视频数据并且探测视频的格式。该函数的定义位于 <code>libavformat\utils.c</code></p>
<details><summary>代码：</summary>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* Open input file and probe the format if necessary. */</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">int</span> <span class="title">init_input</span><span class="params">(AVFormatContext *s, <span class="type">const</span> <span class="type">char</span> *filename,</span></span></span><br><span class="line"><span class="params"><span class="function">                      AVDictionary **options)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> ret;</span><br><span class="line">    AVProbeData pd = &#123; filename, <span class="literal">NULL</span>, <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="type">int</span> score = AVPROBE_SCORE_RETRY;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (s-&gt;pb) &#123;</span><br><span class="line">        s-&gt;flags |= AVFMT_FLAG_CUSTOM_IO;</span><br><span class="line">        <span class="keyword">if</span> (!s-&gt;iformat)</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">av_probe_input_buffer2</span>(s-&gt;pb, &amp;s-&gt;iformat, filename,</span><br><span class="line">                                         s, <span class="number">0</span>, s-&gt;format_probesize);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (s-&gt;iformat-&gt;flags &amp; AVFMT_NOFILE)</span><br><span class="line">            <span class="built_in">av_log</span>(s, AV_LOG_WARNING, <span class="string">&quot;Custom AVIOContext makes no sense and &quot;</span></span><br><span class="line">                                      <span class="string">&quot;will be ignored with AVFMT_NOFILE format.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> ((s-&gt;iformat &amp;&amp; s-&gt;iformat-&gt;flags &amp; AVFMT_NOFILE) ||</span><br><span class="line">        (!s-&gt;iformat &amp;&amp; (s-&gt;iformat = <span class="built_in">av_probe_input_format2</span>(&amp;pd, <span class="number">0</span>, &amp;score))))</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> ((ret = <span class="built_in">avio_open2</span>(&amp;s-&gt;pb, filename, AVIO_FLAG_READ | s-&gt;avio_flags,</span><br><span class="line">                          &amp;s-&gt;interrupt_callback, options)) &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    <span class="keyword">if</span> (s-&gt;iformat)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">av_probe_input_buffer2</span>(s-&gt;pb, &amp;s-&gt;iformat, filename,</span><br><span class="line">                                 s, <span class="number">0</span>, s-&gt;format_probesize);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

<p>这个函数在短短的几行代码中包含了好几个 return，因此逻辑还是有点复杂的，我们可以梳理一下：</p>
<p>在函数的开头的 score 变量是一个判决 AVInputFormat 的分数的门限值，如果最后得到的 AVInputFormat 的分数低于该门限值，就认为没有找到合适的 AVInputFormat 。</p>
<p>FFmpeg 内部判断封装格式的原理实际上是对每种 AVInputFormat 给出一个分数，满分是 100 分，越有可能正确的 AVInputFormat 给出的分数就越高。最后选择分数最高的 AVInputFormat 作为推测结果。score 的值是一个宏定义 AVPROBE_SCORE_RETRY，我们可以看一下它的定义：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> AVPROBE_SCORE_RETRY (AVPROBE_SCORE_MAX/4)</span></span><br></pre></td></tr></table></figure>

<p>其中 AVPROBE_SCORE_MAX 是 score 的最大值，取值是 100：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> AVPROBE_SCORE_MAX       100 <span class="comment">///&lt; maximum score</span></span></span><br></pre></td></tr></table></figure>

<p>由此我们可以得出 score 取值是 25，即如果推测后得到的最佳 AVInputFormat 的分值低于 25，就认为没有找到合适的 AVInputFormat。</p>
<p>整个函数的逻辑大体如下：</p>
<p>（1）当使用了自定义的 AVIOContext 的时候（AVFormatContext 中的 AVIOContext 不为空，即 <code>s-&gt;pb!=NULL</code>），如果指定了 AVInputFormat 就直接返回，如果没有指定就调用 <code>av_probe_input_buffer2()</code> 推测 AVInputFormat。这一情况出现的不算很多，但是当我们从内存中读取数据的时候（需要初始化自定义的 AVIOContext），就会执行这一步骤。</p>
<p>（2）在更一般的情况下，如果已经指定了 AVInputFormat，就直接返回；如果没有指定 AVInputFormat，就调用 <code>av_probe_input_format(NULL,…)</code> 根据文件路径判断文件格式。这里特意把 <code>av_probe_input_format()</code> 的第 1 个参数写成 “NULL”，是为了强调这个时候实际上并没有给函数提供输入数据，此时仅仅通过文件路径推测 AVInputFormat。</p>
<p>（3）如果发现通过文件路径判断不出来文件格式，那么就需要打开文件探测文件格式了，这个时候会首先调用 <code>avio_open2()</code> 打开文件，然后调用 <code>av_probe_input_buffer2()</code> 推测 AVInputFormat。</p>
<h2 id="avformat-find-stream-info"><a href="#avformat-find-stream-info" class="headerlink" title="avformat_find_stream_info()"></a>avformat_find_stream_info()</h2><p>该函数可以读取一部分视音频数据并且获得一些相关的信息。</p>
<p><code>avformat_find_stream_info()</code> 的声明位于 <code>libavformat\avformat.h</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">avformat_find_stream_info</span><span class="params">(AVFormatContext *ic, AVDictionary **options)</span>;</span><br></pre></td></tr></table></figure>

<p>简单解释一下它的参数的含义：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ic：输入的 AVFormatContext。</span><br><span class="line">options：额外的选项，目前没有深入研究过。</span><br></pre></td></tr></table></figure>

<p>函数正常执行后返回值大于等于 0。</p>
<p>PS：由于该函数比较复杂，所以只看了一部分代码，以后有时间再进一步分析。</p>
<p>函数的调用关系如下图所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/avformat_find_stream_info.png" alt="avformat_find_stream_info"></p>
<p><code>avformat_find_stream_info()</code> 的定义位于 <code>libavformat\utils.c</code></p>
<p>由于<code>avformat_find_stream_info()</code> 代码比较长，难以全部分析，在这里只能简单记录一下它的要点。该函数主要用于给每个媒体流（音频&#x2F;视频）的 AVStream 结构体赋值。我们大致浏览一下这个函数的代码，会发现它其实已经实现了解码器的查找，解码器的打开，视音频帧的读取，视音频帧的解码等工作。换句话说，该函数实际上已经“走通”的解码的整个流程。下面看一下除了成员变量赋值之外，该函数的几个关键流程。</p>
<ul>
<li><p>查找解码器：<code>find_decoder()</code></p>
</li>
<li><p>打开解码器：<code>avcodec_open2()</code></p>
</li>
<li><p>读取完整的一帧压缩编码的数据：<code>read_frame_internal()</code></p>
<p>注：<code>av_read_frame()</code> 内部实际上就是调用的 <code>read_frame_internal()</code>。</p>
</li>
<li><p>解码一些压缩编码数据：<code>try_decode_frame()</code></p>
</li>
</ul>
<h2 id="av-read-frame"><a href="#av-read-frame" class="headerlink" title="av_read_frame()"></a>av_read_frame()</h2><p>ffmpeg 中的 <code>av_read_frame()</code> 的作用是读取码流中的音频若干帧或者视频一帧。例如，解码视频的时候，每解码一个视频帧，需要先调用 <code>av_read_frame()</code> 获得一帧视频的压缩数据，然后才能对该数据进行解码（例如 H.264 中一帧压缩数据通常对应一个 NAL）。</p>
<p>上代码之前，先参考了其他人对 <code>av_read_frame()</code> 的解释，在此做一个参考：</p>
<blockquote>
<p>通过 <code>av_read_packet()</code>，读取一个包，需要说明的是此函数必须是包含整数帧的，不存在半帧的情况，以 ts 流为例，是读取一个完整的 PES 包（一个完整 pes 包包含若干视频或音频 es 包），读取完毕后，通过 <code>av_parser_parse2()</code> 分析出视频一帧（或音频若干帧），返回，下次进入循环的时候，如果上次的数据没有完全取完，则 <code>st = s-&gt;cur_st</code> ; 不会是 NULL，即再此进入 <code>av_parser_parse2()</code> 流程，而不是下面的 <code>av_read_packet（）</code> 流程，这样就保证了，如果读取一次包含了 N 帧视频数据（以视频为例），则调用 <code>av_read_frame（）</code> N 次都不会去读数据，而是返回第一次读取的数据，直到全部解析完毕。</p>
</blockquote>
<p><code>av_read_frame()</code> 的声明位于 <code>libavformat\avformat.h</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">av_read_frame</span><span class="params">(AVFormatContext *s, AVPacket *pkt)</span>;</span><br></pre></td></tr></table></figure>

<p><code>av_read_frame()</code> 使用方法在注释中写得很详细，用中文简单描述一下它的两个参数：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">s：输入的AVFormatContext</span><br><span class="line">pkt：输出的AVPacket</span><br></pre></td></tr></table></figure>

<p>如果返回 0 则说明读取正常。</p>
<p>函数调用结构图如下所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/av_read_frame.png" alt="av_read_frame"></p>
<p><code>av_read_frame()</code> 的定义位于 <code>libavformat\utils.c</code></p>
<p><code>read_frame_internal()</code> 代码比较长，这里只简单看一下它前面的部分。它前面部分有 2 步是十分关键的：</p>
<p>（1）调用了 <code>ff_read_packet()</code> 从相应的 AVInputFormat 读取数据。</p>
<p>（2）如果媒体频流需要使用 AVCodecParser，则调用 <code>parse_packet()</code> 解析相应的 AVPacket。</p>
<p><code>ff_read_packet()</code> 中最关键的地方就是调用了 AVInputFormat 的 <code>read_packet()</code> 方法。 AVInputFormat 的 <code>read_packet()</code> 是一个函数指针，指向当前的 AVInputFormat 的读取数据的函数。在这里我们以 FLV 封装格式对应的 AVInputFormat 为例，看看 <code>read_packet()</code> 的实现函数是什么样子的。</p>
<p>FLV 封装格式对应的 AVInputFormat 的定义位于 <code>libavformat\flvdec.c</code></p>
<details><summary>代码：</summary>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">AVInputFormat ff_flv_demuxer = &#123;</span><br><span class="line">    .name           = <span class="string">&quot;flv&quot;</span>,</span><br><span class="line">    .long_name      = NULL_IF_CONFIG_SMALL(<span class="string">&quot;FLV (Flash Video)&quot;</span>),</span><br><span class="line">    .priv_data_size = <span class="keyword">sizeof</span>(FLVContext),</span><br><span class="line">    .read_probe     = flv_probe,</span><br><span class="line">    .read_header    = flv_read_header,</span><br><span class="line">    .read_packet    = flv_read_packet,</span><br><span class="line">    .read_seek      = flv_read_seek,</span><br><span class="line">    .read_close     = flv_read_close,</span><br><span class="line">    .extensions     = <span class="string">&quot;flv&quot;</span>,</span><br><span class="line">    .priv_class     = &amp;flv_class,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</details>

<p>从 <code>ff_flv_demuxer</code> 的定义可以看出，<code>read_packet()</code> 对应的是 <code>flv_read_packet()</code> 函数。在看 <code>flv_read_packet()</code> 函数之前，我们先回顾一下 FLV 封装格式的结构，如下图所示。</p>
<p>PS：原图是网上找的，感觉画的很清晰，比官方的 Video File Format Specification 更加通俗易懂。但是图中有一个错误，就是 TagHeader 中的 StreamID 字段的长度写错了（查看了一下官方标准，应该是 3 字节，现在已经改过来了）。</p>
<p><img data-src="/images/imageFFmpeg/Thor/FLV%E5%B0%81%E8%A3%85%E6%A0%BC%E5%BC%8F.png" alt="FLV封装格式"></p>
<p>从图中可以看出，FLV 文件体部分是由一个一个的 Tag 连接起来的（中间间隔着 Previous Tag Size）。每个 Tag 包含了 Tag Header 和 Tag Data 两个部分。</p>
<p>Tag Data 根据 Tag 的 Type 不同而不同：可以分为音频 Tag Data，视频 Tag Data 以及 Script Tag Data。下面简述一下音频 Tag Data 和视频 Tag Data。</p>
<h3 id="Audio-Tag-Data"><a href="#Audio-Tag-Data" class="headerlink" title="Audio Tag Data"></a>Audio Tag Data</h3><p>Audio Tag在官方标准中定义如下。</p>
<p><img data-src="/images/imageFFmpeg/Thor/AudioTag.png" alt="Audio Tag"></p>
<p>Audio Tag 开始的第 1 个字节包含了音频数据的参数信息，从第 2 个字节开始为音频流数据。<br>第 1 个字节的前 4 位的数值表示了音频数据格式：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">0 = Linear PCM, platform endian</span><br><span class="line">1 = ADPCM</span><br><span class="line">2 = MP3</span><br><span class="line">3 = Linear PCM, little endian</span><br><span class="line">4 = Nellymoser 16-kHz mono</span><br><span class="line">5 = Nellymoser 8-kHz mono</span><br><span class="line">6 = Nellymoser</span><br><span class="line">7 = G.711 A-law logarithmic PCM</span><br><span class="line">8 = G.711 mu-law logarithmic PCM</span><br><span class="line">9 = reserved</span><br><span class="line">10 = AAC</span><br><span class="line">14 = MP3 8-Khz</span><br><span class="line">15 = Device-specific sound</span><br></pre></td></tr></table></figure>

<p>第 1 个字节的第 5-6 位的数值表示采样率：<code>0 = 5.5kHz，1 = 11KHz，2 = 22 kHz，3 = 44 kHz</code>。</p>
<p>第 1 个字节的第7位表示采样精度：<code>0 = 8bits，1 = 16bits</code>。</p>
<p>第 1 个字节的第8位表示音频类型：<code>0 = sndMono，1 = sndStereo</code>。</p>
<p>其中，当音频编码为 AAC 的时候，第一个字节后面存储的是 AACAUDIODATA，格式如下所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/AACAUDIODATA%E6%A0%BC%E5%BC%8F.png" alt="AACAUDIODATA格式"></p>
<h3 id="Video-Tag-Data"><a href="#Video-Tag-Data" class="headerlink" title="Video Tag Data"></a>Video Tag Data</h3><p>Video Tag在官方标准中的定义如下：</p>
<p><img data-src="/images/imageFFmpeg/Thor/VideoTag.png" alt="Video Tag"></p>
<p>Video Tag 也用开始的第 1 个字节包含视频数据的参数信息，从第 2 个字节为视频流数据。</p>
<p>第 1 个字节的前 4 位的数值表示帧类型（FrameType）：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1: keyframe (for AVC, a seekableframe)（关键帧）</span><br><span class="line">2: inter frame (for AVC, a nonseekableframe)</span><br><span class="line">3: disposable inter frame (H.263only)</span><br><span class="line">4: generated keyframe (reservedfor server use only)</span><br><span class="line">5: video info/command frame</span><br></pre></td></tr></table></figure>

<p>第 1 个字节的后 4 位的数值表示视频编码 ID（CodecID）：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1: JPEG (currently unused)</span><br><span class="line">2: Sorenson H.263</span><br><span class="line">3: Screen video</span><br><span class="line">4: On2 VP6</span><br><span class="line">5: On2 VP6 with alpha channel</span><br><span class="line">6: Screen video version 2</span><br><span class="line">7: AVC</span><br></pre></td></tr></table></figure>

<p>其中，当音频编码为 AVC（H.264）的时候，第一个字节后面存储的是 AVCVIDEOPACKET，格式如下所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/AVCVIDEOPACKET%E6%A0%BC%E5%BC%8F.png" alt="AVCVIDEOPACKET格式"></p>
<p>了解了 FLV 的基本格式之后，就可以看一下 FLV 解析 Tag 的函数 <code>flv_read_packet()了</code>。</p>
<p><code>flv_read_packet()</code> 的定义位于 <code>libavformat\flvdec.c</code></p>
<p><code>flv_read_packet()</code> 的代码比较长，但是逻辑比较简单。它的主要功能就是根据 FLV 文件格式的规范，逐层解析 Tag 以及 TagData，获取 Tag 以及 TagData 中的信息。比较关键的地方已经写上了注释，不再详细叙述。</p>
<p><code>parse_packet()</code> 给需要 AVCodecParser 的媒体流提供解析 AVPacket 的功能。</p>
<p>从代码中可以看出，最终调用了相应 AVCodecParser 的 <code>av_parser_parse2()</code> 函数，解析出来 AVPacket。此后根据解析的信息还进行了一系列的赋值工作，不再详细叙述。</p>
<h2 id="avcodec-decode-video2"><a href="#avcodec-decode-video2" class="headerlink" title="avcodec_decode_video2()"></a>avcodec_decode_video2()</h2><p>ffmpeg 中的 <code>avcodec_decode_video2()</code> 的作用是解码一帧视频数据。输入一个压缩编码的结构体 AVPacket，输出一个解码后的结构体 AVFrame。该函数的声明位于 <code>libavcodec\avcodec.h</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">avcodec_decode_video2</span><span class="params">(AVCodecContext *avctx, AVFrame *picture,</span></span><br><span class="line"><span class="params">                         <span class="type">int</span> *got_picture_ptr,</span></span><br><span class="line"><span class="params">                         <span class="type">const</span> AVPacket *avpkt)</span>;</span><br></pre></td></tr></table></figure>

<p>查看源代码之后发现，这个函数竟然十分的简单，源代码位于 <code>libavcodec\utils.c</code></p>
<p>从代码中可以看出，<code>avcodec_decode_video2()</code> 主要做了以下几个方面的工作：</p>
<p>（1）对输入的字段进行了一系列的检查工作：例如宽高是否正确，输入是否为视频等等。</p>
<p>（2）通过 <code>ret = avctx-&gt;codec-&gt;decode(avctx, picture, got_picture_ptr,&amp;tmp)</code> 这句代码，调用了相应 AVCodec 的 <code>decode()</code> 函数，完成了解码操作。</p>
<p>（3）对得到的 AVFrame 的一些字段进行了赋值，例如宽高、像素格式等等。</p>
<p>其中第二部是关键的一步，它调用了 AVCodec 的 <code>decode()</code> 方法完成了解码。AVCodec 的 <code>decode()</code> 方法是一个函数指针，指向了具体解码器的解码函数。在这里我们以 H.264 解码器为例，看一下解码的实现过程。H.264 解码器对应的 AVCodec 的定义位于 <code>libavcodec\h264.c</code>，如下所示。</p>
<details><summary>代码：</summary>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">AVCodec ff_h264_decoder = &#123;</span><br><span class="line">    .name                  = <span class="string">&quot;h264&quot;</span>,</span><br><span class="line">    .long_name             = <span class="built_in">NULL_IF_CONFIG_SMALL</span>(<span class="string">&quot;H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10&quot;</span>),</span><br><span class="line">    .type                  = AVMEDIA_TYPE_VIDEO,</span><br><span class="line">    .id                    = AV_CODEC_ID_H264,</span><br><span class="line">    .priv_data_size        = <span class="built_in">sizeof</span>(H264Context),</span><br><span class="line">    .init                  = ff_h264_decode_init,</span><br><span class="line">    .close                 = h264_decode_end,</span><br><span class="line">    .decode                = h264_decode_frame,</span><br><span class="line">    .capabilities          = <span class="comment">/*CODEC_CAP_DRAW_HORIZ_BAND |*/</span> CODEC_CAP_DR1 |</span><br><span class="line">                             CODEC_CAP_DELAY | CODEC_CAP_SLICE_THREADS |</span><br><span class="line">                             CODEC_CAP_FRAME_THREADS,</span><br><span class="line">    .flush                 = flush_dpb,</span><br><span class="line">    .init_thread_copy      = <span class="built_in">ONLY_IF_THREADS_ENABLED</span>(decode_init_thread_copy),</span><br><span class="line">    .update_thread_context = <span class="built_in">ONLY_IF_THREADS_ENABLED</span>(ff_h264_update_thread_context),</span><br><span class="line">    .profiles              = <span class="built_in">NULL_IF_CONFIG_SMALL</span>(profiles),</span><br><span class="line">    .priv_class            = &amp;h264_class,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</details>

<p>从 <code>ff_h264_decoder</code> 的定义可以看出，<code>decode()</code> 指向了 <code>h264_decode_frame()</code> 函数。</p>
<p>从 <code>h264_decode_frame()</code> 的定义可以看出，它调用了 <code>decode_nal_units()</code> 完成了具体的 H.264 解码工作。</p>
<h2 id="avformat-close-input"><a href="#avformat-close-input" class="headerlink" title="avformat_close_input()"></a>avformat_close_input()</h2><p>该函数用于关闭一个 AVFormatContext，一般情况下是和 <code>avformat_open_input()</code> 成对使用的。</p>
<p>函数的调用关系如下图所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/avformat_close_input.png" alt="avformat_close_input"></p>
<p><code>avformat_close_input()</code> 的源代码位于 <code>libavformat\utils.c</code></p>
<p>从源代码中可以看出，<code>avformat_close_input()</code> 主要做了以下几步工作：</p>
<p>（1）调用 AVInputFormat 的 <code>read_close()</code> 方法关闭输入流</p>
<p>（2）调用 <code>avformat_free_context()</code> 释放 AVFormatContext</p>
<p>（3）调用 <code>avio_close()</code> 关闭并且释放 AVIOContext</p>
<h1 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h1><h2 id="avformat-alloc-output-context2"><a href="#avformat-alloc-output-context2" class="headerlink" title="avformat_alloc_output_context2()"></a>avformat_alloc_output_context2()</h2><p>在基于 FFmpeg 的视音频编码器程序中，该函数通常是第一个调用的函数（除了组件注册函数 <code>av_register_all()</code>）。</p>
<p><code>avformat_alloc_output_context2()</code> 函数可以初始化一个用于输出的 AVFormatContext 结构体。它的声明位于 <code>libavformat\avformat.h</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">avformat_alloc_output_context2</span><span class="params">(AVFormatContext **ctx, AVOutputFormat *oformat,</span></span><br><span class="line"><span class="params">                                   <span class="type">const</span> <span class="type">char</span> *format_name, <span class="type">const</span> <span class="type">char</span> *filename)</span>;</span><br></pre></td></tr></table></figure>

<p>代码中的英文注释写的已经比较详细了，在这里拿中文简单叙述一下。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ctx：函数调用成功之后创建的AVFormatContext结构体。</span><br><span class="line">oformat：指定AVFormatContext中的AVOutputFormat，用于确定输出格式。如果指定为NULL，可以设定后两个参数（format_name或者filename）由FFmpeg猜测输出格式。</span><br><span class="line">PS：使用该参数需要自己手动获取AVOutputFormat，相对于使用后两个参数来说要麻烦一些。</span><br><span class="line">format_name：指定输出格式的名称。根据格式名称，FFmpeg会推测输出格式。输出格式可以是“flv”，“mkv”等等。</span><br><span class="line">filename：指定输出文件的名称。根据文件名称，FFmpeg会推测输出格式。文件名称可以是“xx.flv”，“yy.mkv”等等。</span><br></pre></td></tr></table></figure>

<p>函数执行成功的话，其返回值大于等于0。</p>
<p>首先贴出来最终分析得出的函数调用结构图，如下所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/avformat_alloc_output_context2.png" alt="avformat_alloc_output_context2"></p>
<p><code>avformat_alloc_output_context2()</code> 的函数定义位于 <code>libavformat\mux.c</code></p>
<p>从代码中可以看出，<code>avformat_alloc_output_context2()</code> 的流程如要包含以下 2 步：</p>
<ol>
<li><p>   调用 <code>avformat_alloc_context()</code> 初始化一个默认的 AVFormatContext。</p>
</li>
<li><p>   如果指定了输入的 AVOutputFormat，则直接将输入的 AVOutputFormat 赋值给AVOutputFormat 的 oformat。如果没有指定输入的 AVOutputFormat，就需要根据文件格式名称或者文件名推测输出的 AVOutputFormat。无论是通过文件格式名称还是文件名推测输出格式，都会调用一个函数 <code>av_guess_format()</code>。</p>
</li>
</ol>
<p><code>avformat_alloc_context()</code> 首先调用 <code>av_malloc()</code> 为 AVFormatContext 分配一块内存。然后调用了一个函数 <code>avformat_get_context_defaults()</code> 用于给 AVFormatContext 设置默认值</p>
<p><code>avformat_alloc_context()</code> 首先调用 <code>memset()</code> 将 AVFormatContext 的内存置零；然后指定它的AVClass（指定了 AVClass 之后，该结构体就支持和 AVOption 相关的功能）；最后调用 <code>av_opt_set_defaults()</code> 给 AVFormatContext 的成员变量设置默认值（<code>av_opt_set_defaults()</code> 就是和 AVOption 有关的一个函数，专门用于给指定的结构体设定默认值，此处暂不分析）。</p>
<p><code>av_guess_format()</code> 中使用一个整型变量 score 记录每种输出格式的匹配程度。函数中包含了一个 <code>while()</code> 循环，该循环利用函数 <code>av_oformat_next()</code> 遍历 FFmpeg 中所有的 AVOutputFormat，并逐一计算每个输出格式的 score。具体的计算过程分成如下几步：</p>
<ol>
<li><p>   如果封装格式名称匹配，score 增加 100。匹配中使用了函数 <code>av_match_name()</code>。</p>
</li>
<li><p>   如果 mime 类型匹配，score 增加 10。匹配直接使用字符串比较函数 <code>strcmp()</code>。</p>
</li>
<li><p>   如果文件名称的后缀匹配，score 增加 5。匹配中使用了函数 <code>av_match_ext()</code>。</p>
</li>
</ol>
<p><code>while()</code> 循环结束后，得到得分最高的格式，就是最匹配的格式。</p>
<p>下面看一下一个 AVOutputFormat 的实例，就可以理解 “封装格式名称”，“mine类型”，“文件名称后缀” 这些概念了。下面是 flv 格式的视音频复用器（Muxer）对应的 AVOutputFormat 格式的变量 <code>ff_flv_muxer</code>。</p>
<details><summary>代码：</summary>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">AVOutputFormat ff_flv_muxer = &#123;</span><br><span class="line">    .name           = <span class="string">&quot;flv&quot;</span>,</span><br><span class="line">    .long_name      = NULL_IF_CONFIG_SMALL(<span class="string">&quot;FLV (Flash Video)&quot;</span>),</span><br><span class="line">    .mime_type      = <span class="string">&quot;video/x-flv&quot;</span>,</span><br><span class="line">    .extensions     = <span class="string">&quot;flv&quot;</span>,</span><br><span class="line">    .priv_data_size = <span class="keyword">sizeof</span>(FLVContext),</span><br><span class="line">    .audio_codec    = CONFIG_LIBMP3LAME ? AV_CODEC_ID_MP3 : AV_CODEC_ID_ADPCM_SWF,</span><br><span class="line">    .video_codec    = AV_CODEC_ID_FLV1,</span><br><span class="line">    .write_header   = flv_write_header,</span><br><span class="line">    .write_packet   = flv_write_packet,</span><br><span class="line">    .write_trailer  = flv_write_trailer,</span><br><span class="line">    .codec_tag      = (<span class="type">const</span> AVCodecTag* <span class="type">const</span> []) &#123;</span><br><span class="line">                          flv_video_codec_ids, flv_audio_codec_ids, <span class="number">0</span></span><br><span class="line">                      &#125;,</span><br><span class="line">    .flags          = AVFMT_GLOBALHEADER | AVFMT_VARIABLE_FPS |</span><br><span class="line">                      AVFMT_TS_NONSTRICT,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</details>

<h2 id="avformat-write-header"><a href="#avformat-write-header" class="headerlink" title="avformat_write_header()"></a>avformat_write_header()</h2><p>FFmpeg 的写文件用到的 3 个函数：</p>
<ul>
<li><strong><code>avformat_write_header()</code></strong></li>
<li><strong><code>av_write_frame()</code></strong></li>
<li><strong><code>av_write_trailer()</code></strong></li>
</ul>
<p>其中 <code>av_write_frame()</code> 用于写视频数据，<code>avformat_write_header()</code> 用于写视频文件头，而 <code>av_write_trailer()</code> 用于写视频文件尾。</p>
<p>本文首先分析<code>avformat_write_header()</code>。</p>
<p>PS：需要注意的是，尽管这 3 个函数功能是配套的，但是它们的前缀却不一样，写文件头 Header 的函数前缀是“<code>avformat_</code>”，其他两个函数前缀是“<code>av_</code>”（不太明白其中的原因）。</p>
<p><code>avformat_write_header()</code> 的声明位于 <code>libavformat\avformat.h</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">avformat_write_header</span><span class="params">(AVFormatContext *s, AVDictionary **options)</span>;</span><br></pre></td></tr></table></figure>

<p>简单解释一下它的参数的含义：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">s：用于输出的AVFormatContext。</span><br><span class="line">options：额外的选项，目前没有深入研究过，一般为NULL。</span><br></pre></td></tr></table></figure>

<p>函数正常执行后返回值等于 0。</p>
<p><code>avformat_write_header()</code> 的调用关系如下图所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/avformat_write_header.png" alt="avformat_write_header"></p>
<p><code>avformat_write_header()</code> 的定义位于 <code>libavformat\mux.c</code></p>
<p>从源代码可以看出，<code>avformat_write_header()</code> 完成了以下工作：</p>
<p>（1）调用 <code>init_muxer()</code> 初始化复用器</p>
<p>（2）调用 AVOutputFormat 的 <code>write_header()</code></p>
<p><code>init_muxer()</code> 代码很长，但是它所做的工作比较简单，可以概括成两个字：检查。函数的流程可以概括成以下几步：</p>
<p>（1）将传入的 AVDictionary 形式的选项设置到 AVFormatContext</p>
<p>（2）遍历 AVFormatContext 中的每个 AVStream，并作如下检查：</p>
<ul>
<li><p>a) AVStream 的 time_base 是否正确设置。如果发现 AVStream 的 time_base 没有设置，则会调用 <code>avpriv_set_pts_info()</code> 进行设置。</p>
</li>
<li><p>b) 对于音频，检查采样率设置是否正确；对于视频，检查宽、高、宽高比。</p>
</li>
<li><p>c) 其他一些检查，不再详述。</p>
</li>
</ul>
<p><strong>AVOutputFormat-&gt;write_header()</strong></p>
<p><code>avformat_write_header()</code> 中最关键的地方就是调用了 AVOutputFormat 的 <code>write_header()</code>。</p>
<p><code>write_header()</code> 是 AVOutputFormat 中的一个函数指针，指向写文件头的函数。不同的AVOutputFormat 有不同的 <code>write_header()</code> 的实现方法。在这里我们举例子看一下 FLV 封装格式对应的 AVOutputFormat，它的定义位于 <code>libavformat\flvenc.c</code></p>
<p>从 <code>ff_flv_muxer</code> 的定义中可以看出，<code>write_header()</code> 指向的函数为 <code>flv_write_header()</code>。我们继续看一下 <code>flv_write_header()</code> 函数。<code>flv_write_header()</code> 的定义同样位于 <code>libavformat\flvenc.c</code></p>
<p>从源代码可以看出，<code>flv_write_header()</code> 完成了FLV文件头的写入工作。该函数的工作可以大体分为以下两部分：</p>
<p>（1）给 FLVContext 设置参数</p>
<p>（2）写文件头，以及相关的 Tag</p>
<p>可以参考下图中 FLV 文件头的定义比对一下上面的代码。</p>
<p><img data-src="/images/imageFFmpeg/Thor/FLVHeader.png" alt="FLV Header.png"></p>
<h2 id="avcodec-encode-video"><a href="#avcodec-encode-video" class="headerlink" title="avcodec_encode_video()"></a>avcodec_encode_video()</h2><p>该函数用于编码一帧视频数据。<code>avcodec_encode_video2()</code> 函数的声明位于 <code>libavcodec\avcodec.h</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">avcodec_encode_video2</span><span class="params">(AVCodecContext *avctx, AVPacket *avpkt,</span></span><br><span class="line"><span class="params">                          <span class="type">const</span> AVFrame *frame, <span class="type">int</span> *got_packet_ptr)</span>;</span><br></pre></td></tr></table></figure>

<p>该函数每个参数的含义在注释里面已经写的很清楚了，在这里用中文简述一下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">avctx：编码器的AVCodecContext。</span><br><span class="line">avpkt：编码输出的AVPacket。</span><br><span class="line">frame：编码输入的AVFrame。</span><br><span class="line">got_packet_ptr：成功编码一个AVPacket的时候设置为1。</span><br></pre></td></tr></table></figure>

<p>函数返回0代表编码成功。</p>
<p>函数的调用关系如下图所示：</p>
<p><img data-src="/images/imageFFmpeg/Thoreavcodec_encode_video.png" alt="avcodec_encode_video"></p>
<p><code>avcodec_encode_video2()</code> 的定义位于 <code>libavcodec\utils.c</code></p>
<p>从函数的定义可以看出，<code>avcodec_encode_video2()</code> 首先调用了 <code>av_image_check_size()</code> 检查设置的宽高参数是否合理，然后调用了 AVCodec 的 <code>encode2()</code> 调用具体的解码器。</p>
<p><code>av_image_check_size()</code> 主要是要求图像宽高必须为正数，而且取值不能太大。</p>
<p>AVCodec 的 <code>encode2()</code> 是一个函数指针，指向特定编码器的编码函数</p>
<p>从 <code>ff_libx264_encoder</code> 的定义可以看出，<code>encode2()</code> 函数指向的是 <code>X264_frame()</code> 函数。</p>
<p><code>X264_frame()</code> 函数的定义位于 <code>libavcodec\libx264.c</code></p>
<h2 id="av-write-frame"><a href="#av-write-frame" class="headerlink" title="av_write_frame()"></a>av_write_frame()</h2><p><code>av_write_frame()</code> 用于输出一帧视音频数据，它的声明位于 <code>libavformat\avformat.h</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">av_write_frame</span><span class="params">(AVFormatContext *s, AVPacket *pkt)</span>;</span><br></pre></td></tr></table></figure>

<p>简单解释一下它的参数的含义：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">s：用于输出的AVFormatContext。</span><br><span class="line">pkt：等待输出的AVPacket。</span><br></pre></td></tr></table></figure>

<p>函数正常执行后返回值等于 0。</p>
<p><code>av_write_frame()</code> 的调用关系如下图所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/av_write_frame.png" alt="av_write_frame"></p>
<p><code>av_write_frame()</code> 的定义位于 <code>libavformat\mux.c</code></p>
<p>从源代码可以看出，<code>av_write_frame()</code> 主要完成了以下几步工作：</p>
<p>（1）调用 <code>check_packet()</code> 做一些简单的检测</p>
<p>（2）调用 <code>compute_pkt_fields2()</code> 设置 AVPacket 的一些属性值</p>
<p>（3）调用 <code>write_packet()</code> 写入数据</p>
<p><code>check_packet()</code> 的功能比较简单：首先检查一下输入的 AVPacket 是否为空，如果为空，则是直接返回；然后检查一下 AVPacket 的 <code>stream_index</code>（标记了该 AVPacket 所属的 AVStream）设置是否正常，如果为负数或者大于 AVStream 的个数，则返回错误信息；最后检查 AVPacket 所属的 AVStream 是否属于 attachment stream，这个地方没见过，目前还没有研究。</p>
<p><code>compute_pkt_fields2()</code> 函数的定义位于 <code>libavformat\mux.c</code></p>
<p><code>compute_pkt_fields2()</code> 主要有两方面的功能：</p>
<ul>
<li>一方面用于计算 AVPacket 的 duration， dts 等信息；</li>
<li>另一方面用于检查 pts、dts 这些参数的合理性（例如 PTS 是否一定大于 DTS）。具体的代码还没有细看，以后有时间再进行分析。</li>
</ul>
<p><code>write_packet()</code> 函数的定义位于 <code>libavformat\mux.c</code></p>
<p><code>write_packet()</code> 函数最关键的地方就是调用了 AVOutputFormat 中写入数据的方法。如果 AVPacket 中的 flag 标记中包含 AV_PKT_FLAG_UNCODED_FRAME，就会调用 AVOutputFormat 的 <code>write_uncoded_frame()</code> 函数；如果不包含那个标记，就会调用 <code>write_packet()</code> 函数。 <code>write_packet()</code> 实际上是一个函数指针，指向特定的 AVOutputFormat 中的实现函数。例如，我们看一下 FLV 对应的 AVOutputFormat，位于 <code>libavformat\flvenc.c</code></p>
<p>从 <code>ff_flv_muxer</code> 的定义可以看出，<code>write_packet()</code> 指向的是 <code>flv_write_packet()</code> 函数。在看 <code>flv_write_packet()</code> 函数的定义之前，先回顾一下 FLV 封装格式的结构。</p>
<h2 id="av-write-trailer"><a href="#av-write-trailer" class="headerlink" title="av_write_trailer()"></a>av_write_trailer()</h2><p><code>av_write_trailer()</code> 用于输出文件尾，它的声明位于 <code>libavformat\avformat.h</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">av_write_trailer</span><span class="params">(AVFormatContext *s)</span>;</span><br></pre></td></tr></table></figure>

<p>它只需要指定一个参数，即用于输出的 AVFormatContext。</p>
<p>函数正常执行后返回值等于 0。</p>
<p><code>av_write_trailer()</code> 的调用关系如下图所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/av_write_trailer.png" alt="av_write_trailer"></p>
<p><code>av_write_trailer()</code> 的定义位于 <code>libavformat\mux.c</code></p>
<p>从源代码可以看出 <code>av_write_trailer()</code> 主要完成了以下两步工作：</p>
<p>（1）循环调用 <code>interleave_packet()</code> 以及 <code>write_packet()</code>，将还未输出的 AVPacket 输出出来。</p>
<p>（2）调用 AVOutputFormat 的 <code>write_trailer()</code>，输出文件尾。</p>
<p>其中第一步和 <code>av_write_frame()</code> 中的步骤大致是一样的（<code>interleave_packet()</code> 这一部分在并不包含在 <code>av_write_frame()</code> 中，而是包含在 <code>av_interleaved_write_frame()</code> 中，这一部分源代码还没有分析）</p>
<p>AVOutputFormat 的 <code>write_trailer()</code> 是一个函数指针，指向特定的 AVOutputFormat 中的实现函数。我们以 FLV 对应的 AVOutputFormat 为例，看一下它的定义</p>
<p>从 FLV 对应的 AVOutputFormat 结构体的定义我们可以看出，<code>write_trailer()</code> 指向了<code>flv_write_trailer()</code> 函数。</p>
<p><code>flv_write_trailer()</code> 函数的定义位于 <code>libavformat\flvenc.c</code></p>
<p>从 <code>flv_write_trailer()</code> 的源代码可以看出该函数做了以下两步工作：</p>
<p>（1）如果视频流是 H.264，则添加包含 EOS（End Of Stream） NALU 的 Tag。</p>
<p>（2）更新 FLV 的时长信息，以及文件大小信息。</p>
<p>其中，<code>put_avc_eos_tag()</code> 函数用于添加包含 EOS NALU 的 Tag（包含结尾的一个PreviousTagSize）</p>
<p>可以参考 FLV 封装格式理解上述函数。由于前面的文章中已经描述过 FLV 封装格式，在这里不再重复叙述，在这里仅在此记录一下 AVCVIDEOPACKET 的格式，如下所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/AVCVIDEOPACKET%E6%A0%BC%E5%BC%8F.png" alt="AVCVIDEOPACKET格式"></p>
<p>可以看出包含 EOS NALU 的 AVCVIDEOPACKET 的 AVCPacketType 为 2。在这种情况下， AVCVIDEOPACKET 的 CompositionTime 字段取 0，并且无需包含 Data 字段。</p>
<h1 id="日志输出系统"><a href="#日志输出系统" class="headerlink" title="日志输出系统"></a>日志输出系统</h1><blockquote>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/44243155">日志输出系统</a></p>
</blockquote>
<h2 id="av-log"><a href="#av-log" class="headerlink" title="av_log()"></a>av_log()</h2><p>本文分析一下 FFmpeg 的日志（Log）输出系统的源代码。日志输出部分的核心函数只有一个： <code>av_log()</code>。使用 <code>av_log()</code> 在控制台输出日志的效果如下图所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/av_log%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA.png" alt="av_log控制台日志输出"></p>
<p>FFmpeg 日志输出系统的函数调用结构图如图所示：</p>
<p><img data-src="/images/imageFFmpeg/Thor/av_log.png" alt="FFmpeg 日志输出系统的函数调用结构图"></p>
<p><code>av_log()</code> 是 FFmpeg 中输出日志的函数。随便打开一个 FFmpeg 的源代码文件，就会发现其中遍布着 <code>av_log()</code> 函数。一般情况下 FFmpeg 类库的源代码中是不允许使用 <code>printf()</code> 这种的函数的，所有的输出一律使用 <code>av_log()</code>。</p>
<p>av_log()的声明位于libavutil\log.h</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">av_log</span><span class="params">(<span class="type">void</span> *avcl, <span class="type">int</span> level, <span class="type">const</span> <span class="type">char</span> *fmt, ...)</span> <span class="title function_">av_printf_format</span><span class="params">(<span class="number">3</span>, <span class="number">4</span>)</span>;</span><br></pre></td></tr></table></figure>

<p>这个函数的声明有两个地方比较特殊：</p>
<p>（1）函数最后一个参数是 “…”。</p>
<p>在 C 语言中，在函数参数数量不确定的情况下使用 “…” 来代表参数。例如 <code>printf()</code> 的原型定义如下</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">printf</span> <span class="params">(<span class="type">const</span> <span class="type">char</span>*, ...)</span>;</span><br></pre></td></tr></table></figure>

<p>（2）它的声明后面有一个 <code>av_printf_format(3, 4)</code>。有关这个地方的左右还没有深入研究，网上资料中说它的作用是按照 <code>printf()</code> 的格式检查 <code>av_log()</code> 的格式。</p>
<p>av_log()每个字段的含义如下：</p>
<ul>
<li>avcl：指定一个包含 AVClass 的结构体。</li>
<li>level：log 的级别</li>
<li>fmt：和 <code>printf()</code> 一样。</li>
</ul>
<p>由此可见，<code>av_log()</code> 和 <code>printf()</code> 的不同主要在于前面多了两个参数。其中第一个参数指定该 log 所属的结构体，例如 AVFormatContext、AVCodecContext 等等。第二个参数指定 log 的级别，源代码中定义了如下几个级别。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> AV_LOG_QUIET    -8</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> AV_LOG_PANIC     0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> AV_LOG_FATAL     8</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> AV_LOG_ERROR    16</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> AV_LOG_WARNING  24</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> AV_LOG_INFO     32</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> AV_LOG_VERBOSE  40</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> AV_LOG_DEBUG    48</span></span><br></pre></td></tr></table></figure>

<p>从定义中可以看出来，随着严重程度逐渐下降，一共包含如下级别：</p>
<ul>
<li>AV_LOG_PANIC，</li>
<li>AV_LOG_FATAL，</li>
<li>AV_LOG_ERROR，</li>
<li>AV_LOG_WARNING，</li>
<li>AV_LOG_INFO，</li>
<li>AV_LOG_VERBOSE，</li>
<li>AV_LOG_DEBUG。</li>
</ul>
<p>每个级别定义的数值代表了严重程度，数值越小代表越严重。默认的级别是 AV_LOG_INFO。此外，还有一个级别不输出任何信息，即 AV_LOG_QUIET。</p>
<p>当前系统存在着一个 “Log级别”。所有严重程度高于该级别的 Log 信息都会输出出来。例如当前的 Log 级别是 AV_LOG_WARNING，则会输出 AV_LOG_PANIC，AV_LOG_FATAL，AV_LOG_ERROR，AV_LOG_WARNING 级别的信息，而不会输出 AV_LOG_INFO 级别的信息。可以通过 <code>av_log_get_level()</code> 获得当前 Log 的级别，通过另一个函数 <code>av_log_set_level()</code> 设置当前的 Log 级别。</p>
<p>可以通过 <code>av_log_set_level()</code> 设置当前 Log 的级别。</p>
<h1 id="接头体成员管理系统"><a href="#接头体成员管理系统" class="headerlink" title="接头体成员管理系统"></a>接头体成员管理系统</h1><h2 id="AVClass"><a href="#AVClass" class="headerlink" title="AVClass"></a>AVClass</h2><blockquote>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/44268323">FFmpeg源代码简单分析：结构体成员管理系统-AVClass</a></p>
</blockquote>
<p>TODO</p>
<h2 id="AVOption"><a href="#AVOption" class="headerlink" title="AVOption"></a>AVOption</h2><blockquote>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/44279329">FFmpeg源代码简单分析：结构体成员管理系统-AVOption</a></p>
</blockquote>
<p>TODO</p>
<h1 id="libswscale"><a href="#libswscale" class="headerlink" title="libswscale"></a>libswscale</h1><h2 id="sws-getContext"><a href="#sws-getContext" class="headerlink" title="sws_getContext()"></a>sws_getContext()</h2><blockquote>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/44305697">FFmpeg源代码简单分析：libswscale的sws_getContext()</a></p>
</blockquote>
<p>TODO</p>
<h2 id="sws-scale"><a href="#sws-scale" class="headerlink" title="sws_scale()"></a>sws_scale()</h2><blockquote>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/44346687">FFmpeg源代码简单分析：libswscale的sws_scale()</a></p>
</blockquote>
<p>TODO</p>
<h1 id="libavdevice"><a href="#libavdevice" class="headerlink" title="libavdevice"></a>libavdevice</h1><h2 id="avdevice-register-all"><a href="#avdevice-register-all" class="headerlink" title="avdevice_register_all()"></a>avdevice_register_all()</h2><blockquote>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/41211121">FFmpeg源代码简单分析：libavdevice的avdevice_register_all()</a></p>
</blockquote>
<h2 id="gdigrab"><a href="#gdigrab" class="headerlink" title="gdigrab"></a>gdigrab</h2><blockquote>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/44597955">FFmpeg源代码简单分析：libavdevice的gdigrab</a></p>
</blockquote>
<p><img data-src="/images/imageFFmpeg/Thor/"></p>
]]></content>
      <categories>
        <category>FFmpeg</category>
      </categories>
      <tags>
        <tag>FFmpeg</tag>
      </tags>
  </entry>
  <entry>
    <title>FFMpeg实时美颜直播推流</title>
    <url>/2019/05/19/FFmpeg/ffmpeg%E5%AE%9E%E6%97%B6%E7%BE%8E%E9%A2%9C%E6%8E%A8%E6%B5%81/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.jianshu.com/p/6b9ab2652147">基于FFmpeg进行RTMP推流（二）</a></p>
</blockquote>
<p>实战 - 基于ffmpeg，qt5，opencv视频课程</p>
<h2 id="1-基础知识"><a href="#1-基础知识" class="headerlink" title="1. 基础知识"></a>1. 基础知识</h2><h3 id="1-1-直播推流流程分析"><a href="#1-1-直播推流流程分析" class="headerlink" title="1.1 直播推流流程分析"></a>1.1 直播推流流程分析</h3><span id="more"></span>

<img data-src="/images/imageFFmpeg/直播.png">

<p>rtmp 延时一般 1-3 秒</p>
<img data-src="/images/imageFFmpeg/推流流程.png">

<h3 id="1-2-直播-rtmp-协议分析"><a href="#1-2-直播-rtmp-协议分析" class="headerlink" title="1.2 直播 rtmp 协议分析"></a>1.2 直播 rtmp 协议分析</h3><img data-src="/images/imageFFmpeg/协议.png">

<img data-src="/images/imageFFmpeg/传输协议.png">

<img data-src="/images/imageFFmpeg/RTMP.png">

<img data-src="/images/imageFFmpeg/RTMP优缺点.png">

<img data-src="/images/imageFFmpeg/RTMP协议类型.png">

<img data-src="/images/imageFFmpeg/握手.png">

<img data-src="/images/imageFFmpeg/推流.png">

<h2 id="2-直播服务器讲解和配置"><a href="#2-直播服务器讲解和配置" class="headerlink" title="2. 直播服务器讲解和配置"></a>2. 直播服务器讲解和配置</h2><img data-src="/images/imageFFmpeg/流媒体服务器.png">

<h3 id="2-1-直播服务器介绍-crtmpserver-编译运行"><a href="#2-1-直播服务器介绍-crtmpserver-编译运行" class="headerlink" title="2.1 直播服务器介绍 crtmpserver 编译运行"></a>2.1 直播服务器介绍 crtmpserver 编译运行</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">apt-get install wget cmake</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">apt-get install libssl-dev</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">wget  https://codeload.github.com/j0sh/crtmpserver/zip/centosinit --no-check-certificate</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">unzip centosinit</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> builders/cmake</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake .</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./crtmpserver/crtmpserver ./crtmpserver/crtmpserver.lua</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">$ ffmpeg  -i test.flv  -f flv rtmp://192.168.1.44/live</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ʹc rtmp://192.168.1.44/live</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ʹplay ffplay rtmp://192.168.1.44/live  -fflags nobuffer</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">error</span></span><br><span class="line">CMake Error at cmake_find_modules/Find_openssl.cmake:99 (MESSAGE):</span><br><span class="line">  Looking for openssl headers - not found</span><br><span class="line">Call Stack (most recent call first):</span><br><span class="line">  CMakeLists.txt:46 (INCLUDE)</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake -DOPENSSL_ROOT_DIR=/usr/local/opt/openssl -DOPENSSL_LIBRARIES=/usr/local/opt/openssl/lib</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-下载-ffmpeg-工具推流并使用功能-vlc-拉流播放测试"><a href="#2-2-下载-ffmpeg-工具推流并使用功能-vlc-拉流播放测试" class="headerlink" title="2.2 下载 ffmpeg 工具推流并使用功能 vlc 拉流播放测试"></a>2.2 下载 ffmpeg 工具推流并使用功能 vlc 拉流播放测试</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">wget https://nginx.org/download/nginx-1.16.0.tar.gz --no-check-certificate</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/arut/nginx-rtmp-module.git</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure --add-module=/home/miaopei/workdir/test/ffmpet-test/nginx/nginx-rtmp-module</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make install</span></span><br></pre></td></tr></table></figure>

<img data-src="/images/imageFFmpeg/ffmpeg工具推流测试.png">

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">nginx.conf 配置</span></span><br><span class="line">rtmp &#123;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen 1935;</span><br><span class="line">        chunk_size 4096;</span><br><span class="line">        application live &#123;</span><br><span class="line">            live on;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">推流命令</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ffmpeg -i test.mp4 -c copy -f flv rtmp://192.168.2.76/live</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">网页查看推流的状态</span></span><br><span class="line">server &#123;</span><br><span class="line">    listen 8080;</span><br><span class="line">    location /stat&#123;</span><br><span class="line">        rtmp_stat all;</span><br><span class="line">        rtmp_stat_stylesheet stat.xsl;</span><br><span class="line">    &#125;</span><br><span class="line">    location /stat.xsl&#123;</span><br><span class="line">        root /home/miaopei/workdir/test/ffmpet-test/nginx/nginx-rtmp-module;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Reload config:</span><br><span class="line"><span class="meta prompt_"> $ </span><span class="language-bash">nginx -s reload</span></span><br><span class="line">Reopen Logfile:</span><br><span class="line"><span class="meta prompt_"> $ </span><span class="language-bash">nginx -s reopen</span></span><br><span class="line">Stop process:</span><br><span class="line"><span class="meta prompt_"> $ </span><span class="language-bash">nginx -s stop</span></span><br><span class="line">Waiting on exit process</span><br><span class="line"><span class="meta prompt_"> $ </span><span class="language-bash">nginx -s quit</span></span><br></pre></td></tr></table></figure>

<h2 id="3-FFMpeg-SDK-解封和推流"><a href="#3-FFMpeg-SDK-解封和推流" class="headerlink" title="3. FFMpeg SDK 解封和推流"></a>3. FFMpeg SDK 解封和推流</h2><h3 id="3-1-ffmpeg-SDK开发环境准备"><a href="#3-1-ffmpeg-SDK开发环境准备" class="headerlink" title="3.1 ffmpeg SDK开发环境准备"></a>3.1 ffmpeg SDK开发环境准备</h3><img data-src="/images/imageFFmpeg/使用FFMpegSDK推流.png">

<img data-src="/images/imageFFmpeg/avformat_open_input.png">

<img data-src="/images/imageFFmpeg/AVFormatContext.png">

<img data-src="/images/imageFFmpeg/AVStream.png">

<img data-src="/images/imageFFmpeg/AVPacket.png">

<img data-src="/images/imageFFmpeg/GOP.png">

<img data-src="/images/imageFFmpeg/基于海康或大华相机推流.png">

<h2 id="4-OpencvSDK-基础"><a href="#4-OpencvSDK-基础" class="headerlink" title="4. OpencvSDK 基础"></a>4. OpencvSDK 基础</h2><blockquote>
<p><a href="https://blog.csdn.net/u010164190/article/details/79108608">Mac源码安装使用OpenCV</a></p>
<p><a href="https://blog.csdn.net/marksim/article/details/79146346">在MacOS 10.13.2 下编译 OpenCV3.4.0 + OpenCV Contrib 3.4.0 成 Java 库</a></p>
<p><a href="https://www.jianshu.com/p/a36d41241ae8">在MacOS上安装OpenCV 3.4(c++)</a></p>
</blockquote>
<details><summary>OpenCV 源码编译：</summary>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载 OpenCV 3.4.0</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># 解压，进入到 opencv-3.4.0 目录下</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> -p build/install</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake -G <span class="string">&quot;Unix Makefiles&quot;</span> -j8 -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_OSX_ARCHITECTURES=x86_64 -D CMAKE_INSTALL_PREFIX=/Users/miaopei/install/opencv/opencv-3.4.0/build/install ../</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make -j8</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make install</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置环境变量</span></span><br><span class="line">PKG_CONFIG_PATH=$PKG_CONFIG_PATH:Users/miaopei/install/opencv/opencv-3.4.0/build/install/lib/pkgconfig</span><br><span class="line">export PKG_CONFIG_PATH</span><br><span class="line">export LD_LIBRARY_PATH=Users/miaopei/install/opencv/opencv-3.4.0/build/install/bin:SLD_LIBRARY_PATH</span><br><span class="line">export PATH=$&#123;PATH&#125;:Users/miaopei/install/opencv/opencv-3.4.0/build/install/lib</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">测试demo,打印当前版本号</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">include &lt;opencv2/core/utility.hpp&gt;</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">include &lt;iostream&gt;</span></span><br><span class="line">int main(int argc, const char* argv[])&#123;</span><br><span class="line">  std::cout &lt;&lt; &quot;Welcome to OpenCV &quot; &lt;&lt; CV_VERSION &lt;&lt; std::endl; </span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Makefile</span></span><br><span class="line">CXX ?= g++</span><br><span class="line">CXXFLAGS += -c -Wall $(shell pkg-config --cflags opencv)</span><br><span class="line">LDFLAGS += $(shell pkg-config --libs --static opencv)</span><br><span class="line">all: test_version</span><br><span class="line">opencv_example: test_version.o; $(CXX) $&lt; -o $@ $(LDFLAGS)</span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">.o: %.cpp; $(CXX) $&lt; -o <span class="variable">$@</span> $(CXXFLAGS)</span></span><br><span class="line">clean: ; rm -f test_version.o test_version</span><br></pre></td></tr></table></figure>

</details>

<img data-src="/images/imageFFmpeg/第一个例子显示图片.png">

<img data-src="/images/imageFFmpeg/waitKey.png">

<h3 id="4-1-VideoCapture打开摄像头接口讲解和源码分析"><a href="#4-1-VideoCapture打开摄像头接口讲解和源码分析" class="headerlink" title="4.1 VideoCapture打开摄像头接口讲解和源码分析"></a>4.1 VideoCapture打开摄像头接口讲解和源码分析</h3><img data-src="/images/imageFFmpeg/打开摄像头接口说明和源码分析.png">

<img data-src="/images/imageFFmpeg/创建和清理mat空间.png">

<img data-src="/images/imageFFmpeg/图像存放方式-连续.png">

<img data-src="/images/imageFFmpeg/isContinuous.png">

<img data-src="/images/imageFFmpeg/直接地址访问连续空间.png">

<img data-src="/images/imageFFmpeg/读取一帧视频.png">

<h2 id="5-视频采集编码推流和类封装"><a href="#5-视频采集编码推流和类封装" class="headerlink" title="5. 视频采集编码推流和类封装"></a>5. 视频采集编码推流和类封装</h2><img data-src="/images/imageFFmpeg/基于opencv采集推流.png">

<img data-src="/images/imageFFmpeg/opencv采集rtsp解码.png">

<img data-src="/images/imageFFmpeg/sws_getCachedContext.png">

<img data-src="/images/imageFFmpeg/sws_scale.png">

<img data-src="/images/imageFFmpeg/avcodec_find_encoder.png">

<img data-src="/images/imageFFmpeg/avcodec_alloc_context3.png">

<img data-src="/images/imageFFmpeg/avcodec_alloc_context3-01.png">

<img data-src="/images/imageFFmpeg/gop-01.png">

<img data-src="/images/imageFFmpeg/avcodec_send_frame.png">

<h2 id="6-音频录制编码推流和类封装"><a href="#6-音频录制编码推流和类封装" class="headerlink" title="6. 音频录制编码推流和类封装"></a>6. 音频录制编码推流和类封装</h2><img data-src="/images/imageFFmpeg/音频.png">

<img data-src="/images/imageFFmpeg/样本类型planar.png">

<img data-src="/images/imageFFmpeg/大小端模式.png">

<img data-src="/images/imageFFmpeg/一帧数据量.png">

<p>QT音频录制接口：</p>
<img data-src="/images/imageFFmpeg/QAudioFormat.png">

<img data-src="/images/imageFFmpeg/QAudioInput.png">

<img data-src="/images/imageFFmpeg/QIODevice.png">

<h2 id="7-音视频同步编码推流处理"><a href="#7-音视频同步编码推流处理" class="headerlink" title="7. 音视频同步编码推流处理"></a>7. 音视频同步编码推流处理</h2><img data-src="/images/imageFFmpeg/视频录制接口封装.png">

<img data-src="/images/imageFFmpeg/音视频同步.png">

<h2 id="8-XRtmpStreamer-项目完成（界面和美颜）"><a href="#8-XRtmpStreamer-项目完成（界面和美颜）" class="headerlink" title="8. XRtmpStreamer 项目完成（界面和美颜）"></a>8. XRtmpStreamer 项目完成（界面和美颜）</h2><p>直播推流要求实时性，一秒钟25帧，做美颜的总耗时一定要低于40ms（每帧消耗40ms）</p>
<p>现在视频推流一般都是1280 X 720</p>
<p>手机端是基于GPU 第三方库做的计算</p>
<p>美颜算法一般都是基于GPU做的</p>
<img data-src="/images/imageFFmpeg/使用opencv磨皮.png">

<img data-src="/images/imageFFmpeg/bilateralFilter双边滤波-边缘平滑.png">

<img data-src="/images/imageFFmpeg/自定义过滤器类XFilter.png">

<img data-src="/images/imageFFmpeg/XController.png">

<img data-src="/images/imageFFmpeg/类图.png">

<p><strong>头文件尽量不用引用命名空间，因为不知道谁来调用，可能会出现问题</strong>。</p>
<p><strong>头文件中尽量不要引用第三方库文件，应为涉及到第三方库版本升级之类的，第三方头文件的引用应该在代码中引用</strong>。</p>
<h2 id="9-补充"><a href="#9-补充" class="headerlink" title="9. 补充"></a>9. 补充</h2><h3 id="9-0-流媒体协议介绍（rtp-rtcp-rtsp-rtmp-mms-hls）"><a href="#9-0-流媒体协议介绍（rtp-rtcp-rtsp-rtmp-mms-hls）" class="headerlink" title="9.0 流媒体协议介绍（rtp&#x2F;rtcp&#x2F;rtsp&#x2F;rtmp&#x2F;mms&#x2F;hls）"></a>9.0 流媒体协议介绍（rtp&#x2F;rtcp&#x2F;rtsp&#x2F;rtmp&#x2F;mms&#x2F;hls）</h3><p><strong>1. RTP</strong>：</p>
<blockquote>
<p>参考文档 RFC3550&#x2F;RFC3551</p>
</blockquote>
<p>(Real-time Transport Protocol) 是用于 Internet 上针对多媒体数据流的一种传输层协议。RTP 协议详细说明了在互联网上传递音频和视频的标准数据包格式。RTP 协议常用于流媒体系统（配合 RTCP协议），视频会议和一键通（Push to Talk）系统（配合 H.323 或 SIP），使它成为 IP 电话产业的技术基础。<strong>RTP 协议和 RTP 控制协议 RTCP 一起使用</strong>，而且它是建立在 <strong>UDP</strong> 协议上的。</p>
<p><strong>RTP 本身并没有提供按时发送机制或其它服务质量（QoS）保证</strong>，它依赖于低层服务去实现这一过程。 RTP 并不保证传送或防止无序传送，也不确定底层网络的可靠性。 RTP 实行有序传送， RTP 中的序列号允许接收方重组发送方的包序列，同时序列号也能用于决定适当的包位置，例如：在视频解码中，就不需要顺序解码。</p>
<p><strong>RTP 由两个紧密链接部分组成</strong>： </p>
<ul>
<li>RTP ― 传送具有实时属性的数据；</li>
<li>RTP 控制协议（RTCP） ― 监控服务质量并传送正在进行的会话参与者的相关信息。</li>
</ul>
<p><strong>2. RTCP</strong></p>
<p>实时传输控制协议（Real-time Transport Control Protocol 或 RTP Control Protocol 或简写 RTCP）是实时传输协议（RTP）的一个姐妹协议。RTCP 为 RTP 媒体流提供信道外（out-of-band）控制。<strong>RTCP 本身并不传输数据，但和 RTP 一起协作将多媒体数据打包和发送</strong>。RTCP 定期在流多媒体会话参加者之间传输控制数据。RTCP 的主要功能是为 RTP 所提供的服务质量（Quality of Service）提供反馈。</p>
<p>RTCP 收集相关媒体连接的统计信息，例如：传输字节数，传输分组数，丢失分组数，jitter，单向和双向网络延迟等等。网络应用程序可以利用 RTCP 所提供的信息试图提高服务质量，比如限制信息流量或改用压缩比较小的编解码器。RTCP 本身不提供数据加密或身份认证。SRTCP 可以用于此类用途。</p>
<p><strong>3. SRTP &amp; SRTCP</strong></p>
<blockquote>
<p>参考文档 RFC3711</p>
</blockquote>
<p>安全实时传输协议（Secure Real-time Transport Protocol 或 SRTP）是在实时传输协议（Real-time Transport Protocol 或 RTP）基础上所定义的一个协议，<strong>旨在为单播和多播应用程序中的实时传输协议的数据提供加密、消息认证、完整性保证和重放保护</strong>。它是由 David Oran（思科）和 Rolf Blom（爱立信）开发的，并最早由 IETF 于 2004年3月作为 RFC3711 发布。</p>
<p>由于实时传输协议和可以被用来控制实时传输协议的会话的实时传输控制协议（RTP Control Protocol 或 RTCP）有着紧密的联系，安全实时传输协议同样也有一个伴生协议，它被称为安全实时传输控制协议（Secure RTCP 或 SRTCP）；安全实时传输控制协议为实时传输控制协议提供类似的与安全有关的特性，就像安全实时传输协议为实时传输协议提供的那些一样。</p>
<p>在使用实时传输协议或实时传输控制协议时，使不使用安全实时传输协议或安全实时传输控制协议是可选的；但即使使用了安全实时传输协议或安全实时传输控制协议，所有它们提供的特性（如加密和认证）也都是可选的，这些特性可以被独立地使用或禁用。唯一的例外是在使用安全实时传输控制协议时，必须要用到其消息认证特性。</p>
<p><strong>4. RTSP</strong></p>
<blockquote>
<p>参考文档 RFC2326</p>
</blockquote>
<p>是由 Real Networks 和 Netscape 共同提出的。该协议定义了一对多应用程序如何有效地通过 IP 网络传送多媒体数据。RTSP 提供了一个可扩展框架，使实时数据，如音频与视频的受控、点播成为可能。数据源包括现场数据与存储在剪辑中的数据。<strong>该协议目的在于控制多个数据发送连接，为选择发送通道，如UDP、多播UDP与TCP提供途径，并为选择基于RTP上发送机制提供方法</strong>。</p>
<p>RTSP（Real Time Streaming Protocol）是用来控制声音或影像的多媒体串流协议，并允许同时多个串流需求控制，传输时所用的网络通讯协定并不在其定义的范围内，服务器端可以自行选择使用 TCP 或 UDP来传送串流内容，它的语法和运作跟 HTTP 1.1 类似，<strong>但并不特别强调时间同步，所以比较能容忍网络延迟</strong>。而前面提到的允许同时多个串流需求控制（Multicast），除了可以降低服务器端的网络用量，更进而支持多方视讯会议（Video Conference）。 因为与 HTTP1.1 的运作方式相似，所以代理服务器《Proxy》的快取功能《Cache》也同样适用于 RTSP，并因 RTSP 具有重新导向功能，可视实际负载情况来转换提供服务的服务器，以避免过大的负载集中于同一服务器而造成延迟。</p>
<p><strong>5. RTSP 和 RTP 的关系</strong></p>
<p>RTP 不象 http 和 ftp 可完整的下载整个影视文件，它是以固定的数据率在网络上发送数据，客户端也是按照这种速度观看影视文件，当影视画面播放过后，就不可以再重复播放，除非重新向服务器端要求数据。</p>
<p>RTSP 与 RTP 最大的区别在于：RTSP 是一种双向实时数据传输协议，它允许客户端向服务器端发送请求，如回放、快进、倒退等操作。当然，RTSP 可基于 RTP 来传送数据，还可以选择 TCP、UDP、组播 UDP 等通道来发送数据，具有很好的扩展性。它是一种类似与 http 协议的网络应用层协议。目前碰到的一个应用：服务器端实时采集、编码并发送两路视频，客户端接收并显示两路视频。由于客户端不必对视频数据做任何回放、倒退等操作，可直接采用 UDP + RTP + 组播实现。</p>
<img data-src="/images/imageFFmpeg/RTSP和RTP的关系.png">

<p>RTP：实时传输协议（Real-time Transport Protocol） </p>
<ul>
<li><p>RTP&#x2F;RTCP 是实际传输数据的协议 </p>
</li>
<li><p>RTP 传输音频&#x2F;视频数据，如果是 PLAY，Server 发送到 Client 端，如果是 RECORD，可以由Client 发送到 Server </p>
</li>
<li><p>整个 RTP 协议由两个密切相关的部分组成：</p>
<ul>
<li>RTP数据协议</li>
<li>RTP控制协议（即RTCP）</li>
</ul>
</li>
</ul>
<p>RTSP：实时流协议（Real Time Streaming Protocol，RTSP） </p>
<ul>
<li><p>RTSP 的请求主要有 DESCRIBE, SETUP, PLAY, PAUSE, TEARDOWN, OPTIONS 等，顾名思义可以知道起对话和控制作用 </p>
</li>
<li><p>RTSP 的对话过程中 SETUP 可以确定 RTP&#x2F;RTCP 使用的端口，PLAY&#x2F;PAUSE&#x2F;TEARDOWN 可以开始或者停止 RTP 的发送，等等</p>
</li>
</ul>
<p>RTCP： </p>
<ul>
<li>RTCP 包括 Sender Report 和 Receiver Report，用来进行音频&#x2F;视频的同步以及其他用途，是一种控制协议</li>
</ul>
<p><strong>6. SDP</strong></p>
<p>会话描述协议（SDP）为会话通知、会话邀请和其它形式的多媒体会话初始化等目的提供了多媒体会话描述。</p>
<p>会话目录用于协助多媒体会议的通告，并为会话参与者传送相关设置信息。SDP 即用于将这种信息传输到接收端。<strong>SDP 完全是一种会话描述格式 ― 它不属于传输协议 ― 它只使用不同的适当的传输协议，包括会话通知协议（SAP）、会话初始协议（SIP）、实时流协议（RTSP）、MIME 扩展协议的电子邮件以及超文本传输协议（HTTP）</strong>。</p>
<p>SDP 的设计宗旨是通用性，它可以应用于大范围的网络环境和应用程序，而不仅仅局限于组播会话目录，<strong>但 SDP 不支持会话内容或媒体编码的协商</strong>。</p>
<p>在因特网组播骨干网（Mbone）中，会话目录工具被用于通告多媒体会议，并为参与者传送会议地址和参与者所需的会议特定工具信息，这由 SDP 完成。SDP 连接好会话后，传送足够的信息给会话参与者。SDP 信息发送利用了会话通知协议（SAP），它周期性地组播通知数据包到已知组播地址和端口处。这些信息是 UDP 数据包，其中包含 SAP 协议头和文本有效载荷（text payload）。这里文本有效载荷指的是 SDP 会话描述。此外信息也可以通过电子邮件或 WWW （World Wide Web） 进行发送。</p>
<p><strong>SDP 文本信息包括</strong>：</p>
<ul>
<li>会话名称和意图；</li>
<li>会话持续时间；</li>
<li>构成会话的媒体；</li>
<li>有关接收媒体的信息（地址等）。</li>
<li>协议结构</li>
</ul>
<p><strong>SDP 信息是文本信息，采用 UTF-8 编 码中的 ISO 10646 字符集。SDP 会话描述如下：（标注 * 符号的表示可选字段）</strong>：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">v = （协议版本）</span><br><span class="line">o = （所有者/创建者和会话标识符）</span><br><span class="line">s = （会话名称）</span><br><span class="line">i = * （会话信息）</span><br><span class="line">u = * （URI 描述）</span><br><span class="line">e = * （Email 地址）</span><br><span class="line">p = * （电话号码）</span><br><span class="line">c = * （连接信息 ― 如果包含在所有媒体中，则不需要该字段）</span><br><span class="line">b = * （带宽信息）</span><br></pre></td></tr></table></figure>

<p>一个或更多时间描述（如下所示）：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">z = * （时间区域调整）</span><br><span class="line">k = * （加密密钥）</span><br><span class="line">a = * （0 个或多个会话属性行）</span><br></pre></td></tr></table></figure>

<p>0个或多个媒体描述（如下所示）</p>
<p>时间描述</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">t = （会话活动时间）</span><br><span class="line">r = * （0或多次重复次数）</span><br></pre></td></tr></table></figure>

<p>媒体描述</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">m = （媒体名称和传输地址）</span><br><span class="line">i = * （媒体标题）</span><br><span class="line">c = * （连接信息 — 如果包含在会话层则该字段可选）</span><br><span class="line">b = * （带宽信息）</span><br><span class="line">k = * （加密密钥）</span><br><span class="line">a = * （0 个或多个会话属性行）</span><br></pre></td></tr></table></figure>

<p><strong>7. RTMP&#x2F;RTMPS</strong></p>
<p>RTMP(Real Time Messaging Protocol) 实时消息传送协议是 Adobe Systems 公司为 Flash 播放器和服务器之间音频、视频和数据传输 开发的开放协议。</p>
<p>它有三种变种：</p>
<blockquote>
<ol>
<li><p>工作在 TCP 之上的明文协议，使用端口1935；</p>
</li>
<li><p>RTMPT 封装在 HTTP 请求之中，可穿越防火墙；</p>
</li>
<li><p>RTMPS 类似 RTMPT，但使用的是 HTTPS 连接；</p>
</li>
</ol>
</blockquote>
<p>RTMP 协议(Real Time Messaging Protocol)是被 Flash 用于对象, 视频, 音频的传输. <strong>这个协议建立在 TCP 协议或者轮询 HTTP 协议之上</strong>.</p>
<p>RTMP 协议就像一个用来装数据包的容器, 这些数据既可以是 AMF 格式的数据,也可以是 FLV 中的视&#x2F;音频数据. 一个单一的连接可以通过不同的通道传输多路网络流. 这些通道中的包都是按照固定大小的包传输的.</p>
<p><strong>8. mms</strong></p>
<p>MMS (Microsoft Media Server Protocol)，中文“微软媒体服务器协议”，用来访问并流式接收 Windows Media 服务器中 <code>.asf</code> 文件的一种协议。MMS 协议用于访问 Windows Media 发布点上的单播内容。MMS 是连接 Windows Media 单播服务的默认方法。若观众在 Windows Media Player 中键入一个 URL 以连接内容，而不是通过超级链接访问内容，则他们必须使用MMS 协议引用该流。MMS的预设埠（端口）是1755</p>
<p>当使用 MMS 协议连接到发布点时，使用协议翻转以获得最佳连接。“协议翻转”始于试图通过 MMSU 连接客户端。 MMSU 是 MMS 协议结合 UDP 数据传送。如果 MMSU 连接不成功，则服务器试图使用 MMST。MMST 是 MMS 协议结合 TCP 数据传送。</p>
<p>如果连接到编入索引的 <code>.asf</code> 文件，想要快进、后退、暂停、开始和停止流，则必须使用 MMS。不能用 UNC 路径快进或后退。若您从独立的 Windows Media Player 连接到发布点，则必须指定单播内容的 URL。若内容在主发布点点播发布，则 URL 由服务器名和 <code>.asf</code> 文件名组成。例如：<code>mms://windows_media_server/sample.asf</code>。其中 windows_media_server 是 Windows Media 服务器名，sample.asf 是您想要使之转化为流的 <code>.asf</code> 文件名。</p>
<p>若您有实时内容要通过广播单播发布，则该 URL 由服务器名和发布点别名组成。例如：<code>mms://windows_media_server/LiveEvents</code>。这里 windows_media_server 是 Windows Media 服务器名，而 LiveEvents 是发布点名</p>
<p><strong>9. HLS</strong></p>
<p>HTTP Live Streaming（HLS）是苹果公司(Apple Inc.)实现的基于HTTP的流媒体传输协议，可实现流媒体的直播和点播，主要应用在 iOS 系统，为 iOS 设备（如iPhone、iPad）提供音视频直播和点播方案。HLS 点播，基本上就是常见的分段 HTTP 点播，不同在于，它的分段非常小。</p>
<p>相对于常见的流媒体直播协议，例如 RTMP协议、RTSP协议、MMS协议等，HLS直播最大的不同在于，直播客户端获取到的，并不是一个完整的数据流。HLS 协议在服务器端将直播数据流存储为连续的、很短时长的媒体文件（MPEG-TS格式），而客户端则不断的下载并播放这些小文件，因为服务器端总是会将最新的直播数据生成新的小文件，这样客户端只要不停的按顺序播放从服务器获取到的文件，就实现了直播。由此可见，基本上可以认为，<strong>HLS 是以点播的技术方式来实现直播</strong>。由于数据通过 HTTP 协议传输，所以完全不用考虑防火墙或者代理的问题，而且分段文件的时长很短，客户端可以很快的选择和切换码率，以适应不同带宽条件下的播放。不过 HLS 的这种技术特点，决定了它的延迟一般总是会高于普通的流媒体直播协议。　</p>
<p>根据以上的了解要实现 HTTP Live Streaming 直播，需要研究并实现以下技术关键点：</p>
<ul>
<li>采集视频源和音频源的数据</li>
<li>对原始数据进行H264编码和AAC编码</li>
<li>视频和音频数据封装为MPEG-TS包</li>
<li>HLS分段生成策略及m3u8索引文件</li>
<li>HTTP传输协议</li>
</ul>
<h3 id="9-1-HLS，RTSP，RTMP的区别"><a href="#9-1-HLS，RTSP，RTMP的区别" class="headerlink" title="9.1 HLS，RTSP，RTMP的区别"></a>9.1 HLS，RTSP，RTMP的区别</h3><ul>
<li><p>HLS （ HTTP Live Streaming）苹果公司提出的流媒体协议，直接把流媒体切片成一段段，信息保存到m3u列表文件中，可以将不同速率的版本切成相应的片；播放器可以直接使用http协议请求流数据，可以在不同速率的版本间自由切换，实现无缝播放；省去使用其他协议的烦恼。缺点是延迟大小受切片大小影响，不适合直播，适合视频点播。</p>
</li>
<li><p>RTSP （Real-Time Stream Protocol）由Real Networks 和 Netscape共同提出的，基于文本的多媒体播放控制协议。RTSP定义流格式，流数据经由RTP传输；RTSP实时效果非常好，适合视频聊天，视频监控等方向。</p>
</li>
<li><p>RTMP（Real Time Message Protocol） 有 Adobe 公司提出，用来解决多媒体数据传输流的多路复用（Multiplexing）和分包（packetizing）的问题，优势在于低延迟，稳定性高，支持所有摄像头格式，浏览器加载 flash插件就可以直接播放。</p>
</li>
</ul>
<p>总结：HLS 延迟大，适合视频点播；RTSP虽然实时性最好，但是实现复杂，适合视频聊天和视频监控；RTMP强在浏览器支持好，加载flash插件后就能直接播放，所以非常火，相反在浏览器里播放rtsp就很困难了。</p>
<h3 id="9-2-RTSP、RTCP、RTP区别"><a href="#9-2-RTSP、RTCP、RTP区别" class="headerlink" title="9.2 RTSP、RTCP、RTP区别"></a>9.2 RTSP、RTCP、RTP区别</h3><p><strong>1：RTSP实时流协议</strong></p>
<p>作为一个应用层协议，RTSP提供了一个可供扩展的框架，它的意义在于使得实时流媒体数据的受控和点播变得可能。总的说来，RTSP是一个流媒体表示 协议，主要用来控制具有实时特性的数据发送，但它本身并不传输数据，而是必须依赖于下层传输协议所提供的某些服务。RTSP可以对流媒体提供诸如播放、暂 停、快进等操作，它负责定义具体的控制消息、操作方法、状态码等，此外还描述了与RTP间的交互操作（RFC2326）。</p>
<p><strong>2：RTCP控制协议</strong></p>
<p>RTCP控制协议需要与RTP数据协议一起配合使用，当应用程序启动一个RTP会话时将同时占用两个端口，分别供RTP和RTCP使用。RTP本身并 不能为按序传输数据包提供可靠的保证，也不提供流量控制和拥塞控制，这些都由RTCP来负责完成。通常RTCP会采用与RTP相同的分发机制，向会话中的 所有成员周期性地发送控制信息，应用程序通过接收这些数据，从中获取会话参与者的相关资料，以及网络状况、分组丢失概率等反馈信息，从而能够对服务质量进 行控制或者对网络状况进行诊断。</p>
<p>RTCP协议的功能是通过不同的RTCP数据报来实现的，主要有如下几种类型：</p>
<ul>
<li><p>SR：发送端报告，所谓发送端是指发出RTP数据报的应用程序或者终端，发送端同时也可以是接收端。(SERVER定时间发送给CLIENT)。</p>
</li>
<li><p>RR：接收端报告，所谓接收端是指仅接收但不发送RTP数据报的应用程序或者终端。(SERVER接收CLIENT端发送过来的响应)。</p>
</li>
<li><p>SDES：源描述，主要功能是作为会话成员有关标识信息的载体，如用户名、邮件地址、电话号码等，此外还具有向会话成员传达会话控制信息的功能。</p>
</li>
<li><p>BYE：通知离开，主要功能是指示某一个或者几个源不再有效，即通知会话中的其他成员自己将退出会话。</p>
</li>
<li><p>APP：由应用程序自己定义，解决了RTCP的扩展性问题，并且为协议的实现者提供了很大的灵活性。</p>
</li>
</ul>
<p><strong>3：RTP数据协议</strong></p>
<p>RTP数据协议负责对流媒体数据进行封包并实现媒体流的实时传输，每一个RTP数据报都由头部（Header）和负载（Payload）两个部分组成，其中头部前12个字节的含义是固定的，而负载则可以是音频或者视频数据。</p>
<p>RTP用到的地方就是 PLAY ，服务器往客户端传输数据用UDP协议，RTP是在传输数据的前面加了个12字节的头(描述信息)。</p>
<p>RTP载荷封装设计本文的网络传输是基于IP协议，所以最大传输单元(MTU)最大为1500字节，在使用IP／UDP／RTP的协议层次结构的时候，这 其中包括至少20字节的IP头，8字节的UDP头，以及12字节的RTP头。这样，头信息至少要占用40个字节，那么RTP载荷的最大尺寸为1460字 节。以H264 为例，如果一帧数据大于1460，则需要分片打包，然后到接收端再拆包，组合成一帧数据，进行解码播放。</p>
<h3 id="9-3-RTSP、-RTMP、HTTP的共同点、区别"><a href="#9-3-RTSP、-RTMP、HTTP的共同点、区别" class="headerlink" title="9.3 RTSP、 RTMP、HTTP的共同点、区别"></a>9.3 RTSP、 RTMP、HTTP的共同点、区别</h3><p>共同点：</p>
<ul>
<li>RTSP RTMP HTTP都是在应用应用层。</li>
<li>理论上RTSP RTMPHTTP都可以做直播和点播，但一般做直播用RTSP RTMP，做点播用HTTP。做视频会议的时候原来用SIP协议，现在基本上被RTMP协议取代了。</li>
</ul>
<p>区别：</p>
<ul>
<li><p>HTTP: 即超文本传送协议(ftp即文件传输协议)。</p>
<ul>
<li><p>HTTP:（Real Time Streaming Protocol），实时流传输协议。</p>
</li>
<li><p>HTTP全称Routing Table Maintenance Protocol（路由选择表维护协议）。</p>
</li>
</ul>
</li>
<li><p>HTTP将所有的数据作为文件做处理。http协议不是流媒体协议。</p>
<ul>
<li>RTMP 和 RTSP协议是流媒体协议。</li>
</ul>
</li>
<li><p>RTMP协议是Adobe的私有协议,未完全公开，RTSP协议和HTTP协议是共有协议，并有专门机构做维护。</p>
</li>
<li><p>RTMP协议一般传输的是flv，f4v格式流，RTSP协议一般传输的是ts,mp4格式的流。HTTP没有特定的流。</p>
</li>
<li><p>RTSP传输一般需要2-3个通道，命令和数据通道分离，HTTP和RTMP一般在TCP一个通道上传输命令和数据。</p>
</li>
</ul>
<h2 id="10-代码"><a href="#10-代码" class="headerlink" title="10. 代码"></a>10. 代码</h2><details><summary>FFmpeg SDK解封和推流</summary>

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//引入头文件</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">#<span class="keyword">include</span> <span class="string">&quot;libavformat/avformat.h&quot;</span></span></span><br><span class="line">    <span class="comment">//引入时间</span></span><br><span class="line">    <span class="meta">#<span class="keyword">include</span> <span class="string">&quot;libavutil/time.h&quot;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//引入库</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib,<span class="string">&quot;avformat.lib&quot;</span>)</span></span><br><span class="line"><span class="comment">//工具库，包括获取错误信息等</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib,<span class="string">&quot;avutil.lib&quot;</span>)</span></span><br><span class="line"><span class="comment">//编解码的库</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib,<span class="string">&quot;avcodec.lib&quot;</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">avError</span><span class="params">(<span class="type">int</span> errNum)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">double</span> <span class="title">r2d</span><span class="params">(AVRational r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> r.num == <span class="number">0</span> || r.den == <span class="number">0</span> ? <span class="number">0.</span> : (<span class="type">double</span>)r.num / (<span class="type">double</span>)r.den;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> videoindex = <span class="number">-1</span>;</span><br><span class="line">    <span class="comment">//所有代码执行之前要调用av_register_all和avformat_network_init</span></span><br><span class="line">    <span class="comment">//初始化所有的封装和解封装 flv mp4 mp3 mov。不包含编码和解码</span></span><br><span class="line">    <span class="built_in">av_register_all</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//初始化网络库</span></span><br><span class="line">    <span class="built_in">avformat_network_init</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用的相对路径，执行文件在bin目录下。test.mp4放到bin目录下即可</span></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *inUrl = <span class="string">&quot;hs.mp4&quot;</span>;</span><br><span class="line">    <span class="comment">//输出的地址</span></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *outUrl = <span class="string">&quot;rtmp://192.166.11.13/live&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//////////////////////////////////////////////////////////////////</span></span><br><span class="line">    <span class="comment">//                   输入流处理部分</span></span><br><span class="line">    <span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line">    <span class="comment">//打开文件，解封装 avformat_open_input</span></span><br><span class="line">    <span class="comment">//AVFormatContext **ps  输入封装的上下文。包含所有的格式内容和所有的IO。如果是文件就是文件IO，网络就对应网络IO</span></span><br><span class="line">    <span class="comment">//const char *url  路径</span></span><br><span class="line">    <span class="comment">//AVInputFormt * fmt 封装器</span></span><br><span class="line">    <span class="comment">//AVDictionary ** options 参数设置</span></span><br><span class="line">    AVFormatContext *ictx = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    AVOutputFormat *ofmt = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//打开文件，解封文件头</span></span><br><span class="line">    <span class="type">int</span> ret = <span class="built_in">avformat_open_input</span>(&amp;ictx, inUrl, <span class="number">0</span>, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">if</span> (ret &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">avError</span>(ret);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;avformat_open_input success!&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//获取音频视频的信息 .h264 flv 没有头信息</span></span><br><span class="line">    ret = <span class="built_in">avformat_find_stream_info</span>(ictx, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (ret != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">avError</span>(ret);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//打印视频视频信息</span></span><br><span class="line">    <span class="comment">//0打印所有  inUrl 打印时候显示，</span></span><br><span class="line">    <span class="built_in">av_dump_format</span>(ictx, <span class="number">0</span>, inUrl, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//////////////////////////////////////////////////////////////////</span></span><br><span class="line">    <span class="comment">//                   输出流处理部分</span></span><br><span class="line">    <span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line">    AVFormatContext * octx = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">//如果是输入文件 flv可以不传，可以从文件中判断。如果是流则必须传</span></span><br><span class="line">    <span class="comment">//创建输出上下文</span></span><br><span class="line">    ret = <span class="built_in">avformat_alloc_output_context2</span>(&amp;octx, <span class="literal">NULL</span>, <span class="string">&quot;flv&quot;</span>, outUrl);</span><br><span class="line">    <span class="keyword">if</span> (ret &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">avError</span>(ret);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;avformat_alloc_output_context2 success!&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    ofmt = octx-&gt;oformat;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;nb_streams  &quot;</span> &lt;&lt; ictx-&gt;nb_streams &lt;&lt; endl;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; ictx-&gt;nb_streams; i++) &#123;</span><br><span class="line">        <span class="comment">//获取输入视频流</span></span><br><span class="line">        AVStream *in_stream = ictx-&gt;streams[i];</span><br><span class="line">        <span class="comment">//为输出上下文添加音视频流（初始化一个音视频流容器）</span></span><br><span class="line">        AVStream *out_stream = <span class="built_in">avformat_new_stream</span>(octx, in_stream-&gt;codec-&gt;codec);</span><br><span class="line">        <span class="keyword">if</span> (!out_stream) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;未能成功添加音视频流\n&quot;</span>);</span><br><span class="line">            ret = AVERROR_UNKNOWN;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将输入编解码器上下文信息 copy 给输出编解码器上下文</span></span><br><span class="line">        <span class="comment">//ret = avcodec_copy_context(out_stream-&gt;codec, in_stream-&gt;codec);</span></span><br><span class="line">        ret = <span class="built_in">avcodec_parameters_copy</span>(out_stream-&gt;codecpar, in_stream-&gt;codecpar);</span><br><span class="line">        <span class="comment">//ret = avcodec_parameters_from_context(out_stream-&gt;codecpar, in_stream-&gt;codec);</span></span><br><span class="line">        <span class="comment">//ret = avcodec_parameters_to_context(out_stream-&gt;codec, in_stream-&gt;codecpar);</span></span><br><span class="line">        <span class="keyword">if</span> (ret &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;copy 编解码器上下文失败\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        out_stream-&gt;codecpar-&gt;codec_tag = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        out_stream-&gt;codec-&gt;codec_tag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (octx-&gt;oformat-&gt;flags &amp; AVFMT_GLOBALHEADER) &#123;</span><br><span class="line">            out_stream-&gt;codec-&gt;flags = out_stream-&gt;codec-&gt;flags | CODEC_FLAG_GLOBAL_HEADER;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//输入流数据的数量循环</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; ictx-&gt;nb_streams; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ictx-&gt;streams[i]-&gt;codec-&gt;codec_type == AVMEDIA_TYPE_VIDEO) &#123;</span><br><span class="line">            videoindex = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">av_dump_format</span>(octx, <span class="number">0</span>, outUrl, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//////////////////////////////////////////////////////////////////</span></span><br><span class="line">    <span class="comment">//                   准备推流</span></span><br><span class="line">    <span class="comment">/////////////////////////////////////////////////////////////////</span></span><br><span class="line">    <span class="comment">//打开IO</span></span><br><span class="line">    ret = <span class="built_in">avio_open</span>(&amp;octx-&gt;pb, outUrl, AVIO_FLAG_WRITE);</span><br><span class="line">    <span class="keyword">if</span> (ret &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">avError</span>(ret);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//写入头部信息</span></span><br><span class="line">    ret = <span class="built_in">avformat_write_header</span>(octx, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (ret &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">avError</span>(ret);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;avformat_write_header Success!&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//推流每一帧数据</span></span><br><span class="line">    <span class="comment">//int64_t pts  [ pts*(num/den)  第几秒显示]</span></span><br><span class="line">    <span class="comment">//int64_t dts  解码时间 [P帧(相对于上一帧的变化) I帧(关键帧，完整的数据) B帧(上一帧和下一帧的变化)]  有了B帧压缩率更高。</span></span><br><span class="line">    <span class="comment">//uint8_t *data    </span></span><br><span class="line">    <span class="comment">//int size</span></span><br><span class="line">    <span class="comment">//int stream_index</span></span><br><span class="line">    <span class="comment">//int flag</span></span><br><span class="line">    AVPacket pkt;</span><br><span class="line">    <span class="comment">//获取当前的时间戳  微妙</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> start_time = <span class="built_in">av_gettime</span>();</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> frame_index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">//输入输出视频流</span></span><br><span class="line">        AVStream *in_stream, *out_stream;</span><br><span class="line">        <span class="comment">//获取解码前数据</span></span><br><span class="line">        ret = <span class="built_in">av_read_frame</span>(ictx, &amp;pkt);</span><br><span class="line">        <span class="keyword">if</span> (ret &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        PTS（Presentation Time Stamp）显示播放时间</span></span><br><span class="line"><span class="comment">        DTS（Decoding Time Stamp）解码时间</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">//没有显示时间（比如未解码的 H.264 ）</span></span><br><span class="line">        <span class="keyword">if</span> (pkt.pts == AV_NOPTS_VALUE) &#123;</span><br><span class="line">            <span class="comment">//AVRational time_base：时基。通过该值可以把PTS，DTS转化为真正的时间。</span></span><br><span class="line">            AVRational time_base1 = ictx-&gt;streams[videoindex]-&gt;time_base;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//计算两帧之间的时间</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            r_frame_rate 基流帧速率  （不是太懂）</span></span><br><span class="line"><span class="comment">            av_q2d 转化为double类型</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="type">int64_t</span> calc_duration = (<span class="type">double</span>)AV_TIME_BASE / <span class="built_in">av_q2d</span>(ictx-&gt;streams[videoindex]-&gt;r_frame_rate);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//配置参数</span></span><br><span class="line">            pkt.pts = (<span class="type">double</span>)(frame_index*calc_duration) / (<span class="type">double</span>)(<span class="built_in">av_q2d</span>(time_base1)*AV_TIME_BASE);</span><br><span class="line">            pkt.dts = pkt.pts;</span><br><span class="line">            pkt.duration = (<span class="type">double</span>)calc_duration / (<span class="type">double</span>)(<span class="built_in">av_q2d</span>(time_base1)*AV_TIME_BASE);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//延时</span></span><br><span class="line">        <span class="keyword">if</span> (pkt.stream_index == videoindex) &#123;</span><br><span class="line">            AVRational time_base = ictx-&gt;streams[videoindex]-&gt;time_base;</span><br><span class="line">            AVRational time_base_q = &#123; <span class="number">1</span>,AV_TIME_BASE &#125;;</span><br><span class="line">            <span class="comment">//计算视频播放时间</span></span><br><span class="line">            <span class="type">int64_t</span> pts_time = <span class="built_in">av_rescale_q</span>(pkt.dts, time_base, time_base_q);</span><br><span class="line">            <span class="comment">//计算实际视频的播放时间</span></span><br><span class="line">            <span class="type">int64_t</span> now_time = <span class="built_in">av_gettime</span>() - start_time;</span><br><span class="line"></span><br><span class="line">            AVRational avr = ictx-&gt;streams[videoindex]-&gt;time_base;</span><br><span class="line">            cout &lt;&lt; avr.num &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; avr.den &lt;&lt; <span class="string">&quot;  &quot;</span>&lt;&lt;pkt.dts &lt;&lt;<span class="string">&quot;  &quot;</span>&lt;&lt;pkt.pts&lt;&lt;<span class="string">&quot;   &quot;</span>&lt;&lt; pts_time &lt;&lt;endl;</span><br><span class="line">            <span class="keyword">if</span> (pts_time &gt; now_time) &#123;</span><br><span class="line">                <span class="comment">//睡眠一段时间（目的是让当前视频记录的播放时间与实际时间同步）</span></span><br><span class="line">                <span class="built_in">av_usleep</span>((<span class="type">unsigned</span> <span class="type">int</span>)(pts_time - now_time));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        in_stream = ictx-&gt;streams[pkt.stream_index];</span><br><span class="line">        out_stream = octx-&gt;streams[pkt.stream_index];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//计算延时后，重新指定时间戳</span></span><br><span class="line">        pkt.pts = <span class="built_in">av_rescale_q_rnd</span>(pkt.pts, in_stream-&gt;time_base, out_stream-&gt;time_base,(AVRounding) (AV_ROUND_NEAR_INF | AV_ROUND_PASS_MINMAX));</span><br><span class="line">        pkt.dts = <span class="built_in">av_rescale_q_rnd</span>(pkt.dts, in_stream-&gt;time_base, out_stream-&gt;time_base, (AVRounding)(AV_ROUND_NEAR_INF | AV_ROUND_PASS_MINMAX));</span><br><span class="line">        <span class="comment">//到这一帧时候经历了多长时间</span></span><br><span class="line">        pkt.duration = (<span class="type">int</span>)<span class="built_in">av_rescale_q</span>(pkt.duration, in_stream-&gt;time_base, out_stream-&gt;time_base);</span><br><span class="line">        <span class="comment">//字节流的位置，-1 表示不知道字节流位置</span></span><br><span class="line">        pkt.pos = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (pkt.stream_index == videoindex) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Send %8d video frames to output URL\n&quot;</span>, frame_index);</span><br><span class="line">            frame_index++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//向输出上下文发送（向地址推送）</span></span><br><span class="line">        ret = <span class="built_in">av_interleaved_write_frame</span>(octx, &amp;pkt);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ret &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;发送数据包出错\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//释放</span></span><br><span class="line">        <span class="built_in">av_free_packet</span>(&amp;pkt);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">avError</span><span class="params">(<span class="type">int</span> errNum)</span> </span>&#123;</span><br><span class="line">    <span class="type">char</span> buf[<span class="number">1024</span>];</span><br><span class="line">    <span class="comment">//获取错误信息</span></span><br><span class="line">    <span class="built_in">av_strerror</span>(errNum, buf, <span class="built_in">sizeof</span>(buf));</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot; failed! &quot;</span> &lt;&lt; buf &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

<details><summary>rtsp数据源rtmp推流 openCV磨皮</summary>

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/highgui.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libswscale/swscale.h&gt;</span></span></span><br><span class="line">    <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libavcodec/avcodec.h&gt;</span></span></span><br><span class="line">    <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libavformat/avformat.h&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib, <span class="string">&quot;swscale.lib&quot;</span>)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib, <span class="string">&quot;avcodec.lib&quot;</span>)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib, <span class="string">&quot;avutil.lib&quot;</span>)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib, <span class="string">&quot;avformat.lib&quot;</span>)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib,<span class="string">&quot;opencv_world320.lib&quot;</span>)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//海康相机的rtsp url</span></span><br><span class="line">    <span class="type">char</span> *inUrl = <span class="string">&quot;rtsp://test:test123456@192.168.1.64&quot;</span>;</span><br><span class="line">    <span class="comment">//nginx-rtmp rtmp  直播服务器rtmp推流URL</span></span><br><span class="line">    <span class="type">char</span> *outUrl = <span class="string">&quot;rtmp://192.168.1.44/live&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//注册所有的编解码器</span></span><br><span class="line">    <span class="built_in">avcodec_register_all</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//注册所有的封装器</span></span><br><span class="line">    <span class="built_in">av_register_all</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//注册所有网络协议</span></span><br><span class="line">    <span class="built_in">avformat_network_init</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// opencv 接口</span></span><br><span class="line">    VideoCapture cam;</span><br><span class="line">    Mat frame;</span><br><span class="line">    <span class="built_in">namedWindow</span>(<span class="string">&quot;video&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//像素格式转换上下文</span></span><br><span class="line">    SwsContext *vsc = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//输出的数据结构</span></span><br><span class="line">    AVFrame *yuv = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//编码器上下文</span></span><br><span class="line">    AVCodecContext *vc = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//rtmp flv 封装器</span></span><br><span class="line">    AVFormatContext *ic = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>&#123;  </span><br><span class="line">        <span class="comment">/// 1 使用opencv打开rtsp相机</span></span><br><span class="line">        cam.<span class="built_in">open</span>(inUrl);</span><br><span class="line">        <span class="keyword">if</span> (!cam.<span class="built_in">isOpened</span>())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">exception</span>(<span class="string">&quot;cam open failed!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; inUrl &lt;&lt; <span class="string">&quot; cam open success&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="type">int</span> inWidth = cam.<span class="built_in">get</span>(CAP_PROP_FRAME_WIDTH);</span><br><span class="line">        <span class="type">int</span> inHeight = cam.<span class="built_in">get</span>(CAP_PROP_FRAME_HEIGHT);</span><br><span class="line">        <span class="type">int</span> fps = cam.<span class="built_in">get</span>(CAP_PROP_FPS);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/// 2 初始化格式转换上下文</span></span><br><span class="line">        vsc = <span class="built_in">sws_getCachedContext</span>(vsc,</span><br><span class="line">                 inWidth, inHeight, AV_PIX_FMT_BGR24,     <span class="comment">// 源宽、高、像素格式</span></span><br><span class="line">                 inWidth, inHeight, AV_PIX_FMT_YUV420P,   <span class="comment">// 目标宽、高、像素格式</span></span><br><span class="line">                 SWS_BICUBIC,  <span class="comment">// 尺寸变化使用算法</span></span><br><span class="line">                 <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">                 );</span><br><span class="line">        <span class="keyword">if</span> (!vsc)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">exception</span>(<span class="string">&quot;sws_getCachedContext failed!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/// 3 初始化输出的数据结构</span></span><br><span class="line">        yuv = <span class="built_in">av_frame_alloc</span>();</span><br><span class="line">        yuv-&gt;format = AV_PIX_FMT_YUV420P;</span><br><span class="line">        yuv-&gt;width = inWidth;</span><br><span class="line">        yuv-&gt;height = inHeight;</span><br><span class="line">        yuv-&gt;pts = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 配yuv空间</span></span><br><span class="line">        <span class="type">int</span> ret = <span class="built_in">av_frame_get_buffer</span>(yuv, <span class="number">32</span>);</span><br><span class="line">        <span class="keyword">if</span> (ret != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="type">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">            <span class="built_in">av_strerror</span>(ret, buf, <span class="built_in">sizeof</span>(buf) - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">exception</span>(buf);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/// 4 初始化编码上下文</span></span><br><span class="line">        <span class="comment">// a 找到编码器</span></span><br><span class="line">        AVCodec *codec = <span class="built_in">avcodec_find_encoder</span>(AV_CODEC_ID_H264);</span><br><span class="line">        <span class="keyword">if</span> (!codec)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">exception</span>(<span class="string">&quot;Can`t find h264 encoder!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// b 创建编码器上下文</span></span><br><span class="line">        vc = <span class="built_in">avcodec_alloc_context3</span>(codec);</span><br><span class="line">        <span class="keyword">if</span> (!vc)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">exception</span>(<span class="string">&quot;avcodec_alloc_context3 failed!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// c 配置编码器参数</span></span><br><span class="line">        vc-&gt;flags |= AV_CODEC_FLAG_GLOBAL_HEADER;   <span class="comment">// 全局参数</span></span><br><span class="line">        vc-&gt;codec_id = codec-&gt;id;</span><br><span class="line">        vc-&gt;thread_count = <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line">        vc-&gt;bit_rate = <span class="number">50</span> * <span class="number">1024</span> * <span class="number">8</span>;    <span class="comment">// 压缩后每秒视频的bit位大小 50kB</span></span><br><span class="line">        vc-&gt;width = inWidth;</span><br><span class="line">        vc-&gt;height = inHeight;</span><br><span class="line">        vc-&gt;time_base = &#123; <span class="number">1</span>,fps &#125;;</span><br><span class="line">        vc-&gt;framerate = &#123; fps,<span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 画面组的大小，多少帧一个关键帧</span></span><br><span class="line">        vc-&gt;gop_size = <span class="number">50</span>;</span><br><span class="line">        vc-&gt;max_b_frames = <span class="number">0</span>;</span><br><span class="line">        vc-&gt;pix_fmt = AV_PIX_FMT_YUV420P;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// d 打开编码器上下文</span></span><br><span class="line">        ret = <span class="built_in">avcodec_open2</span>(vc, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (ret != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="type">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">            <span class="built_in">av_strerror</span>(ret, buf, <span class="built_in">sizeof</span>(buf) - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">exception</span>(buf);</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;avcodec_open2 success!&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/// 5 输出封装器和视频流配置</span></span><br><span class="line">        <span class="comment">// a 创建输出封装器上下文</span></span><br><span class="line">        ret = <span class="built_in">avformat_alloc_output_context2</span>(&amp;ic, <span class="number">0</span>, <span class="string">&quot;flv&quot;</span>, outUrl);</span><br><span class="line">        <span class="keyword">if</span> (ret != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="type">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">            <span class="built_in">av_strerror</span>(ret, buf, <span class="built_in">sizeof</span>(buf) - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">exception</span>(buf);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// b 添加视频流</span></span><br><span class="line">        AVStream *vs = <span class="built_in">avformat_new_stream</span>(ic, <span class="literal">NULL</span>);</span><br><span class="line">        <span class="keyword">if</span> (!vs)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">exception</span>(<span class="string">&quot;avformat_new_stream failed&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        vs-&gt;codecpar-&gt;codec_tag = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 从编码器复制参数</span></span><br><span class="line">        <span class="built_in">avcodec_parameters_from_context</span>(vs-&gt;codecpar, vc);</span><br><span class="line">        <span class="built_in">av_dump_format</span>(ic, <span class="number">0</span>, outUrl, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/// 6 打开rtmp 的网络输出IO</span></span><br><span class="line">        ret = <span class="built_in">avio_open</span>(&amp;ic-&gt;pb, outUrl, AVIO_FLAG_WRITE);</span><br><span class="line">        <span class="keyword">if</span> (ret != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="type">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">            <span class="built_in">av_strerror</span>(ret, buf, <span class="built_in">sizeof</span>(buf) - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">exception</span>(buf);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 写入封装头</span></span><br><span class="line">        ret = <span class="built_in">avformat_write_header</span>(ic, <span class="literal">NULL</span>);</span><br><span class="line">        <span class="keyword">if</span> (ret != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="type">char</span> buf[<span class="number">1024</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">            <span class="built_in">av_strerror</span>(ret, buf, <span class="built_in">sizeof</span>(buf) - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">exception</span>(buf);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        AVPacket pack;</span><br><span class="line">        <span class="built_in">memset</span>(&amp;pack, <span class="number">0</span>, <span class="built_in">sizeof</span>(pack));</span><br><span class="line">        <span class="type">int</span> vpts = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (;;)&#123;</span><br><span class="line">            <span class="comment">/// 取rtsp视频帧，解码视频帧</span></span><br><span class="line">            <span class="keyword">if</span> (!cam.<span class="built_in">grab</span>())&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">/// yuv转换为rgb</span></span><br><span class="line">            <span class="keyword">if</span> (!cam.<span class="built_in">retrieve</span>(frame))&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//imshow(&quot;video&quot;, frame);</span></span><br><span class="line">            <span class="comment">//waitKey(1);</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">/// rgb to yuv</span></span><br><span class="line">            <span class="comment">// 输入的数据结构</span></span><br><span class="line">            <span class="type">uint8_t</span> *indata[AV_NUM_DATA_POINTERS] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">            <span class="comment">//indata[0] bgrbgrbgr</span></span><br><span class="line">            <span class="comment">//plane indata[0] bbbbb indata[1]ggggg indata[2]rrrrr </span></span><br><span class="line">            indata[<span class="number">0</span>] = frame.data;</span><br><span class="line">            <span class="type">int</span> insize[AV_NUM_DATA_POINTERS] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 一行（宽）数据的字节数</span></span><br><span class="line">            insize[<span class="number">0</span>] = frame.cols * frame.<span class="built_in">elemSize</span>();</span><br><span class="line">            <span class="type">int</span> h = <span class="built_in">sws_scale</span>(vsc, indata, insize, <span class="number">0</span>, frame.rows,  <span class="comment">// 源数据</span></span><br><span class="line">                              yuv-&gt;data, yuv-&gt;linesize);</span><br><span class="line">            <span class="keyword">if</span> (h &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//cout &lt;&lt; h &lt;&lt; &quot; &quot; &lt;&lt; flush;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">/// h264</span></span><br><span class="line">            yuv-&gt;pts = vpts;</span><br><span class="line">            vpts++;</span><br><span class="line">            ret = <span class="built_in">avcodec_send_frame</span>(vc, yuv);</span><br><span class="line">            <span class="keyword">if</span> (ret != <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            ret = <span class="built_in">avcodec_receive_packet</span>(vc, &amp;pack);</span><br><span class="line">            <span class="keyword">if</span> (ret != <span class="number">0</span> || pack.size &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="comment">//cout &lt;&lt; &quot;*&quot; &lt;&lt; pack.size &lt;&lt; flush;</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 推流</span></span><br><span class="line">            pack.pts = <span class="built_in">av_rescale_q</span>(pack.pts, vc-&gt;time_base, vs-&gt;time_base);</span><br><span class="line">            pack.dts = <span class="built_in">av_rescale_q</span>(pack.dts, vc-&gt;time_base, vs-&gt;time_base);</span><br><span class="line">            pack.duration = <span class="built_in">av_rescale_q</span>(pack.duration, vc-&gt;time_base, vs-&gt;time_base);</span><br><span class="line">            ret = <span class="built_in">av_interleaved_write_frame</span>(ic, &amp;pack);</span><br><span class="line">            <span class="keyword">if</span> (ret == <span class="number">0</span>)&#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;#&quot;</span> &lt;&lt; flush;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (exception &amp;ex)&#123;</span><br><span class="line">        <span class="keyword">if</span> (cam.<span class="built_in">isOpened</span>())</span><br><span class="line">            cam.<span class="built_in">release</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (vsc)&#123;</span><br><span class="line">            <span class="built_in">sws_freeContext</span>(vsc);</span><br><span class="line">            vsc = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (vc)&#123;</span><br><span class="line">            <span class="built_in">avio_closep</span>(&amp;ic-&gt;pb);</span><br><span class="line">            <span class="built_in">avcodec_free_context</span>(&amp;vc);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        cerr &lt;&lt; ex.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

]]></content>
      <categories>
        <category>FFmpeg</category>
      </categories>
      <tags>
        <tag>FFmpeg</tag>
      </tags>
  </entry>
  <entry>
    <title>音视频入门知识</title>
    <url>/2019/04/23/FFmpeg/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%9F%B3%E8%A7%86%E9%A2%91%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">
  <script id="hbeData" type="hbeData" data-hmacdigest="7957f3fe2cdb2a9b4d1357d8c98a0dd25928b9c52c650c1068ebce7ef9f2e92b">7fc10e92ad9e585e07f3b9677cfd938d1fdb2db6dfcc645a035c1cb5137618332a98626711bb8968e8bb61ce8b52344ffe557506d545cb5dbab455a775122f225bdf886e3959e9b723b7716946089cbc039b9332fe98cb7b8ba07526040b62873f98bce54cd5a78d8672ce273a3129149996fe55331ddf90c575a131de29cfc8cf5595fd2f8f6e6b24092d1f18aadeaf8f24b5c59ed30f3b8d3c577e7fb8fba78c4c2134e323143b076cb8d8e7bc8c43a4b2cb1ee505a01a9b5f38f225a4906c8bfb80de1acbd18076366eaa8eca070baccb577802fd0cac06bc91b32d9b6aec34a9cd6971612e9711262631469351eb3aa79628a0bde17507d2f71cba8a2aacb207bfbdf70bf666d917f3b2e27059684781806dbab8fd6674fb89608cc64e470306c2894fff2dceeb00801257c64ccdd794e4c415e75a0b4b9acf742d23e4d9879a319af87e4c74199a8a26baa58509c881ee1675b2a1ed2ddc96da8a7d5661fce28df00387e964dd31757413275ef5393f8b3ebc080564831a6984e9c7c181c0675b16aced6fb337b8226bf25a834969bcb8d2038474c89a5fef176e7749e76d553b7d07050f12697696d7f32ed14c998adfccb8d54de2e72ec97765181431c78c014cafeceacfc4d9ac6a9ca57ab9ec983964e4f5ed11da8062800e9dcfae7454b61f45d19fb45dd4584f3fa9bd4d8b976a9473d8115cb7567d70498f74901f4d73dbe9fec3296c5f5c30744b8c1266af1856bb66388d6d417bc2f35d935ee725fea2572b76bdb38ecda1cb8b20aaf1ab0331355820572f5eaa5376cc2eaa5ad50992602db1702019512c1b50802f977f1e6c6cf40fc0cd5d1b12cc11de72ef7de02f864e44718d2b23e74c962f619459ec59a75afab1fed4c636164ce562c478a49bdc40a4a6af3d7b6e336a9f026765578585cfb31abc8ffb677154553759a6484e93d516e0326b3536f3ed1a2b630d1988fbab58478b0a0a436a533491bd38af92d04426f6b8e211a953a1cdcf520dba15940d5f28f89feb249f9510abb956fcb1675de99cf7ed09a682d1ebb4deff9839c20fd0527dfbf0d3ff12b0214bb772d2e320078c2e85384046cf23fc8c24789f670d168abce484866b89cb697513fe1b35e1dea815e83c93951c355e689ba1bb7bc1b6f68c0a24efb8240ff1d95a84e0735da936f54c2f9bd0e5fc1c1bb4b108efdab33a65549ce04d8e5ecfef24260a6a1c2191a8363dba9e749bcf91697187e69b08c071190cbf88a060683491c4fb2af9308e00a41a75ea6a9a450ed4ccecb16c6f811b2ee93dc635371292685c13ff768acfe68ee91b4084b0f38c99b24035ef8f9e880acbafe078641521665480d778264fce120a181b1a4b1994c949ed8f8cb088b69377ac68246399bb639f1990ff938aa68e1d3119d7338cb4c4030da440374d727a5828e986c9011b83fa6bfae8a598f1a4d7c0bb1711df48410eefb5a7e745227bde661e82eab86d3a042fb3d6a6feccb748ad806ec505959dd76b5ea6a94de649d8cf0961d1c89e84f8b302484e1e3fc033b36c5b36068bff22e87de3d5f6a95e2a8faa6db1c462fb7186f1336f1a772cd51b2e41d602c0a3f82f83d3c1885a9b398d3a0b5b2855308ab0dbab6e9a91cb189bc979826c893c5b2abe5b52a47b415e1a04c32f10befc66c2306a181f5d544e2fff84111b923f1847cc282fffa73c11f3bb624b51cbc45f012344dbaf823709215a4a6ec4007e7fabd359c43192133d275bec87df9113e5f3b34affe6d545f81ac60cae1babcf0c5e7f6c9f5c98f0710e3b7f7fe0cadc79d9f56526a405dc8f2600bd5368007f199d6ea2a4d882259ae73a68e1b790d0ea1adae7bb33960ffe65b4026c28aa15c214f197be1bcbee5fe82cc4d9ebf39ee19ae80c76a8b3da08b5888da20497116f5754fbba9bd1f423dec3f0c9ca99860608110479b4096dc487ad4176d768c44610243bace37636047626866879c2d25793e132d13e9e8a10f648149ef86ce828d02febf3c1bb8bfcdce49d0e30402cf8b2b506f45ef1e6e0184b8ac06b0fe4bed445dd569a0a99fa97857c46f2216d44315093d1055144f8ed8b5ae86d6f6176d831872499a49a381382bd6a48336d1c785353951e9d2ab46e7fdca46078448d66c7d291a510356d19926155ad0702a73a8b1dae78855c6c168024c67963bee73d785d088bc76d1cb7a579116a9f60e74a09616bf2b4ba1245e094f15245858fd6e753d5512ece96faff124a1752cd9cd87af1b5baf779d16c8c70bba92d70c078a011d885fa9c0e9bfbdce5a72b7be7d62ac0678be43ba0eadb1d98162bab466dae127a883c244809c07bdded1abd4fb252a6d099b858538a12228852b4302c1c94bfbc4f491a3be0651db14a6d79935dcc8468c579e2cea8245773e14da657475c3119607c896788fb22eb5617540bb246e6c61e46c475cb0fc1a7686c6db074f8afc096d64f555ef75827e78257b461e2cbf610108393d2c2de1d53c8fa42e15c65fff96fe5ff378b029c5efce7f6c20a0165f5f4703070f094733a3e196c95c4c406bb5e8791f360ab4072e6e4a1331cb6d7488546ec32d200c54c1aec2754d9dbbd83f67c22e2ab382bff24252ad38850b4aa6bd161887b577f01239b2e40700f436e579bde4631135004e68fb61bc11df1ec6f3add791896aeab8b0e3bf1cac10294532877027e4b163b21c201ac7f04d32c9d57ff2677c80654477c1247bf126221e27131427bade1223a4faf1eb79c402486aff54d19b4892f26744ad7e584241d8920f8b8d888b0a6d65ffbf815debe0cc0bc67aa8769ab7c10d1ed561558c8c4311078e5853dd8df877d4cb83d860dc28e5b0d70b263ee1d795f9c18986d34ba59d30919a7d2fb77487b19d94da309231098590d877ed787685075dde06133294be0a5d2491396c85f4b889363921dcb8b6204b38d0b236d394110a7263370e85c139441b980942637999235f190b8946fb84f3b6d9c3add08ffa004999cabf83705671c01feba348f49bb2482ad508021eda6655e68ba03ce43c65794d0c153b5943bfd7545b5100ede2f71b2165a8b69035d4aba3e58d15687255044909053c66cfaebc275c91d70a17e2aa6ac15e14c5c5cbfda9ae3b6bfe30be0ffecec1565388cde042e944435d7df6175aa69fcdeef2ac5712b3a09fb441940945200cbd0dd00dae1e42842da3df639ce2609b721b1f745b506daf4f1e4813c5c960d7b04635683bf50c3954126236159229bbd2e0eae332bd102a812ffdd0c8e0323738556b28429dfa1c59adee83bda6517a44b37424b39ffecf32f735ccdc96539a37a13555b89c11eecd11c569f9abe71b4e943d14a4403c78acdae762c35e096c5bfa39c190dc9052d86c9095adf2217286a0d7b41ecb5f1830c55865b16ba2f1b1b009efdbf905271a3065b9d0179ffa53a3f033576b88d1a6a0e6f079889b14df090c529066898b1eb7326a103596702c64ea869b506d9a8697702e9eb1580642ff399d4d88842a932601b326a45c94644c752366ff29fc218bb835bf5b0fe5b457fafc1f38ed71ee70106681a0f4f2015216611c62814a0bb70b9f3a4366c9c9906a0e96f93623fb1620f34a89e9b1658188bf3ee35eb5455a1bb785ba885516206b1f6285b62495e4f9b5587581a8f5fb7b3056dddc3fa76c25d6ff6972723053a284209ffcd044061e978feec594a0dfc9598b94e37b53ef72d51a0e87365a78bc3178ac57ef18b90f4d8604492b66ab2004da7dcaa7b6e92d7e7fe892076339c47580e5a7495904a7d340789fb1598aa527fda23fe96bf9f7bb208bf4d0502d284faef12917ad6e1e27ae5fa8f7fcb8924ef0dae16283f49d453807bdd12f3d5af578ccee8581f25d9e5d6cbdc3e97e834c6024655aeaf38232e06dddf6a355ac2f9d0ba70409a4c3121356c44abf897b549d4cda6a96e2a91abe7f4cdd1fd21b812b44fb4eec518a2ed492e2d5a6f7f1028ab7044dac50fe2ec4ab0df1a40a1a4283d6437df3f4a6c534c5627f9ea2406d3f1134cc394873671863643cf0a16fdfe771e45669f1e7a965398a95b98d72db11d4304153c70abb1feaaf0a0f122cf9909781bad28901ff7525079a5127e0a4f8ef52c771a11f7508b4346c8ebf219c91b03ac9b4e7fa6d155e070af00407a796acb0bf7b9063746f6507d1107c33a1f213ffaf4eb4c3badfc21c4a0bc42b40158793a6ff0b30307ece82ff0cdec094ad50da15a1715623a1bddec424e2caab37e5959703eff6a230b1b25c9150209350be9f67e74729d30121bba67a37ea38e8f4286106e28c9ea81b8bf79d11695ca3211362674eea5002331b0ff1e6085147e6556d0b9a2f1810fb691d8e44de878aa2dcce99b2b974ab096aa9ea06130e59fa58175ca20bb6d4cd9338175e59fe702342501f1f198252b71f21febf908f159410d13d35f81e5a0b1aeb4f616fc9fbfdd4afd3bbce133ebff9be89d67b08ff4c518ff581daf6a1d60c3414becfec25aa7a59c1579b04c5f31566babe82ef2a05fe9cf81231a3ec001350dd45bb98b46052415d805e681cae72230b34068c73b7c83274aacd645b7ad9074cc90cbebabfc4d18bc7c350b967ccfa7de6acab817e895dada4ea9a95a7805a8a90eee4e62b5e6fc2bd3799184ebe8498a155a6227de22a40139cd5957cac42644c11f4065d759574bdee71e28d6970e716679de4ab6441e642506d8dc198943e4a80c1f473a0a71e3aee95fb27be96c2f39888f295927b1ba5f51c8269d38998488feabc4d4f1ab04b9343cff36c63f51772e527873e21c3ba336e46f89330ee8d033576e06393f2c66c62703cf165f1cb3f1b1869118c070bced042cf497b09a1748d4427ea9075e67e7359f6cd3ee5be3516e95276cbc7af61acac52703a8c2bdcb6b973cbd455f360f09b8fbd14e3f69f42dd0d7594bd1f61dfcd389382f31a46dcf022a227b2a7f29de880d37eecf658408f1146a27e93dc3173047c8e2f5ef775df1d2f820c45c3fff60e98f9245e85aa0204df1c35fece6a3bebb07bde5deb07f0855970f31b455a0451a2cafc4e75e8e66ce652bf8c4952c0aa6fbf0a190a5d4e40f8a5891e1a259729cafa1c4a2a755f4b232dafb034ccbce91d999f75985f4a0d39557ba92d82b59aa8a69430cc316dbf7e41520a91caf485581852a5e0a6580effc43949e5f8cbac02c4eab466dd2b02bf363a0f19f68c262d1f01718ee753b924d67adfd40796f860e0ff829b83a441587f9178ab4bfa12ae9a06dddb5ac2e3baab1ffb0d3fe62b3350b9aee47cc15ba4020946be56b7a4b341b139f2f7b981e93e845226b1b50e183bc8f7d57897aef9e361324809f0a3aa7ebeda7153a1e225d8face8f8091f239554f5ec5769fbc3ce32ed419e64789f401c598bcbc57cc93e895d3dae35f5e58d35bb3d53c1033542aca545fd7a9ad4276cde882c11c68b5dfd28efd913307e027ac745a8b0557914680d97bc32016291e8a6b9a799387742f5aff794f4158c58071159b307a54d22fdb4a4df875d37a7e8ad38ae912dedd6fd28bee5e2b8a4e47bbf381ed7e46e56b84cf733b0710a6d0d077ccb945bfd9ccc48ea0d7fb05d45934f91d39e0edf7acace6a8114634c2c66f85d6d42f0372b3dfb52ddf267ab0e853b57ea93c2d3c09066097e5305f936e4985072e19dfc8754e5c6ce16092b126820d1f8389e9e87002c00244bff5112ddc317c0a635135fb8b3f32e0ae32967a755c93b22ff6e5d3ed3e82726276cc22df3be8defaee255f24f5f6952f98432f946b7a147b26ad4295be147806c5f5516626dc6103d8d3884bbc95d44ecc113fdf104f7a6d3847095546696761fdaa661154607289af7ea28c79df9caf23ae8088410f52d0fd675833b8b7aa376f4705a1e1f2e59515a2dee7ae5d68369ff106073c9e5c8f8613f909870da3f39665edaf09d516c306acdfe954bb7fe8a3b973cf6091fd5f5b052d0cc26d2309d217debb50095cae54744788da0683dcd09c4b4d94c1309b0f9587b942763409bd475eb9935a5259a01364f37b0146a91132f0a94022a515d7824f1adda76974a24cd51e22c1f5f5d291cbddfce6bc1219766b3a10a77d3e39ac944483c60434f894e1df5277f03ef9c11815f8f9ed3a1f321edfccd4b313800a74f683f0f067bb569e1e6213493f7301d35588960390625b4ee946c9982b2b043b74979eca7c80cceaf4c3e171b584b5daf834becdc9a67cacc6b1ecc2d53752d90835a1fb54deaf3de87d0465f55000f64b17db67166e6cfa76bc4d61fd4eaa6e28272e3d7fa476844adfc4ee338abaa42e9b413eab04b38525dc46e14da7dd84db5afc24e5620800721803b8e1ab63a0d4d307019c3febadf137ba5179fbf197dee4fa617a75c597b9f02fa0694c6c7036d625181d2c512b721192f44599c954ad799ce3b4a5fcadb0a1535d371b051851261032ead2400bc6dfca42583542f7fd2b25ee1d99e216c8309524c5cc652310bc46827e18beb32e171b1e7f253273f63a7367053e571a1884fa54575393efc02f6d33612d3efb59bea1ee6948049c26f12ef1d2afe87736d718dd265095570ef58109b3e262741a4e990de045881780faca3a4142fd908de69e6d4539ebceab28c076cd5906b0ce12f43d14c24aa337775873eb9073fee537ba2368fb04d299af894bc8fb6ed64e3b9d7859308270f5236deb315b190d4aa70b15c3c0cc0848990f0983a026511d8362b99b43bc15f1ee2877f1f80d2f451ed9dc9b215c7b10aeb3513b81f592d15521f804da75288a7b8b65b4b88c1cdf7ecb248893011f5db6c865ad5df09adc38d9e2a7e4a072d0a6318e1fd55e47fe00f69527ef12c29a421d3be74b49fef872911060a89f5d6bdaf3925bb2d68913a59508f66ddf4afad7e87b40e65b4de92bc3bf53b20ca9465dbd262b22c36bab451b93e04081199ccbeea0390cfc808c05d1e91cf3cd70fc288f6252235b05a149d721be5558ab73c77ade7a5bdabf9ae369bd8a318dcfa2599dfb2ddfcb8214762de64df1e25c1e1029259eee628336e26294b7dd12f917d375c30a7492bc21f9e0bca609cb2176e8e878c250b48efec976a0ca3764ef056b8590d6b5096d5b21129013d99e42180ce0a110dedf7630ea7b8c224c5f6b3db3df46b53e0b6a9747d1f71afb7505f00cc70a4e7b59168fac9040942719608e79a5c0a09b01769012cda0c1467fea25da8f9b4ab496530568aebaa21a514aa6ed5703dc5bad87405d360daf575aa42b5bd060cf3d5b66c8deafe84b33d2c324333f03a47efd227d31b5df575c7182e871d2c60eecbdea27cab7d9bdb239aa3bb3c6dc3249439d4af265d9e13a26f7fd1736c64af9d5df27e00d20f49b9c72879ddde9928868c45b43f19104857000498ca97a564fe929263d112a0bc05696c4417d742929c49563e1edf237ded1eb58f0a8ea226d087b49f4f2dad448ed411e2bc009d48eec815e84d0ebc1083a020ba5a17ab8cba7fe9ef9df1c2b21f7a79e0d6396401b372a9812389a87d16a1ebc0c002dc17229448a665cebc86364f1a343b2a7907bc2c4278d46debb615d256c715a31914b2fb724116cc02af24e0758527bb6454ee9ae288d0c24c57ae864569c27086bb2f63e5c37c86caedda22cc03a9c6615621136407659d55ac0a93fabbb092c04c2e37e33d95328903107d3b6d68df4a9a978659610892d8e3832365d3c30fd96079332348b160eb570c5cb312910776c2c7427d60797e2e55b6a6ff3f1a667e2bb4d90b56d6372c0adc7e0f107d8cbc0a7480153a63f1db1c2bfc0eb8629e40a5fadbeeaf5f21186a341ea86df698a0599677841aec8fd076c6f0b05559a18e4dadb048509f4f1a1e7d97263493cf0e38443ec9356368ec3de6a0ac771258a0041bb282afc31cdfa5544380dc34ab0b93d3e179eecdff000dc84433ede28fc9c4978ee2934c015d59acebea8b3cd7156d5e7155ca6b17ae5d2700e9b315e320e7e1634ed5c49182574dd7f2e89f2e71778974ac0b984b0dd71a4aee24806e1a4381b686b9f94d154bdb5231e83c0ad1d044481e3606c9f2ceea7be6c7e590d8150abbb3c043153cf394c1d1ee5677ccf22eafd949a3b931081601f7b26a8098ef249fddd7fe6eaa9a116d38d1a2d2a6df20b829abf24df934d83b7d9b9d30e24b746c6140d21e8ad88513dfd5c1ea324b38639db90b1b219c0c2e2601a45a94a9bd5e1f1d610128dfaf23314a96ac7561fc1eff63762d92e315667cdc270dbdaf3963b7574590766baabb2db28fc89587fbef1019f6eefa557ad6785bb84567e69e69188db7d26bd6478f89c1652976ccef1cca0aa96fba869473da11bf83c159aac565eaf38df1169093d85c1151d4e073755b53b28627d70b41d92cb25c8c774cf8457b099f817a685bbf0677bc2722dcb6ccd60bb52d636807c23e79e02e35344915d6f6237e04c24fca44ee3431ecfceb8939ce472bbb16f74b63cd8368ee53156b931e59d75fcecb5ad5b19ed5c910f05e991afdcac4b4e8dccfd108fd18edcf08f9ebd8389a423bad45deab5071097d55b8975a41a37b52e06f5a625c14ce696863faacb8270ce05e9cbb258f8eb8ccec6e8d931b7133a1d901d39dc4aecdf94fbddfcaa8fc16b0e7b6e2de5f73a20b724a2327fd4365cd9220f50a3cd7bbde747ae854d6b2844789d5f6e2bc0d5dea9c164dcbe46f217ae6ba3cf8c3abb34caa927beb99c8dcb3c87b2dc5197b9e28dc4c794582e639ad2a26babeac132f83f9e87abf288c948313012df4800b048b3602dba994f8b2c7c0ef4d89a9b77c9558e407f701cb64129e633f5ade05c07f7a9ce0648d1e60ba1eb75c3bc52d428da3dbe80577c1690d15327ae4d0871fb76e63a0a741d9ed4f83b4030c2e23f68aaeb117c599e628bf72363c5eea4a89b8207e2d015a0e80543109c49c6aad10c74d93cec568d05f1efbf7f4479d54ec503823a6f15d2478cb16c1dab8da772b9100800a23e4373098314826ccba10608c33b2d8b22d55d5f0ddfd727767fa1505d01632fd9af81e24a9bdc9deb8ca8ea92f814746ac62ca9d3a6978543d5bdb0e4ed763aafb9dbe433418c7c77dcba0ab04d3b79c08c3420d8a000c9d9f847ba758c4eb463642c6a465f30adc0eb90e464815f10522312bd72217a9e85ae4cac8d05f6b808433e0e82033d0d14efe02a5ab421468a2b0aa7b9f425fdbbd93577a62602cdcd61587eceb63534fbf6a22333b6df4e834d24e1b993bee0e7c1e62404f275a9da5184d65ed668df84d3b449f549d36e14a464b743116c9876a8e542bebf2745ea0d688a2c2f3d9cb5faaccbc54ad116f63824fb56cb7239a85776c93b19a75bae568c19215564060b8a7438a551796dfe5d171a60a17742802bc7cc3b7986709f9b2f5a182122074e343e7be0983f6e47c7e9e322bcaec3e368a251f06a10002760b6439df68279d51b1c5fa60ed48875fabc3d746da63809e45a7159323fb480cad8701f41c4a3ef862b4ed9cf7357f5df2554c6cd12c475eea19f478bb727ff22532522ae71a586d53130434eda41d8241f33607f0a7b33691677282ffa89d5e6bddd1a145ac27f3327fdf3aad56410927ee777b4a799b1e4617e5c4b11201b5bba618ae732e0f3080b6af975c03bea0f3acb2e5f535e9a08fc593b5eb7e88a98f7da8df2480dbb5679afb79dabac0ae495fd3c68bf4e39c46809ba87185680b4704bc532449fc89a4d7bf3087db5108f41e645ecc8568298e8945bd6d2ebcfb5d83eb32a20643b451cbce113c19b2f3383581d0c4ed9442a2608c794dbececb580a28b8241f1c342a06b4ccd0c3db94e56f8e9cc84827aa701d9f140c0d6d4f79e9a537395db5070f0a3e63ccbdb71890e8721707d8713e5855198f2d0eae48d3448cdf686c0977334289235cdacd8dcea35b0538c53e4a8aaabb76900d2e7dfacd6d8bf6cf96666b132150a62a88fa9b3fef14108bfe9c69bce0ea1e5af164c759f9491fd5c1e8e822ca267d78642eae56b4ea0753f5159e1c36d6d5115a9ad946ba43ea437e1d9f34be4867dd66b57496dabcbbc587b50d626ebe3dfaa1aab8296c82d078d734fad5a949c114867543db8fd781357e93dc186310545564149f963bffba16784427fd94d27f010b460c3b914a9f1ceeecaaf9e2d1c2fd23265f92d42934865916ac2ca793274675c3a9e04cf220dfd9b6cd493046037f5764e911224b305fff31092a0b178e0b1d05998f1c9f4985c1d7ef414f8c1912ef1d49fe4c9988883ef39a0cc830da1cb64e91a8fe9aafd68e7a15b3377d1d9c4c0344283f9f770d19c3ba635086297054a2f96660140feeefe33d49b5364615e9c6b55a15fff767554c1ea6b224ed7692495acbcdb85028525c6eb19c536f6566e6bb804d4c4657f31cc83da1703dce8294ce8e064bff9c838e67b38a007acabf0d4e7617f0431fbc4ec739e48f6058ee0c0b5536570e915ee6ef19e67904c9a64803faf3786166c9c38151370ac0234469d0d6cad5a190d7b992d9184595ecb253d6207ac9ee1e1267eaa33c9a48066df11b46d8e7e799dff7d81aba77ba3b08b5d17bcd3cd6d5fa0a177a364d9ccb3f249d36c9ca16a7124c87486f75ebc3a760c01c16283e3ef29c0fcd6f711f3ee21e8fc1052922f0405ae0109b2bbd1af1db4007cfb2ee1d62016e74ac7cc618dd348671721e0d3eea2dd727277198c21d7e988ac4c2a80b0b824f638f602d2d90ed5d3ebacf1ad267bcc250d5c1920065939daad7bb24845cba0a37a0cdefcfcfd300030bb938b2533e77f6f318ab14d8001dbb2a07292a6a7b05f173732e50e5523910759bb5ee46afacb3f7b563c0b92d13439ec5f3afe8e3a2af16f0897855ca6933289e834e79d310dbc98350f1260da32cf6735d01a316f73b2331b8c36be2898cede4bdba6acf3335b87077a25da6b26c9257d0ad8ae5c321827feb59288bcd6c700dbc1e4620efaee5b8d8b703ac9190020d8526c9e4a96f8337365e729232aed84ae870171b6c304dbe23afbfe23f758873b99a1eee4fe873231f91d15149961aa63dc72b7de47f0f9900ffeb2e72fa56c5500ac4e8c79f4c862682f4a7378d66289414b862a5631065f066025ab4d48f89f405f2397863d062d18863a3efdc67196068b7047e1ed3d3facd6f144e3e9ac6da5e94a58337c38746578b568858105ede5de7df80e63bda8c230f6c9fc36caa3853747c554a2bb3b9732f30ce0b9a8a130fa08ff973822e7313e5c0c91b63c02a1614515f9f1323722e99e28c2373f7f9dfa586785967458279672dd6b65c6148a704c13f0982f406304fc4e18b8e80c22a86ee53a207921cd2132060f884f436fc1d63569733e65c1848e73e8782ab752c8445730aa3d5e2383b9fdc6253869e13ea19554e369004581393b507303ad68c7806e6af5791a563088bf85d311d135041cebd98b49108949c7838c25102a554e00d33f5b687932b8fbefb6620de0a7c12aa7800cd0591dce8a100867537021a75b171c034802b12f4db9d77c4ad170395ba5c25d2dbd73552fb3491abedc21d7a0832061a6e57f57e1190237971f5d58a028097ba40de1b607f40411cb56a5924cc61bdecebdb1e798c7048efc6a68ae3e5bd379b1bdd6b0189ecab61b0bc432b6b760efdabbaa7c56780bc0ef9cbd7dbeb842548c732d7bb35170042ee2c65dcd84bb9772325dc509ba0f8f050c50cce4d09f46ba5fe910d56d1e5f0d694e9054c4bce914119bb75ce58e1736c798d7e6b67cf1575bb42de568ac8f0099fc7cf7cbcbf2888ca95e74a515bb8bf8f1ce925a1f54df6f7a53b63108041082581ce0bc7280ed0ffa5b9cc39c4c13a2a678edd09a32bbb739c96eb47b1c1019b7b109a7d7e138e676549199275518568026f79de6c5490b3722bfad1f4fcbd3fe2a2e81e51cef9770aafa9372f2b30d8bbbc74973935dbeb7a5a2c53d142be6ee4dabc154c8a5535045620eb4bd2c5c865dd5b786820413e2f876b6a46c6e2d4af06a3afb78ca0c277390b8a818100d36f8151bc4aeb5b202265f2d2930c2743ca3d95efc966b0a82d867b92ed83da0a2d4b4ef38e332187bc17061bd9ceef07e3d9791680b9c4f396ec45957123316c2991a460a3cc52935b04133bfb26c2e7d1a773b08fd73cc7b7fecbebf3defad70bae3e9c397265ecde621286698ac137c93ae99dc327f36e18d69f69931037c2aafedf5355fc7e838d541c16b401f0e17fa20645431f60ae76da60c302c4fcaef914b3014753642731418c039de689da702c63818d64194fdebf800f58d1a02ba1d28244a38c30ce667e0a0047f26b057eba1d9cc7ad706889dd3bc9ea499f7f7e9aee54e51aaa097d633a13c7df6673e82f122644ea3909247d9c692f10abe0770ea3d51e1f6d81610d6ee9bc73d52aebfab9a165e67267a59d1a1b8f43ebe2174b5a6e8a2f69db3780488b591898bbf6e310763c9bc804a3a208f6eba5e9034420fcb4f7239339aa3ce8316f3eb8bd996dc76cf9c7cd5497bfcef21209bab52d5b61aa91965564eac9ed9dc528fc8c032bb98b3fdc4a190ec44cf482aee6672d5a1411391239ca06503ed1ae3fee344f643b50abc43c4f9b3fc48b62b0fb5a8e647d503e7f122928d8a8c81eca2bacde42fab4974e0e3de2869ec717bc821c39f904b5ee958cb250ea87c1a619496d127dd87a1472241b3b447eda6ed53841d73ae2eca18c4f3b97af922ce018081441ba44b878da78e8e7ea86ea5d9e8e232d90c449b0fb3132b9de6e8c6169e2e87bd915cad64d2f980ba7609ec41d5a579238788b334a761956eb82689c3ca80bd44ac4b57574ac3daed0040ade8bc2976593fc84630f4dce4590d74d3ff168be98bb4ad51eeb507c7659fac4574745f166a1aadedc2da74fc62139ff8aa11c7c0f3e53e4dbecb42e054b7651b1bdc8192fb8e90cfe94ae480b979b7fb7867ce21b90235f75ea852157e8f45b2d7e76e12c7fed11cdf7f3b6c6e4065bb474ffe85509f3fef9786999aa4e89921edada4798aac022e98f53f738256724f1df431f57f06bff8cb3a2c441ddc65c9feb6f52c8a6c107aae6511281af6fe2f350b9087d6c8655c8212c5fe7ef480daa226bedadbee6d4d07f3d5e59c2a5f181d0d6508cd99ea5a695d4c14475e678c16c9d6655ddd37c66ce255d5ca33f9347b61e328f48813c1a8c3268ea474f31c091a4fe4e054dc41f62af5c9e15922a27daabf6ff4b970027a424b8b3bdb67f14b1d94cec478593e345bcc201904e6d5780bef4a3704385943bfb304e066a1f8e9f341f8722f4bfb1eaca0e4835ecadbe667ab364c04a8f3b03e114d63eeb339318cc3d06f812a9d9e10e29d16765e7c81eee660c310035ae75f7347ead4ca4c6391831e358eaea0868c099fbddea41387c134bdf6fbb79d824aca43ee1f5381264e6163430019c968939cf57d82a183a320fc34f69ed7f50abff30718fce1320ed987d4aea49b0d3b2823243cedf1851a17a5a073ef671090b3c70bb179a6ede25361b0ef59c12aa1ee43713005141d23666f341b97b3787b1cef42ebe07483aa05ffdfda5208dd6c9e381042cf428a744d0919c2ffdfe6366db8aa8e9ca71fa6a5acf8a87b4624cab1e23f64ab3aaea9055d9dd2f3d8fd7e1fbf585cc9a31109955a45bd64931cf9b2f7723f52836aad4d1a341c6cd5ee8743d6caad48c6325fde48c3caefd31445576def2f6eaaf688573033d675db30fbea95967feda36f9806667fa152fe34ff76592c8cd42aa94d417e1e6ba4759278246949e7050bf858770ce1e91424564ae8439c577ec09dae1de577d451ebc7163e18f6cde9ea78104bce20faacfda0d3311823e19bca78e4558d0b4c8e4fd95712775fb7cd185b866b699622237999137925e9d5661a4cf85b7f5774522ee7e7dc486f15bf972c26eb46d42af5c330f7a6926c64262594f427be66bc58050071634125592c3910e77bd6fe54d695329f83ec2f207a067c62acb79b928c7d69430baf20a38b3a9539836a4ab5b47a7072a8f958900ac02b5feade6e240b2292ebc585a185f9c746df85b37259358be6cbd1f79843c396978548d673272c1c30a0bb923e393722503abba516eafce718c5534c3201afaa3267131972d444d4dcc959835dd043026cfc3b9b5d835007920004ac2d69de65263cd6170aa99137c135bf358c2851047e1c4a1b4211c6070e5516129286723f2cfa8aaee2e36648b0a519366dde88371c9f34fd187fa259870d7a141418f7fd8753421037ee010a1df71330d3e9188caffe10d7bb840efb9b7e0cd88d38cd56af74d556127158bad4643dfd08c4b5fbc78b0dcee7afc976a0e66ec8b3f0cdef6205d2148b5ca0bcb881570a3cd318f8f1eb09f9220161cfce02446812bb1482b88afd52642298cdaabed92d0bfd747cb85295607137932a734b0e1d9a825fbb4114aad90fd4ceaab9bed3251a0913c4ae70ce2850b080e9bb5b0c285823c3d50a57e26c6765e795b7a34733f85c310de3c6060b0d8541dccf72be8ebb13aa3ad5bb0066b11f7915ea1c4914fa44d780026ea03850a22888bb913a322942e2365428d1abffd95f64c318168861f8cd0608380377deac99e0e187e0ad069cb0b20a0913495ed831c8c63455abc262635dbeae120673cc94bd622bddbfa146cef59dc04acc316b5f513b1a38aa7ce8c2cbee0510c1a1d975d8a1ae35512d06195fe73c1a98ec8230af4c049699ff7b4f92ad1abad8f98d0b6f0fcd52dc2b018303bf6ad7d86ab284939281f6158862566929861ce2195928c19f9541c15120bb1363bd5304c1a872dfaecae4126b5aa3fa4f3ba6254bd89933f1e9a55df4c7a72cd2d91f26f2d99235ef22a2c10cb411389f7c830a6d72674dbff8b788d90b5dbb553e6d2bb119d04964cf5cc86f854632f26ae7fc72b5f70ec8fd564a3145da14dbae687df270a6e7679075500654d9bda845591f69fd58453c388c28bd687a6d52abf7f9bc33967c2cb819daffce740119ef79f16a718824468d6549aefb6e49be5b8704aa5a4976058d4bafb6a16a4ce0dff64e6a9538b05844140f51823b552cd624dd86a96e94ccd92e942111e81aeed549b595ddec4fd1289d3f7caaa102e6aa83a5ced49ace37b7402ab20cd8655542ae536fdeec9ad084582f51a5c71a25d184a5d7ea50f1831534c50aca4677938e3cbc21c555aeab846966271541800e5cbc194feb8919d50943e6a809b88f1418db1bda94b701fb63453d6ce93bde746377c1b671556e8c264f93fee94b1b88e49579d35f69d976f2f873c4f24cd9859a61c0d88175412d8095469c19b84dae78e226f76b89aa0d6c851cf91694da722aa385d4377204b1338f0f3c25bbe9428d5871cac9ecbb033e1a97c8db84a01ad49b05a0312525cc6c415074ca55cb0d9caa5038188e0b98a0e6e316ac3a2b6756b827bda8d6b970ab81fb88af267b6c9a0c6a366ea8ae6d0937663802b099e8bb9eb3063c185985493f7619e97f228aaebd9a03cbe5c41da93327aa84ce13e05b59f68007523ee71811e7688d28d53bd25c6da0e0770765023d3cad0f7a59d27fa2c0f20f33258c3d4e86e8affc68cb23e73d6b60b1ac224a7233edb2ec100426c0f21c8fa1b4fe99b30426718a1ff186f37dc06a374cba5bb5bdf0db75c1a7410937862ced5c5a232bb30f9b4b1a5b3489dcfae001c2f286b736a2e63859bd175bc5fc8bf7598eb41f6188a3911c84fe6c8b505cde5396f34cbba58ea2d80ad72ce817363cda6561dd507328aaa8e11578dd458c89973385dc205f0648eaf030c13b8debeee7c5001422a9e9c7d095cc51b18b5f1a6048706f0107b15dbc0f4edd590217c17e222ed0842b024ab0afede76c9eba9f442d84abb940219582cb3face3ced7e687489050b84fc514d04187ad0cd99d28fda555f0ed3da826831a5c7909482ff9368254e6d17dd2b8400bacf1b4d660a610609126d67bcf65648568196b8064a5502b26151b2483462261a6e9658843dcb235e086e678e0f277b2a19f6aa7cfec8b76c8354914d762ca1ff63f192ef035979042409e1d8821267b4ff63648aeb7cbbdb1340d0fbbe3caadaa83874c8d1c5835f55d8b8130f585fca03b6dd678dcef8d69b07c292b43f5f3a7434220f326abb4d7cd42b18327fdaa6437c265012bf41493f1053d2092d1a1a373ae32107f29a91992c4d99ca1feaf9a66bc0816a1438fb4b7b138317cc53cac8a8bf1c7f9b1a1300ef6def5bfc3b092593a7b3d59bbe869a9dd9e005d86061874289de24ae4187e99dd039af390e6fbdfbaa2c903b90474a2c450eaf72b2642914e7d44edea34453dda18aa073fc38d6b2d8cd118b2c27cffbd0752dcd6af9c1c1682229ad3a4ee9c756515af7244162941642f593751022c5b4bc27356b3b5c7d3d5ffd72d42626a4f5c39c798b922f66f15ee9023a8bc7d9237a01e85f63bcb3f4ab72319ec93b9327832b2e8e6619bd7370bcee3393e4329681d0e7862c51c3e7e2a5c5ca02e459920edbbfb6be20a36191c13f0e6f8946f9b7ef68a7940f8a1daa7584e91b8fc18aa08db3af247bcbeac9acc46122d3f995820f5d429e62cdb400545461de5e2f46475835559f3b25aed266aea25e8e9727b56da57ff65344c2b8018484c07ad1b721f6dd57f4313ae01b5920e81a719a0f5130ae482d9c967f4551448c6e359394d709f8fce472932d02f881c337ee42dad5a55cdb8cd288813f9153dc41d8b8568e9e64f1f0f5278955b990bdb1505fcb5d06206d02fc8fabdab2245ab97e3c3173ba7161155c0296310df5b1d4f19827068fd5128c3dcf036a2386de4b8e05c1afcfb4efb112aa4452bc21627f2e5a0cda07c2c644cf6dc8dec45639cf4cf168f42b728b7cc286a6c0d40b5543811a7998897be16c1646e0a22d67a5a1b00796fbc9f1ef160e5904b4ad4c3420bda954c69c69f04f2d5b4312524e571d7be90c8104bd63d3c51cdea8624a5696ddd220a05d5d3b8e53ad6009f8d3d3bf4617930bfa4e12938969cc846db2d7a624dad11c57eda0cf095a172bd96f4b4b1cb85dfcb4110671c99e74a3796be875957ba69649a980a0dbb9c3a9db9f0ca3fae476dd029e0bde91b6b5a115954c19ecb80307f9a230ace00d7552700f6a115e8150fdfa5fcc6153dbe4d2909757ef4a328c81a61999d786880aa1aba57b5fd6e699bfb3378ca60a81880a3ff92b17ff95378ee9c87e8214697a5957df87ff7aeb02a40c8f8dd23a9bc81e313141da77d520eac16e0f0032492943e000c84541570625866d5e9a02fa7da8674787f8bad932362d9d127c85a16ba3b2fb61261770a403259541b8cd0375a227c64029bfc3c7f969d7c85f43cd66a22edf3900cb439b85a1af2e9ebbc0f1c194447f283afab291cd69f71715b3440eaee733aa1a4d8984efd7d8c9dd764aa94f1bfceac10d0a69d2ee2b53c7a2d42938e98ba469a17bc75ac95d12f582a38bcf0307500541d7ae9bae988358387a7429ae04017ea58ec2c06deef577c8b63c94a70f72cab6157fe947fcff0c6ef7e022fbcde8a06154ecda8089bd784d78cf13bd429002a4cb35d7c1ae84b308c87e92c9ae8d891d586c66755cfebe32075aac86c9e6eb4a5d6d6e34eabc0765b5eb832d09017a429c94c7161f8038aac110c753d54d9c99576a608c2c2601369ce508a38d28a294709739bd8a6d9f270263f12be20e937bc866b33c13777a7e820a4143d38ae11dbbacb6f9ddd778f0ed5c5cf22bd2e91eeeb082b03299fabc16872aad49e88315f94ab67a483d9c437286f27150d9ff513c0e96d318ed8f25445ddd2e7eb4c087ae7a7404c79c4abe2790c949e3190534e884ce2374aeccea76d8597ba6faf96a89ab2a780250982f518e1c2338063bcd38ba3ec1ea954d5a1d47a01b25396971c70ce4f087d179c6db1b80ea85c5f692554632a8abb312d19c9c69ea4b559f5125388c60cd1c520277a0908ad819b610e85329ac6d1bce6287ab23d829afd6b42985c286318eef94059bc8c6620d9d242c6dc437a28acf2cf44aef78a117c8b5d46f36dfa301037381311638347128b494dc33441f2a0615dd2baa16f6454884fee02d334e49ad8dd7a5963f7c47a34763d0ef562d6f3a51077815220d6efacf5f52bf8853677bda541785d0073e22015f936105188d8ca08ff2bd33fb24909c8b8a579fed6acbde9563372516c444fd7b420613dd11e68d40e3287a8bb881fdec4e59c31d0491ee09e8c85b7b952ec7ad69c111b72eb5be402b5193c41bc965238237f0441be4338f3d9f80559358618ef4f193fc1b6b6ec5c6e61998eacc2a4a52666806502bb50d559988b63a48eed4283209ac16edd0afe54a25b39d8d5e275fc0298db9bc130a59711a69488dfe8672855bab5f2d6b3d7f3c37fa6540e4e4debeecdf7da0cbc8f52d0beb09ccc8fb8aa3044d734353d08c4b5d1a5b7bc449a446e354be86b2e1237521df4aacc1e8e8ec6e1ed52a44eeb786182326a88a321e51e8a6b4d172ce60099de09803cdc630040106d355c4c461dc8bf85ac6ac154ea9fef29c18675fd41075fca24b8df6be1e067c32ecc3aa7b6b1195fbcb2de4b10af7749b7c53048288c285a9b83f142313f16efd70fb00605198b32b857e793f5b9372fd587dd7ab3ea84577f21bbb6bc5582f448e0e749a3ff7f6589633b39374adfddb6964c91ec3f4b57513a7b6cba2520d9c0ffaba0d4877cdc4c59ec8dc72c2d6f84dd7bb32190b506c9845b6c0fb81c2f1f11231893f9080dc9fc9f056c85702e341c1e7a10fd840bb4fd8ae0bd92c4c52bd5b5f6b2b530371acf9e17b46249c41d19c87f77ae673dc1eefc5e3a1fc05dbea8fd8c5d3a216c660f3b1d3285ad1cf8143834c894c8e9bfb763b788082c1bef7a89834e4643643bb6c2e4394e102fd05881a1a35e5c77dcc9cd3c0283df90629cc86ca2a1d6b771ef6a78fcabd13eecc438a3cae198c91b41370c9712bdcd1faf0f716eed1054ad483e367139f38c60483f118b63f60d43be5153f8ef073211a81f71eb119e4635dfc942e15d22b5fb4976aa780f0732b32e9100fbc2b04fec50db1560278cc228534161f34e365a9411a225d29c71de3eb25ded6c6510752fe50ff8e7fb90d12cf132978ffc8ff081373f42359201297c676b5c8ebc5a39b43b4a6e43b503736e3f2c88026a9e96e862349a41d18a6a35d03dbf1ae7ca7968639f29369b84e952f778df972540a579b41752185e4e54af816a6ebb880d1302ed0515e635581d7338ceec171db1d7cddacb30f2e9f6c9db2e7f4236f9edf47f20e1f857fd4ef6fc5e12d5c7e72459689125822811c5d04a030e9a03ec34f6978bfeca48550ad3fbe6cb3360acad9e92381283e14844dab80cbfb43997a3612dbab3e246bdb0a482f778b6ae791a43c16a253bd37094e33d6fc1e56b1f797f7c39cffa22a8be8ab0863235d84480c4042cc59c639d0f70b2822680cfbdd3571d7f8627ae8bc0e79f354791dcca063ed2d797cdd4ae7edb13084aaba1c7a83330076b40726f5369c9a373b7df88e497348bb944e7f3faabd6dd288631e2dc987b7b5ab7572f9ae8544708f16f9e0964e2742b2b50ab677686414a691e5ccc8017d7dab0e226ff9340ac7331dcbc0f867f8d0b57bb6d079accc1261afbbf59b7b437a0de554019b648a7d7da53a6acf48941bf72017df5a8f5cb20d9d7d7face9ec82967206412feac46bd1acb3ab00d6461c91aed107041af45c94a10593958c6de3c5dd4cad126b878fd44c7a39e1e6d0a9ea53a0adce5db20e54183a5a74a4fa634e0f1e37201d9b4a3d69ae0ac2198d4a1ed7ba072aa48093ceda8b1287c7e776694f7ed3f01019b9dd710e88c724b1728e02be13f6f4c2b9ae7ec9d460a5fb853ed1ad84e62f04d203811adf6b9b37b683f35d4214a53fdaa3978327f87360067cf46b8dd2006c33a6c9f6459193fd7c0c570cc092e6910bbf0a1b8e18e815ae9a1cd7de980a6b7be87f878b9adf00fdfee4d522afae1253dfd79ffb2b207284cca30872a55e79fe50b207cc130e77f48c1c9546b8ef3e61d32d774f5ad5fd72f691a664aa35417f1d170ddb463cc0ed6366bf949cba5af3ecf98eeacacc56b4545567b69499d12a784d8b284a291840f6f0f9085deece80cef27a67d732c99b1710c5a8bd698d9bbcdcf6e686ee59c673681402acfb830d46a8627b8de7a76baa76c26fc64a7244a90bbd522876a976e466912cfd2bfd656bba81c832d0abe07db765e93b99ce2758a7b60da0423d3d6b163b3c967f713c1955b7cf26e383ecc72bb3b56e3cf59512958c8a920c4334474a334c5a9ab58134807335f822207f3f0df9b160f73ef5e3862e6993ce0b5e1abd806102be98e34c038a0c65a823f09ada9758189334d0bc39d6cbafc0f5a266b6d641f4fabbd8a62cde329c215c311f263964b13e9b07a5593f0610bc308ee017e814622aece89d9c42dec85ffb44fe5ccf650dc2d3ea142b5ea16ba4d8a859c34e8939ce10ca569cceb334bbfd6ee5c5d18ab60e8c7946570438a0944a83b6312846dee9bb4249cff25d242cdd3a7a13e0424868d39dcbf56d82d5be5ce02fa42749b41c427e73ee4f73b54528b2deb063582b28e564e9d61a6a2ee926078b81aa547e9bb7ff362bea7c517b2323af42a404fb39fbe54e12ca0c707e3a9f57113183a4a1a5d4a7c337817fdab6f67323b37570caf0f3ccca0abed13eca2626e594ce84f301d7eb36a6fdf811be7935d28b2addd73b2e2de213ac79d69f95687bddff6228c289848540a22e18855363539671f7e55a96d54e46e7f704b2a64560d9e949301dfb5d839da2b66fa08ae0d891a64ec8a8dc1e0a930d6ab327f8bd2290ffd962784438bbb19646ee844dfacd3edfaf496de6bdf012e83e9f7619f676ac1f18faaca98bd351a463a017a14c47151d711f91fdfcc7d7031868a46220ce478987233d7a207eb8b4f719ede0525a7c62321580977b1557e39a96240407e0995fe4ca34248301ec2516f709423e3739777a050ee4e0c0c81fdb70931ce75c05fcddc3db486d2aead02ad282f2a446942dfea0b73bc4fd6950e3cb5be6f9d50c2420dc94abce999d7c91547afc308fb0e03cf541f0a7d6a1dd3004f116e91a268b5bac2611219938d92b3a7b3acd83d6258bd44a70e962b2a8c51c3d3448fe9dc85bb15b5869e5c7ccdaaa6da551fd6a57bf3e297507f397515f3dbc0c38c80ff575d803dc2f0f8fdedb69f1a03b082d30656636ec93a97f60b551195f1d2e6679105fb8ea2fdca28a6950685a532047516f65f9c98967dd15e6742f55cc2883c86e77d213db56d50fd21e0b55fb79a1c8cff3f8a98b3ff28d82b703904252d86544980504ae15c3b54f0bd80ac056478929e13b4c3cbb48214169c70e6ee13fbd3d9f5dea33640b485efbc45cbba714b68261c575f4e314f52bc0c52ce425ef4b8484db72fe08c2e68a2e87b86414b80d5c1a4b6730fae6b520bab8070aba1a3e2f5c8efce9d8f9e87b6a5da01d4a542fff324ecfc415fdd1e0e5d7add46e6ca918204504513cf475c88d874f512d300eb1e6b8e0bbeedbdd0200648a74880611b518c578ac72904fb8febdc8300ff8d4e7e4afa22af8fb11289ffff5eb3e9e8d04810e562b62b13080adb2c3d10c94f70695606ca5ccf9fd7572f8a56199d9ddbac4f417d803bf1090d4a98fa9d25d95cc554793657f51fac4f6c1f9934720305158861af6122c41b10e883de8f907ef2ec895db9790b4c1a76f26f706a4ece5b9555bad524eb99946f1f271fd3b61489c34e83547d9a6c32b24014ea41873f09475edab82fc33c2edd628ec3348a68017c50337f2adac69b738ab0e9044bb21737b215a1d65e212d9fbadeca27afd1371582e59b93e1cb3a853e2769fbd2738a94df0a16ddf0f8a7025139e3a20a7c2392372f7a2510bd897780764f7fb51706cb63c2c9b806ce26406fbb0315e53f25dff4adc12d3c5fff3462bcd1a34166036c12302b71a57c49ae753ed8d72c0b86614e202218735870f7befbbde93d56dd3f744e95ef5517b4b5ee0f05a805154d5d2029f752a09bbb5e5256386b9a18888ed00893e1b8493c6ac072c4bc768b016f19f7a984f7e22e85274e7a7e4042c68de6ae9f8b808a0670aa2446b293eda0df6ca245725af095d671f025e14e4f43e837369dabc0b0d9cc3504870077acf8e5851e9c59b18f3214a9c59632af379ec32d9fe5f809686bc883f6a4b04faad232b70d20622a29a5e12d9070d1b4f17e1107a9a2fd70288dab14d418d6b2edfdf342f6fbcc472a7fcedf4168eb2205a7cd8d144df430a4981ae5499ce172928ec55fed42e73644eddde6516ccf7a7a9147a0bd9202c719e9db6f171068f5f69f6c46b8c0d325a0a93fc79f6ee81a5e52ecaf05cac8a0dce433de6e03fef703314287d442259ba2bfea0d98aa93e0e7d7b7f21f2db6597a02682b72e3e09dd710c83830ccd0030dcdbb644997871f95af9c5132fdc337cc13fd04efc2eed613cb2733dcd62232f19e078d8bb730efb2353ae4be3d2d6eff0fd1c0b6efce4bbe67cfe33fad56748a67ec2be1d1c974732c3f5f0b15cf8091f65c65196f1942f51add81874b14c1626ef854ed0c7666eec21e04805a3bea1f1b29ca36f0b3d2b18f0deaa645b01c24bd60a883342ff0a3172cb9e497c518449ccbce0dde5f8e1893a7cea7be2efc8a38a8dd890f8bae9f38a389c1f00de0b935e137513387073c15fcc8242f7bebc203037e89a3f7bbb4f256b45368867580c746243227ab206d33dd9658bd0540d766beea0ba1c273beee1c0bfd34748d0b0957548820afbb73a1197c191bdeef79f7021114d6fd9fb9ac8e4802e13fe60cb0a3fb5218d7d6595249bc67e6b48cd9b84a033f00dda6614b964d744a74afcffe4932f355b3f397e0392225e63d3cbfb23bf0af9ce4a94e1fab96caddd4da00e207cb0bbaee404239ec6b660ea7ded89f789375ee99892307055710f758a1032b1d9382d303357c0bcd1d7f2c5791eb8eaac32bce1452b00b6c2caa74ba0082ad3b351307b8b376b714d341e45c1b9331ffac7c7ef4ecce16c65185310221e5c5b5b5305c98174429b8d4440d2850af7cb41d4fe272ac1087e1fff76a513522e30854e9b5549291c2acc95543d7211aba08b13208a8ebe79d9cda47b79cec84c8519f039a011ac5ed181e9800da3b9970696a08a53a00bb0dc88fc2abeec7216d39c6165a06ce0c1e43e2a58e4f4982e55748c3bd8b584a89052b36c236ed12de2868d96489176ea817355057341e322f9116bc6949a729e9ed24d240dcf31569d5995be770a60639b46fbc13a08a4b383293f06cf911d027d78615a64ec5ca10fac2f61f814bb8cf9e1bf614f6c52be7a62173b90fc1d9ca161b948e484e1f947b46441ee82520a6a664c9df3f1e3bdace4cd0a5cdce681e119a0142f7b7edab3cbd78810756a83aae02a226e6757816a78b067c63e422ede5361727cc6c8a1fc1cff20cf758b88f3f2c63900f030c84a3cdc56f165db410acf26bcbbb088c1fe1d5d7ac27eeb8f1a3fefbc38c469d40901d58898eb4a051b9cb948f357a6767d145c0d50234fa76d803694048167bc38d5c3bca5a28d4fd644358115910cf5ba1a3d31adc3065d1d864cce81a889309777d4dd0cf146080215e874dc24bc097083cd43c79b49ce227daf2c7b22306e4dad1de50abc5723818e77dcbd94e05b2f6cc21af9b6523de36602e2b6cdea31a1499bab8c7a8c258d5f9cd0c218e4c3392b1af53a3cb9e162013777ee77ff40b00a6291c22442fcb65e04b2995fee2909465ccfb039ffa4aca3c65735bdb9f2ab1773d2cd8c80e4e06452bc640f898469725365b9fd313d620725a605b649090aac3dd5f17687b99af4afeaf98453e778bb7740d5e6035033904c36effdafc5c15184bef5f0b2c27a98bd652e7a8b8682cb9347a0679653b6d935986e1c6f7dbe89f4ae4b87311b08ef56bd63a0e4b5c2d681d7073743f7235e3e0b0bc19822101bc56204057723c448922443f1e3491b7448e1aaa8a3c2e292d8e669b8c699acb73581261aae3945a2d18665afdc6ea552abf02d7a61454327fd4c7ad7ffe33c01781bb9a3f2fed3ffd2fb74c140ce9d66bf45295766ef2e610d9fe472551434c9d6c263bda2cab8257d146aef5a16c3960874bcb6041e5a3865b1f3cffe8bd168c46f8d00a01114512bece5b6dc737f51778c57fd0df541f4595f2dd54393ee28d80d8b2e1262da93be1d90731c55befe4a7e0d62f54a013c1adcff00f94ee5878f4bfce68eea8e643aa1fd8e65eff5a314978e50af0d5d35dffd0f936a2e84ba508ec44abe49794092ad20bae365ffe6fba78e8d50e8311e2849f7de01dc02e33bd40de3ac9cb730265ef9005bbf3a73cc367f4db6dc0d8222abd76cc997c65229d7ce061bb4fc8d8d376b7048c26d2de29000671cf5a52fd82508ce37608ffb2295a17775fa1ab3d82c8748730444ce74c35e47560c88e006404a77eecde0546d158e9ecf33c2b78b916f5110fc98514ac368a334f21dce20e354b6eb68ed3530092090176ecc8e172b91af1cd8d1be72016c78c46c4db085b3aa4dc0b3cdbde4533008a4922d6d4661d37eb317156431395e83f28506a0c71f0cf55ba723b99f0de6afcb23af9429f9a62db2902451608cc8179a2598ee3d9f5f0bac6a7729aaadbec34d85f88826971dfa08e06e7bc074d624ec326fc1a7335f6e4e28c05dc315d4b9982e2cc913db39f50e35fcdf31a7e97229c760302a6a644e1b9cf96fc506cba7945ae58387165f1c919a0112f63e6e0fed68056afb01d7a731bc4e7ce4ba933d72de637b2e4055f132fa53969b9eb176598af02e5fb7702a0ed292d2d451467a840701731f3fd3a5d8bba662b8f669b6d3e1cda2e7ee45363fac6709ab5da4e56f04663a7c3a5f631554c7641d216ba8f31525722cb13f4e0e2b71afd9ec4edb527626dc3f7c217ca8ac7433fb97617718621d1d16c48b0e98470ea102dcd57b28c483e19ac891a5a3d5bf67cb3c0c75a53854c2389aadbb4d9797223d4bc167e8102ee471ead2ced6878b2a11a3d94ba58461f2b9488678b4df97fe4b60f2d4bc52e4c79bb18bcbe1fb6fc28696653f9db9d129e7dce5c4d7d3fd85c85e10caa533321719a0e9e11b9551e8f79ba56a55e976d43d40ed6f957b9fb6fda18bf1119c2550917d9f9feb7972854673d9d84480ea96cb4f779be0f9288c379bcc911abf47f9a59c32b53d2a9081f818a64f70d326cfd989cb72543385ee59e5c069f83e5cb647541b2786d3dca82d63da51993cd97605910398672093ab6268af64fa833c8f97a0ec3517dd54881ff0a5a7819b94fc3803d4d9674fc4027c455164abaa3ee65211d7753bd2dab12580c979760ace7691d4a95659407e3077209e86e3c6d98f9ee255596b99f96a33d2cd86d360f65844bbca652522dff62130483b3d7818d48b0914ab9b7fd67e4765e26fbaf31b65aad3514f29822ab0ff5472a98daa21564a23a714130d8426692f96dd050db256105dcc45bf1390fbe2c5fa7404f84a4dbcfff2e998b9e0ab7f7e12963088e2638ae36844da458b66923c992f703624db5b6508e4a6ef4019bd358fd6b47e2b1b71c1b2bc1d54bf089f23cd051608a6708e8f00c1280427c85126ff174ce753fd471017c0335f08846691077449059998bfef242c26d5eb14927dfe69c0fa2ea8a26237f7af6217915153141b5fbaf3ecd44c164f43f528d84ad6a38ac1f8ca733f730b6156bde1ff3e846fc895f77e037d86ca1dc2f6800840d22bb75828cc0b4c155f96b2b71bd79a6abca1541c9cbc128872e0e451182be784a6f20e9400f011e4da7f05113f585763069d67dc9ee64cd098370363b8cce7c611610eb690712a4b1ec128d9057119068a6515578e71d689b70e82c704851765db795a5b84a20bcaf3bfb2f8b390ae4bbbddaaddd0e7eba5960c0d419a849b4cd1a172dbe226dd6fb9622109682b7c692b76d3f0266a5e688d3cd0beb471fac6c25b38f5133ffc6601a99cba25e16495e3148e7661437cea6eb95a2d8f64e6d354c9f59e4ac9ec30b4fd747ab0bb40b158c9aa08fd3cc860b2cdc0c1d8b296ac82954888685b3bc7411c9115c700a3aca6f7bd27ab38f81981fa081dff0cdb837639f6b50715c3668d33edc13c517f7c2179064585ea5c050045944ce1e416d7adf845561718af8ecc00d7d5048ebf81d0c28e6514be3a558af661b20968639496466ca847f1f898cae796cbbb0188fbaeb3ef574c69a80f05a375c15d0dc9ce82a9c3f75b88fa58ed3ba30c237f5862e86940b73068f40ac68555c88af59314e178024a077e02067ea5d8171eb813548b41ffc691db3513ace173f0860793b5c1ff604e70a1f2c80e0b55fb340716bee29afdc10694bffe3b670a48e77f1aa9cc8ba3fb592fd371b5ac2887b1637de0d1529dc5f0a01a674143abe956dc269afc2948434d9acb5e66da022033cdfbe20dde9788b6134a9f0e2ff6b23be0633750c0b2813f2257621d2d0a1cc78220473ec199c1b4f2c741707d1e19674ffa92c22b60048176fc55077d5bad0461327a49c04f5491ec644d6c50753a4774ffe6f662d587d98f542e1935dad8eac311d27f9366441f7760b38ee2128d23208f4423b7eba445a8d1ff3e38f45462110ca6cc1ecc2d48866d384f2db0ce97bfb84c65c07f9f9dce0982f34b9c972728efd13692ac286d77d1541516144b86cc892d2198d6226010562ffb6e7a573da49c8f443d5d06773935d202b610021f13c6d05e3c7c91d53ad067e1ddf029ec698c934ca0c0a71c168c494a9e0c1cd8bfab88daa73b837af8767745e550f05f6275b3411e993030edcdf1af29fe0a2729c4fb9467fe4bb94cb1f0fdf817c2a31e7ae49025844bb0dbf0b51ba392995e0cdafd357b2586a55548eba20766e48c8345ea450a424155d52255c001d4f0958544e1bb7967dcc79b08ccf78b45764567cb3bddd24b5372d9abd1216570e96d14db68ec06cdd712644cbc44ea8e2071011c1a3bcc3f6effc34ccb072c190e87ce3489e7d5ef288b6ead4e82351b91b040ca4ecd5ae4638462f49adaa9660b320f92bdf12f3eee7120fe16838b0bf7696bffda41e833cf7dad1c21cfcd48af7e7bc4096cb3fd6b553f980362dac4cc88326335c58ad9d9634c2e6b6b10fe063ab9fc022e9d6ddc203397588bb2d18329c340e980d0d714da77602f50f7377813a6f7af9ba36ac25763d533c02d5ac739c76c416c1bb036165a0c4a9f70ead158f04819b045012ce08ad23420b6f7039c15dcaa6e8d4eb24b6699310247c5df2b272e6a296b571e15470895283873fea30633d7fd876f7b5b4ec4c5d23e877b4a2aca87600ba392842c4b49608a14c0381b0dad344e3e81c499996ba48136ea34e300855e4e4c169e84300d034dcdc18f299dc2dade70fdf97d465d9462c364b47d90c312a58727e4ff3c397c63b52fa7158133c002d0518f116ec997d37e7be7a4da8400bae77e8ba684be8ce5f5a77c57f3c726e5ff7f83e79c5d7d2132e72b9ebc2655b95f2c3a1fd5802573211e881e4a97b1e725b7c5e2c15fade5862b0054dd6331deb9d7018dab8cb9330af0efb8383da9a461ab239f52b1e037818ef54e169985c326bb8e819f2463729cbbe96e507373f191fff2e9567cebab7621b9fbd5fedfed7707afd3d36f61a6282b8e756d0b92fc848457f34572ed591a2b1c3f1147b7af988606918205351cc3d92909ad43edaa6c66f397dc940d8089cf2965512b459f2a973014d5ddb923e82165687b86c09b8d7fef7f2f36e616e771f17fb57f3cc76f79caf741186219b132271df6d9e5f6ab6f2e66c171bee1ce3a955161177d99ededb9ef1035e3729e5c8394543a939ee807a2b6ce7dd3d0b376aabc14cfd30445de53622910f2a3ad502c49069d1971fec8b31ac226594c447f378b78527038982c3f2b3b133de0865dee91c4babc964fd371fb3a8de13a1a876cca95506e455339e7451013ac0e6488f926139cae134eb4aa5a338b77b22187b77d17850713dea73988ae84379a6b0b84647e39e49e22c2730f4037a4c18bfa40e6c891270dff4d39ffb3d8074b1f26c970a06b2677265801b54509f4c5f139fce0218ab17f156fe8b23741a1d2ac2bca5afd9b4a3f0ae3fb667d26871360f25b6f558f02187066ee1d6ac4d1f6eac3fc881c4cf4ca39650e7c20c14bbb4aa1b3d5d4bd6a6ed54e7b575579f7bd68f7a8a7992b8b95fb5d04dd00dbea757d4a5959d3c94c7c6a2db1838a396a01a642e535b7677d59d6c0ede9a234de8229e874790d06972319356a89b637e89f30522f86913bbbc9cd9fe09f814f7a27255f391d6ed38955ebedba03ecdc3350894dbfca27164e04c7428d335803904b752cfa4457c456ef1411cd646f643cc41c77b122bf6ebfe8d12988989024d165824ac102da9d5cd5e9c4aacc47b575fd80bcf659105c63d5bdeaa41585e255307791466f91631d72cd477843729e1c71e00d7ff9030c827018d407156ee2fd4da1e62a1e2f7554a5a51094024b745173a22634794b807452353d6b219c33dae8809fb6ced7686dc520e08a7aa8dd616b52cf5a29c1b8f11898f38341426ddf7ca35b5f525999d09eb9c7f1b3fd71bd2d6d5dedd48f6f70f1f3194d4106a9a57741cde53d7bf198a40ff1eeeed1117285853acef8bc5e32fbc158e8d8cc13992164d3d810110593df3dcdf9af27aad86f187391f5ac9164879181a1430cc9a05b05b0550582fc140eb1c20f633908438cf62281df2050c9f2c5fc66fdf6638a4e666939cc14d3820bb3cca90d9ae6d93c2f80d26189ec55bf3c18208e4badfc6da92a1f53a23f24474eb6f2a51d0b944ec67ca25cd0b51f2511a247ea4eb5d42941068fef65f8aa9aae130347b66a5df63506c394b4458805d2920f39af7cfb2da69ded6abb5e12ff6331f36f3d20a5cf93d68bc8c372444e265c04fc76cfeda4c725beb50d12abcaca52fb4581536eb730ef6ef42ddfbde1fe90de329b477a86ca587d8b680d289f590577b5aeecc98d8a6cab18ebd0378d38a4fb2330ec418895d4d7c35fc37d40e0b99345675330b9530188f3d3fcb398017f62db163c351c8820d61a37f1bcf87ad99da8d45c0fc81229c16405f580e731e70c5d4471720eb623f8c663a924b5ff06e097a565d236c9aff98fd955742017faef05b8a49d49b72230f05ec07a4c3a0269d6b108b90a031839afeafabcf166655303029af5631e35bce97d1591c9f773864fbeaf740e0b94ef0a91c2bcf619ae05a4942962ebea01be562fe74a251d4926058c1c7c38dd45e20b70735f79711e0acf05c549c3d9e10a3e886c955e99fea7e445182b96227f9b656da07f7331d6545adc1d5e066a51d971082921442f09166882f8954f079b1fb538ffede817dca3a362e0192ad72a63fbb5200691aebf5c8a94a962e00bbf73b11d5e525b728707ee80b64092db8fb254d7762d34131e8ea7d87d10dd632b7d00f4d2e21db5fd1709b749725b6ab4f7c03e846d459c471c8b348d36655b04c0e83290f581643c5869e2a1bdbb334f7f4ffef177685ee889ccad7cf7334a2aae8c96fc66c20cb08eff54bf83d38a8e2fe4643a18e74da93e5be67e1e8dde4cfd189a2e22114ffb2766cb455cfa3020b564873e0eeb1307ac059fb4cd42d0734a1dd15e302b299f407044fbe30a45e6ab1789f9b981102bc059efb42c4666c810c4a6ddecf7d01cefd4cae709e8c261d5a62442bae07b95c482feb065e4bcd59669d94dbdd326462d2b35f19e994e75bb1c64942032c2ca4d9bf2ebcf2c3e4cc43f965c0b227fb3f146194577bb7cd28b6501b5010fc4a803597b3b7065c5d435d523e7423c7d3eaca286b65ca6e36eb640304d88d21321d8917cf5dfcae98fda292d0fcdc6be00e5fff4df16334680baf9a1c57799f4b5e2cc425c46753b16f4fd825f47200ef8f9ecbb322c0c166a10b039d8db453a3aa5e8d9e7200b2a8906624ad3f228d188d79d08b7f71328f6ad56d2bf9fb582000d1e3c7b2b49876c67108c3a9232915ba8e8eb3519ef29fe457a8e91349b71c1f1d61f12d11e42426bdc1e8fecfcf4e31ff3ed0482d23ba03122517494737938e0033a6d4935ab5bf7c919d1efb1258f153cdc4430f3d41b8f422fdd5f6f5473465d2d43f081bf50543c4a2f758db6255292377e2604106ff87c70370a4acbe22f95d5ff80949bbc7d0f7ac74a7188b2f931746a90e68a581bbd605cd722b5662be532ba42b67ca86932daa3402919d9bf708cccf1d9d80fef10fbbc6d63e35a7446afd9a4a3d7e7c637f65ba5e7d76d9b7a3a6e13409f5c590772a180f49595a0afebd62a1581943141066c7d1d4eacedec506f4052b68e688676cba532b46cac22230b268818ab25284a97b50d7cd59e68df390b0b09d57e89979a923fc9464f93c9c6ed9417af294389b6027981e99304070e92c85186fed5f7bbf4f9cb077cd5fd39d78e1ae1f704d11e8fb20bed1c8787d3c51cceeae0d70c983eefed64b790ed467011029ede16dfd56fe4bd0f5d90ec35721c3b14bd519da8cff5ed38bbddb76927459a1d90ef755d564359036685594beb7356174a31b4fd7264a84f5aac48af5ac24fe1924246049cbbd20253ca0aac9b34698d5c8186c44505b68f3557adb7fa0ec1c2a6c6e89e7591e1e92e79a41cc1ad56c4032abe8723b220842c5f18ecc9a1e5b35b38106a23a83cc859b94c45ef206d988c150a696dc4c5e6dfef108c300d4c262e523dab7b17979c67859311ab31be9d34311304b5d12dccc31ded747267d5ae80828a08ea5b04bd0377bdbecd36c92306ac405be615222b01ec0ef52c96a1cd9ad6a505c24c03149f5ebcd36a7e8e243566b262381cfed309721c2791b325cd41b1aaab34103669df388462dc9c9539b2f7ec35b3f7b29bfaf768d7f73b1db9fe190d9d7d0f81f6db92fd4c0f7f73f37597f6f72678bebedac6c4094838245193fe3ef5d1cc9076b14534b86edc642dc95d57efeb1bbca1814fc53c5aea701d4f6473bb9e61385574fcdfc94b87c9e8a1252f464b36901b2b24fcf9a937e298cc8fd127f605fe417b4ac0472cb4770b7b2c154ce31fce74ae4c5560840956ea6cf56b35e6f246d80a4ab34c19ac2709dd6d01c22db44e9c443c922848672505863c8a4715eebacd1655bedb6708cc76c9a7063a551de8672f64c74e0fde167cee259ea925b32b897fb1e128761156ee1c8d62d35418d48da11951f4b33c0c3c306464a82ac0a48757651c25e29e769f7fb407c5c468182ce2af82d30628ec85ae4e74102d9c66c8ea932a2dcf805df87970753bbe47e4bb2e275a9b19a4c19c8d0b337d6ed1b23bd5a1ec6435fa0357bf4b22445bb06bdbc94a7cdc914b078dbb32be1246f3a98587c2f396689fc53a1d4523c75de81e664c23a78db262be4854f6dda03e1d9587f838c34cecc60012dbcf409d13caf136082bf518e03f38d780987fc54e1308fb48201a5f5b25de00e512a59f0fe685d6ca3d8b532b44e08bf17f77625657aa1f77397d8096015b3dab1b63192857fdd03eb69ec18dd23350a984aacb303641f5b4d775a16260fe70c4cd39c382c5499f50a83f5d9611773c9420cd7f83ddad399a753c2152aceb7b78cb8f305e6310a2cddd8eef01ebfbe9bfc74dade288ea8a322e1f1c1859192da1f1bae4ffbd94e868157ff67b9932eb5044359a977becf45355582963739e0a88c42e13e474a3d9f9960315b02976d735d0ed0e3e6a77c7b5337c9dba40753336723b310a7d6ba1090dcac1ee47978d5f39834452c5dbc68458e1ad59a2fc88498764b80a4082e1749c747683987b1f5d29c42a3f7b43db0f914d7d870d897aca6ac2e81b21883cac62b4aaa469ad03d1998383a3f3b68ee7246356eab32e68a7d1991f08eb66d01470e7537ab974218fcf9cc4a8e22b0a580648082cf9236cb6175b230bb272d9da3914ff9f0b6817fd5a688f356e724d2aa4a31b79f2794338cafdf60dd6c18e9fa444e6b0b643913d4a0e5a517cb2e1ba0492c6bc134673533919bbc9c0d750d7e903ba55597aa99ee1af4cb4d3bb8bdf736201991021b20174810f3f3dd59d51975fcd988b822a295cd501c397d954ba702f9a7ee778f444c369c9ab93970390ca2bbeea654965cf21c804725a6b2d5a38b90e946d7567434ff214fcb41734332de8b5b4ca0a17dec79c56c71cce1f15e2b8eb7b405eb5ceb8b7b9090bb16c4cfb7bbacb4ffb9ec53851352dc6e9f2019dc68f34760a894beff197ed9e1e31a40bed9af9fac5b6a237a9f5156810012995a70cf9984a2b91e1f87e8e94fb0491b6cc5caf6e32efeb2a45d95cbad3f69cf7b61184bcf3eb622b00d9172bc96aa032b8eeef2474e9aaf16490b2f3e6d794a63982616a50cb33525e1b78434463eb404f203ec7af5e8ee7dc86a2aac3a522162ef61da1d2e1d87dad2ce3d5738dfee1586bb8ffe826f26fb39753a35de98b7d8adb1fa95ace055ed128c420609af40f138fdb5c54b0276324a6b591dd43ec5519f45067381280e5db02ba7ea8645516d43394ceaff99fd123c03b5dfd9b9a839f3bd6d18251e62363b742b8abdf1e38fcd0d2cf3c60b124119b877fef49d850a2a47927847eb9285db6c35f6b8ca5286e58a94b25802a7f445f9df6991cfbcfacfbe90c53f0dfcbb21c9d3980f2a71f889550fcfc5bead3f02548348c6fe28bc6365c431594c7b33815e56e05b2bac906ad2caee400d217814e0388014d4913127791473aa11730aab7d15228331727e4ada7f4e0a572e684bfe46fbe5f7a421f085e26a03004551368c4930dab15888fa8c8dc50db723852b1e3be0ea9f9f6cc854d6920bfc59203f6c1ab013c759721cfbbb8f15d2cec3b16619f7198867c42ae9c89cc74f8ef835e2a19af369ae1381e72d66f6fd09339003c1f34a13e0d87c0130f9502cf31b2dac2939b0bf6693826cdb29187f5498799984d1185366bfbf004f76bc5189b1a9c9d693fa5d09bfae51d43ee87a2afe9296e7491de07fe1b053478fb391de6e81e39f5217ace348075a25946072e98e922919276d2424a047e1b2161787b9dce10559607186850fd5307a74a20d17d59e4d2fe6d245676ed20904686caf2eedf2a2f00a1342e0c696c77e8fdc054c14568cba960995b31fbf82535c938157adff9dd7d8c0f3c1d025c167903b317cd6d6767459929058da21c39a2129e39aee607039a610f70926b8c1ea189cf1aa6248d588ba70da31ef6a751081cb2eded72670f2ea5bfdd3e86d38cea7e5f18014fa6d207748dbabd3e9b62d7b5adff689b3b4122978d4f7b850c1addcc4e5154c5f7ba2d3d4c25b56124811c006b98c5ba075ec8a896c0f2b983d427e34f941360f10098cb48856d9b150f329f4c92d81c146fd8fc231a98bfd80f548158219f4acfa10abeac49ae7d8495b828e780c08272abfcdfac1d57b682f1baa36875779d9edd634f477e3d6b17f8b4f0760ecbc4dfe22be3c057b13b167d27bce38dd07ed2d1c52729f4dd408a359e738a06e51da261761601fc026c671d2699cd304637abb2a341abf98fa989078a1b2ced9d086e188a31d048b182158132309ecba42742a7802758584e8175c9b4187dd5f64d1eba2add347d8e6b1cab6acbb0d87ade72b93782f923011242fe5bb4c46fb61b116434ff458df536d5551452e399fb95f8df07c13d6ba535a80473615d69b3ad4fe1eb953c7e2273f148e55b93f64b540016956514f1bed15561728ac86188fa47e379b897ccb83a05725cf43eba5b32c775d012ff96cce3eb6b45035cd0d3960129c7a0b2bb7ef3aab8bb2607fa5977b1095a122120dc4d6ca5f598a16f5d41d4141def6b470f80ee79fcea700532fdf3d6eeae7ee58d911b465eb61bc17a942011f0d49e1e1a238cdf0d54922f0ede775dae049e8c73726858aa146465755e618f5f870896ff664774751261890528ca5f0c064e351aa67dbc1e155271358e18ba52d104d3ce62d2118f75350879b912a9b2038fb0525e588e8d4a11749689efb86a7f8eedf6ecdc96fd001937dfbc5160255202c89d0a913e0f49721fe327d135d1c9c46e628fcd690e140b33415afd0bc7ef982f971e0550ab928aef84df498353313f4173e6fbda87294a7f5559bdaad202855b13d3242f2ce4b2a1108a16ed8d4e4bbef9f493f48b0bd73d05582244c705502b0166d01cb6ac07884695a61133c0f1544c203101bb5b4bdf62e6f561ba7743a79e1b84bf4a9ec5fad15695c37a7fa3903dadb31e0fd943643d7ed69f828d9ba2315a3642f0e62f2793202a70fb24aeab86547472da78a3112cc9285cd4f47a84f280f22236b0147980af031576a2a23f4965ba17813f5a091fdad0d747ee2862cf536af84ba5899d2aab87e58d9886517f2a68abdd8dc516382bd505956830e103f1f92f6e3b052ce124463806f0551f582f30ab12887c1d461af5586da0039fe4e8556dd7a898be257c932c653e2e0382236112d363cfe9f3ad8892b8b5732f4d5001d9cc53da25a0354959848541538e87d4b542e4cd4e5f98f0f77d2f1afb27d1c2e190b4984ba2f347d99ca4b1dd7cadc60562f235298cdfba528dad79f32aba8ff3b3e0111972f1f7dbd78915c753239c529d1665437a09a4433c54f2121eb2330849ce26d9acd9f9ff8315eab256b266cd8040b42920a739c7c18a49fdb2639752ef367c0d3dbad2c27c05b7fcd09f8e5986bec435c219a397e3f107f0fe10e9e53d616178713f7b407f7570919389029fdab2f6999e6bca404b50ba25760aeeecbb4fab3a0a6d902700aac11ccc0cfb1ac2bba4010d6a8a841a4ab76e0ca58caa4141e55821deb441ab31a1e58f295be18a8a155a76f97feb856ccea8ddf9219d204dfc1d4b52781374b7ed7efa9990ad72e0d7eafebf6bda1a4e3e83401bddec65ed8c3609381eab01a6e009a5bf24c265f7b531f70c9b8ebcf8de016fea6a30cfef389f35db64bf57efa7384c2a389171830fb6a64dae4e8e47167da71dda87ee883c9ec0176a2e4fa56bd45158135376c77815e76a6acb62dd63b408d1a223750b561808c6c4c538b87f8c8cc1a65d182428f9f6fc26ff778a52ee9fb0aecb699b780011ec28d40d269dac9a2e900b852dbbc7602597</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">您好, 这里需要密码.</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>FFmpeg</category>
      </categories>
      <tags>
        <tag>FFmpeg</tag>
      </tags>
  </entry>
  <entry>
    <title>FFmpeg的H.264解码器源代码简单分析</title>
    <url>/2019/05/28/FFmpeg/FFmpeg%E7%9A%84H.264%E8%A7%A3%E7%A0%81%E5%99%A8%E6%BA%90%E4%BB%A3%E7%A0%81%E7%AE%80%E5%8D%95%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<blockquote>
<p>文章参考汇总至<a href="https://blog.csdn.net/leixiaohua1020/article/details/45536607">雷神笔记</a></p>
</blockquote>
<h1 id="编码-x264"><a href="#编码-x264" class="headerlink" title="编码 - x264"></a>编码 - x264</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>最近正在研究H.264和HEVC的编码方式，因此分析了一下最常见的H.264编码器——x264的源代码。本文简单梳理一下它的结构。X264的源代码量比较大而且涉及到很多的算法，目前还有很多不懂的地方，因此也不能保证分析的完全正确。目前打算先把已经理解的部分整理出来以作备忘。</p>
<h3 id="函数调用关系图"><a href="#函数调用关系图" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><span id="more"></span>

<p><img data-src="/images/imageFFmpeg/Thor/X264%E7%9A%84%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB%E5%9B%BE.png" alt="X264的函数调用关系图"></p>
<p>下面解释一下图中关键标记的含义。</p>
<h4 id="函数背景色"><a href="#函数背景色" class="headerlink" title="函数背景色"></a>函数背景色</h4><p>函数在图中以方框的形式表现出来。不同的背景色标志了该函数不同的作用：</p>
<ul>
<li><p><strong>白色背景的函数</strong>：不加区分的普通内部函数。</p>
</li>
<li><p><strong>浅红背景的函数</strong>：libx264类库的接口函数（API）。</p>
</li>
<li><p><strong>粉红色背景函数</strong>：滤波函数（Filter）。用于环路滤波，半像素插值，SSIM&#x2F;PSNR的计算。</p>
</li>
<li><p><strong>黄色背景函数</strong>：分析函数（Analysis）。用于帧内预测模式的判断，或者帧间预测模式的判断。</p>
</li>
<li><p><strong>绿色背景的函数</strong>：宏块编码函数（Encode）。通过对残差的DCT变换、量化等方式对宏块进行编码。</p>
</li>
<li><p><strong>紫色背景的函数</strong>：熵编码函数（Entropy Coding）。对宏块编码后的数据进行CABAC或者CAVLC熵编码。</p>
</li>
<li><p><strong>蓝色背景函数</strong>：汇编函数（Assembly）。做过汇编优化的函数。图中主要画出了这些函数的C语言版本，此外这些函数还包含MMX版本、SSE版本、NEON版本等。</p>
</li>
<li><p><strong>浅蓝色背景函数</strong>：码率控制函数（Rate Control）。对码率进行控制的函数。具体的方法包括了ABR、CBR、CRF等。</p>
</li>
</ul>
<h4 id="区域"><a href="#区域" class="headerlink" title="区域"></a>区域</h4><p>整个关系图可以分为以下几个区域：</p>
<ul>
<li><strong>最左边区域</strong>——x264命令行程序函数区域。</li>
<li><strong>左边中间区域</strong>——libx264内部函数区域。</li>
<li><strong>右上方粉红色区域</strong>——滤波模块。其中包括了环路滤波，半像素插值，SSIM&#x2F;PSNR计算。</li>
<li><strong>右上方黄色区域</strong>——分析模块。其中包含了帧内预测模式分析以及帧间运动估计等。</li>
<li><strong>右中间绿色区域</strong>——宏块编码模块。其中包含了针对编码帧的DCT变换，量化，Hadamard变换等；以及针对重建帧的DCT反变换，反量化，Hadamard反变换等。</li>
<li><strong>右下方紫色区域</strong>——熵编码模块。其中包含了CABAC或者CAVLC熵编码。</li>
</ul>
<h4 id="箭头线"><a href="#箭头线" class="headerlink" title="箭头线"></a>箭头线</h4><p>箭头线标志了函数的调用关系：</p>
<ul>
<li><strong>黑色箭头线</strong>：不加区别的调用关系。</li>
<li><strong>粉红色的箭头线</strong>：滤波函数（Filter）之间的调用关系。</li>
<li><strong>黄色箭头线</strong>：分析函数（Analysis）之间的调用关系。</li>
<li><strong>绿色箭头线</strong>：宏块编码函数（Encode）之间的调用关系。</li>
<li><strong>紫色箭头线</strong>：熵编码函数（Entropy Coding）之间的调用关系。</li>
</ul>
<h4 id="函数所在的文件"><a href="#函数所在的文件" class="headerlink" title="函数所在的文件"></a>函数所在的文件</h4><p>每个函数标识了它所在的文件路径。</p>
<h3 id="几个关键的部分"><a href="#几个关键的部分" class="headerlink" title="几个关键的部分"></a>几个关键的部分</h3><p>下文简单记录图中几个关键的部分。</p>
<h4 id="x264命令行程序"><a href="#x264命令行程序" class="headerlink" title="x264命令行程序"></a>x264命令行程序</h4><p>x264命令行程序指的是x264项目提供的控制台程序。通过这个程序可以调用libx264编码YUV为H.264码流。该程序的入口函数为 <code>main()</code>。<code>main()</code> 函数首先调用 <code>parse()</code> 解析输入的参数，然后调用 <code>encode()</code> 编码YUV数据。</p>
<p><font style="color:red;"><strong>parse()</strong></font>首先调用 <code>x264_param_default()</code> 为保存参数的 <code>x264_param_t</code> 结构体赋默认值；然后在一个大循环中通过 <code>getopt_long()</code> 解析通过命令行传递来的存储在 <code>argv[]</code> 中的参数，并作相应的设置工作；最后调用 <code>select_input()</code> 和 <code>select_output()</code> 完成输入文件格式（yuv，y4m等）和输出文件格式（裸流，mp4，mkv，FLV等）的设置。</p>
<p><font style="color:red;"><strong>encode()</strong></font>首先调用 <code>x264_encoder_open()</code> 打开编码器；接着在一个循环中反复调用 <code>encode_frame()</code> 一帧一帧地进行编码；最后在编码完成后调用 <code>x264_encoder_close()</code> 关闭编码器。</p>
<p><font style="color:red;"><strong>encode_frame()</strong></font>则调用 <code>x264_encoder_encode()</code> 将存储YUV数据的 <code>x264_picture_t</code> 编码为存储H.264数据的 <code>x264_nal_t</code>。</p>
<h4 id="libx264类库的接口"><a href="#libx264类库的接口" class="headerlink" title="libx264类库的接口"></a><font style="color:#ff6600;">libx264类库的接口</font></h4><p>在一个x264编码流程中，至少需要调用如下API函数（参考文章《<a href="http://blog.csdn.net/leixiaohua1020/article/details/42078645">最简单的视频编码器：基于libx264（编码YUV为H.264）</a>》）：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_param_default() 	<span class="comment">// 设置参数集结构体x264_param_t的缺省值。</span></span><br><span class="line">x264_picture_alloc() 	<span class="comment">// 为图像结构体x264_picture_t分配内存。</span></span><br><span class="line">x264_encoder_open() 	<span class="comment">// 打开编码器。</span></span><br><span class="line">x264_encoder_encode()	<span class="comment">// 编码一帧图像。</span></span><br><span class="line">x264_encoder_close()	<span class="comment">// 关闭编码器。</span></span><br><span class="line">x264_picture_clean()	<span class="comment">// 释放x264_picture_alloc()申请的资源。</span></span><br></pre></td></tr></table></figure>

<h4 id="libx264主干函数"><a href="#libx264主干函数" class="headerlink" title="libx264主干函数"></a>libx264主干函数</h4><p>libx264主干函数指的是编码API之后，<code>x264_slice_write()</code> 之前的函数。这一部分函数较多，暂时不详细分析，仅仅举几个例子列一下它们的功能。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_encoder_open() 		<span class="comment">// 调用了下面的函数：</span></span><br><span class="line">x264_validate_parameters()	<span class="comment">// 检查输入参数（例如输入图像的宽高是否为正数）。</span></span><br><span class="line">x264_predict_16x16_init()	<span class="comment">// 初始化Intra16x16帧内预测汇编函数。</span></span><br><span class="line">x264_predict_4x4_init()		<span class="comment">// 初始化Intra4x4帧内预测汇编函数。</span></span><br><span class="line">x264_pixel_init()			<span class="comment">// 初始化像素值计算相关的汇编函数（包括SAD、SATD、SSD等）。</span></span><br><span class="line">x264_dct_init()				<span class="comment">// 初始化DCT变换和DCT反变换相关的汇编函数。</span></span><br><span class="line">x264_mc_init() 				<span class="comment">// 初始化运动补偿相关的汇编函数。</span></span><br><span class="line">x264_quant_init()			<span class="comment">// 初始化量化和反量化相关的汇编函数。</span></span><br><span class="line">x264_deblock_init()			<span class="comment">// 初始化去块效应滤波器相关的汇编函数。</span></span><br><span class="line">x264_lookahead_init()		<span class="comment">// 初始化Lookahead相关的变量。</span></span><br><span class="line">x264_ratecontrol_new()		<span class="comment">// 初始化码率控制模块。</span></span><br></pre></td></tr></table></figure>

<p><code>x264_encoder_headers()</code> 调用了下面的函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_sps_write()			<span class="comment">// 输出SPS</span></span><br><span class="line">x264_pps_write()			<span class="comment">// 输出PPS</span></span><br><span class="line">x264_sei_version_write()	<span class="comment">// 输出SEI</span></span><br></pre></td></tr></table></figure>

<p>x264_encoder_encode()调用了下面的函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_frame_pop_unused()	<span class="comment">// 获取1个x264_frame_t类型结构体fenc。如果frames.unused[]队列不为空，就调用x264_frame_pop()从unused[]队列取1个现成的；否则就调用x264_frame_new()创建一个新的。</span></span><br><span class="line">x264_frame_copy_picture()	<span class="comment">// 将输入的图像数据拷贝至fenc。</span></span><br><span class="line">x264_lookahead_put_frame()	<span class="comment">// 将fenc放入lookahead.next.list[]队列，等待确定帧类型。</span></span><br><span class="line">x264_lookahead_get_frames()	<span class="comment">// 通过lookahead分析帧类型。该函数调用了x264_slicetype_decide()，x264_slicetype_analyse()和x264_slicetype_frame_cost()等函数。经过一些列分析之后，最终确定了帧类型信息，并且将帧放入frames.current[]队列。</span></span><br><span class="line">x264_frame_shift()	<span class="comment">// 从frames.current[]队列取出一帧用于编码。</span></span><br><span class="line">x264_reference_update() <span class="comment">// 更新参考帧列表。</span></span><br><span class="line">x264_reference_reset() <span class="comment">// 如果为IDR帧，调用该函数清空参考帧列表。</span></span><br><span class="line">x264_reference_hierarchy_reset() <span class="comment">// 如果是I（非IDR帧）、P帧、B帧（可做为参考帧），调用该函数（还没研究）。</span></span><br><span class="line">x264_reference_build_list() <span class="comment">// 创建参考帧列表list0和list1。</span></span><br><span class="line">x264_ratecontrol_start() <span class="comment">// 开启码率控制。</span></span><br><span class="line">x264_slice_init() <span class="comment">// 创建 Slice Header。</span></span><br><span class="line">x264_slices_write() <span class="comment">// 编码数据（最关键的步骤）。其中调用了x264_slice_write()完成了编码的工作（注意“x264_slices_write()”和“x264_slice_write()”名字差了一个“s”）。</span></span><br><span class="line">x264_encoder_frame_end() <span class="comment">// 编码结束后做一些后续处理，例如释放一些中间变量以及打印输出一些统计信息。其中调用了x264_frame_push_unused()将fenc重新放回frames.unused[]队列，并且调用x264_ratecontrol_end()关闭码率控制。</span></span><br></pre></td></tr></table></figure>

<h4 id="x264-slice-write"><a href="#x264-slice-write" class="headerlink" title="x264_slice_write()"></a>x264_slice_write()</h4><p><code>x264_slice_write()</code> 用于编码 Slice。该函数中包含了一个很长的 <code>for()</code> 循环。该循环每执行一遍编码一个宏块。<code>x264_slice_write()</code> 中以下几个函数比较重要：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_nal_start() 	<span class="comment">// 开始写一个NALU。</span></span><br><span class="line">x264_macroblock_thread_init() <span class="comment">// 初始化存储宏块的重建数据缓存fdec_buf[]和编码数据缓存fenc_buf[]。</span></span><br><span class="line">x264_slice_header_write() 	<span class="comment">// 输出 Slice Header。</span></span><br><span class="line">x264_fdec_filter_row() 		<span class="comment">// 滤波模块。该模块包含了环路滤波，半像素插值，SSIM/PSNR的计算。</span></span><br><span class="line">x264_macroblock_cache_load() 	<span class="comment">// 将要编码的宏块的周围的宏块的信息读进来。</span></span><br><span class="line">x264_macroblock_analyse()		<span class="comment">// 分析模块。该模块包含了帧内预测模式分析以及帧间运动估计等。</span></span><br><span class="line">x264_macroblock_encode() <span class="comment">// 宏块编码模块。该模块通过对残差的DCT变换、量化等方式对宏块进行编码。</span></span><br><span class="line">x264_macroblock_write_cabac() <span class="comment">// CABAC熵编码模块。</span></span><br><span class="line">x264_macroblock_write_cavlc() <span class="comment">// CAVLC熵编码模块。</span></span><br><span class="line">x264_macroblock_cache_save() <span class="comment">// 保存当前宏块的信息。</span></span><br><span class="line">x264_ratecontrol_mb() <span class="comment">// 码率控制。</span></span><br><span class="line">x264_nal_end() <span class="comment">// 结束写一个NALU。</span></span><br></pre></td></tr></table></figure>

<h4 id="滤波模块"><a href="#滤波模块" class="headerlink" title="滤波模块"></a><font style="color:#ffcccc;">滤波模块</font></h4><p>滤波模块对应的函数是 <code>x264_fdec_filter_row()</code>。该函数完成了环路滤波，半像素插值，<code>SSIM/PSNR</code> 的计算的功能。该函数调用了以下及个比较重要的函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_frame_deblock_row()	<span class="comment">// 去块效应滤波器。</span></span><br><span class="line">x264_frame_filter()			<span class="comment">// 半像素插值。</span></span><br><span class="line">x264_pixel_ssd_wxh()		<span class="comment">// PSNR计算。</span></span><br><span class="line">x264_pixel_ssim_wxh()		<span class="comment">// SSIM计算。</span></span><br></pre></td></tr></table></figure>

<h4 id="分析模块"><a href="#分析模块" class="headerlink" title="分析模块"></a><font style="color:#ffcc33;">分析模块</font></h4><p>分析模块对应的函数是 <code>x264_macroblock_analyse()</code>。该函数包含了帧内预测模式分析以及帧间运动估计等。该函数调用了以下比较重要的函数（只列举了几个有代表性的函数）：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_mb_analyse_init()			<span class="comment">// Analysis模块初始化。</span></span><br><span class="line">x264_mb_analyse_intra()			<span class="comment">// I 宏块帧内预测模式分析。</span></span><br><span class="line">x264_macroblock_probe_pskip()	<span class="comment">// 分析是否是skip模式。</span></span><br><span class="line">x264_mb_analyse_inter_p16x16()	<span class="comment">// P16x16宏块帧间预测模式分析。</span></span><br><span class="line">x264_mb_analyse_inter_p8x8()	<span class="comment">// P8x8宏块帧间预测模式分析。</span></span><br><span class="line">x264_mb_analyse_inter_p16x8()	<span class="comment">// P16x8宏块帧间预测模式分析。</span></span><br><span class="line">x264_mb_analyse_inter_b16x16()	<span class="comment">// B16x16宏块帧间预测模式分析。</span></span><br><span class="line">x264_mb_analyse_inter_b8x8()	<span class="comment">// B8x8宏块帧间预测模式分析。</span></span><br><span class="line">x264_mb_analyse_inter_b16x8()	<span class="comment">// B16x8宏块帧间预测模式分析。</span></span><br></pre></td></tr></table></figure>

<h4 id="宏块编码模块"><a href="#宏块编码模块" class="headerlink" title="宏块编码模块"></a><font style="color:#33cc00;">宏块编码模块</font></h4><p>宏块编码模块对应的函数是 <code>x264_macroblock_encode()</code>。该模块通过对残差的 DCT 变换、量化等方式对宏块进行编码。对于 <code>Intra16x16</code> 宏块，调用 <code>x264_mb_encode_i16x16()</code> 进行编码，对于 <code>Intra4x4</code>，调用 <code>x264_mb_encode_i4x4()</code> 进行编码。对于Inter类型的宏块则直接在函数体里面编码。</p>
<h4 id="熵编码模块"><a href="#熵编码模块" class="headerlink" title="熵编码模块"></a><font style="color:#cc33cc;">熵编码模块</font></h4><p>CABAC 熵编码对应的函数是 <code>x264_macroblock_write_cabac()</code>。CAVLC 熵编码对应的函数是 <code>x264_macroblock_write_cavlc()</code>。<code>x264_macroblock_write_cavlc()</code> 调用了以下几个比较重要的函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_cavlc_mb_header_i()		<span class="comment">// 写入I宏块MB Header数据。包含帧内预测模式等。</span></span><br><span class="line">x264_cavlc_mb_header_p()		<span class="comment">// 写入P宏块MB Header数据。包含MVD、参考帧序号等。</span></span><br><span class="line">x264_cavlc_mb_header_b()		<span class="comment">// 写入B宏块MB Header数据。包含MVD、参考帧序号等。</span></span><br><span class="line">x264_cavlc_qp_delta()			<span class="comment">// 写入QP。</span></span><br><span class="line">x264_cavlc_block_residual()		<span class="comment">// 写入残差数据。</span></span><br></pre></td></tr></table></figure>

<h4 id="码率控制模块"><a href="#码率控制模块" class="headerlink" title="码率控制模块"></a><font style="color:#66cccc;">码率控制模块</font></h4><p>码率控制模块函数分布在x264源代码不同的地方，包含了以下几个比较重要的函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_encoder_open() 	中的 x264_ratecontrol_new()		<span class="comment">// 创建码率控制。</span></span><br><span class="line">x264_encoder_encode() 	中的 x264_ratecontrol_start()		<span class="comment">// 开始码率控制。</span></span><br><span class="line">x264_slice_write()		中的 x264_ratecontrol_mb()		<span class="comment">// 码率控制算法。</span></span><br><span class="line">x264_encoder_encode()	中的 x264_ratecontrol_end()		<span class="comment">// 结束码率控制。</span></span><br><span class="line">x264_encoder_close()	中的 x264_ratecontrol_summary()	<span class="comment">// 码率控制信息。</span></span><br><span class="line">x264_encoder_close()	中的 x264_ratecontrol_delete()	<span class="comment">// 释放码率控制。</span></span><br></pre></td></tr></table></figure>

<h2 id="x264命令行工具"><a href="#x264命令行工具" class="headerlink" title="x264命令行工具"></a>x264命令行工具</h2><p>该命令行工具可以调用 libx264 将 YUV 格式像素数据编码为 H.264 码流。</p>
<h3 id="函数调用关系图-1"><a href="#函数调用关系图-1" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p><img data-src="/images/imageFFmpeg/Thor/X264%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7%E7%9A%84%E6%BA%90%E4%BB%A3%E7%A0%81%E7%9A%84%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB.png" alt="X264命令行工具的源代码的调用关系"></p>
<p>从图中可以看出，X264命令行工具调用了libx264的几个API完成了H.264编码工作。使用libx264的API进行编码可以参考《<a href="http://blog.csdn.net/leixiaohua1020/article/details/42078645">最简单的视频编码器：基于libx264（编码YUV为H.264）</a>》，这个流程中最关键的API包括：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_param_default()	<span class="comment">// 设置参数集结构体x264_param_t的缺省值。</span></span><br><span class="line">x264_encoder_open()		<span class="comment">// 打开编码器。</span></span><br><span class="line">x264_encoder_headers()	<span class="comment">// 输出SPS，PPS，SEI等信息。</span></span><br><span class="line">x264_encoder_encode()	<span class="comment">// 编码输出一帧图像。</span></span><br><span class="line">x264_encoder_close()	<span class="comment">// 关闭编码器。</span></span><br></pre></td></tr></table></figure>

<p>在X264命令行工具中，<code>main()</code> 首先调用 <code>parse()</code> 解析输入的命令行参数，然后调用 <code>encode()</code> 进行编码。 </p>
<p><code>parse()</code> 首先调用 <code>x264_param_default()</code> 为存储参数的结构体 <code>x264_param_t</code> 赋默认值；然后在一个大循环中调用 <code>getopt_long()</code> 逐个解析输入的参数，并作相应的处理；最后调用 <code>select_input()</code> 和 <code>select_output()</code> 解析输入文件格式（例如yuv，y4m…）和输出文件格式（例如raw，flv，MP4…）。</p>
<p><code>encode()</code> 首先调用 <code>x264_encoder_open()</code> 打开H.264编码器，然后调用 <code>x264_encoder_headers()</code> 输出H.264码流的头信息（例如SPS、PPS、SEI），接着进入一个循环并且调用 <code>encode_frame()</code> 逐帧编码视频，最后调用 <code>x264_encoder_close()</code> 关闭解码器。其中 <code>encode_frame()</code> 中又调用了 <code>x264_encoder_encode()</code> 完成了具体的编码工作。下文将会对上述流程展开分析。</p>
<h4 id="main"><a href="#main" class="headerlink" title="main()"></a>main()</h4><p><code>main()</code> 的定义很简单，它主要调用了两个函数：<code>parse()</code> 和 <code>encode()</code> 。<code>main()</code> 首先调用 <code>parse()</code> 解析输入的命令行参数，然后调用 <code>encode()</code> 进行编码。下面分别分析这两个函数。</p>
<h4 id="parse"><a href="#parse" class="headerlink" title="parse()"></a>parse()</h4><p><code>parse()</code> 用于解析命令行输入的参数（存储于 <code>argv[]</code> 中）</p>
<p>下面简单梳理 <code>parse()</code> 的流程：</p>
<p>（1）调用 <code>x264_param_default()</code> 为存储参数的结构体 <code>x264_param_t</code> 赋默认值</p>
<p>（2）调用 <code>x264_param_default_preset()</code> 为 <code>x264_param_t</code> 赋值</p>
<p>（3）在一个大循环中调用 <code>getopt_long()</code> 逐个解析输入的参数，并作相应的处理。举几个例子：</p>
<ul>
<li>a) “-h”：调用 <code>help()</code> 打开帮助菜单。</li>
<li>b) “-V” 调用 <code>print_version_info()</code> 打印版本信息。</li>
<li>c)对于长选项，调用 <code>x264_param_parse()</code> 进行处理。</li>
</ul>
<p>（4）调用 <code>select_input()</code> 解析输出文件格式（例如raw，flv，MP4…）</p>
<p>（5）调用 <code>select_output()</code> 解析输入文件格式（例如yuv，y4m…）</p>
<p>下文按照顺序记录parse()中涉及到的函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_param_default()</span><br><span class="line">x264_param_default_preset()</span><br><span class="line">help()</span><br><span class="line">print_version_info()</span><br><span class="line">x264_param_parse()</span><br><span class="line">select_input()</span><br><span class="line">select_output()</span><br></pre></td></tr></table></figure>

<p><code>x264_param_default()</code> 是一个x264的API。该函数用于设置x264中 <code>x264_param_t</code> 结构体的默认值。</p>
<p><code>x264_param_default_preset()</code> 是一个 libx264 的 API，用于设置 x264 的 preset 和 tune。</p>
<p>从源代码可以看出，<code>x264_param_default_preset()</code> 调用 <code>x264_param_apply_preset()</code> 设置 preset，调用 <code>x264_param_apply_tune()</code> 设置 tune。记录一下这两个函数。</p>
<p><code>help()</code> 用于打印帮助菜单。在 x264 命令行程序中添加 “-h” 参数后会调用该函数。</p>
<p><code>print_version_info()</code> 用于打印 x264 的版本信息。在x264命令行程序中添加 “-V” 参数后会调用该函数。</p>
<p><code>x264_param_parse()</code> 是一个 x264 的 API。该函数以字符串键值对的方式设置 <code>x264_param_t</code> 结构体的一个成员变量。</p>
<p><code>x264_param_parse()</code> 中判断参数的宏 <code>OPT()</code> 和 <code>OPT2()</code> 实质上就是 <code>strcmp()</code>。由此可见该函数的流程首先是调用 <code>strcmp()</code> 判断当前输入参数的名称 name，然后再调用 <code>atoi()</code>，<code>atof()</code>，或者 <code>atobool()</code> 等将当前输入参数值 value 转换成相应类型的值并赋值给对应的参数。</p>
<p><code>x264_param_apply_profile()</code> 是一个 x264 的 API。该函数用于设置 x264 的 profile</p>
<p><code>select_output()</code> 用于设定输出的文件格式。</p>
<p><code>select_input()</code> 用于设定输入的文件格式。</p>
<h4 id="encode"><a href="#encode" class="headerlink" title="encode()"></a>encode()</h4><p><code>encode()</code> 编码 YUV 为 H.264 码流</p>
<p>从源代码可以梳理出来 <code>encode()</code> 的流程：</p>
<p>（1）调用 <code>x264_encoder_open()</code> 打开 H.264 编码器。</p>
<p>（2）调用 <code>x264_encoder_parameters()</code> 获得当前的参数集 <code>x264_param_t</code>，用于后续步骤中的一些配置。</p>
<p>（3）调用输出格式（H.264裸流、FLV、mp4等）对应 <code>cli_output_t</code> 结构体的 <code>set_param()</code> 方法，为输出格式的封装器设定参数。其中参数源自于上一步骤得到的 <code>x264_param_t</code>。</p>
<p>（4）如果不是在每个keyframe前面都增加 SPS&#x2F;PPS&#x2F;SEI 的话，就调用 <code>x264_encoder_headers()</code> 在整个码流前面加 SPS&#x2F;PPS&#x2F;SEI。</p>
<p>（5）进入一个循环中进行一帧一帧的将 YUV 编码为 H.264：</p>
<ul>
<li>a)调用输入格式（YUV、Y4M等）对应的 <code>cli_vid_filter_t</code> 结构体 <code>get_frame()</code> 方法，获取一帧YUV数据。</li>
<li>b)调用 <code>encode_frame()</code> 编码该帧YUV数据为H.264数据，并且输出出来。该函数内部调用<code>x264_encoder_encode()</code> 完成编码工作，调用输出格式对应 <code>cli_output_t</code> 结构体的 <code>write_frame()</code> 完成了输出工作。</li>
<li>c)调用输入格式（YUV、Y4M等）对应的 <code>cli_vid_filter_t</code> 结构体 <code>release_frame()</code> 方法，释放刚才获取的 YUV 数据。</li>
<li>d)调用 <code>print_status()</code> 输出一些统计信息。</li>
</ul>
<p>（6）编码即将结束的时候，进入另一个循环，输出编码器中缓存的视频帧：</p>
<ul>
<li>a)不再传递新的YUV数据，直接调用 <code>encode_frame()</code>，将编码器中缓存的剩余几帧数据编码输出出来。</li>
<li>b)调用 <code>print_status()</code> 输出一些统计信息。</li>
</ul>
<p>（7）调用 <code>x264_encoder_close()</code> 关闭 H.264 编码器。</p>
<p><code>encode()</code> 的流程中涉及到 libx264 的几个关键的 API：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_encoder_open()		<span class="comment">// 打开H.264编码器。</span></span><br><span class="line">x264_encoder_headers()	<span class="comment">// 输出SPS/PPS/SEI。</span></span><br><span class="line">x264_encoder_encode()	<span class="comment">// 编码一帧数据。</span></span><br><span class="line">x264_encoder_close()	<span class="comment">// 关闭H.264编码器。</span></span><br></pre></td></tr></table></figure>

<p>此外上述流程中涉及到两个比较简单的函数：<code>encode_frame()</code> 和 <code>print_status()</code>。其中 <code>encode_frame()</code> 用于编码一帧数据，而 <code>print_status()</code> 用于输出一帧数据编码后的统计信息。下文记录一下这两个函数的定义。</p>
<p><code>encode_frame()</code> 内部调用 <code>x264_encoder_encode()</code> 完成编码工作，调用输出格式对应 <code>cli_output_t</code> 结构体的 <code>write_frame() </code>完成了输出工作。</p>
<p>print_status()的代码不再详细记录，它的输出效果如下图中红框中的文字。</p>
<p><img data-src="/images/imageFFmpeg/Thor/print_status.png" alt="print_status输出效果"></p>
<h3 id="X264-控制台程序中和输入输出相关的结构体"><a href="#X264-控制台程序中和输入输出相关的结构体" class="headerlink" title="X264 控制台程序中和输入输出相关的结构体"></a>X264 控制台程序中和输入输出相关的结构体</h3><p>在x264控制台程序中有3个和输入输出相关的结构体：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">cli_output_t</span>		<span class="comment">// 输出格式对应的结构体。输出格式一般为H.264裸流、FLV、MP4等。</span></span><br><span class="line"><span class="type">cli_input_t</span>			<span class="comment">// 输入格式对应的结构体。输入格式一般为纯YUV像素数据，Y4M格式数据等。</span></span><br><span class="line"><span class="type">cli_vid_filter_t</span>	<span class="comment">// 输入格式滤镜结构体。滤镜可以对输入数据做一些简单的处理，例如拉伸、裁剪等等（当然滤镜也可以不作任何处理，直接读取输入数据）。</span></span><br></pre></td></tr></table></figure>

<p>在 x264 的编码过程中，调用 <code>cli_vid_filter_t</code> 结构体的 <code>get_frame()</code> 读取 YUV 数据，调用 <code>cli_output_t</code> 的 <code>write_frame()</code> 写入数据。</p>
<h2 id="编码器主干部分"><a href="#编码器主干部分" class="headerlink" title="编码器主干部分"></a>编码器主干部分</h2><p>“主干部分”指的就是libx264中最核心的接口函数—— <code>x264_encoder_encode()</code> ，以及相关的几个接口函数<code>x264_encoder_open()</code>，<code>x264_encoder_headers()</code>，和 <code>x264_encoder_close()</code>。</p>
<h3 id="函数调用关系图-2"><a href="#函数调用关系图-2" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p><img data-src="/images/imageFFmpeg/Thor/X264%E7%BC%96%E7%A0%81%E5%99%A8%E4%B8%BB%E5%B9%B2%E9%83%A8%E5%88%86%E7%9A%84%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB.png" alt="X264编码器主干部分的函数调用关系"></p>
<p>从图中可以看出，x264 主干部分最复杂的函数就是 <code>x264_encoder_encode()</code>，该函数完成了编码一帧 YUV 为H.264 码流的工作。与之配合的还有打开编码器的函数 <code>x264_encoder_open()</code>，关闭编码器的函数 <code>x264_encoder_close()</code>，以及输出 SPS&#x2F;PPS&#x2F;SEI 这样的头信息的 <code>x264_encoder_headers()</code>。</p>
<p><code>x264_encoder_open()</code> 用于打开编码器，其中初始化了 libx264 编码所需要的各种变量。它调用了下面的函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_validate_parameters()	<span class="comment">// 检查输入参数（例如输入图像的宽高是否为正数）。</span></span><br><span class="line">x264_predict_16x16_init()	<span class="comment">// 初始化Intra16x16帧内预测汇编函数。</span></span><br><span class="line">x264_predict_4x4_init()		<span class="comment">// 初始化Intra4x4帧内预测汇编函数。</span></span><br><span class="line">x264_pixel_init()			<span class="comment">// 初始化像素值计算相关的汇编函数（包括SAD、SATD、SSD等）。</span></span><br><span class="line">x264_dct_init()				<span class="comment">// 初始化DCT变换和DCT反变换相关的汇编函数。</span></span><br><span class="line">x264_mc_init()				<span class="comment">// 初始化运动补偿相关的汇编函数。</span></span><br><span class="line">x264_quant_init()			<span class="comment">// 初始化量化和反量化相关的汇编函数。</span></span><br><span class="line">x264_deblock_init()			<span class="comment">// 初始化去块效应滤波器相关的汇编函数。</span></span><br><span class="line">x264_lookahead_init()		<span class="comment">// 初始化Lookahead相关的变量。</span></span><br><span class="line">x264_ratecontrol_new()		<span class="comment">// 初始化码率控制相关的变量。</span></span><br></pre></td></tr></table></figure>

<p><code>x264_encoder_headers()</code> 输出 SPS&#x2F;PPS&#x2F;SEI 这些 H.264 码流的头信息。它调用了下面的函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_sps_write()			<span class="comment">// 输出SPS</span></span><br><span class="line">x264_pps_write()			<span class="comment">// 输出PPS</span></span><br><span class="line">x264_sei_version_write()	<span class="comment">// 输出SEI</span></span><br></pre></td></tr></table></figure>

<p><code>x264_encoder_encode()</code> 编码一帧 YUV 为 H.264 码流。它调用了下面的函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_frame_pop_unused()	<span class="comment">// 获取1个x264_frame_t类型结构体fenc。如果frames.unused[]队列不为空，就调用x264_frame_pop()从unused[]队列取1个现成的；否则就调用x264_frame_new()创建一个新的。</span></span><br><span class="line">x264_frame_copy_picture() <span class="comment">// 将输入的图像数据拷贝至fenc。</span></span><br><span class="line">x264_lookahead_put_frame()  <span class="comment">// 将fenc放入lookahead.next.list[]队列，等待确定帧类型。</span></span><br><span class="line">x264_lookahead_get_frames() <span class="comment">// 通过lookahead分析帧类型。该函数调用了x264_slicetype_decide()，x264_slicetype_analyse()和x264_slicetype_frame_cost()等函数。经过一些列分析之后，最终确定了帧类型信息，并且将帧放入frames.current[]队列。</span></span><br><span class="line">x264_frame_shift() <span class="comment">// 从frames.current[]队列取出1帧用于编码。</span></span><br><span class="line">x264_reference_update() <span class="comment">// 更新参考帧列表。</span></span><br><span class="line">x264_reference_reset() <span class="comment">// 如果为IDR帧，调用该函数清空参考帧列表。</span></span><br><span class="line">x264_reference_hierarchy_reset() <span class="comment">// 如果是I（非IDR帧）、P帧、B帧（可做为参考帧），调用该函数。</span></span><br><span class="line">x264_reference_build_list() <span class="comment">// 创建参考帧列表list0和list1。</span></span><br><span class="line">x264_ratecontrol_start() <span class="comment">// 开启码率控制。</span></span><br><span class="line">x264_slice_init() <span class="comment">// 创建 Slice Header。</span></span><br><span class="line">x264_slices_write() <span class="comment">// 编码数据（最关键的步骤）。其中调用了x264_slice_write()完成了编码的工作（注意“x264_slices_write()”和“x264_slice_write()”名字差了一个“s”）。</span></span><br><span class="line">x264_encoder_frame_end() <span class="comment">// 编码结束后做一些后续处理，例如记录一些统计信息。其中调用了x264_frame_push_unused()将fenc重新放回frames.unused[]队列，并且调用x264_ratecontrol_end()关闭码率控制。</span></span><br></pre></td></tr></table></figure>

<p><code>x264_encoder_close()</code> 用于关闭解码器，同时输出一些统计信息。它调用了下面的函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_lookahead_delete()		<span class="comment">// 释放Lookahead相关的变量。</span></span><br><span class="line">x264_ratecontrol_summary()	<span class="comment">// 汇总码率控制信息。</span></span><br><span class="line">x264_ratecontrol_delete()	<span class="comment">// 关闭码率控制。</span></span><br></pre></td></tr></table></figure>

<h4 id="x264-encoder-open"><a href="#x264-encoder-open" class="headerlink" title="x264_encoder_open()"></a>x264_encoder_open()</h4><p><code>x264_encoder_open()</code> 是一个 libx264 的 API。该函数用于打开编码器，其中初始化了 libx264 编码所需要的各种变量。</p>
<p>根据函数调用的顺序，看一下 <code>x264_encoder_open()</code> 调用的下面几个函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_sps_init()				<span class="comment">// 根据输入参数生成H.264码流的SPS信息。</span></span><br><span class="line">x264_pps_init()				<span class="comment">// 根据输入参数生成H.264码流的PPS信息。</span></span><br><span class="line">x264_predict_16x16_init()	<span class="comment">// 初始化Intra16x16帧内预测汇编函数。</span></span><br><span class="line">x264_predict_4x4_init()		<span class="comment">// 初始化Intra4x4帧内预测汇编函数。</span></span><br><span class="line">x264_pixel_init()			<span class="comment">// 初始化像素值计算相关的汇编函数（包括SAD、SATD、SSD等）。</span></span><br><span class="line">x264_dct_init()				<span class="comment">// 初始化DCT变换和DCT反变换相关的汇编函数。</span></span><br><span class="line">x264_mc_init()				<span class="comment">// 初始化运动补偿相关的汇编函数。</span></span><br><span class="line">x264_quant_init()			<span class="comment">// 初始化量化和反量化相关的汇编函数。</span></span><br><span class="line">x264_deblock_init()			<span class="comment">// 初始化去块效应滤波器相关的汇编函数。</span></span><br><span class="line">mbcmp_init()				<span class="comment">// 决定像素比较的时候使用SAD还是SATD。</span></span><br></pre></td></tr></table></figure>

<h4 id="相关知识简述"><a href="#相关知识简述" class="headerlink" title="相关知识简述"></a>相关知识简述</h4><p>简单记录一下帧内预测的方法。帧内预测根据宏块左边和上边的边界像素值推算宏块内部的像素值，帧内预测的效果如下图所示。其中左边的图为图像原始画面，右边的图为经过帧内预测后没有叠加残差的画面。</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%B8%A7%E5%86%85%E9%A2%84%E6%B5%8B-01.png" alt="帧内预测-01"></p>
<p>H.264 中有两种帧内预测模式：<code>16x16</code> 亮度帧内预测模式和 <code>4x4</code> 亮度帧内预测模式。其中 <code>16x16</code> 帧内预测模式一共有 4 种，如下图所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%B8%A7%E5%86%85%E9%A2%84%E6%B5%8B-02.png" alt="帧内预测-02"></p>
<p>这 4 种模式列表如下。</p>
<table>
<thead>
<tr>
<th>模式</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Vertical</td>
<td>由上边像素推出相应像素值</td>
</tr>
<tr>
<td>Horizontal</td>
<td>由左边像素推出相应像素值</td>
</tr>
<tr>
<td>DC</td>
<td>由上边和左边像素平均值推出相应像素值</td>
</tr>
<tr>
<td>Plane</td>
<td>由上边和左边像素推出相应像素值</td>
</tr>
</tbody></table>
<p><code>4x4</code> 帧内预测模式一共有 9 种，如下图所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%B8%A7%E5%86%85%E9%A2%84%E6%B5%8B-03.png" alt="帧内预测-03"></p>
<p>简单记录几个像素计算中的概念。SAD 和 SATD 主要用于帧内预测模式以及帧间预测模式的判断。有关 SAD、SATD、SSD 的定义如下：</p>
<blockquote>
<p>SAD（Sum of Absolute Difference）也可以称为SAE（Sum of Absolute Error），即绝对误差和。它的计算方法就是求出两个像素块对应像素点的差值，将这些差值分别求绝对值之后再进行累加。</p>
<p>SATD（Sum of Absolute Transformed Difference）即Hadamard变换后再绝对值求和。它和SAD的区别在于多了一个“变换”。</p>
<p>SSD（Sum of Squared Difference）也可以称为SSE（Sum of Squared Error），即差值的平方和。它和SAD的区别在于多了一个“平方”。</p>
</blockquote>
<p>H.264中使用SAD和SATD进行宏块预测模式的判断。早期的编码器使用SAD进行计算，近期的编码器多使用SATD进行计算。为什么使用SATD而不使用SAD呢？关键原因在于编码之后码流的大小是和图像块DCT变换后频域信息紧密相关的，而和变换前的时域信息关联性小一些。SAD只能反应时域信息；SATD却可以反映频域信息，而且计算复杂度也低于DCT变换，因此是比较合适的模式选择的依据。</p>
<p>使用SAD进行模式选择的示例如下所示。下面这张图代表了一个普通的 <code>Intra16x16</code> 的宏块的像素。它的下方包含了使用Vertical，Horizontal，DC和Plane四种帧内预测模式预测的像素。通过计算可以得到这几种预测像素和原始像素之间的SAD（SAE）分别为3985，5097，4991，2539。由于Plane模式的SAD取值最小，由此可以断定Plane模式对于这个宏块来说是最好的帧内预测模式。</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%B8%A7%E5%86%85%E9%A2%84%E6%B5%8B-04.png" alt="帧内预测-04"></p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%B8%A7%E5%86%85%E9%A2%84%E6%B5%8B-05.png" alt="帧内预测-05"></p>
<p>简单记录一下DCT相关的知识。DCT变换的核心理念就是把图像的低频信息（对应大面积平坦区域）变换到系数矩阵的左上角，而把高频信息变换到系数矩阵的右下角，这样就可以在压缩的时候（量化）去除掉人眼不敏感的高频信息（位于矩阵右下角的系数）从而达到压缩数据的目的。二维 <code>8x8</code> DCT变换常见的示意图如下所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%B8%A7%E5%86%85%E9%A2%84%E6%B5%8B-06.png" alt="帧内预测-06"></p>
<p>早期的DCT变换都使用了 <code>8x8</code> 的矩阵（变换系数为小数）。在 H.264 标准中新提出了一种 <code>4x4</code> 的矩阵。这种 <code>4x4</code> DCT变换的系数都是整数，一方面提高了运算的准确性，一方面也利于代码的优化。<code>4x4</code> 整数DCT变换的示意图如下所示（作为对比，右侧为 <code>4x4</code> 块的Hadamard变换的示意图）。</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%B8%A7%E5%86%85%E9%A2%84%E6%B5%8B-07.png" alt="帧内预测-07"></p>
<p>简单记录一下半像素插值的知识。《H.264标准》中规定，运动估计为 <code>1/4</code> 像素精度。因此在H.264编码和解码的过程中，需要将画面中的像素进行插值——简单地说就是把原先的 1 个像素点拓展成 <code>4x4</code> 一共16个点。下图显示了H.264编码和解码过程中像素插值情况。可以看出原先的 G 点的右下方通过插值的方式产生了a、b、c、d等一共 16 个点。</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%B8%A7%E5%86%85%E9%A2%84%E6%B5%8B-08.png" alt="帧内预测-08"></p>
<p>如图所示，<code>1/4</code> 像素内插一般分成两步：</p>
<p>（1）半像素内插。这一步通过 6 抽头滤波器获得 5 个半像素点。</p>
<p>（2）线性内插。这一步通过简单的线性内插获得剩余的 <code>1/4</code> 像素点。</p>
<p>图中半像素内插点为 b、m、h、s、j 五个点。半像素内插方法是对整像素点进行 6 抽头滤波得出，滤波器的权重为( <code>1/32, -5/32, 5/8, 5/8, -5/32, 1/32</code> )。例如 b 的计算公式为：</p>
<p><strong><code>b=round( (E - 5F + 20G + 20H - 5I + J ) / 32)</code></strong></p>
<p>剩下几个半像素点的计算关系如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">m：由B、D、H、N、S、U计算</span><br><span class="line">h：由A、C、G、M、R、T计算</span><br><span class="line">s：由K、L、M、N、P、Q计算</span><br><span class="line">j：由cc、dd、h、m、ee、ff计算。需要注意j点的运算量比较大，因为cc、dd、ee、ff都需要通过半像素内插方法进行计算。</span><br></pre></td></tr></table></figure>

<p>在获得半像素点之后，就可以通过简单的线性内插获得 <code>1/4</code> 像素内插点了。<code>1/4</code> 像素内插的方式如下图所示。例如图中 a 点的计算公式如下：</p>
<p><strong><code>A=round( (G+b)/2 )</code></strong></p>
<p>在这里有一点需要注意：位于 4 个角的e、g、p、r 四个点并不是通过 j 点计算计算的，而是通过b、h、s、m四个半像素点计算的。</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%B8%A7%E5%86%85%E9%A2%84%E6%B5%8B-09.png" alt="帧内预测-09"></p>
<h4 id="x264-encoder-headers"><a href="#x264-encoder-headers" class="headerlink" title="x264_encoder_headers()"></a>x264_encoder_headers()</h4><p><code>x264_encoder_headers()</code> 是libx264的一个API函数，用于输出 SPS&#x2F;PPS&#x2F;SEI 这些 H.264 码流的头信息。</p>
<h4 id="x264-encoder-close"><a href="#x264-encoder-close" class="headerlink" title="x264_encoder_close()"></a>x264_encoder_close()</h4><p><code>x264_encoder_close()</code> 是libx264的一个API函数。该函数用于关闭编码器，同时输出一些统计信息。</p>
<h4 id="x264-encoder-encode"><a href="#x264-encoder-encode" class="headerlink" title="x264_encoder_encode()"></a>x264_encoder_encode()</h4><p><code>x264_encoder_encode()</code> 是libx264的API函数，用于编码一帧 YUV 为 H.264 码流。</p>
<p><code>x264_encoder_encode()</code> 的流程大致如下：</p>
<p>（1）调用 <code>x264_frame_pop_unused</code> 获取一个空的 <code>fenc</code>（x264_frame_t类型）用于存储一帧编码像素数据。</p>
<p>（2）调用 <code>x264_frame_copy_picture()</code> 将外部结构体的 <code>pic_in</code>（<code>x264_picture_t</code>类型）的数据拷贝给内部结构体的 <code>fenc</code>（<code>x264_frame_t</code> 类型）。</p>
<p>（3）调用 <code>x264_lookahead_put_frame()</code> 将 <code>fenc</code> 放入 Lookahead 模块的队列中，等待确定帧类型。</p>
<p>（4）调用 <code>x264_lookahead_get_frames()</code> 分析 Lookahead 模块中一个帧的帧类型。分析后的帧保存在<code>frames.current[]</code> 中。</p>
<p>（5）调用 <code>x264_frame_shift()</code> 从 <code>frames.current[]</code> 中取出分析帧类型之后的 <code>fenc</code>。</p>
<p>（6）调用 <code>x264_reference_update()</code> 更新参考帧队列 <code>frames.reference[]</code>。</p>
<p>（7）如果编码帧 <code>fenc</code> 是 <code>IDR</code> 帧，调用 <code>x264_reference_reset()</code> 清空参考帧队列 <code>frames.reference[]</code>。</p>
<p>（8）调用 <code>x264_reference_build_list()</code> 创建参考帧列表 <code>List0</code> 和 <code>List1</code>。</p>
<p>（9）根据选项做一些配置：</p>
<ul>
<li>a) 如果 <code>b_aud</code> 不为 0，输出 AUD 类型 NALU</li>
<li>b) 在当前帧是关键帧的情况下，如果 <code>b_repeat_headers</code> 不为 0，调用 <code>x264_sps_write()</code> 和 <code>x264_pps_write()</code> 输出 SPS 和 PPS。</li>
<li>c) 输出一些特殊的 SEI 信息，用于适配各种解码器。</li>
</ul>
<p>（10）调用 <code>x264_slice_init()</code> 初始化 Slice Header 信息。</p>
<p>（11）调用 <code>x264_slices_write()</code> 进行编码。该部分是 libx264 的核心，在后续文章中会详细分析。</p>
<p>（12）调用 <code>x264_encoder_frame_end()</code> 做一些编码后的后续处理。</p>
<p><code>x264_slice_write()</code> 是完成编码工作的函数。该函数中包含了去块效应滤波，运动估计，宏块编码，熵编码等模块。</p>
<h2 id="x264-slice-write-1"><a href="#x264-slice-write-1" class="headerlink" title="x264_slice_write()"></a>x264_slice_write()</h2><p><code>x264_slice_write()</code> 是 x264 项目的核心，它完成了编码了一个 Slice 的工作。根据功能的不同，该函数可以分为滤波（Filter），分析（Analysis），宏块编码（Encode）和熵编码（Entropy Encoding）几个子模块。</p>
<h3 id="函数调用关系图-3"><a href="#函数调用关系图-3" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p><img data-src="/images/imageFFmpeg/Thor/x264_slice_write.png" alt="x264_slice_write"></p>
<p>x264_slice_write()调用了如下函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_nal_start()	<span class="comment">// 开始写一个NALU。</span></span><br><span class="line">x264_macroblock_thread_init() <span class="comment">// 初始化宏块重建数据缓存fdec_buf[]和编码数据缓存fenc_buf[]。</span></span><br><span class="line">x264_slice_header_write()	<span class="comment">// 输出 Slice Header。</span></span><br><span class="line">x264_fdec_filter_row()	<span class="comment">// 滤波模块。该模块包含了环路滤波，半像素插值，SSIM/PSNR的计算。</span></span><br><span class="line">x264_macroblock_cache_load() 	<span class="comment">// 将要编码的宏块的周围的宏块的信息读进来。</span></span><br><span class="line">x264_macroblock_analyse()	<span class="comment">// 分析模块。该模块包含了帧内预测模式分析以及帧间运动估计等。</span></span><br><span class="line">x264_macroblock_encode()	<span class="comment">// 宏块编码模块。该模块通过对残差的DCT变换、量化等方式对宏块进行编码。</span></span><br><span class="line">x264_macroblock_write_cabac()	<span class="comment">// CABAC熵编码模块。</span></span><br><span class="line">x264_macroblock_write_cavlc()	<span class="comment">// CAVLC熵编码模块。</span></span><br><span class="line">x264_macroblock_cache_save()	<span class="comment">// 保存当前宏块的信息。</span></span><br><span class="line">x264_ratecontrol_mb()	<span class="comment">// 码率控制。</span></span><br><span class="line">x264_nal_end() <span class="comment">// 结束写一个NALU。</span></span><br></pre></td></tr></table></figure>

<p>根据源代码简单梳理了 <code>x264_slice_write()</code> 的流程，如下所示：</p>
<p>（1）调用 <code>x264_nal_start()</code> 开始输出一个 NALU。</p>
<p>（2）<code>x264_macroblock_thread_init()</code>：初始化宏块重建像素缓存 <code>fdec_buf[]</code> 和编码像素缓存 <code>fenc_buf[]</code>。</p>
<p>（3）调用 <code>x264_slice_header_write()</code> 输出 Slice Header。</p>
<p>（4）进入一个循环，该循环每执行一遍编码一个宏块：</p>
<ul>
<li>a) 每处理一行宏块，调用一次 <code>x264_fdec_filter_row()</code> 执行滤波模块。</li>
<li>b) 调用 <code>x264_macroblock_cache_load_progressive()</code> 将要编码的宏块的周围的宏块的信息读进来。</li>
<li>c) 调用 <code>x264_macroblock_analyse()</code> 执行分析模块。</li>
<li>d) 调用 <code>x264_macroblock_encode()</code> 执行宏块编码模块。</li>
<li>e) 调用 <code>x264_macroblock_write_cabac()/x264_macroblock_write_cavlc()</code> 执行熵编码模块。</li>
<li>f) 调用 <code>x264_macroblock_cache_save()</code> 保存当前宏块的信息。</li>
<li>g) 调用 <code>x264_ratecontrol_mb()</code> 执行码率控制。</li>
<li>h) 准备处理下一个宏块。</li>
</ul>
<p>（5）调用 <code>x264_nal_end()</code> 结束输出一个 NALU。</p>
<h3 id="重要的数据结构"><a href="#重要的数据结构" class="headerlink" title="重要的数据结构"></a>重要的数据结构</h3><p>X264在宏块编码方面涉及到下面几个比较重要的结构体：</p>
<p>宏块像素存储缓存  <code>fenc_buf[]</code> 和 <code>fdec_buf[]</code> ——位于 <code>x264_t.mb.pic</code> 中，用于存储宏块的亮度和色度像素。<br>宏块各种信息的缓存 Cache——位于 <code>x264_t.mb.pic</code> 中，用于存储宏块的信息例如 <code>4x4</code> 帧内预测模式、DCT 的非 0 系数个数、运动矢量、参考帧序号等。</p>
<p>图像半像素点存储空间 <code>filtered[]</code> ——位于 <code>x264_frame_t</code> 中，用于存储半像素插值后的点。</p>
<h4 id="宏块像素存储缓存-fenc-buf-和-fdec-buf"><a href="#宏块像素存储缓存-fenc-buf-和-fdec-buf" class="headerlink" title="宏块像素存储缓存 fenc_buf[] 和 fdec_buf[]"></a>宏块像素存储缓存 fenc_buf[] 和 fdec_buf[]</h4><p><code>fenc_buf[]</code> 和 <code>fdec_buf[]</code> 为 <code>x264_t.mb.cache</code> 中的结构体，用于存储一个宏块的像素数据。其中 <code>fenc_buf[]</code> 用于存储宏块编码像素数据，而 <code>fdec_buf[]</code> 用于存储宏块重建像素数据。他们的定义如下所示。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* space for p_fenc and p_fdec */</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> FENC_STRIDE 16</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> FDEC_STRIDE 32</span></span><br><span class="line"><span class="comment">//存储编码宏块fenc和重建宏块fdec的内存</span></span><br><span class="line"><span class="type">uint8_t</span> fenc_buf[<span class="number">48</span>*FENC_STRIDE]</span><br><span class="line"><span class="type">uint8_t</span> fdec_buf[<span class="number">52</span>*FDEC_STRIDE]</span><br></pre></td></tr></table></figure>

<p>从定义可以看出，<code>fenc_buf[]</code> 每行 16 个数据；而 <code>fdec_buf[]</code> 每行 32 个数据。在 <code>x264_t.mb.cache</code> 中和 <code>fenc_buf[]</code> 和 <code>fdec_buf[]</code> 相关的指针数组还有 <code>p_fenc[3]</code> 和 <code>p_fdec[3]</code> ，它们中的 3 个元素 <code>[0]、[1]、[2]</code> 分别指向分别指向对应缓存 buf 的 Y、U、V 分量。下图画出了像素格式为 YUV420P 的时候 <code>fenc_buf[]</code> 的存储示意图。图中灰色区域存储 Y，蓝色区域存储 U，粉红区域存储 V。<code>p_fenc[0]</code> 指向 Y 的存储区域，<code>p_fenc[1]</code> 指向 U 的存储区域，<code>p_fenc[2]</code> 指向 V 的存储区域，在图中以方框的形式标注了出来。</p>
<p><img data-src="/images/imageFFmpeg/Thor/x264-01.png" alt="像素格式为 YUV420P 的时候 fenc_buf 的存储"></p>
<p>下图画出了像素格式为 YUV420P 的时候 <code>fdec_buf[]</code> 的存储示意图。图中灰色区域存储 Y，蓝色区域存储 U，粉红区域存储 V。<code>p_fenc[0]</code> 指向 Y 的存储区域，<code>p_fenc[1]</code> 指向 U 的存储区域，<code>p_fenc[2]</code> 指向 V 的存储区域，在图中以方框的形式标注了出来。</p>
<p><img data-src="/images/imageFFmpeg/Thor/x264-02.png" alt="像素格式为 YUV420P 的时候 fdec_buf 的存储"></p>
<p>从图中可以看出，<code>fdec_buf[]</code> 和 <code>fenc_buf[]</code> 主要的区别在于 <code>fdec_buf[]</code> 像素块的左边和上边包含了左上方相邻块用于预测的像素。</p>
<h3 id="宏块各种信息的缓存Cache"><a href="#宏块各种信息的缓存Cache" class="headerlink" title="宏块各种信息的缓存Cache"></a>宏块各种信息的缓存Cache</h3><p>在 x264 中 <code>x264_t.mb.cache</code> 结构体中包含了存储宏块信息的各种各样的缓存 Cache。例如：</p>
<ul>
<li><strong>intra4x4_pred_mode</strong>：<code>Intra4x4</code> 帧内预测模式的缓存</li>
<li><strong>non_zero_count</strong>：DCT 的非 0 系数个数的缓存</li>
<li><strong>mv</strong>：运动矢量缓存</li>
<li><strong>ref</strong>：运动矢量参考帧的缓存</li>
</ul>
<h2 id="滤波（Filter）部分"><a href="#滤波（Filter）部分" class="headerlink" title="滤波（Filter）部分"></a>滤波（Filter）部分</h2><p><code>x264_fdec_filter_row()</code> 对应着 x264 中的滤波模块。滤波模块主要完成了下面 3 个方面的功能：</p>
<p>（1）环路滤波（去块效应滤波）</p>
<p>（2）半像素内插</p>
<p>（3）视频质量指标PSNR和SSIM的计算</p>
<h3 id="函数调用关系图-4"><a href="#函数调用关系图-4" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p><img data-src="/images/imageFFmpeg/Thor/x264_fdec_filter_row.png" alt="滤波（Filter）部分的函数调用关系"></p>
<p>从图中可以看出，滤波模块对应的x264_fdec_filter_row()调用了如下函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_frame_deblock_row()	<span class="comment">// 去块效应滤波器。</span></span><br><span class="line">x264_frame_filter()			<span class="comment">// 半像素插值。</span></span><br><span class="line">x264_pixel_ssd_wxh()		<span class="comment">// PSNR计算。</span></span><br><span class="line">x264_pixel_ssim_wxh()		<span class="comment">// SSIM计算。</span></span><br></pre></td></tr></table></figure>

<p>从源代码可以看出，<code>x264_fdec_filter_row()</code> 完成了三步工作：</p>
<p>（1）环路滤波（去块效应滤波）。通过调用 <code>x264_frame_deblock_row()</code> 实现。</p>
<p>（2）半像素内插。通过调用 <code>x264_frame_filter()</code> 实现。</p>
<p>（3）视频质量 SSIM 和 PSNR 计算。PSNR在这里只计算了 SSD，通过调用 <code>x264_pixel_ssd_wxh()</code> 实现；SSIM 的计算则是通过 <code>x264_pixel_ssim_wxh()</code> 实现。</p>
<h2 id="宏块分析（Analysis）部分-帧内宏块（Intra）"><a href="#宏块分析（Analysis）部分-帧内宏块（Intra）" class="headerlink" title="宏块分析（Analysis）部分-帧内宏块（Intra）"></a>宏块分析（Analysis）部分-帧内宏块（Intra）</h2><p><code>x264_macroblock_analyse()</code> 对应着 x264 中的分析模块。分析模块主要完成了下面 2 个方面的功能：</p>
<p>（1）对于帧内宏块，分析帧内预测模式</p>
<p>（2）对于帧间宏块，进行运动估计，分析帧间预测模式</p>
<h3 id="函数调用关系图-5"><a href="#函数调用关系图-5" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p><img data-src="/images/imageFFmpeg/Thor/x264_macroblock_analyse.png" alt="宏块分析（Analysis）部分的函数调用关系"></p>
<p>从图中可以看出，分析模块的 <code>x264_macroblock_analyse()</code> 调用了如下函数（只列举了几个有代表性的函数）：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_mb_analyse_init()			<span class="comment">// Analysis模块初始化。</span></span><br><span class="line">x264_mb_analyse_intra()			<span class="comment">// Intra宏块帧内预测模式分析。</span></span><br><span class="line">x264_macroblock_probe_pskip()	<span class="comment">// 分析是否是skip模式。</span></span><br><span class="line">x264_mb_analyse_inter_p16x16()	<span class="comment">// P16x16宏块帧间预测模式分析。</span></span><br><span class="line">x264_mb_analyse_inter_p8x8()	<span class="comment">// P8x8宏块帧间预测模式分析。</span></span><br><span class="line">x264_mb_analyse_inter_p16x8()	<span class="comment">// P16x8宏块帧间预测模式分析。</span></span><br><span class="line">x264_mb_analyse_inter_b16x16()	<span class="comment">// B16x16宏块帧间预测模式分析。</span></span><br><span class="line">x264_mb_analyse_inter_b8x8()	<span class="comment">// B8x8宏块帧间预测模式分析。</span></span><br><span class="line">x264_mb_analyse_inter_b16x8()	<span class="comment">// B16x8宏块帧间预测模式分析。</span></span><br></pre></td></tr></table></figure>

<p>尽管 <code>x264_macroblock_analyse()</code> 的源代码比较长，但是它的逻辑比较清晰，如下所示：</p>
<p>（1）如果当前是 <code>I</code> Slice，调用 <code>x264_mb_analyse_intra()</code> 进行 Intra 宏块的帧内预测模式分析。</p>
<p>（2）如果当前是 <code>P</code> Slice，则进行下面流程的分析：</p>
<ul>
<li>a)调用 <code>x264_macroblock_probe_pskip()</code> 分析是否为 Skip 宏块，如果是的话则不再进行下面分析。</li>
<li>b)调用 <code>x264_mb_analyse_inter_p16x16()</code> 分析 <code>P16x16</code> 帧间预测的代价。</li>
<li>c)调用 <code>x264_mb_analyse_inter_p8x8()</code> 分析 <code>P8x8</code> 帧间预测的代价。</li>
<li>d)如果 <code>P8x8</code> 代价值小于 <code>P16x16</code>，则依次对 4 个 <code>8x8</code> 的子宏块分割进行判断：<ul>
<li>i.调用 <code>x264_mb_analyse_inter_p4x4()</code> 分析 <code>P4x4</code> 帧间预测的代价。</li>
<li>ii.如果 <code>P4x4</code> 代价值小于 <code>P8x8</code> ，则调用 <code>x264_mb_analyse_inter_p8x4()</code> 和<code>x264_mb_analyse_inter_p4x8()</code> 分析 <code>P8x4</code> 和 <code>P4x8</code> 帧间预测的代价。</li>
</ul>
</li>
<li>e)如果 <code>P8x8</code> 代价值小于 <code>P16x16</code>，调用 <code>x264_mb_analyse_inter_p16x8()</code> 和<code>x264_mb_analyse_inter_p8x16()</code> 分析 <code>P16x8</code> 和 <code>P8x16</code> 帧间预测的代价。</li>
<li>f)此外还要调用 <code>x264_mb_analyse_intra()</code> ，检查当前宏块作为 Intra 宏块编码的代价是否小于作为 <code>P</code> 宏块编码的代价（<code>P</code> Slice中也允许有 Intra 宏块）。</li>
</ul>
<p>（3）如果当前是 <code>B</code> Slice，则进行和 <code>P</code> Slice类似的处理。</p>
<p>总体说来 <code>x264_mb_analyse_intra()</code> 通过计算 <code>Intra16x16</code>，<code>Intra8x8</code>（暂时没有研究），<code>Intra4x4</code> 这 3 中帧内预测模式的代价，比较后得到最佳的帧内预测模式。该函数的等流程大致如下：</p>
<p>（1）进行 <code>Intra16X16</code> 模式的预测</p>
<ul>
<li>a)调用 <code>predict_16x16_mode_available()</code> 根据周围宏块的情况判断其可用的预测模式（主要检查左边和上边的块是否可用）。</li>
<li>b)循环计算 4 种 <code>Intra16x16</code> 帧内预测模式：<ul>
<li>i.调用 <code>predict_16x16[]()</code> 汇编函数进行 <code>Intra16x16</code> 帧内预测</li>
<li>ii.调用 <code>x264_pixel_function_t</code> 中的 <code>mbcmp[]()</code> 计算编码代价（<code>mbcmp[]()</code> 指向 SAD 或者 SATD 汇编函数）。</li>
</ul>
</li>
<li>c)获取最小代价的 <code>Intra16x16</code> 模式。</li>
</ul>
<p>（2）进行 <code>Intra8x8</code> 模式的预测（未研究，流程应该类似）</p>
<p>（3）进行 <code>Intra4X4</code> 块模式的预测</p>
<ul>
<li>a)循环处理 16 个 <code>4x4</code> 的块：<ul>
<li>i.调用 <code>x264_mb_predict_intra4x4_mode()</code> 根据周围宏块情况判断该块可用的预测模式。</li>
<li>ii.循环计算 9 种 <code>Intra4x4</code> 的帧内预测模式：<ul>
<li>1)调用 <code>predict_4x4 []()</code> 汇编函数进行 <code>Intra4x4</code> 帧内预测</li>
<li>2)调用 <code>x264_pixel_function_t</code> 中的 <code>mbcmp[]()</code> 计算编码代价（<code>mbcmp[]()</code> 指向 SAD 或者 SATD 汇编函数）。</li>
</ul>
</li>
<li>iii.获取最小代价的 <code>Intra4x4</code> 模式。</li>
</ul>
</li>
<li>b)将 16 个 <code>4X4</code> 块的最小代价相加，得到总代价。</li>
</ul>
<p>（4）将上述 3 中模式的代价进行对比，取最小者为当前宏块的帧内预测模式。</p>
<h2 id="宏块分析（Analysis）部分-帧间宏块（Inter）"><a href="#宏块分析（Analysis）部分-帧间宏块（Inter）" class="headerlink" title="宏块分析（Analysis）部分-帧间宏块（Inter）"></a>宏块分析（Analysis）部分-帧间宏块（Inter）</h2><p><code>x264_macroblock_analyse()</code> 对应着 x264 中的分析模块。分析模块主要完成了下面 2 个方面的功能：</p>
<p>（1）对于帧内宏块，分析帧内预测模式</p>
<p>（2）对于帧间宏块，进行运动估计，分析帧间预测模式</p>
<blockquote>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/45936267">详细功能说明</a></p>
</blockquote>
<h2 id="宏块编码（Encode）部分"><a href="#宏块编码（Encode）部分" class="headerlink" title="宏块编码（Encode）部分"></a>宏块编码（Encode）部分</h2><p><code>x264_macroblock_encode()</code> 对应着 x264 中的宏块编码模块。宏块编码模块主要完成了 DCT 变换和量化两个步骤。</p>
<h3 id="函数调用关系图-6"><a href="#函数调用关系图-6" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p><img data-src="/images/imageFFmpeg/Thor/x264_macroblock_encode.png" alt="宏块编码（Encode）部分的函数调用关系"></p>
<p>从图中可以看出，宏块编码模块的 <code>x264_macroblock_encode()</code> 调用了 <code>x264_macroblock_encode_internal()</code> ，而 <code>x264_macroblock_encode_internal()</code> 完成了如下功能：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_macroblock_encode_skip()	<span class="comment">// 编码Skip类型宏块。</span></span><br><span class="line">x264_mb_encode_i16x16()			<span class="comment">// 编码Intra16x16类型的宏块。该函数除了进行DCT变换之外，还对16个小块的DC系数进行了Hadamard变换。</span></span><br><span class="line">x264_mb_encode_i4x4()			<span class="comment">// 编码Intra4x4类型的宏块。</span></span><br><span class="line"><span class="comment">// 帧间宏块编码：这一部分代码直接写在了函数体里面。</span></span><br><span class="line">x264_mb_encode_chroma()			<span class="comment">// 编码色度块。</span></span><br></pre></td></tr></table></figure>

<p><code>x264_macroblock_encode()</code> 用于编码宏块。该函数的定义位于 <code>encoder\macroblock.c</code></p>
<p><code>x264_macroblock_encode_internal()</code> 的流程大致如下：</p>
<p>（1）如果是 Skip 类型，调用 <code>x264_macroblock_encode_skip()</code> 编码宏块。</p>
<p>（2）如果是 <code>Intra16x16</code> 类型，调用 <code>x264_mb_encode_i16x16()</code> 编码宏块。</p>
<p>（3）如果是 <code>Intra4x4</code> 类型，循环 16 次调用 <code>x264_mb_encode_i4x4()</code> 编码宏块。</p>
<p>（4）如果是 Inter 类型，则不再调用子函数，而是直接进行编码：</p>
<ul>
<li>a)对 <code>16x16</code> 块调用 <code>x264_dct_function_t</code> 的 <code>sub16x16_dct()</code> 汇编函数，求得编码宏块数据 <code>p_fenc</code> 与重建宏块数据 <code>p_fdec</code> 之间的残差（“sub”），并对残差进行 DCT 变换。</li>
<li>b)分成 4 个 <code>8x8</code> 的块，对每个 <code>8x8</code> 块分别调用 <code>x264_quant_function_t</code> 的 <code>quant_4x4x4()</code> 汇编函数进行量化。</li>
<li>c)分成 16 个 <code>4x4</code> 的块，对每个 <code>4x4</code> 块分别调用 <code>x264_quant_function_t</code> 的 <code>dequant_4x4()</code> 汇编函数进行反量化（用于重建帧）。</li>
<li>d)分成 4 个 <code>8x8</code> 的块，对每个 <code>8x8</code> 块分别调用 <code>x264_dct_function_t</code> 的 <code>add8x8_idct()</code> 汇编函数，对残差进行 DCT 反变换，并将反变换后的数据叠加（“add”）至预测数据上（用于重建帧）。</li>
</ul>
<p>（5）	如果对色度编码，调用 <code>x264_mb_encode_chroma()</code> 。</p>
<p>从 Inter 宏块编码的步骤可以看出，编码就是 “DCT变换+量化” 两步的组合。</p>
<p>简单整理一下 <code>x264_mb_encode_i16x16()</code> 的逻辑，如下所示：</p>
<p>（1）调用 <code>predict_16x16[]()</code> 汇编函数对重建宏块数据 <code>p_fdec</code> 进行帧内预测。</p>
<p>（2）调用 <code>x264_dct_function_t</code> 的 <code>sub16x16_dct()</code> 汇编函数，计算重建宏块数据 <code>p_fdec</code> 与编码宏块数据<code>p_fenc</code> 之间的残差，然后对残差做 DCT 变换。</p>
<p>（3）抽取出来 16 个 <code>4x4DCT</code> 小块的 DC 系数，存储于 <code>dct_dc4x4[]</code>。</p>
<p>（4）分成 4 个 <code>8x8</code> 的块，对每个 <code>8x8</code> 块分别调用 <code>x264_quant_function_t</code> 的 <code>quant_4x4x4()</code> 汇编函数进行量化。</p>
<p>（5）分成 16 个 <code>4x4</code> 的块，对每个 <code>4x4</code> 块分别调用 <code>x264_quant_function_t</code> 的 <code>dequant_4x4()</code> 汇编函数进行反量化（用于重建帧）。</p>
<p>（6）对于 <code>dct_dc4x4[]</code> 中 16 个小块的 DC 系数作如下处理：</p>
<ul>
<li>a)调用 <code>x264_dct_function_t</code> 的 <code>dct4x4dc()</code> 汇编函数进行 Hadamard 变换。</li>
<li>b)调用 <code>x264_quant_function_t</code> 的 <code>quant_4x4_dc()</code> 汇编函数进行 DC 系数的量化。</li>
<li>c)调用 <code>x264_dct_function_t</code> 的 <code>idct4x4dc()</code> 汇编函数进行 Hadamard 反变换。</li>
<li>d)调用 <code>x264_quant_function_t</code> 的 <code>dequant_4x4_dc()</code> 汇编函数进行 DC 系数的反量化。</li>
<li>e)将反量化后的 DC 系数重新放到 <code>16x16</code> 块对应的位置上。</li>
</ul>
<p>（7）调用 <code>x264_dct_function_t</code> 的 <code>add16x16_idct()</code> 汇编函数，对残差进行 DCT 反变换，并将反变换后的数据叠加（“add”）至预测数据上（用于重建帧）。</p>
<p>可以看出 <code>Intra16x16</code> 编码的过程就是一个 “DCT变换 + 量化 + Hadamard变换” 的流程。其中 “DCT变换 + 量化” 是一个通用的编码步骤，而 “Hadamard变换” 是专属于 <code>Intra16x16</code> 宏块的步骤。</p>
<p>简单整理一下 <code>x264_mb_encode_i4x4()</code> 的逻辑，如下所示：</p>
<p>（1）调用 <code>predict_4x4[]()</code> 汇编函数对重建宏块数据 <code>p_fdec</code> 进行帧内预测。</p>
<p>（2）调用 <code>x264_dct_function_t</code> 的 <code>sub4x4_dct ()</code> 汇编函数，计算重建宏块数据 <code>p_fdec</code> 与编码宏块数据 <code>p_fenc</code> 之间的残差，然后对残差做 DCT 变换。</p>
<p>（3）调用 <code>x264_quant_function_t</code> 的 <code>quant_4x4()</code> 汇编函数进行量化。</p>
<p>（4）调用 <code>x264_quant_function_t</code> 的 <code>dequant_4x4()</code> 汇编函数进行反量化（用于重建帧）。</p>
<p>（5）调用 <code>x264_dct_function_t</code> 的 <code>add4x4_idct()</code> 汇编函数，对残差进行 DCT 反变换，并将反变换后的数据叠加（“add”）至预测数据上（用于重建帧）。</p>
<p>可以看出 <code>Intra4x4</code> 编码的过程就是一个 “DCT变换 + 量化” 的流程。</p>
<h2 id="熵编码（Entropy-Encoding）部分"><a href="#熵编码（Entropy-Encoding）部分" class="headerlink" title="熵编码（Entropy Encoding）部分"></a>熵编码（Entropy Encoding）部分</h2><p><code>x264_macroblock_write_cavlc()</code> 对应着x264中的熵编码模块。熵编码模块主要完成了编码数据输出的功能。</p>
<h3 id="函数调用关系图-7"><a href="#函数调用关系图-7" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p><img data-src="/images/imageFFmpeg/Thor/x264_macroblock_write_cavlc.png" alt="熵编码（Entropy Encoding）部分的函数调用关系"></p>
<p>从图中可以看出，熵编码模块包含两个函数 <code>x264_macroblock_write_cabac()</code> 和<code>x264_macroblock_write_cavlc()</code>。如果输出设置为 CABAC 编码，则会调用<code>x264_macroblock_write_cabac()</code>；如果输出设置为 CAVLC 编码，则会调用 <code>x264_macroblock_write_cavlc()</code> 。本文选择 CAVLC 编码输出函数 <code>x264_macroblock_write_cavlc()</code> 进行分析。该函数调用了如下函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x264_cavlc_mb_header_i()		<span class="comment">// 写入I宏块MB Header数据。包含帧内预测模式等。</span></span><br><span class="line">x264_cavlc_mb_header_p()		<span class="comment">// 写入P宏块MB Header数据。包含MVD、参考帧序号等。</span></span><br><span class="line">x264_cavlc_mb_header_b()		<span class="comment">// 写入B宏块MB Header数据。包含MVD、参考帧序号等。</span></span><br><span class="line">x264_cavlc_qp_delta()			<span class="comment">// 写入QP。</span></span><br><span class="line">x264_cavlc_block_residual()		<span class="comment">// 写入残差数据。</span></span><br></pre></td></tr></table></figure>

<p>从源代码可以看出，<code>x264_macroblock_write_cavlc()</code> 的流程大致如下：</p>
<p>（1）根据 Slice 类型的不同，调用不同的函数输出宏块头（MB Header）：</p>
<ul>
<li>a)对于 <code>P Slice</code>，调用 <code>x264_cavlc_mb_header_p()</code></li>
<li>b)对于 <code>B Slice</code>，调用 <code>x264_cavlc_mb_header_b()</code></li>
<li>c)对于 <code>I Slice</code>，调用 <code>x264_cavlc_mb_header_i()</code></li>
</ul>
<p>（2）调用 <code>x264_cavlc_qp_delta()</code> 输出宏块 QP 值</p>
<p>（3）调用 <code>x264_cavlc_block_residual()</code> 输出 CAVLC 编码的残差数据</p>
<h2 id="FFmpeg与libx264接口源代码简单分析"><a href="#FFmpeg与libx264接口源代码简单分析" class="headerlink" title="FFmpeg与libx264接口源代码简单分析"></a>FFmpeg与libx264接口源代码简单分析</h2><p>本文简单记录一下 FFmpeg 的 libavcodec 中与 libx264 接口部分的源代码。该部分源代码位于 “libavcodec&#x2F;libx264.c” 中。正是有了这部分代码，使得 FFmpeg 可以调用 libx264 编码 H.264 视频。</p>
<h3 id="函数调用关系图-8"><a href="#函数调用关系图-8" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p><img data-src="/images/imageFFmpeg/Thor/%5BFFmpeg%E7%9A%84libavcodec%E4%B8%AD%E7%9A%84libx264%E7%9A%84%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB.png" alt="FFmpeg的libavcodec中的libx264.c的函数调用关系"></p>
<p>从图中可以看出，libx264 对应的 AVCodec 结构体 <code>ff_libx264_encoder</code> 中设定编码器初始化函数是 <code>X264_init()</code>，编码一帧数据的函数是 <code>X264_frame()</code>，编码器关闭函数是 <code>X264_close()</code>。</p>
<p><code>X264_init()</code> 调用了如下函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">[libx264 API] x264_param_default()			<span class="comment">// 设置默认参数。</span></span><br><span class="line">[libx264 API] x264_param_default_preset()	<span class="comment">// 设置默认preset。</span></span><br><span class="line">convert_pix_fmt() 	<span class="comment">// 将FFmpeg像素格式转换为libx264像素格式。</span></span><br><span class="line">[libx264 API] x264_param_apply_profile()	<span class="comment">// 设置Profile。</span></span><br><span class="line">[libx264 API] x264_encoder_open()			<span class="comment">// 打开编码器。</span></span><br><span class="line">[libx264 API] x264_encoder_headers()		<span class="comment">// 需要全局头的时候，输出头信息。</span></span><br></pre></td></tr></table></figure>

<p>X264_frame()调用了如下函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">[libx264 API] x264_encoder_encode()				<span class="comment">// 编码一帧数据。</span></span><br><span class="line">[libx264 API] x264_encoder_delayed_frames()		<span class="comment">// 输出编码器中缓存的数据。</span></span><br><span class="line">encode_nals() 	<span class="comment">// 将编码后得到的x264_nal_t转换为AVPacket。</span></span><br></pre></td></tr></table></figure>

<p><code>X264_close()</code> 调用了如下函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">[libx264 API] x264_encoder_close()	<span class="comment">// 关闭编码器。</span></span><br></pre></td></tr></table></figure>

<h1 id="解码-libavcodec-H-264-解码器"><a href="#解码-libavcodec-H-264-解码器" class="headerlink" title="解码 - libavcodec H.264 解码器"></a>解码 - libavcodec H.264 解码器</h1><h2 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h2><p>本文简单记录 FFmpeg 中 libavcodec 的 H.264 解码器（H.264 Decoder）的源代码。这个 H.264 解码器十分重要，可以说 FFmpeg 项目今天可以几乎“垄断”视音频编解码技术，很大一部分贡献就来自于这个 H.264 解码器。这个 H.264 解码器一方面功能强大，性能稳定；另一方面源代码也比较复杂，难以深入研究。本文打算梳理一下这个 H.264 解码器的源代码结构，以方便以后深入学习 H.264 使用。</p>
<blockquote>
<p>PS：这部分代码挺复杂的，还有不少地方还比较模糊，还需要慢慢学习……</p>
</blockquote>
<h3 id="函数调用关系图-9"><a href="#函数调用关系图-9" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p>H.264解码器的函数调用关系图如下所示。</p>
<p><img data-src="/images/imageFFmpeg/Thor/H.264%E8%A7%A3%E7%A0%81%E5%99%A8%E7%9A%84%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB%E5%9B%BE.png" alt="H.264解码器的函数调用关系图"></p>
<p>下面解释一下图中关键标记的含义。</p>
<h4 id="作为接口的结构体"><a href="#作为接口的结构体" class="headerlink" title="作为接口的结构体"></a>作为接口的结构体</h4><p>FFmpeg和H.264解码器之间作为接口的结构体有2个：</p>
<ul>
<li><code>ff_h264_parser</code>：用于解析 H.264 码流的 AVCodecParser 结构体。</li>
<li><code>ff_h264_decoder</code>：用于解码 H.264 码流的 AVCodec 结构体。</li>
</ul>
<h4 id="函数背景色-1"><a href="#函数背景色-1" class="headerlink" title="函数背景色"></a>函数背景色</h4><p>函数在图中以方框的形式表现出来。不同的背景色标志了该函数不同的作用：</p>
<ul>
<li>白色背景的函数：普通内部函数。</li>
<li>粉红色背景函数：解析函数（Parser）。这些函数用于解析SPS、PPS等信息。</li>
<li>紫色背景的函数：熵解码函数（Entropy Decoding）。这些函数读取码流数据并且进行CABAC或者CAVLC熵解码。</li>
<li>绿色背景的函数：解码函数（Decode）。这些函数通过帧内预测、帧间预测、DCT反变换等方法解码压缩数据。</li>
<li>黄色背景的函数：环路滤波函数（Loop Filter）。这些函数对解码后的数据进行滤波，去除方块效应。</li>
<li>蓝色背景函数：汇编函数（Assembly）。这些函数是做过汇编优化的函数。图中主要画出了这些函数的C语言版本，此外这些函数还包含MMX版本、SSE版本、NEON版本等。</li>
</ul>
<h4 id="箭头线-1"><a href="#箭头线-1" class="headerlink" title="箭头线"></a>箭头线</h4><p>箭头线标志了函数的调用关系：</p>
<ul>
<li>黑色箭头线：不加区别的调用关系。</li>
<li>粉红色的箭头线：解析函数（Parser）之间的调用关系。</li>
<li>紫色箭头线：熵解码函数（Entropy Decoding）之间的调用关系。</li>
<li>绿色箭头线：解码函数（Decode）之间的调用关系。</li>
<li>黄色箭头线：环路滤波函数（Loop Filter）之间的调用关系。</li>
</ul>
<h4 id="函数所在的文件-1"><a href="#函数所在的文件-1" class="headerlink" title="函数所在的文件"></a>函数所在的文件</h4><p>每个函数标识了它所在的文件路径。</p>
<h3 id="几个关键部分"><a href="#几个关键部分" class="headerlink" title="几个关键部分"></a>几个关键部分</h3><p>下文简单记录几个关键的部分。</p>
<h4 id="FFmpeg和H-264解码器之间作为接口的结构体"><a href="#FFmpeg和H-264解码器之间作为接口的结构体" class="headerlink" title="FFmpeg和H.264解码器之间作为接口的结构体"></a>FFmpeg和H.264解码器之间作为接口的结构体</h4><p>FFmpeg和H.264解码器之间作为接口的结构体有2个：ff_h264_parser和ff_h264_decoder。</p>
<p><strong>ff_h264_parser</strong></p>
<p>ff_h264_parser是用于解析H.264码流的AVCodecParser结构体。AVCodecParser中包含了几个重要的函数指针：</p>
<ul>
<li><strong>parser_init()：初始化解析器。</strong></li>
<li><strong>parser_parse()：解析。</strong></li>
<li><strong>parser_close()：关闭解析器。</strong></li>
</ul>
<p>在ff_h264_parser结构体中，上述几个函数指针分别指向下面几个实现函数：</p>
<ul>
<li><strong>init()：初始化H.264解析器。</strong></li>
<li><strong>h264_parse()：解析H.264码流。</strong></li>
<li><strong>close()：关闭H.264解析器。</strong></li>
</ul>
<p><strong>ff_h264_decoder</strong></p>
<p>ff_h264_decoder是用于解码H.264码流的AVCodec结构体。AVCodec中包含了几个重要的函数指针：</p>
<ul>
<li><strong>init()：初始化解码器。</strong></li>
<li><strong>decode()：解码。</strong></li>
<li><strong>close()：关闭解码器。</strong></li>
</ul>
<p>在ff_h264_decoder结构体中，上述几个函数指针分别指向下面几个实现函数：</p>
<ul>
<li><p><strong>ff_h264_decode_init()：初始化H.264解码器。</strong></p>
</li>
<li><p><strong>h264_decode_frame()：解码H.264码流。</strong></p>
</li>
<li><p><strong>h264_decode_end()：关闭H.264解码器。</strong></p>
</li>
</ul>
<h4 id="普通内部函数"><a href="#普通内部函数" class="headerlink" title="普通内部函数"></a>普通内部函数</h4><p>普通内部函数指的是H.264解码器中还没有进行分类的函数。下面举几个例子。</p>
<p>ff_h264_decoder中ff_h264_decode_init()调用的初始化函数：</p>
<ul>
<li><strong>ff_h264dsp_init()：初始化DSP相关的函数。包含了IDCT、环路滤波函数等。</strong></li>
<li><strong>ff_h264qpel_init()：初始化四分之一像素运动补偿相关的函数。</strong></li>
<li><strong>ff_h264_pred_init()：初始化帧内预测相关的函数。</strong></li>
<li><strong>ff_h264_decode_extradata()：解析AVCodecContext中的extradata。</strong></li>
</ul>
<p>ff_h264_decoder中h264_decode_frame()逐层调用的和解码Slice相关的函数：</p>
<ul>
<li><strong>decode_nal_units()，ff_h264_execute_decode_slices()，decode_slice()等。</strong></li>
</ul>
<p>ff_h264_decoder中h264_decode_end()调用的清理函数：</p>
<ul>
<li><strong>ff_h264_remove_all_refs()：移除所有参考帧。</strong></li>
<li><strong>ff_h264_free_context()：释放在初始化H.264解码器的时候分配的内存。</strong></li>
</ul>
<p>ff_h264_parser中h264_parse()逐层调用的和解析Slice相关的函数：</p>
<ul>
<li><p><strong>h264_find_frame_end()：查找NALU的结尾。</strong></p>
</li>
<li><p><strong>parse_nal_units()：解析一个NALU。</strong></p>
</li>
</ul>
<h4 id="解析函数（Parser）"><a href="#解析函数（Parser）" class="headerlink" title="解析函数（Parser）"></a><font style="color:rgb(255,153,255);">解析函数（Parser）</font></h4><p>解析函数（Parser）用于解析H.264码流中的一些信息（例如SPS、PPS、Slice Header等）。在parse_nal_units()和decode_nal_units()中都调用这些解析函数完成了解析。下面举几个解析函数的例子。</p>
<ul>
<li><strong>ff_h264_decode_nal()：解析NALU。这个函数是后几个解析函数的前提。</strong></li>
<li><strong>ff_h264_decode_slice_header()：解析Slice Header。</strong></li>
<li><strong>ff_h264_decode_sei()：解析SEI。</strong></li>
<li><strong>ff_h264_decode_seq_parameter_set()：解析SPS。</strong></li>
<li><strong>ff_h264_decode_picture_parameter_set()：解析PPS。</strong></li>
</ul>
<h4 id="熵解码函数（Entropy-Decoding）"><a href="#熵解码函数（Entropy-Decoding）" class="headerlink" title="熵解码函数（Entropy Decoding）"></a><font style="color:#993399;">熵解码函数（Entropy Decoding）</font></h4><p>熵解码函数（Entropy Decoding）读取码流数据并且进行CABAC或者CAVLC熵解码。CABAC解码函数是ff_h264_decode_mb_cabac()，CAVLC解码函数是ff_h264_decode_mb_cavlc()。熵解码函数中包含了很多的读取指数哥伦布编码数据的函数，例如get_ue_golomb_long()，get_ue_golomb()，get_se_golomb()，get_ue_golomb_31()等等。</p>
<p>在获取残差数据的时候需要进行CAVLC&#x2F;CABAC解码。例如解码CAVLC的时候，会调用decode_residual()函数，而decode_residual()会调用get_vlc2()函数，get_vlc2()会调用OPEN_READER()，UPDATE_CACHE()，GET_VLC()，CLOSE_READER()几个函数读取CAVLC格式的数据。<br>此外，在获取运动矢量的时候，会调用pred_motion()以及类似的几个函数获取运动矢量相关的信息。</p>
<h4 id="解码函数（Decode）"><a href="#解码函数（Decode）" class="headerlink" title="解码函数（Decode）"></a><font style="color:#009900;">解码函数（Decode）</font></h4><p>解码函数（Decode）通过帧内预测、帧间预测、DCT反变换等方法解码压缩数据。解码函数是<code>ff_h264_hl_decode_mb()</code>。其中跟宏块类型的不同，会调用几个不同的函数，最常见的就是调用<code>hl_decode_mb_simple_8()</code>。</p>
<p><code>hl_decode_mb_simple_8()</code> 的定义是无法在源代码中直接找到的，这是因为它实际代码的函数名称是使用宏的方式写的（以后再具体分析）。<code>hl_decode_mb_simple_8()</code>的源代码实际上就是 <code>FUNC(hl_decode_mb)()</code> 函数的源代码。</p>
<p><code>FUNC(hl_decode_mb)()</code>根据宏块类型的不同作不同的处理：如果宏块类型是INTRA，就会调用<code>hl_decode_mb_predict_luma()</code> 进行帧内预测；如果宏块类型不是INTRA，就会调用<code>FUNC(hl_motion_422)()</code> 或者 <code>FUNC(hl_motion_420)()</code> 进行四分之一像素运动补偿。</p>
<p>随后 <code>FUNC(hl_decode_mb)()</code> 会调用 <code>hl_decode_mb_idct_luma()</code> 等几个函数对数据进行DCT反变换工作。</p>
<h4 id="环路滤波函数（Loop-Filter）"><a href="#环路滤波函数（Loop-Filter）" class="headerlink" title="环路滤波函数（Loop Filter）"></a><font style="color:#ffcc00;">环路滤波函数（Loop Filter）</font></h4><p>环路滤波函数（Loop Filter）对解码后的数据进行滤波，去除方块效应。环路滤波函数是loop_filter()。其中调用了ff_h264_filter_mb()和ff_h264_filter_mb_fast()。ff_h264_filter_mb_fast()中又调用了h264_filter_mb_fast_internal()。而h264_filter_mb_fast_internal()中又调用了下面几个函数进行滤波：</p>
<ul>
<li><p><strong>filter_mb_edgeh()：亮度水平滤波</strong></p>
</li>
<li><p><strong>filter_mb_edgev()：亮度垂直滤波</strong></p>
</li>
<li><p><strong>filter_mb_edgech()：色度水平滤波</strong></p>
</li>
<li><p><strong>filter_mb_edgecv()：色度垂直滤波</strong></p>
</li>
</ul>
<h4 id="汇编函数（Assembly）"><a href="#汇编函数（Assembly）" class="headerlink" title="汇编函数（Assembly）"></a><font style="color:#3333ff;">汇编函数（Assembly）</font></h4><p>汇编函数（Assembly）是做过汇编优化的函数。为了提高效率，整个H.264解码器中（主要在解码部分和环路滤波部分）包含了大量的汇编函数。实际解码的过程中，FFmpeg会根据系统的特性调用相应的汇编函数（而不是C语言函数）以提高解码的效率。如果系统不支持汇编优化的话，FFmpeg才会调用C语言版本的函数。例如在帧内预测的时候，对于16x16亮度DC模式，有以下几个版本的函数：</p>
<ul>
<li>C语言版本的pred16x16_dc_8_c()</li>
<li>NEON版本的ff_pred16x16_dc_neon()</li>
<li>MMXEXT版本的ff_pred16x16_dc_8_mmxext()</li>
<li>SSE2版本的ff_pred16x16_dc_8_sse2()</li>
</ul>
<h3 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h3><p>在网上找到一张图（出处不详），分析了FFmpeg的H.264解码器每个函数运行的耗时情况，比较有参考意义，在这里附上。</p>
<p><img data-src="/images/imageFFmpeg/Thor/H.264%E8%A7%A3%E7%A0%81%E5%99%A8%E6%AF%8F%E4%B8%AA%E5%87%BD%E6%95%B0%E8%BF%90%E8%A1%8C%E7%9A%84%E8%80%97%E6%97%B6%E6%83%85%E5%86%B5.png" alt="H.264解码器每个函数运行的耗时情况"></p>
<p>从图中可以看出，熵解码、宏块解码、环路滤波耗时比例分别为：23.64%、51.85%、22.22%。</p>
<h2 id="解析器（Parser）部分"><a href="#解析器（Parser）部分" class="headerlink" title="解析器（Parser）部分"></a>解析器（Parser）部分</h2><p>本文继续分析FFmpeg中libavcodec的H.264解码器（H.264 Decoder）。上篇文章概述了FFmpeg中H.264解码器的结构；从这篇文章开始，具体研究H.264解码器的源代码。本文分析H.264解码器中解析器（Parser）部分的源代码。这部分的代码用于分割H.264的NALU，并且解析SPS、PPS、SEI等信息。解析H.264码流（对应AVCodecParser结构体中的函数）和解码H.264码流（对应AVCodec结构体中的函数）的时候都会调用该部分的代码完成相应的功能。</p>
<h3 id="函数调用关系图-10"><a href="#函数调用关系图-10" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p><img data-src="/images/imageFFmpeg/Thor/%E8%A7%A3%E6%9E%90%E5%99%A8%E9%83%A8%E5%88%86%E7%9A%84%E6%BA%90%E4%BB%A3%E7%A0%81%E7%9A%84%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB.png" alt="解析器（Parser）部分的源代码的调用关系"></p>
<p>从图中可以看出，H.264的解析器（Parser）在解析数据的时候调用 <code>h264_parse()</code>，<code>h264_parse()</code> 调用了<code>parse_nal_units()</code>，<code>parse_nal_units()</code> 则调用了一系列解析特定 NALU 的函数。H.264 的解码器（Decoder）在解码数据的时候调用 <code>h264_decode_frame()</code>，<code>h264_decode_frame()</code> 调用了<code>decode_nal_units()</code>，<code>decode_nal_units()</code> 也同样调用了一系列解析不同 NALU 的函数。</p>
<p>图中简单列举了几个解析特定 NALU 的函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">ff_h264_decode_nal()					<span class="comment">// 解析 NALU Header</span></span><br><span class="line">ff_h264_decode_seq_parameter_set()		<span class="comment">// 解析 SPS</span></span><br><span class="line">ff_h264_decode_picture_parameter_set()	<span class="comment">// 解析 PPS</span></span><br><span class="line">ff_h264_decode_sei()					<span class="comment">// 解析 SEI</span></span><br></pre></td></tr></table></figure>

<p>H.264 解码器与 H.264 解析器最主要的不同的地方在于它调用了 <code>ff_h264_execute_decode_slices()</code> 函数进行了解码工作。这篇文章只分析 H.264 解析器的源代码，至于 H.264 解码器的源代码，则在后面几篇文章中再进行分析。</p>
<h4 id="h264-find-frame-end"><a href="#h264-find-frame-end" class="headerlink" title="h264_find_frame_end()"></a>h264_find_frame_end()</h4><p><code>h264_find_frame_end()</code> 用于查找 H.264 码流中的 “起始码”（start code）。在 H.264 码流中有两种起始码： <code>0x000001</code> 和 <code>0x00000001</code>。其中 4Byte 的长度的起始码最为常见。只有当一个完整的帧被编为多个 slice 的时候，包含这些 slice 的 NALU 才会使用 3Byte 的起始码。<code>h264_find_frame_end()</code> 的定义位于<code>libavcodec\h264_parser.c</code></p>
<p>从源代码可以看出，<code>h264_find_frame_end()</code> 使用了一种类似于状态机的方式查找起始码。函数中的 <code>for()</code> 循环每执行一遍，状态机的状态就会改变一次。该状态机主要包含以下几种状态：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">7 - 初始化状态</span><br><span class="line">2 - 找到1个0</span><br><span class="line">1 - 找到2个0</span><br><span class="line">0 - 找到大于等于3个0</span><br><span class="line">4 - 找到2个0和1个1，即001（即找到了起始码）</span><br><span class="line">5 - 找到至少3个0和1个1，即0001等等（即找到了起始码）</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">=8 - 找到2个Slice Header</span></span><br></pre></td></tr></table></figure>

<p>这些状态之间的状态转移图如下所示。图中粉红色代表初始状态，绿色代表找到“起始码”的状态。</p>
<p><img data-src="/images/imageFFmpeg/Thor/h264_find_frame_end%E7%8A%B6%E6%80%81%E8%BD%AC%E7%A7%BB.png" alt="状态之间的状态转移"></p>
<p>如图所示，<code>h264_find_frame_end()</code> 初始化时候位于状态 “7”；当找到 1 个 “0” 之后，状态从 “7” 变为 “2”；在状态 “2” 下，如果再次找到 1 个 “0”，则状态变为 “1”；在状态 “1” 下，如果找到 “1”，则状态变换为 “4”，表明找到了 “0x000001” 起始码；在状态 “1” 下，如果找到 “0”，则状态变换为 “0”；在状态 “0” 下，如果找到 “1”，则状态变换为 “5” ，表明找到了 “0x000001” 起始码。</p>
<p><code>parse_nal_units()</code> 主要做了以下几步处理：</p>
<p>（1）对于所有的 NALU，都调用 <code>ff_h264_decode_nal</code> 解析 NALU 的 Header，得到 nal_unit_type 等信息</p>
<p>（2）根据 nal_unit_type 的不同，调用不同的解析函数进行处理。例如：</p>
<ul>
<li><p>a)解析 SPS 的时候调用 <code>ff_h264_decode_seq_parameter_set()</code></p>
</li>
<li><p>b)解析 PPS 的时候调用 <code>ff_h264_decode_picture_parameter_set()</code></p>
</li>
<li><p>c)解析 SEI 的时候调用 <code>ff_h264_decode_sei()</code></p>
</li>
<li><p>d)解析 IDR Slice &#x2F; Slice 的时候，获取 slice_type 等一些信息。</p>
</li>
</ul>
<h2 id="解码器主干部分"><a href="#解码器主干部分" class="headerlink" title="解码器主干部分"></a>解码器主干部分</h2><p>本文分析FFmpeg的H.264解码器的主干部分。“主干部分” 是相对于 “熵解码”、“宏块解码”、“环路滤波” 这些细节部分而言的。它包含了 H.264 解码器直到 <code>decode_slice()</code> 前面的函数调用关系（<code>decode_slice()</code> 后面就是H.264解码器的细节部分，主要包含了 “熵解码”、“宏块解码”、“环路滤波” 3个部分）。</p>
<h3 id="函数调用关系图-11"><a href="#函数调用关系图-11" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p><img data-src="/images/imageFFmpeg/Thor/%E8%A7%A3%E7%A0%81%E5%99%A8%E4%B8%BB%E5%B9%B2%E9%83%A8%E5%88%86%E7%9A%84%E6%BA%90%E4%BB%A3%E7%A0%81%E7%9A%84%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB.png" alt="解码器主干部分的源代码的调用关系"></p>
<p>从图中可以看出，H.264解码器（Decoder）在初始化的时候调用了 <code>ff_h264_decode_init()</code>，<code>ff_h264_decode_init()</code> 又调用了下面几个函数进行解码器汇编函数的初始化工作（仅举了几个例子）：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">ff_h264dsp_init()		<span class="comment">// 初始化DSP相关的汇编函数。包含了IDCT、环路滤波函数等。</span></span><br><span class="line">ff_h264qpel_init()		<span class="comment">// 初始化四分之一像素运动补偿相关的汇编函数。</span></span><br><span class="line">ff_h264_pred_init()		<span class="comment">// 初始化帧内预测相关的汇编函数。</span></span><br></pre></td></tr></table></figure>

<p>H.264 解码器在关闭的时候调用了 <code>h264_decode_end()</code>，<code>h264_decode_end()</code> 又调用了<code>ff_h264_remove_all_refs()</code>，<code>ff_h264_free_context()</code> 等几个函数进行清理工作。<br>H.264 解码器在解码图像帧的时候调用了 <code>h264_decode_frame()</code>，<code>h264_decode_frame()</code> 调用了 <code>decode_nal_units()</code>，<code>decode_nal_units()</code> 调用了两类函数——解析函数和解码函数，如下所示。</p>
<p>（1）解析函数（获取信息）：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">ff_h264_decode_nal()				<span class="comment">// 解析NALU Header。</span></span><br><span class="line">ff_h264_decode_seq_parameter_set()	<span class="comment">// 解析SPS。</span></span><br><span class="line">ff_h264_decode_picture_parameter_set()	<span class="comment">// 解析PPS。</span></span><br><span class="line">ff_h264_decode_sei()	<span class="comment">// 解析SEI。</span></span><br><span class="line">ff_h264_decode_slice_header()	<span class="comment">// 解析Slice Header。</span></span><br></pre></td></tr></table></figure>

<p>（2）解码函数（解码获得图像）：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">ff_h264_execute_decode_slices() 	<span class="comment">// 解码Slice。</span></span><br></pre></td></tr></table></figure>

<p>其中 <code>ff_h264_execute_decode_slices()</code> 调用了 <code>decode_slice()</code>，而 <code>decode_slice()</code> 中调用了解码器中细节处理的函数（暂不详细分析）：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">ff_h264_decode_mb_cabac()	<span class="comment">// CABAC熵解码函数。</span></span><br><span class="line">ff_h264_decode_mb_cavlc()	<span class="comment">// CAVLC熵解码函数。</span></span><br><span class="line">ff_h264_hl_decode_mb()		<span class="comment">// 宏块解码函数。</span></span><br><span class="line">loop_filter()				<span class="comment">// 环路滤波函数。</span></span><br></pre></td></tr></table></figure>

<p><code>h264_decode_frame()</code> 根据输入的 AVPacket 的 data 是否为空作不同的处理：</p>
<p>（1）若果输入的 AVPacket 的 data 为空，则调用 <code>output_frame()</code> 输出 <code>delayed_pic[]</code> 数组中的H264Picture，即输出解码器中缓存的帧（对应的是通常称为 “Flush Decoder” 的功能）。</p>
<p>（2）若果输入的 AVPacket 的 data 不为空，则首先调用 <code>decode_nal_units()</code> 解码 AVPacket 的 data，然后再调用 <code>output_frame()</code> 输出解码后的视频帧（有一点需要注意：由于帧重排等因素，输出的 AVFrame 并非对应于输入的 AVPacket）。</p>
<p><code>decode_nal_units()</code> 首先调用 <code>ff_h264_decode_nal()</code> 判断 NALU 的类型，然后根据 NALU 类型的不同调用了不同的处理函数。这些处理函数可以分为两类——解析函数和解码函数，如下所示。</p>
<p>（1）解析函数（获取信息）：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">ff_h264_decode_seq_parameter_set()		<span class="comment">// 解析SPS。</span></span><br><span class="line">ff_h264_decode_picture_parameter_set()	<span class="comment">// 解析PPS。</span></span><br><span class="line">ff_h264_decode_sei()					<span class="comment">// 解析SEI。</span></span><br><span class="line">ff_h264_decode_slice_header()			<span class="comment">// 解析Slice Header。</span></span><br></pre></td></tr></table></figure>

<p>（2）解码函数（解码得到图像）：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">ff_h264_execute_decode_slices()	<span class="comment">// 解码Slice。</span></span><br></pre></td></tr></table></figure>

<p><code>decode_slice()</code> 按照宏块（<code>16x16</code>）的方式处理输入的视频流。每个宏块的压缩数据经过以下 3 个基本步骤的处理，得到解码后的数据：</p>
<p>（1）熵解码。如果熵编码为 CABAC，则调用 <code>ff_h264_decode_mb_cabac()</code>；如果熵编码为 CAVLC，则调用 <code>ff_h264_decode_mb_cavlc()</code></p>
<p>（2）宏块解码。这一步骤调用 <code>ff_h264_hl_decode_mb()</code></p>
<p>（3）环路滤波。这一步骤调用 <code>loop_filter()</code></p>
<p>此外，还有可能调用错误隐藏函数 <code>er_add_slice()</code>。</p>
<p>至此，<code>decode_nal_units()</code> 函数的调用流程就基本分析完毕了。<code>h264_decode_frame()</code> 在调用完 <code>decode_nal_units()</code> 之后，还需要把解码后得到的 H264Picture 转换为 AVFrame 输出出来，这时候会调用一个相对比较简单的函数 <code>output_frame()</code>。</p>
<h2 id="熵解码（Entropy-Decoding）部分"><a href="#熵解码（Entropy-Decoding）部分" class="headerlink" title="熵解码（Entropy Decoding）部分"></a>熵解码（Entropy Decoding）部分</h2><p>FFmpeg的H.264解码器调用 <code>decode_slice()</code> 函数完成了解码工作。这些解码工作可以大体上分为3个步骤：熵解码，宏块解码以及环路滤波。本文分析这3个步骤中的第1个步骤。</p>
<h3 id="函数调用关系图-12"><a href="#函数调用关系图-12" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p><img data-src="/images/imageFFmpeg/Thor/%E7%86%B5%E8%A7%A3%E7%A0%81%E9%83%A8%E5%88%86%E7%9A%84%E6%BA%90%E4%BB%A3%E7%A0%81%E7%9A%84%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB.png" alt="熵解码（Entropy Decoding）部分的源代码的调用关系"></p>
<p>从图中可以看出，FFmpeg的熵解码方面的函数有两个：<code>ff_h264_decode_mb_cabac()</code> 和 <code>ff_h264_decode_mb_cavlc()</code>。</p>
<ul>
<li><code>ff_h264_decode_mb_cabac()</code> 用于解码 CABAC 编码方式的 H.264 数据，</li>
<li><code>ff_h264_decode_mb_cavlc()</code>用于解码 CAVLC 编码方式的 H.264 数据。</li>
</ul>
<p>本文挑选了<code>ff_h264_decode_mb_cavlc()</code> 函数进行分析。</p>
<p><code>ff_h264_decode_mb_cavlc()</code> 调用了很多的读取指数哥伦布编码数据的函数，例如 <code>get_ue_golomb_long()</code>，<code>get_ue_golomb()，get_se_golomb()</code>，<code>get_ue_golomb_31()</code> 等。此外在解码残差数据的时候，调用了 <code>decode_residual()</code>函数，而 <code>decode_residual()</code> 会调用 <code>get_vlc2()</code> 函数读取 CAVLC 编码数据。</p>
<p>总而言之，“熵解码” 部分的作用就是按照 H.264 语法和语义的规定，读取数据（宏块类型、运动矢量、参考帧、残差等）并且赋值到 FFmpeg H.264 解码器中相应的变量上。需要注意的是，“熵解码” 部分并不使用这些变量还原视频数据。还原视频数据的功能在下一步 “宏块解码” 步骤中完成。</p>
<p>在开始看 <code>ff_h264_decode_mb_cavlc()</code> 之前先回顾一下 <code>decode_slice()</code> 函数。</p>
<p><code>decode_slice()</code> 的的流程如下：</p>
<p>（1）判断 H.264 码流是 CABAC 编码还是 CAVLC 编码，进入不同的处理循环。</p>
<p>（2）如果是 CABAC 编码，首先调用 <code>ff_init_cabac_decoder()</code> 初始化 CABAC 解码器。然后进入一个循环，依次对每个宏块进行以下处理：</p>
<ul>
<li><p>a)调用 <code>ff_h264_decode_mb_cabac()</code>进行 CABAC 熵解码</p>
</li>
<li><p>b)调用 <code>ff_h264_hl_decode_mb()</code> 进行宏块解码</p>
</li>
<li><p>c)解码一行宏块之后调用 <code>loop_filter()</code> 进行环路滤波</p>
</li>
<li><p>d)此外还有可能调用 <code>er_add_slice()</code> 进行错误隐藏处理</p>
</li>
</ul>
<p>（3）如果是 CABAC 编码，直接进入一个循环，依次对每个宏块进行以下处理：</p>
<ul>
<li><p>a)调用 <code>ff_h264_decode_mb_cavlc()</code> 进行 CAVLC 熵解码</p>
</li>
<li><p>b)调用 <code>ff_h264_hl_decode_mb()</code> 进行宏块解码</p>
</li>
<li><p>c)解码一行宏块之后调用 <code>loop_filter()</code> 进行环路滤波</p>
</li>
<li><p>d)此外还有可能调用 <code>er_add_slice()</code> 进行错误隐藏处理</p>
</li>
</ul>
<p>可以看出，出了熵解码以外，宏块解码和环路滤波的函数是一样的。</p>
<p><code>ff_h264_decode_mb_cavlc()</code> 的定义有将近 1000 行代码，算是一个比较复杂的函数了。我在其中写了不少注释，因此不再对源代码进行详细的分析。下面先简单梳理一下它的流程：</p>
<p>（1）解析 Skip 类型宏块</p>
<p>（2）获取 <code>mb_type</code></p>
<p>（3）填充当前宏块左边和上边宏块的信息（后面的预测中会用到）</p>
<p>（4）根据 <code>mb_type</code> 的不同，分成三种情况进行预测工作：</p>
<ul>
<li><p>a)宏块是帧内预测</p>
<ul>
<li>i.如果宏块是 <code>Intra4x4</code> 类型，则需要单独解析帧内预测模式。</li>
<li>ii.如果宏块是 <code>Intra16x16</code> 类型，则不再做过多处理。</li>
</ul>
</li>
<li><p>b)宏块划分为 4 个块（此时每个 <code>8x8</code> 的块可以再次划分为 4 种类型）</p>
<p>这个时候每个 <code>8x8</code> 的块可以再次划分为 <code>8x8、8x4、4x8、4x4</code> 几种子块。需要分别处理这些小的子块：</p>
<ul>
<li>i.解析子块的参考帧序号</li>
<li>ii.解析子块的运动矢量</li>
</ul>
</li>
<li><p>c)其它类型（包括 <code>16x16，16x8，8x16</code> 几种划分，这些划分不可再次划分）</p>
<p>这个时候需要判断宏块的类型为 <code>16x16，16x8</code> 还是 <code>8x16</code>，然后作如下处理：</p>
<ul>
<li>i.解析子宏块的参考帧序号</li>
<li>ii.解析子宏块的运动矢量</li>
</ul>
</li>
</ul>
<p>（5）解码残差信息</p>
<p>（6）将宏块的各种信息输出到整个图片相应的变量中</p>
<h4 id="各种-Cache（缓存）"><a href="#各种-Cache（缓存）" class="headerlink" title="各种 Cache（缓存）"></a>各种 Cache（缓存）</h4><p>在 H.264 解码器中包含了各种各样的 Cache（缓存）。例如：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">intra4x4_pred_mode_cache	<span class="comment">// Intra4x4帧内预测模式的缓存</span></span><br><span class="line">non_zero_count_cache		<span class="comment">// 每个4x4块的非0系数个数的缓存</span></span><br><span class="line">mv_cache					<span class="comment">// 运动矢量缓存</span></span><br><span class="line">ref_cache					<span class="comment">// 运动矢量参考帧的缓存</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><a href="https://blog.csdn.net/leixiaohua1020/article/details/45114453">其他知识查看</a></p>
</blockquote>
<h2 id="宏块解码（Decode）部分-帧内宏块（Intra）"><a href="#宏块解码（Decode）部分-帧内宏块（Intra）" class="headerlink" title="宏块解码（Decode）部分-帧内宏块（Intra）"></a>宏块解码（Decode）部分-帧内宏块（Intra）</h2><p>FFmpeg的H.264解码器调用 <code>decode_slice()</code> 函数完成了解码工作。这些解码工作可以大体上分为3个步骤：熵解码，宏块解码以及环路滤波。本文分析这3个步骤中的第2个步骤。由于宏块解码部分的内容比较多，因此将本部分内容拆分成两篇文章：一篇文章记录帧内预测宏块（Intra）的宏块解码，另一篇文章记录帧间预测宏块（Inter）的宏块解码。</p>
<h3 id="函数调用关系图-13"><a href="#函数调用关系图-13" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p><img data-src="/images/imageFFmpeg/Thor/%E5%AE%8F%E5%9D%97%E8%A7%A3%E7%A0%81%E9%83%A8%E5%88%86%E7%9A%84%E6%BA%90%E4%BB%A3%E7%A0%81%E7%9A%84%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB.png" alt="宏块解码（Decode）部分的源代码的调用关系"></p>
<p>宏块解码函数（Decode）通过帧内预测、帧间预测、DCT 反变换等方法解码压缩数据。解码函数是 <code>ff_h264_hl_decode_mb()</code>。其中跟宏块类型的不同，会调用几个不同的函数，最常见的就是调用 <code>hl_decode_mb_simple_8()</code>。</p>
<p><code>hl_decode_mb_simple_8()</code> 的定义是无法在源代码中直接找到的，这是因为它实际代码的函数名称是使用宏的方式写的。<code>hl_decode_mb_simple_8()</code> 的源代码实际上就是 <code>FUNC(hl_decode_mb)()</code> 函数的源代码。</p>
<p>从函数调用图中可以看出，<code>FUNC(hl_decode_mb)()</code> 根据宏块类型的不同作不同的处理：</p>
<ul>
<li>如果帧内预测宏块（INTRA），就会调用 <code>hl_decode_mb_predict_luma()</code> 进行帧内预测；</li>
<li>如果是帧间预测宏块（INTER），就会调用 <code>FUNC(hl_motion_422)()</code> 或者 <code>FUNC(hl_motion_420)()</code> 进行四分之一像素运动补偿。</li>
</ul>
<p>经过帧内预测或者帧间预测步骤之后，就得到了预测数据。随后 <code>FUNC(hl_decode_mb)()</code> 会调用 <code>hl_decode_mb_idct_luma()</code> 等几个函数对残差数据进行 DCT 反变换工作，并将变换后的数据叠加到预测数据上，形成解码后的图像数据。</p>
<p>由于帧内预测宏块和帧间预测宏块的解码工作都比较复杂，因此分成两篇文章记录这两部分的源代码。本文记录帧内预测宏块解码时候的源代码。</p>
<p>下面简单梳理一下 <code>FUNC(hl_decode_mb)</code> 的流程（在这里只考虑亮度分量的解码，色度分量的解码过程是类似的）：</p>
<p>（1）预测</p>
<ul>
<li>a)如果是帧内预测宏块（Intra），调用 <code>hl_decode_mb_predict_luma()</code> 进行帧内预测，得到预测数据。</li>
<li>b)如果不是帧内预测宏块（Inter），调用 <code>FUNC(hl_motion_420)()</code> 或者 <code>FUNC(hl_motion_422)()</code> 进行帧间预测（即运动补偿），得到预测数据。</li>
</ul>
<p>（2）残差叠加</p>
<ul>
<li>a)调用 <code>hl_decode_mb_idct_luma()</code> 对 DCT 残差数据进行 DCT 反变换，获得残差像素数据并且叠加到之前得到的预测数据上，得到最后的图像数据。</li>
</ul>
<p>PS：该流程中有一个重要的贯穿始终的内存指针 <code>dest_y</code>，其指向的内存中存储了解码后的亮度数据。</p>
<p>根据原代码梳理一下 <code>hl_decode_mb_predict_luma()</code> 的主干：</p>
<p>（1）如果宏块是4x4帧内预测类型（Intra4x4），作如下处理：</p>
<ul>
<li>a)循环遍历 16 个 <code>4x4</code> 的块，并作如下处理：<ul>
<li>i.从 <code>intra4x4_pred_mode_cache</code> 中读取 <code>4x4</code> 帧内预测方法</li>
<li>ii.根据帧内预测方法调用 H264PredContext 中的汇编函数 <code>pred4x4()</code> 进行帧内预测</li>
<li>iii.调用 H264DSPContext 中的汇编函数 <code>h264_idct_add()</code> 对 DCT 残差数据进行 <code>4x4DCT</code> 反变换；如果DCT 系数中不包含 AC 系数的话，则调用汇编函数 <code>h264_idct_dc_add()</code> 对残差数据进行 <code>4x4DCT</code> 反变换（速度更快）。</li>
</ul>
</li>
</ul>
<p>（2）如果宏块是 <code>16x16</code> 帧内预测类型（<code>Intra4x4</code>），作如下处理：</p>
<ul>
<li>a)通过 <code>intra16x16_pred_mode</code> 获得 <code>16x16</code> 帧内预测方法</li>
<li>b)根据帧内预测方法调用 H264PredContext 中的汇编函数 <code>pred16x16 ()</code> 进行帧内预测</li>
<li>c)调用 H264DSPContext 中的汇编函数 <code>h264_luma_dc_dequant_idct ()</code> 对 16 个小块的 DC 系数进行Hadamard 反变换</li>
</ul>
<p>在这里需要注意，帧内 <code>4x4</code> 的宏块在执行完 <code>hl_decode_mb_predict_luma()</code> 之后实际上已经完成了 “帧内预测+DCT反变换” 的流程（解码完成）；而帧内 <code>16x16</code> 的宏块在执行完 <code>hl_decode_mb_predict_luma()</code> 之后仅仅完成了 “帧内预测+Hadamard反变换 ”的流程，而并未进行 “DCT反变换” 的步骤，这一步骤需要在后续步骤中完成。</p>
<p>下文记录上述流程中涉及到的汇编函数（此处暂不记录DCT反变换的函数，在后文中再进行叙述）：</p>
<ul>
<li><p><code>4x4</code>帧内预测汇编函数：<code>H264PredContext -&gt; pred4x4[dir</code>]()</p>
</li>
<li><p><code>16x16</code> 帧内预测汇编函数：<code>H264PredContext -&gt; pred16x16[dir]()</code></p>
</li>
<li><p>Hadamard反变换汇编函数：<code>H264DSPContext-&gt;h264_luma_dc_dequant_idct()</code></p>
</li>
</ul>
<p>下面根据源代码简单梳理一下 <code>hl_decode_mb_idct_luma()</code> 的流程：</p>
<p>（1）判断宏块是否属于 <code>Intra4x4</code> 类型，如果是，函数直接返回（<code>Intra4x4</code> 比较特殊，它的 DCT 反变换已经前文所述的 “帧内预测” 部分完成）。</p>
<p>（2）根据不同的宏块类型作不同的处理：</p>
<ul>
<li>a) <code>Intra16x16</code>：调用 H264DSPContext 的汇编函数 <code>h264_idct_add16intra()</code> 进行 DCT 反变换</li>
<li>b) Inter类型：调用 H264DSPContext 的汇编函数 <code>h264_idct_add16()</code> 进行 DCT 反变换</li>
</ul>
<p>PS：需要注意的是 <code>h264_idct_add16intra()</code> 和 <code>h264_idct_add16()</code> 只有微小的区别，它们的基本逻辑都是把 <code>16x16</code> 的块划分为 16 个 <code>4x4</code> 的块再进行 DCT 反变换。此外还有一点需要注意：函数名中的 “add” 的含义是将 DCT 反变换之后的残差像素数据直接叠加到已有数据之上。</p>
<h2 id="宏块解码（Decode）部分-帧间宏块（Inter）"><a href="#宏块解码（Decode）部分-帧间宏块（Inter）" class="headerlink" title="宏块解码（Decode）部分-帧间宏块（Inter）"></a>宏块解码（Decode）部分-帧间宏块（Inter）</h2><p>本文分析FFmpeg的H.264解码器的宏块解码（Decode）部分。FFmpeg的H.264解码器调用 <code>decode_slice()</code> 函数完成了解码工作。这些解码工作可以大体上分为3个步骤：熵解码，宏块解码以及环路滤波。本文分析这3个步骤中的第2个步骤：宏块解码。上一篇文章已经记录了帧内预测宏块（Intra）的宏块解码，本文继续上一篇文章的内容，记录帧间预测宏块（Inter）的宏块解码。</p>
<h3 id="函数调用关系图-14"><a href="#函数调用关系图-14" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p>参考宏块解码（Decode）部分的源代码的调用关系图</p>
<p><code>MCFUNC(hl_motion)</code> 根据子宏块的划分类型的不同，传递不同的参数调用 <code>mc_part()</code> 函数。</p>
<p>（1）如果子宏块划分为 <code>16x16</code>（等同于没有划分），直接调用 <code>mc_part()</code> 并且传递如下参数：</p>
<ul>
<li>a)单向预测汇编函数集：<code>qpix_put[0]</code> （<code>qpix_put[0]</code>中的函数进行 <code>16x16</code> 块的四分之一像素运动补偿）。</li>
<li>b)双向预测汇编函数集：<code>qpix_avg[0]</code>。</li>
<li>c) square 设置为 1，delta 设置为 0。</li>
<li>d) x_offset 和 y_offset 都设置为 0。</li>
</ul>
<p>（2）如果子宏块划分为 <code>16x8</code>，分两次调用 <code>mc_part()</code> 并且传递如下参数：</p>
<ul>
<li>a)单向预测汇编函数集：<code>qpix_put[1]</code> （<code>qpix_put[1]</code> 中的函数进行 <code>8x8</code> 块的四分之一像素运动补偿）。</li>
<li>b)双向预测汇编函数集：<code>qpix_avg[1]</code>。</li>
<li>c) square 设置为 0，delta 设置为 8。</li>
</ul>
<p>其中第 1 次调用 <code>mc_part()</code> 的时候 x_offset 和 y_offset 都设置为 0，第 2 次调用 <code>mc_part()</code> 的时候 x_offset 设置为 0，y_offset 设置为 4。</p>
<p>（3）如果子宏块划分为 <code>8x16</code>，分两次调用 <code>mc_part()</code> 并且传递如下参数：</p>
<ul>
<li>a)单向预测汇编函数集：<code>qpix_put[1]</code> （<code>qpix_put[1]</code> 中的函数进行 <code>8x8</code> 块的四分之一像素运动补偿）。</li>
<li>b)双向预测汇编函数集：<code>qpix_avg[1]</code>。</li>
<li>c) square设置为 0，delta 设置为 <code>8 * h-&gt;mb_linesize</code>。</li>
</ul>
<p>其中第 1 次调用 <code>mc_part()</code> 的时候 x_offset 和 y_offset 都设置为 0，第 2 次调用 <code>mc_part()</code> 的时候 x_offset 设置为 4，y_offset 设置为 0。</p>
<p>（4）如果子宏块划分为 <code>8x8</code>，说明此时每个 <code>8x8</code> 子宏块还可以继续划分为 <code>8x8，8x8，4x8，4x4</code> 几种类型，此时根据上述的规则，分成 4 次分别对这些小块做类似的处理。</p>
<p><code>qpix_put[4][16]</code> 实际上指向了 H264QpelContex 的 <code>put_h264_qpel_pixels_tab[4][16]</code> ，其中存储了所有单向预测方块的四分之一像素运动补偿函数。其中：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">qpix_put[0]存储的是16x16方块的运动补偿函数；</span><br><span class="line">qpix_put[1]存储的是8x8方块的运动补偿函数；</span><br><span class="line">qpix_put[2]存储的是4x4方块的运动补偿函数；</span><br><span class="line">qpix_put[3]存储的是2x2方块的运动补偿函数；</span><br></pre></td></tr></table></figure>

<p>从源代码可以看出，<code>mc_part_std()</code> 首先计算了几个关键的用于确定子宏块位置的参数，然后根据预测类型的不同（单向预测或者双向预测），把不同的函数指针传递给 <code>mc_dir_part()</code>：如果仅仅使用了 list0（单向预测），则只传递 <code>qpix_put()</code>；如果使用了 list0 和 list1（双向预测），则调用两次 <code>mc_dir_part()</code>，第一次传递 <code>qpix_put()</code>，第二次传递 <code>qpix_avg()</code>。</p>
<p><code>mc_part_std()</code> 中赋值了 3 个重要的变量（只考虑亮度）：</p>
<p>（1）<code>dest_y</code>：指向子宏块亮度数据指针。这个值是通过 x_offset 和 y_offset 计算得来的。在这里需要注意一点：x_offset 和 y_offset 是以色度为基本单位的，所以在计算亮度相关的变量的时候需要乘以 2。</p>
<p>（2）<code>x_offset</code>：传入的 x_offset 本来是子宏块相对于整个宏块位置的横坐标，在这里加上 <code>8 * h-&gt;mb_x</code> 之后，变成了子宏块相对于整个图像的位置的横坐标（以色度为基本单位）。</p>
<p>（3）<code>y_offset</code>：传入的 y_offset 本来是子宏块相对于整个宏块位置的纵坐标，在这里加上 <code>8 * h-&gt;mb_y</code> 之后，变成了子宏块相对于整个图像的位置的纵坐标（以色度为基本单位）。</p>
<p>通过源代码，简单梳理一下 <code>mc_dir_part()</code> 的流程（只考虑亮度，色度的流程类似）：</p>
<p>（1）计算 mx 和 my。mx 和 my 是当前宏块的匹配块的位置坐标。需要注意的是该坐标是以 <code>1/4</code> 像素（而不是整像素）为基本单位的。</p>
<p>（2）计算 offset。offset 是当前宏块的匹配块相对于图像的整像素偏移量，由 mx、my 计算而来。</p>
<p>（3）计算 luma_xy。luma_xy 决定了当前宏块的匹配块采用的四分之一像素运动补偿的方式，由 mx、my 计算而来。</p>
<p>（4）调用运动补偿汇编函数 <code>qpix_op[luma_xy]()</code> 完成运动补偿。在这里需要注意，如果子宏块不是正方形的（square 取 0），则还会调用 1 次 <code>qpix_op[luma_xy]()</code> 完成另外一个方块的运动补偿。</p>
<p>总而言之，首先找到当前宏块的匹配块的整像素位置，然后在该位置的基础上进行四分之一像素的内插，并将结果输出出来。</p>
<p>前文中曾经提过，由于 H.264 解码器中只提供了正方形块的四分之一像素运动补偿函数，所以如果子宏块不是正方形的（例如 <code>16x8，8x16</code>），就需要先将子宏块划分为正方形的方块，然后再进行两次运动补偿（两个正方形方块之间的位置关系用 delta 变量记录）。例如 <code>16x8</code> 的宏块，就会划分成两个 <code>8x8</code> 的方块，调用两次相同的运动补偿函数</p>
<p>下面可以看一下 C 语言版本的四分之一像素运动补偿函数的源代码。由于 <code>1/4</code> 像素内插比较复杂，其中还用到了整像素赋值函数以及 <code>1/2</code> 像素线性内插函数，所以需要从简到难一步一步的看这些源代码。打算按照顺序一步一步分析这些源代码：</p>
<p>（1）pel_template.c（展开“ <code>DEF_PEL(put, op_put)</code> ”宏）：整像素赋值（用于整像素的单向预测）</p>
<p>（2）pel_template.c（展开“ <code>DEF_PEL(avg, op_avg)</code> ”宏）：整像素求平均（写这个为了举一个双向预测的例子）</p>
<p>（3）hpel_template.c(（展开“<code>DEF_HPEL(put, op_put)</code>”宏）：<code>1/2</code> 像素线性内插</p>
<p>（4）h264qpel_template.c（展开“ <code>H264_LOWPASS(put_, op_put, op2_put)</code>”宏）：半像素内插（注意不是1&#x2F;2像素线性内插，而是需要滤波的）</p>
<p>（5）h264qpel_template.c（展开“<code>H264_MC(put_, 8)</code>”宏）：<code>1/4</code>像素运动补偿</p>
<h2 id="环路滤波（Loop-Filter）部分"><a href="#环路滤波（Loop-Filter）部分" class="headerlink" title="环路滤波（Loop Filter）部分"></a>环路滤波（Loop Filter）部分</h2><p>本文分析FFmpeg的H.264解码器的环路滤波（Loop Filter）部分。FFmpeg的H.264解码器调用decode_slice()函数完成了解码工作。这些解码工作可以大体上分为3个步骤：熵解码，宏块解码以及环路滤波。本文分析这3个步骤中的第3个步骤。</p>
<h3 id="函数调用关系图-15"><a href="#函数调用关系图-15" class="headerlink" title="函数调用关系图"></a>函数调用关系图</h3><p><img data-src="/images/imageFFmpeg/Thor/%E7%8E%AF%E8%B7%AF%E6%BB%A4%E6%B3%A2%E9%83%A8%E5%88%86%E7%9A%84%E6%BA%90%E4%BB%A3%E7%A0%81%E7%9A%84%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB.png" alt="环路滤波（Loop Filter）部分的源代码的调用关系"></p>
<p>环路滤波主要用于滤除方块效应。<code>decode_slice()</code> 在解码完一行宏块之后，会调用 <code>loop_filter()</code> 函数完成环路滤波功能。<code>loop_filter()</code> 函数会遍历该行宏块中的每一个宏块，并且针对每一个宏块调用 <code>ff_h264_filter_mb_fast()</code>。<code>ff_h264_filter_mb_fast()</code> 又会调用 <code>h264_filter_mb_fast_internal()</code>。</p>
<p><code>h264_filter_mb_fast_internal()</code> 完成了一个宏块的环路滤波工作。该函数调用 <code>filter_mb_edgev()</code> 和 <code>filter_mb_edgeh()</code> 对亮度垂直边界和水平边界进行滤波，或者调用 <code>filter_mb_edgecv()</code> 和 <code>filter_mb_edgech()</code> 对色度的的垂直边界和水平边界进行滤波。</p>
<p>通过源代码整理出来 <code>h264_filter_mb_fast_internal()</code> 的流程如下：</p>
<p>（1）读取 QP 等几个参数，用于推导滤波门限值 alpha，beta。</p>
<p>（2）如果是帧内宏块（Intra），作如下处理：</p>
<ul>
<li><p>a)对于水平的边界，调用 <code>filter_mb_edgeh()</code> 进行滤波。</p>
</li>
<li><p>b)对于垂直的边界，调用 <code>filter_mb_edgev()</code> 进行滤波。</p>
<p>帧内宏块滤波过程中，对于在宏块边界上的边界（最左边的垂直边界和最上边的水平边界），采用滤波强度 Bs 为 4 的滤波；对于其它边界则采用滤波强度 Bs 为 3 的滤波。</p>
</li>
</ul>
<p>（3）如果是其他宏块，作如下处理：</p>
<ul>
<li><p>a)对于水平的边界，调用 <code>filter_mb_edgeh()</code> 进行滤波。</p>
</li>
<li><p>b)对于垂直的边界，调用 <code>filter_mb_edgev()</code> 进行滤波。</p>
<p>此类宏块的滤波强度需要另作判断。</p>
</li>
</ul>
<p>总体说来，一个宏块内部的滤波顺序如下图所示。图中的 “0”、“1”、“2”、“3” 为滤波的顺序。可以看出首先对垂直边界进行滤波，然后对水平边界进行滤波。垂直边界滤波按照从左到右的顺序进行，而水平边界的滤波按照从上到下的顺序进行。</p>
<p><img data-src="/images/imageFFmpeg/Thor/%E5%AE%8F%E5%9D%97%E5%86%85%E9%83%A8%E7%9A%84%E6%BB%A4%E6%B3%A2%E9%A1%BA%E5%BA%8F.png" alt="宏块内部的滤波顺序"></p>
<h1 id="H-264-中的-NAL-技术"><a href="#H-264-中的-NAL-技术" class="headerlink" title="H.264 中的 NAL 技术"></a>H.264 中的 NAL 技术</h1><h2 id="NAL-技术"><a href="#NAL-技术" class="headerlink" title="NAL 技术"></a>NAL 技术</h2><h3 id="NAL-概述"><a href="#NAL-概述" class="headerlink" title="NAL 概述"></a>NAL 概述</h3><p>NAL 全称 Network Abstract Layer，即网络抽象层。在 H.264&#x2F;AVC 视频编码标准中，整个系统框架被分为了两个层面：视频编码层面（VCL）和网络抽象层面（NAL）。其中，前者负责有效表示视频数据的内容，而后者则负责格式化数据并提供头信息，以保证数据适合各种信道和存储介质上的传输。</p>
<p>现实中的传输系统是多样化的，其可靠性，服务质量，封装方式等特征各不相同，NAL 这一概念的提出提供了一个视频编码器和传输系统的友好接口，使得编码后的视频数据能够有效地在各种不同的网络环境中传输。</p>
<h3 id="NAL-单元"><a href="#NAL-单元" class="headerlink" title="NAL 单元"></a>NAL 单元</h3><p>NAL 单元是 NAL 的基本语法结构，它包含一个字节的头信息和一系列来自 VCL 的称为原始字节序列载荷<br>（RBSP）的字节流。头信息中包含着一个可否丢弃的指示标记，标识着该 NAL 单元的丢弃能否引起错误扩散，一般，如果 NAL 单元中的信息不用于构建参考图像，则认为可以将其丢弃；最后包含的是NAL 单元的类型信息，暗示着其内含有效载荷的内容。 送到解码器端的 NAL 单元必须遵守严格的顺序，如果应用程序接收到的 NAL 单元处于乱序，则必须提供一种恢复其正确顺序的方法。</p>
<h3 id="NAL-实现编解码器与传输网络的结合"><a href="#NAL-实现编解码器与传输网络的结合" class="headerlink" title="NAL 实现编解码器与传输网络的结合"></a>NAL 实现编解码器与传输网络的结合</h3><p>NAL 提供了一个编解码器与传输网络的通用接口，而对于不同的网络环境，具体的实现方案是不同的。对于基于流的传输系统如 H.320、MPEG 等，需要按照解码顺序组织 NAL 单元，并为每个 NAL 单元增加若干比特字节对齐的前缀以形成字节流；对于 RTP&#x2F;UDP&#x2F;IP 系统，则可以直接将编码器输出的 NAL 单元作为 RTP 的有效载荷；而对于同时提供多个逻辑信道的传输系统，甚至可以根据重要性将不同类型的NAL 单元在不同服务质量的信道中传输。</p>
<h3 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h3><p>为了实现编解码器良好的网络适应性，需要做两方面的工作：</p>
<p>第一、在 Codec 中将 NAL 这一技术完整而有效的实现；</p>
<p>第二、在遵循 H.264&#x2F;AVC NAL 规范的前提下设计针对不同网络的最佳传输方案。</p>
<p>如果实现了以上两个目标，所实现的就不仅仅是一种视频编解码技术，而是一套适用范围很广的多媒体传输方案，该方案适用于如视频会议，数据存储，电视广播，流媒体，无线通信，远程监控等多种领域。</p>
<h2 id="NALU-类型"><a href="#NALU-类型" class="headerlink" title="NALU 类型"></a>NALU 类型</h2><p>标识 NAL 单元中的 RBSP 数据类型，其中，nal_unit_type 为 1， 2， 3， 4， 5 的 NAL 单元称为 VCL 的 NAL单元，其他类型的 NAL 单元为非 VCL 的 NAL 单元。</p>
<ul>
<li>0：未规定</li>
<li>1：非 IDR 图像中不采用数据划分的片段</li>
<li>2：非 IDR 图像中 A 类数据划分片段</li>
<li>3：非 IDR 图像中 B 类数据划分片段</li>
<li>4：非 IDR 图像中 C 类数据划分片段</li>
<li>5：IDR 图像的片段</li>
<li>6：补充增强信息（SEI）</li>
<li>7：序列参数集（SPS）</li>
<li>8：图像参数集（PPS）</li>
<li>9：分割符</li>
<li>10：序列结束符</li>
<li>11：流结束符</li>
<li>12：填充数据</li>
<li>13：序列参数集扩展</li>
<li>14：带前缀的 NAL 单元</li>
<li>15：子序列参数集</li>
<li>16 – 18：保留</li>
<li>19：不采用数据划分的辅助编码图像片段</li>
<li>20：编码片段扩展</li>
<li>21 – 23：保留</li>
<li>24 – 31：未规定</li>
</ul>
<h3 id="SPS-详析"><a href="#SPS-详析" class="headerlink" title="SPS 详析"></a>SPS 详析</h3><p>TODO</p>
<h3 id="PPS-详析"><a href="#PPS-详析" class="headerlink" title="PPS 详析"></a>PPS 详析</h3><p>TODO</p>
<h3 id="SEI-详析"><a href="#SEI-详析" class="headerlink" title="SEI 详析"></a>SEI 详析</h3><p>TODO</p>
<h2 id="NAL-在多媒体传输、存储系统中的应用"><a href="#NAL-在多媒体传输、存储系统中的应用" class="headerlink" title="NAL 在多媒体传输、存储系统中的应用"></a>NAL 在多媒体传输、存储系统中的应用</h2><p>NAL 的头占用了一个字节，按照比特自高至低排列可以表示如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">0AABBBBB</span><br></pre></td></tr></table></figure>

<p>其中，AA 用于表示该 NAL 是否可以丢弃（有无被其后的 NAL 参考），00b 表示没有参考作用，可丢弃，如 B slice、SEI 等，非零——包括 01b、10b、11b——表示该 NAL 不可丢弃，如 SPS、PPS、I Slice、P Slice 等。</p>
<p>常用的 NAL 头的取值如：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">0x67: SPS</span><br><span class="line">0x68: PPS</span><br><span class="line">0x65: IDR</span><br><span class="line">0x61: non-IDR Slice</span><br><span class="line">0x01: B Slice</span><br><span class="line">0x06: SEI</span><br><span class="line">0x09: AU Delimiter</span><br></pre></td></tr></table></figure>

<p>由于 NAL 的语法中没有给出长度信息，实际的传输、存储系统需要增加额外的头实现各个 NAL 单元的定界。其中，AVI 文件和 MPEG TS 广播流采取的是字节流的语法格式，即在 NAL 单元之前增加 0x00000001 的同步码，则从 AVI 文件或 MPEG TS PES 包中读出的一个 H.264 视频帧以下面的形式存在：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">00 00 00 01 06 ... 00 00 00 01 67 ... 00 00 00 01 68 ... 00 00 00 01 65 ...</span><br><span class="line">SEI 信息 			  SPS 				 PPS 				IDR Slice</span><br></pre></td></tr></table></figure>

<p>而对于 MP4 文件，NAL 单元之前没有同步码，却有若干字节的长度码，来表示 NAL 单元的长度，这个长度码所占用的字节数由 MP4 文件头给出；此外，从 MP4 读出来的视频帧不包含 PPS 和 SPS，这些信息位于 MP4的文件头中，解析器必须在打开文件的时候就获取它们。从 MP4 文件读出的一个 H.264 帧往往是下面的形式（假设长度码为 2 字节）：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">00 19 06 [... 25 字节...] 24 aa 65 [... 9386 字节...]</span><br><span class="line">SEI 信息 					IDR Slice</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>FFmpeg</category>
      </categories>
      <tags>
        <tag>FFmpeg</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo + Github 博客多终端同步</title>
    <url>/2017/03/20/Hexo/Hexo-Github-Sync/</url>
    <content><![CDATA[<p><a href="http://blog.csdn.net/Monkey_LZL/article/details/60870891">原文链接</a></p>
<p>主体的思路是将博文内容相关文件放在Github项目中master中，将Hexo配置写博客用的相关文件放在Github项目的hexo分支上，这个是关键，多终端的同步只需要对分支hexo进行操作。下面是详细的步骤讲解：</p>
<span id="more"></span>

<h2 id="1-准备条件"><a href="#1-准备条件" class="headerlink" title="1. 准备条件"></a>1. 准备条件</h2><p>安装了Node.js,Git,Hexo环境<br>完成Github与本地Hexo的对接<br>这部分大家可以参考<a href="https://xuanwo.org/2015/03/26/hexo-intor/">史上最详细的Hexo博客搭建图文教程</a></p>
<p>配置好这些，就可以捋起袖子大干一场了！</p>
<h2 id="2-在其中一个中单操作，push本地文件夹Hexo中的必要文件到yourname-github-io的hexo分支上"><a href="#2-在其中一个中单操作，push本地文件夹Hexo中的必要文件到yourname-github-io的hexo分支上" class="headerlink" title="2. 在其中一个中单操作，push本地文件夹Hexo中的必要文件到yourname.github.io的hexo分支上"></a>2. 在其中一个中单操作，push本地文件夹Hexo中的必要文件到yourname.github.io的hexo分支上</h2><p>在利用Github+Hexo搭建自己的博客时，新建了一个Hexo的文件夹，并进行相关的配置，这部分主要是将这些配置的文件托管到Github项目的分支上，其中只托管部分用于多终端的同步的文件，如完成的效果图所示：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">初始化本地仓库</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git init</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将必要的文件依次添加，有些文件夹如npm install产生的node_modules由于路径过长不好处理，所以这里没有用`git add .`命令了，而是依次添加必要文件</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add <span class="built_in">source</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit -m <span class="string">&quot;Blog Source Hexo&quot;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">新建hexo分支</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch hexo</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">切换到hexo分支上</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout hexo</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将本地与Github项目对接</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git remote add origin https://github.com/yourname/yourname.github.io.git</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">push到Github项目的hexo分支上</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push origin hexo</span></span><br></pre></td></tr></table></figure>

<p>这样你的github项目中就会多出一个Hexo分支，这个就是用于多终端同步关键的部分。</p>
<h2 id="3-另一终端完成clone和push更新"><a href="#3-另一终端完成clone和push更新" class="headerlink" title="3. 另一终端完成clone和push更新"></a>3. 另一终端完成clone和push更新</h2><p>此时在另一终端更新博客，只需要将Github的hexo分支clone下来，进行初次的相关配置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将Github中hexo分支<span class="built_in">clone</span>到本地</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> -b hexo https://github.com/yourname/yourname.github.io.git</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">切换到刚刚<span class="built_in">clone</span>的文件夹内</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> yourname.github.io</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">cheackout 远程代码到本地hexo分支</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout -b hexo origin/hexo</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">注意，这里一定要切换到刚刚<span class="built_in">clone</span>的文件夹内执行，安装必要的所需组件，不用再init</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm install</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">新建一个.md文件，并编辑完成自己的博客内容</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo new post <span class="string">&quot;new blog name&quot;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">经测试每次只要更新sorcerer中的文件到Github中即可，因为只是新建了一篇新博客</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add <span class="built_in">source</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit -m <span class="string">&quot;XX&quot;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">更新分支</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push origin hexo</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">push更新完分支之后将自己写的博客对接到自己搭的博客网站上，同时同步了Github中的master</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo d -g</span></span><br></pre></td></tr></table></figure>

<h2 id="4-不同终端间愉快地玩耍"><a href="#4-不同终端间愉快地玩耍" class="headerlink" title="4. 不同终端间愉快地玩耍"></a>4. 不同终端间愉快地玩耍</h2><p>在不同的终端已经做完配置，就可以愉快的分享自己更新的博客<br>进入自己相应的文件夹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">先pull完成本地与远端的融合</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git pull origin hexo</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo new post <span class="string">&quot; new blog name&quot;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add <span class="built_in">source</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit -m <span class="string">&quot;XX&quot;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push origin hexo</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo d -g</span></span><br></pre></td></tr></table></figure>

<h2 id="5-创建新文章"><a href="#5-创建新文章" class="headerlink" title="5. 创建新文章"></a>5. 创建新文章</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo new page --path <span class="built_in">test</span>/timages <span class="string">&quot;test_images&quot;</span></span></span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Created: ~/PATH/source/test/timages.md</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> <span class="built_in">source</span>/test/timages.md</span></span><br><span class="line">---</span><br><span class="line">title: test_images</span><br><span class="line">date: 2024-06-11 09:36:41</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo的Next主题个性化设置</title>
    <url>/2016/12/23/Hexo/Hexo-Next-Configuration/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://github.com/HarleyWang93/blog/issues/1">Hexo + GitHub (Coding) Pages 搭建博客</a></p>
<p><a href="http://blog.shenyuanluo.com/HexoConfig1.html">Hexo的Next主题个性化设置（一）——基础设置</a></p>
</blockquote>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo 使用指南</title>
    <url>/2017/03/28/Hexo/hexo-operating-guide/</url>
    <content><![CDATA[<h2 id="1-安装、初始化和配置"><a href="#1-安装、初始化和配置" class="headerlink" title="1. 安装、初始化和配置"></a>1. 安装、初始化和配置</h2><h3 id="1-1-准备工作"><a href="#1-1-准备工作" class="headerlink" title="1.1 准备工作"></a>1.1 准备工作</h3><ul>
<li>git</li>
<li>node.js</li>
<li>github</li>
</ul>
<span id="more"></span>

<h3 id="1-2-安装和初始化"><a href="#1-2-安装和初始化" class="headerlink" title="1.2 安装和初始化"></a>1.2 安装和初始化</h3><p>首先确定已经安装好了 <code>nodejs</code> 和 <code>npm</code> 以及 <code>git</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm install hexo -g</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo init blog</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> blog</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm install</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">hexo server</span></span><br></pre></td></tr></table></figure>

<p>访问<a href="http://localhost:4000/">http://localhost:4000</a>，会看到生成好的博客。</p>
<h3 id="1-3-主目录结构"><a href="#1-3-主目录结构" class="headerlink" title="1.3 主目录结构"></a>1.3 主目录结构</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">|-- _config.yml</span><br><span class="line">|-- package.json</span><br><span class="line">|-- scaffolds</span><br><span class="line">|-- source</span><br><span class="line">   |-- _posts</span><br><span class="line">|-- themes</span><br><span class="line">|-- .gitignore</span><br><span class="line">|-- package.json</span><br></pre></td></tr></table></figure>

<p><strong>_config.yml</strong></p>
<p>全局配置文件，网站的很多信息都在这里配置，诸如网站名称，副标题，描述，作者，语言，主题，部署等等参数。这个文件下面会做较为详细的介绍。</p>
<p><strong>package.json</strong></p>
<p>hexo框架的参数和所依赖插件，如下：  </p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo-site&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;hexo&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3.2.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;hexo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-archive&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.1.4&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.1.3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-renderer-ejs&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-renderer-stylus&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-renderer-marked&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.2.10&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.2.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>scaffold</strong></p>
<p>scaffolds是“脚手架、骨架”的意思，当你新建一篇文章（hexo new ‘title’）的时候，hexo是根据这个目录下的文件进行构建的。基本不用关心。</p>
<p><strong>_config.yml文件</strong></p>
<p>_config.yml 采用YAML语法格式，<a href="http://my.oschina.net/u/1861837/blog/526142?p=%7B%7BtotalPage%7D%7D">具体语法自行学习</a> 。<br>具体配置可以参考<a href="https://hexo.io/zh-cn/docs/configuration.html">官方文档</a>，_config.yml 文件中的内容，并对主要参数做简单的介绍</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hexo</span>   <span class="comment">#网站标题</span></span><br><span class="line"><span class="attr">subtitle:</span>     <span class="comment">#网站副标题</span></span><br><span class="line"><span class="attr">description:</span>  <span class="comment">#网站描述</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">John</span> <span class="string">Doe</span>  <span class="comment">#作者</span></span><br><span class="line"><span class="attr">language:</span>    <span class="comment">#语言</span></span><br><span class="line"><span class="attr">timezone:</span>    <span class="comment">#网站时区。Hexo 默认使用您电脑的时区。时区列表。比如说：America/New_York, Japan, 和 UTC 。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">http://yoursite.com</span>   <span class="comment">#你的站点Url</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span>                    <span class="comment">#站点的根目录</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span>   <span class="comment">#文章的 永久链接 格式   </span></span><br><span class="line"><span class="attr">permalink_defaults:</span>    <span class="comment">#永久链接中各部分的默认值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory   </span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span>         <span class="comment">#资源文件夹，这个文件夹用来存放内容</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span>         <span class="comment">#公共文件夹，这个文件夹用于存放生成的站点文件。</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span>              <span class="comment">#标签文件夹     </span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span>      <span class="comment">#归档文件夹</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span>   <span class="comment">#分类文件夹</span></span><br><span class="line"><span class="attr">code_dir:</span> <span class="string">downloads/code</span>   <span class="comment">#Include code 文件夹</span></span><br><span class="line"><span class="attr">i18n_dir:</span> <span class="string">:lang</span>            <span class="comment">#国际化（i18n）文件夹</span></span><br><span class="line"><span class="attr">skip_render:</span>               <span class="comment">#跳过指定文件的渲染，您可使用 glob 表达式来匹配路径。    </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:title.md</span>   <span class="comment">#新文章的文件名称</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span>       <span class="comment">#预设布局</span></span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span>           <span class="comment">#把标题转换为 title case</span></span><br><span class="line"><span class="attr">external_link:</span> <span class="literal">true</span>        <span class="comment">#在新标签中打开链接</span></span><br><span class="line"><span class="attr">filename_case:</span> <span class="number">0</span>           <span class="comment">#把文件名称转换为 (1) 小写或 (2) 大写</span></span><br><span class="line"><span class="attr">render_drafts:</span> <span class="literal">false</span>       <span class="comment">#是否显示草稿</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">false</span>   <span class="comment">#是否启动 Asset 文件夹</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span>       <span class="comment">#把链接改为与根目录的相对位址    </span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span>               <span class="comment">#显示未来的文章</span></span><br><span class="line"><span class="attr">highlight:</span>                 <span class="comment">#内容中代码块的设置    </span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line"><span class="attr">default_category:</span> <span class="string">uncategorized</span></span><br><span class="line"><span class="attr">category_map:</span>          <span class="comment">#分类别名</span></span><br><span class="line"><span class="attr">tag_map:</span>               <span class="comment">#标签别名</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment">## You can customize the date format as defined in</span></span><br><span class="line"><span class="comment">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line"><span class="attr">date_format:</span> <span class="string">YYYY-MM-DD</span>         <span class="comment">#日期格式</span></span><br><span class="line"><span class="attr">time_format:</span> <span class="string">HH:mm:ss</span>           <span class="comment">#时间格式    </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span>    <span class="comment">#分页数量</span></span><br><span class="line"><span class="attr">pagination_dir:</span> <span class="string">page</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">landscape</span>   <span class="comment">#主题名称</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="comment">#  部署部分的设置</span></span><br><span class="line"><span class="attr">deploy:</span>     </span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span>  <span class="comment">#类型，常用的git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/nanshanyi/nanshanyi.github.io.git</span> <span class="comment">#github仓库的地址</span></span><br></pre></td></tr></table></figure>

<h3 id="1-4-注意"><a href="#1-4-注意" class="headerlink" title="1.4 注意"></a>1.4 注意</h3><p><strong>如果页面中出现中文，应以UTF-8无BOM编码格式，所以不要用win自带的记事本，而是用notepad++这种支持编码转换的编辑器。</strong></p>
<p>由于google在天朝大陆被墙，进入 <code>themes\landscape\layout\_partial</code> ，打开 <code>head.ejs</code> ，删掉第31行 <code>fonts.googleapis.com</code> 的链接。</p>
<p>下载下来 <code>jQuery-2.0.3.min.js</code> ，放到 <code>themes\landscape\source\js</code> 文件夹中。之后进入 <code>themes\landscape\layout\_partial</code> ，打开 <code>after-footer.ejs</code> ，将第17行的路径替换为 <code>/js/jquery-2.0.3.min.js</code> 。</p>
<p>至此大功告成。</p>
<h2 id="2-写文章-草稿"><a href="#2-写文章-草稿" class="headerlink" title="2. 写文章&amp;草稿"></a>2. 写文章&amp;草稿</h2><h3 id="2-1-文章"><a href="#2-1-文章" class="headerlink" title="2.1 文章"></a>2.1 文章</h3><p>命令行输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new post <span class="string">&quot;new article&quot;</span></span><br></pre></td></tr></table></figure>

<p>之后在 <code>soource/_posts</code> 目录下面多了一个 <code>new-article.md</code> 的文件。</p>
<h3 id="2-2-文章属性"><a href="#2-2-文章属性" class="headerlink" title="2.2 文章属性"></a>2.2 文章属性</h3><table>
<thead>
<tr>
<th>Setting</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td>layout</td>
<td>Layout</td>
<td>post或page</td>
</tr>
<tr>
<td>title</td>
<td>文章的标题</td>
<td></td>
</tr>
<tr>
<td>date</td>
<td>穿件日期</td>
<td>文件的创建日期</td>
</tr>
<tr>
<td>updated</td>
<td>修改日期</td>
<td>文件的修改日期</td>
</tr>
<tr>
<td>comments</td>
<td>是否开启评论</td>
<td>true</td>
</tr>
<tr>
<td>tags</td>
<td>标签</td>
<td></td>
</tr>
<tr>
<td>categories</td>
<td>分类</td>
<td></td>
</tr>
<tr>
<td>permalink</td>
<td>url中的名字</td>
<td>文件名</td>
</tr>
<tr>
<td>toc</td>
<td>是否开启目录</td>
<td>true</td>
</tr>
<tr>
<td>reward</td>
<td>是否开启打赏</td>
<td>true</td>
</tr>
</tbody></table>
<h3 id="2-3-分类和标签"><a href="#2-3-分类和标签" class="headerlink" title="2.3 分类和标签"></a>2.3 分类和标签</h3><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">categories:</span><br><span class="line">  - 日记</span><br><span class="line">tags:</span><br><span class="line">  - Hexo</span><br><span class="line">  - node.js</span><br></pre></td></tr></table></figure>

<h3 id="2-4-摘要"><a href="#2-4-摘要" class="headerlink" title="2.4 摘要"></a>2.4 摘要</h3><p><code>&lt;!--more--&gt;</code> 之上的内容为摘要。</p>
<h3 id="2-5-草稿"><a href="#2-5-草稿" class="headerlink" title="2.5 草稿"></a>2.5 草稿</h3><p>草稿相当于很多博客都有的“私密文章”功能。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new draft <span class="string">&quot;new draft&quot;</span></span><br></pre></td></tr></table></figure>

<p>会在 <code>source/_drafts</code> 目录下生成一个 <code>new-draft.md</code> 文件。但是这个文件不被显示在页面上，链接也访问不到。也就是说如果你想把某一篇文章移除显示，又不舍得删除，可以把它移动到 <code>_drafts</code> 目录之中。</p>
<p>如果你希望强行预览草稿，更改配置文件：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">render_drafts: true</span><br></pre></td></tr></table></figure>

<p>或者，如下方式启动server：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server --drafts</span><br></pre></td></tr></table></figure>

<p>下面这条命令可以把草稿变成文章，或者页面：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo publish [layout] &lt;filename&gt;</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">$ hexo publish drafts hexo-使用指南</span><br></pre></td></tr></table></figure>

<h2 id="3-Blog中出入图片和音乐"><a href="#3-Blog中出入图片和音乐" class="headerlink" title="3. Blog中出入图片和音乐"></a>3. Blog中出入图片和音乐</h2><p>文章推介：</p>
<blockquote>
<p><a href="http://www.jianshu.com/p/53e0d2a617da">Hexo 博客中插入音乐&#x2F;视频</a></p>
<p><a href="http://blog.shiqichan.com/use-qiniu-store-image-for-hexo/">使用七牛为Hexo存储图片</a></p>
<p><a href="http://www.cnblogs.com/xljzlw/p/5137622.html">hexo主题中添加相册功能</a></p>
<p><a href="http://wuchong.me/blog/2014/12/13/hexo-theme-creating-image-styles/?utm_source=tuicool&utm_medium=referral#">为 Hexo 主题添加多种图片样式(主题不错考虑移植)</a></p>
<p><a href="https://yq.aliyun.com/articles/8607">Hexo折腾记——基本配置篇</a></p>
<p><a href="http://www.cnblogs.com/jarson-7426/p/5515870.html">hexo博客进阶－相册和独立域名</a></p>
</blockquote>
<p>插入图片基本分为两种办法** ：</p>
<p>（1） 放在本地文件</p>
<p>首先在根目录下确认 <code>_config.yml</code> 中有 <code>post_asset_folder:true</code> 。<br>在 hexo 目录，执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure>

<p>之后再使用 <code>hexo new &#39;new&#39; </code>创建新博客的时候，会在 <code>source/_posts</code> 里面创建 <code>.md</code> 文件的同时生成一个相同的名字的文件夹。把该文章中需要使用的图片放在该文件夹下即可。<br>使用的时候</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">![<span class="string">“图片描述”（可以不写）</span>](<span class="link">/文件夹名/你的图片名字.JPG</span>)</span><br><span class="line">例如：</span><br><span class="line">！[ ] (new/text.jpg)</span><br></pre></td></tr></table></figure>

<p>（2）放在<a href="https://portal.qiniu.com/signup?code=3lglas6pgi2qa">七牛</a>上，需要先注册，上传图片生成链接，直接在文章中使用链接即可。</p>
<p><strong>插入音乐</strong> ：</p>
<p>可以使用网易云音乐，搜索想要的歌曲，点击歌曲名字进入播放器页面，点击生成外链播放器；复制代码，直接粘贴到博文中即可。这样会显示一个网易的播放器，可以把</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">marginwidth</span>=<span class="string">&quot;0&quot;</span> <span class="attr">marginheight</span>=<span class="string">&quot;0&quot;</span> <span class="attr">width</span>=<span class="string">298</span> <span class="attr">height</span>=<span class="string">52</span> <span class="attr">src</span>=<span class="string">&quot;http://music.163.com/outchain/player?type=2&amp;id=32192436&amp;auto=1&amp;height=32&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">//其中的width=298 height=52 均改为0就看不到了，依然可以播放音乐</span><br></pre></td></tr></table></figure>

<img data-src="/2017/03/28/Hexo/hexo-operating-guide/Y60twn8.png" class="">

<img data-src="/2017/03/28/Hexo/hexo-operating-guide/i42cvBI.png" class="">

<h2 id="4-代码高亮highlight-js支持"><a href="#4-代码高亮highlight-js支持" class="headerlink" title="4. 代码高亮highlight.js支持"></a>4. 代码高亮highlight.js支持</h2><p><a href="https://highlightjs.org/">highlightjs官网</a></p>
<p><a href="https://highlightjs.org/static/demo/">highlightjs主题风格</a></p>
<h2 id="5-其他"><a href="#5-其他" class="headerlink" title="5. 其他"></a>5. 其他</h2><p><a href="http://www.yehbeats.com/2015/04/08/hexo-search/">Hexo，Yilia主题添加站内搜索功能</a></p>
<p><a href="http://kuangqi.me/tricks/enable-table-of-contents-on-hexo/">为Hexo博客添加目录</a></p>
<p><a href="http://www.ituring.com.cn/article/199624">Hexo站点中添加文章目录以及归档</a></p>
<p><a href="http://crescentmoon.info/2014/12/11/popular-widget/">使用LeanCloud平台为Hexo博客添加文章浏览量统计组件</a></p>
<p><a href="http://www.tuicool.com/articles/ABFn2qU">使用hexo搭建静态博客</a></p>
<p><a href="http://www.ituring.com.cn/article/199035?utm_source=tuicool&utm_medium=referral">Hexo Docs中文 ： （二）基本用法</a></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>音视频核心技术</title>
    <url>/2019/04/30/FFmpeg/%E9%9F%B3%E8%A7%86%E9%A2%91%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">
  <script id="hbeData" type="hbeData" data-hmacdigest="b6948b00d412aac3dc6993c73479a88d06b6feb9265267092db4b2e3cf6f8d89">dcdc38cf00dd21c6cbb4671ddb16bdaca1d4719bfe9956ac313d1b09571d1672c70e9114ce33210cfd07279984d1d213b00f3ae0dc213c6301e573aac9cd21c62bf6947ef86616669fab2a0a9c49f112505da19512a2515e193e06e29f811417db5c8b556e5f7a250428b2253c840875c4de0647edfe2d093ab04ad123aa637967955ee50b7209920b378aab76c77dd63c03e7d1dbb25fb20949137fe4b8f24d7cfc2e1b6865df8f1a2a1bb3cd8c1ac29a672ea0267694364705c59ee24c3ce02ca7704d626f8341a4ce9d1d42a6f4e9e7029ad0eadbc77a538b6ea1e677c9189b1e303dd6c4ad1d2983a2346e0d3d3ab8d832addaf44a178cde9ffcf712015caaa66f1acaa423ccfa70ff53b446e331593f63ad0fcf83c97ee0f2a56623e2031ee69dea6e71e897282c8bb47a54d00aba18fc971a4d977ae43e84f289380f6500ebc5d9746aa88a88737dcb04decea114a3a597f055935e2ec99519b11b45e37c160bd648496e20223b72e3d9f436e598615d6cf8fb7363cbbb731d0eb2bd45a83f3dd2e4236ecee6c3e957bf2b068bc04eb13316635e6ebdef7410cf9d68ee7c0cbc0def3e0d26412c0a819d10c754dc86a9cc57d660ad0c9da6acf9b5a94733151b71d04a0a774c05dbebf82f897d23b68eb68bb646ff9c7675233fedb5dd2aa674dd8781e2fde680bfe0fca1e7d1a01aea3598dcfdca084eb6722a74b4b4842089b4e97639a20f30e3d9e01b3056d6c26d122822c261485d25ab990c65039420416787436b19188b0b9f7db5669913e905c240a36d8a52f2bfec8d5551c5a0cb9ed146269c3f9f6142a39307606a188d4d1e5eee54642a091d5294bf67051bba58d3c4edffcdb3f22f60d39bdd7fcd00db6cb474c3bc8b4f28cd620c8fcbc47537971b13d4b105669903c59d7cd914898a7ee3d6c529bbb11bd1a5a5b774e9e7453b6fdae72b6f96434388db98f4e7472db3069926a0b3b296ab76bf8686d2624c05f114a5e5594115453b4df0a2b42550bb5cd13a7b4fe5f8d0b6e3c00f2a36590446656696ee1ad1b20e135d577456e00c72e81862c549c60900f625dd64ae7a0ccb4ad2f2c48d9e69c40a4e2268c4a1747955db5c059d4542cee6c0160d36b5d4cb836d274be84c98254db5b0172cb8749f469b384ef5d6f237838feef1f61841340fb496e817277ba00a1aff4f8fc8fa32a857b8ef2479b1f16a73c2f30b9f7092a0b3c85d288091cda79e8c5f31c632c64d29fe5b619101eca38711c19b036daed9c34436b73e7e5ec32d02b64b1a2d9a5a9f8e0acccf728f19b1d77508f19fd573ab43cf16b4dbd74d9de9220954c8a42f078df3ba952178c3ff2bd1f741c7dfc67736785a9e6e12282911fd10e89ad6f29490d4aa1a9ab57b41ce54db156d8bbe464aa98db585d86906668370b2c5fd0555c78c1c2dc5d4d0160304cf2a4889c88f8e9313b6fb89dfc5bca7423064f10fdb6e304d74d08652bd01318c8c2238bfb5fa6fe3ab961465a3201273143cea89d47ddca18f4563315be4d7fa217f5890a467583d39003bf03778158380f77d9d27d8d4c50a069cc1f2727372aa0a99c64dfd4e40fe80a3da32d8a9143ece9d9eba942a56e774ee02ac3c5970730039ae0d10092f5396fd62fd2a8de41c2695ddb135efb1671178fc20d10fb4127d37ac359d3e83bdbce0c20c6ee2f806a0cba4fb3b6aab5bf010ae0628157e27af6f988aa0048732ec3c7ef9cf69da8f73b92235570ecb9b5721abf24d3d183c92c519a0abc3c2fa2aa428a5a6c075f79deff861117c3de6ac8897ee740a696dddb65470bb58ca6df1b1e2613595070984bf002ccd4d623ba71fac3dd900d3d001575693dd4fc44057716499526abf1de2abd9c0ec6b766ee20292806e170b8d3c86f091932a77f0ba002be77d0fd4a9e8cfbf38afdf88584329ec82e92401b440ee92a57ac391170127c7e0589860658048a44b61b4b7b3f640b8947dce8748fcdadf9418d51f3221389f436e19ae7c4a5b550f0d5e6788689bb5398944df2a5ff2a20258e2177c0ed8e41234e7d43d5237e588585b80ddd9bedfb018b4c7c6d4d02ddf96f0f3474e950cb2e7b209a87be2eac927c7fde94ea64543d82e7598ccecd0afea74deaaa96dac1b0579e66d4643a970dde83e228800ccf2db070c1c16fc51a4b0f873a54cba0a9b48d7b4814fcccef8b1571c47279e1965246416554ea7e5b16bd99001561262be80546b3877e3e361ec65de26d19d7a7da59e44844ca91216548b239af68e545c3d24e1f27b2cbc18d12b8cb1f0f6e142248b080e15edd774df9e1f5a5e64415ff3d01a8b5cfcc44bd7e096cbbf6ce611030ef7287f2d6528f191b9a44dcffc45b189c2eded8a86fd45f0268043295278ca098b4824b36af17c1bce15f7c1a3772f8361069af6ae8b323a913290fe886639b663355db1e9e4562909a33e94e82a6bd140e8185f4b87cb5c139de872183f48a6f78ecc8efcd9a21821dab92da6563e51e6b6336d6f4f0d3b72d8a42e294039c1a05ed2c234292f5a7157fc487e089832c6c2a5294e51812fe06afbe7fef59b43da5d733cb4008d105bffa961c9e400bb0b97257a1c726d138d32af30e77790acd8d4dd4f332493554135584fc1aeacc6b92e6d2b82f61f6bc0c4fc4ac83737b43342f892331d318e4853bac9763f3da4e5f43103e43f19759478621b6a62913a7da90c1f66b6bbc1c228e8829f75269f0bee20340b7bb2fe527c385036c5e4a1c47460c8f2d9e3a982f449d9c0a91ee1c1bcac711dbaf81a8aa92c05ce1935feb1f40a4aedecfe2b4e447448b24061e6cb2a650fcfcdab53c2b6f444b733fe8ccfec208ab98dea8015b8b1deb560b699715e0a07ef2012005e0ad1f0ad5463db1ac145197d10bd8411bb71102ad223ebe203fbd297a5c92ca3d2ca4b4a5490aa23e3fb682add4a8c4c666a9bba0617eb645c1b8a2b8dadeb581ed8346f8f18f3a0fd7458e7972ab169227362c116b6d44e22e3f04b451e8acf2198f996f917805125d059bea575c57d73796917859a07e98b49e8ebfe90472fce05607a3c86e9eb6d54c3da7f5bf849ee9c0f8e96cb8700eaf18de2f106943faf2db529407794c3899c194a6dc522e5c0949cb95cc9d6379efadd29710f7f94cdb8443c37c389e55f4f34f825ac89ce1c54a1d4879568e898a62698bc717c60456c55e310cc9df7335a1a1f192908c024439a9aa4cbc4657a0013a44eadee1baace8446a8683b69b604f4c9c889ce13827c65b01e5f04c2c85d760548a05dd079083ce83d11baa92d71850eb3aa86ab1ce0098f2c9916a15a152f35c46393c635b8d60b581b0275a638f075fce5e0aaad892deeae47458f51518b411fd7c439cb73b23e7eae53d694b932f6447f22050e271b0ecb4a7506e8f35af83046f13757157cffa20b5c41ecf2b31654c700ee9ce7281798c5745fb77c6381dae076ae5a41f2f5f9f73f4331ecf270298b6f07e71231720503f5f5e39fff08bae960f1d2d814c238ecfb83f280a488b1b44fdb1cde776f9761386dd31c8ebc534e677001ce7f49c0a80884a311acbe98855670342a0851230d0d71359039289b5a736ea1ec183e1c4df7a9978269dfdf597aac0073ba196c83d919674829e53ce1af8fcc953e4501552ce4b041c22ba48cee08c5a9040c9e361b7e17eefd03de14c5b037a91286d0688027a01bb158aaa770a23e882dc27c505efa7ca3317d4682532b8dcfbd44e8b4a7037f02571cbc22e6bc65f989cad054579260dfb8add53a52bb1e88c396be363ff7f1c42614cc585737e5cef273f24a19fd302176c6a9576550a3bb108813f1dd6d6a6fb2ee8011c59b8040c36cb2bbebc3c1466d7b7456c9bfcfb7cd9170ff114bf4fe35b52f25502e1e896689e7121ee3b14eddc4ece71567218cefc3186a89d1d36dc5e893e37458c512e2f5b8aa0a4c82dfc401c7c8cbccbc1b5647795b61e811293c5004d52d64cb9a7125431953b90ebc6a83f6e682013ce5574932a5bf6309737f7d5dacb4670d2747954dd6a7f93b68db17bfe5506e79343cccb8916b99e02d6a517ab0123251cb542b05acd2c75877cba44569b92c72121a74f4c17481a1b01f5212821edf8817a48a5797a0a33faecdf36d2bf9b60c2401c8521bc27fbd3c4d542439cfec3720caec6d6f904fa314c7432e93e02dd159c9994cd0ca11a9f62710550b6a074e88a8a8d9255516712f80cf124947bb633cc3a0f59296bfad40e3241dea98ae57b71b243588e328f3c8f0af1907f974a8f34de790ad68a4fd78f33b6834d2e846d4433f9b29bfa79c376c8bdcaf1726812ffcc14f92286da4fe532057ad0a1f6016d2423ec0f7d4f13bbc9185aa0f2377ffb635a1652aca9aaf72453843bd2a7254d817232b29db56d54657ec0bc0013087e41578bc019110623a9d77dd2aef0714b7f21964e613447acb01cdd30e04440d565f1ca2d88e10e59c91b0065127478a84f5a104fc15f981a9598046578a5b0aff812828d35a2d167421b04f3472ae6ae74c2337868ca6f10f53bcd0584670a2d053ecf875bedda8f4b7418607ea5c3d7d1878b65ac026380757521f0c31e9f69cb92ce3b94c97b09400e7a6ef5beaf37c3c21300cc0a10b97dd2bb4ef556616d94e89e6db5e2fa007b3c185f87208ac1d14b89f7ac1bf0c98df52fbb686cbfd347e97b261f1bfe3c7bc6cd56938fbca7bfcfb9bea8cedd0a693b533f514f51dcc13dd2ffeeb91bce5601a5a57e6b2d6f7eb55a429b42dedaed8bed36db9a80dbcb9f4ff76ec2440a641f021e4e8c6c5aae18bdd07f32e6d742643e3e782f395303d450973978be21509c3e78e5e80103770861e152983a4b3b812e6fb772e05bfbdb3c79417d7a86dac5a83b62ce3661c37d1b41f77faf65f32f0fc4a9a0e934e72c44806a19dbca2175efe7381e3770eba270d4bad1e9a10fc27ebf76c51c2a6e15a53f58006d2a810f14c31e4dde3f716cd13615dbeee50cba15812d7ec7d4ed11530ce5ea4fb8d1e2fb607c56396eda039190d9324625bfc1266c54dfd4d82226457ef46ebea24b866e04fc241249e27fad96d0b22a9c2debe568d3ca36f82cb88042ce25f94187418baf808b2e8e706a086419a7b97519957e7f6d0eccf521aadc13120e9ccdcf1f53072e95bd2902ffd24a1e02d0c464a666bda544ae8d15c6c8560e998390c65ffda53e90bf996a9892031fe0cffa40fcf666e27529695184180b2b48f8968643c1a6d4e0203d0b82da9389ce34dfb213fc66dc3992d98a1c3f2ffd0185c911c6e365b15ac7a37fcbf5e562a53a5405340ce02f62020f1f2663a5f386a2cdc6aa44c018811d787d7b76fa0cc5c63c2ba1004fddf26b095ff9fbf959ff8a620b672e822f1b02969299c246a114ed455781ac2eaf3d89788971d46ceaba780f920a5eee4753f6723b4eab4c77515a8a2c86400ebf4a8962f043fd6195df5437d9cfa2faa94ee34f2f971a4b7c3d872ae09988ff38ee4a6bcf198ff942498d41cc2b479a8e84761dba158e069b356b0231b868fd8b058dbefa595de5fcb41d490a3f2f517bd5664f9b3285a0d099f22af08ba4eeb052a104fb0acfe44f7962f5036d2219be9985d4d88364c2c336f951178a61b091037a3de70930c3c4bee004736c4604e03233c340766f838fe598a6be085cfc5c3e9c33eff85478ec34f60106dea1bf07508fc8b6dfe001f0f86ef8a040d3e62d1d663dcb76962b0069f4494a3444a96e9da7ce30fe99e1fa77e6cb9de8e2226ea650b17d3da0296766dcfd96a1254eaafad742a8ac8df1bdac36249fbb316cfd8ce2d51eba60b03e9606e950246382997e2727b57d1a8310ee0acc2b2f7b3462e08529b18030c7733aa0750473505adbe22f7b701145e8580fb04b0573121bf4102a7a39fc3822f1409c92dcd379cfb54537de7d95d22cfb54a59a30221fdc0e1acb4073bc222ebd91d5e5d9a83cf8e7c8d94c2b15e78e81eff55dd77f00ed5a4ff78e87445bd4d86c39ad008496a74ef937cbc039bf9e042e543b531fb2f85270c47475925d89800a0b27ea6fd587f0994df50a69defa2338f07c4bf7911ad46df53a485dbf7ff0f1f68b022db2e36b3432b9419425b25d1969f8c36defaa82eaee13261d95cfde083cc54c2d6a62f199bae046a0d01e31dac498db279cbbb4c3abc4585263a2550a5cdfc726ea64afb0ee9764dd23fda7cc20b485f56634cab4b5d68ce79c22cb2ed4c50bf12d92d67ede192a7306e06ec4bcce3e733542cb916ac9622d8fc0155c9734712d7b06fa264edbefae38113520362fef03ebf91ef587d37479be0c4b7155084a9f7320f1fd6534ab230025ee861ee3e032385e81b7b464f8190775509d01f0ec81390ee2cfc20d4dec5637aeb1ea4029d0e1e90a316e052438389136df4ce0ffc70e292c544bf99f7442981477671ed4e2c7432e3d9d56d9ce92d0158f64917244c2edd440e4b49d0b61fc35ef4dbb8ef63796a14f049993a64c65c13658168bd740eff0268d840524727aae24c4efb9444b3e3d28bb96d4e8c96809c691f1ebbecd2f02a3af3e3d9b815d3a9a5b7a1ff57c47de8d60c729cd693dbecb4cf08a8c36781331e4ea02e07077a33f788ee769268c6f4df644e40f162b9b1ed9c45d94b09f0ba370992722e943b39e820c6f2b34bad117ffe8f606686da81e3069561e415ecfbb58a9d2188a9e5e3d0f23249e32452df66c2a4f25f9a98166a3ab17137ce4d30e553dd3b5f6d711a9e4b30953e8496ca2d5f28cc509b4c82e537ac52cf316a3e2f48290f9f34cdf8875d5702062c2a68d4715baa4c403a0bf86849da7a2d437c896ed6df6f3cfdd48214fb4b0f8349d9d08e57feb2a71793298cc47d5824ab278d6d64e33c9253339ec8e049f564ccc9f2e52ac1c29a73ee82c0b1c0e1e52d1929cc6e7410934703b6377ce10f7310732312414f06b618f53fa326c2bfbcc6b08e68359aee7ac5ec0cb9942fba101b4dd35d2ff2e556348e0c5b9a674695b9b64a95db100c194e01d8f6647a455e7ae046c52260813d88762eb88f4ab3829c8a2b2e24a036855199cecaa6d7fdfc85f2f29f40eec7e8576bf683c19d4c643588b3223e116730d2bf0d2323f69789598c4e5951d0badee8717d425d1f7dfe70d93abdd9790db5ca3aaecb3576f6e8f55f11250ff34baa96cb16efe13578f41eaf8570b499d8ebc688da15de145c68f065811d4d48e8fd5ee3f71e88c1ad3bdc73aba0e6f85c39d1e9e2d99369b5551b24e7a9cc71f4ea26fb6a538b98098c0580b8aee27848310778360b46678b2ab3358b44a026af072f909a441a2fb62e5d65f6c9fd8c2456c1f99c5601e650d2395c054cc9221b3595b5a7b3b9fa27a6d75185e1e2b2905b9b92e2ec4faf07d213477d0024d4cb10a814f1bff9166888c6d7745d77e71bfcc6d6a63c22650ff05bc22638297b6aafb419291a9e7855623083bc29eea188e6147dc74e65c1ed80ba1130e770aeefcc57005403a8ac417713492af32496b5cd05081c08c25458605a3ce38454dcf586f61f0cb95e9058d737bebd99a70ffe15c0cf107c1f40bc62271f61ab35ef00d37b7658863d5f08d303ca95b4b95a0fef1608476033d07b9324ab1cd3de61eb2a48e9fa1d27cfe1450d15ce298cf33ec3404887865944f8c155b95c9831ae95df19767fc056ede9a58513f04608a1932a734415a122fdd81f50670bf79a2446c9fe908df476cdf70381b9793c83ac8d55d4131a051bf2ca36de6beb6730aef67d7d6f6c6ce170c49e865f8a3452aac5f42317633bd2a6f49541198c5caffa8cd085c7202d0a1bb48030ff65acc137ebbf7b52691abc5bebfb70832275c9dbb78865a17f6d9207d423d41845f728a0f59e4d13ff033e127d44c87a4eb24a7fc89b5ff4e25268a945aca858e8f9a4793eb1ca72c23e3e9a7abf344d2404f6f769da71b9115ea00e724b6d25279db8dab607d3563cb6dfbf2d8d94fdc70dac97175a0abe3d124a4b74dc4bfbbf6e66f3f923161bfc44edf1933c4d62b63431d9dbc05cc75b19105274ea0cb82ea7b24b332f3195f95c382d6b0171584b1a41487252f0860792ab08d4310abfad352e1e87b04881712a2ac1150eab5f5d243348c0b6177e009a6295872c0eab836916379bc043c86c24cebb991aa915d8b2829604a9af20717e304b829e4ad5bd5414c22c757e771686910826671f032a05b8aa10e3250024bf53293ba24dbd25be002085cda970085d59c6679db5a2986e9de875518b35b4a25bbc247e83cc865254465462bee7b0a561dedff85699a2835cc78d084c437be5ee9d1d30d9b7cc999a92d2e8ddea86492d22d976fbf4c85f23d4619ff160ba92b7ffeb4ec9c7203cce1f451ab16fbfc013d78d1ad575485d84922ca4acbcb6c00a94e3945462ffab6831082b0bfcfdf38650f64bd16758f89e3518437d7e8fc3509d155053dfee715b150bf8b604b4947d0665d44311a1c675d8840e60ddbe6eccaffde2f3e5c0db7cec38af6747ae5571c99e0f97a4dc427e39f6c1cb1200ccfe257c66bba620b902e42525f3fd44da539ee7ac5fb293b2c3bcc5dfa0ed62018841e0338427babbb70f0e5311c17fe160e93385611144204ab33c2c92e3825072cd3d6bb486d775b1322241692837d6581095a6ad926e4a98933ab13f42f1e5051722ac37de85bff28e9697aa8623a0034d0249bc3f726759d9fd879915420f345366154bd6a7c4306110dbf6b4568543e0807d9aa82558a1a8f968c3acc43a9f902f6f6a0dfda32f4c5059b041887b81688b299411991c1211c9c95d475b92bed90340bbf98f907edff8da345efa306d778f70ec31b2b506271fd7ba81c606c3f1a7330bd20e5b2393b2e45114523443c1b0e1a263fedb6ca8ebeacca283cb362aeb65b765403e8407c48980400d5df73bdb90e119ec0d5ad1170d581a36986031436889ec76f4186a8c5519ebc1bf8e0e1798f1b524f8d82077b542b33029dc21e496149870d71a690ff1259c3eba2cb6c0ffe525b5712332e4688cb4e65ee72fb5ed2cb005ec5b3f34fbfc578246e301a40b38ceb6148dccab7a80b2b2625c6260b0890cbacc58aa46f9be4b7c06fa5eff704178b2e469c919e151c44696e2fc1bec5fba068b9ad520418a9adff48b0bdc9885a87f44b7b6506ad2ca25b095388437df3ab44b1b037c9d7b9a98548cb641c9b8b0016bc3fcab24fa3634218180271b8ebe1f6cf4c2b2a0b0cbf9b1fd4c14bc1476ddb0063658e4130fbbdb4860816abbaba5d157c2042ec40afdc685d875f34746809ee5041b120f3f11f6fc955bcbf4ab17f4348abc54943643c14e845ef27b4c83b3f32a4a5f987ba819d10aa730e8e862ae1a31dfa2628396ae2d5c8c7f3e6cac024ac1391efc4f4fa7af4bf2bcaa8a019afde62205d974972829f7d434dd2dae7a6cec69e76a03742e142989d5eb8e2ea5efd4adbd7eded6f37520639bc2e64693c5882b73dc43f50f037ad52cfad3913ff8f49d5d8c5b58ee7cae35fbc87795f358d8e62e281368f62cdbff9aa2675395ec946122e80b56cbceb4081e9e36259ff4232bf464841388103fe61694db128e3dfed6066b78a358124b108494ac80f56d6b135abf8028404d15855e8e603279dba9551cb8b8ab6e09a11494b3ddad35bcf16d7724fe6bd14ce94ac848f89ffc60af68bcad99b00301de916bfe7078edec862338db8e4f27c444711e3d097aa073a656812cb93dd90688bd309b25e9e8e0899b2086438123ddb2980380b4a1bdf8ebab0d054d2bd13ff32728ca9b5f704d0e4bee488eb6e22b1f8654451c7e0efebebbf7618cd2fc1ad999a307178b502b1f2f3e15b9a16b3b17386792f4dd402d02ed90889bb22689acb60278f81eaff9fc896cd2231d436469f9b05544578813d35ad5c495bb95726383ae12c7b2d973cb1e7366e9f9f7273bfe5292ac1db2fe5cca9aa592420eb9f24950ced82ef0a53e370c08ba8b0a8bfe5efba18059799840ec91feefd217427a856211a3463b4d06c07f0428314bf54b77e08277fdd318c4b7b7b87f10ca2f3f034c81ffc387d2135a1862b4a234b0c9ef5dd715f7556e1bffbde5670047b5f981e8b1d9c15bdc76f52007ef2b440ffbb4990731c7c76a45c0161e9a8d9d4295daa90feeb80c6af1e2379ad8503a18c567a81269f018e72d9e0cfc4bfbb08c2bcbb971b02c5885c1bb7d126679f8a7366b9f56c76e6dc3f0575f7b458173b858d70ba233569c632f26648e525137de542b33ff8fad01082a22754c5f2d60e81ae13b1c056465d39ea4c7ba3ad67f528727b40db585050829673460b3ceb251d451b24b274c5154df2f4cb0112029c4e60805403aebe5afbc20b7a91d56128a12bf8b0c38968e9860dbf0b532e5a8509b8ebf7d3f7307a752281cb8d39cf72d1aeb50878e7e5f36b9b22fc5937a70ad5f1453c0a9174c74c052453b7b4daf3ab0368a58f63ea9ff91570245872b99bba8597485c5891664e122b444ab1a7cea7e6bf3d6ac152fea084ba6cd2acbda22dcf01d1b99d6fb4a3db502ec19f8d1cf4c46311b374d460425ebde39c08c70b1b49f4802a87377ff2d85132b1a6ed636a98f7b5d4b55181ca7354fd48ef00886b06e36216e083b472674c9f78e93aa9fc25055754091fe0ab9d70a8da64ca723359bc804cdda9f30c3907f5ce0b8cac530d461e362fbf4d14f1cb0053452a5c27a93bc20b6e5e720bc0a065a2a7d87ab9562522b0962f52fec5d6731678a1f9aa56f736361fcdd9622318d959d891ddd268c5f342310b32a469154e96b41c404077533ac77ef541f5465a8bd8dd72ebbf6fdea2a2e6c4f48411d7d384a0dcd519f2c571bda25052b07527c5a19a05a044910ecbc9e7f9e9d362e73473c9a7c42d206ee3f3b1741b735afbe8cff93225881c3988b90a6ef0048ee9d1598b223a7792953f83266f6d5488583ebea898b2a8353a7d49be2c2b2c871194d4269b6a44491036f36c5a462902a49e472b556781ee4dea3f3e13f8da92b388118c846601f7bff4bfebefd2144965e1252591935f24e9116a14685045098bae254cb4f8de5f21c9555af5d9fb2b7ea3a93c625ca79fdada56c703bff35023f44d05eac365decb64baaaa85ecda46386eb4b72abfae26366fd2cc8c7eb406b6b9391e5ce1390fe352171c3e012af250a82278589b3641d2d35bfd0c55362c797ea61f886b0251eeb602dc93cfb290b0657b8372a8918b3fc0f5e67aa26eac7cbb538780146ac12a563fab28a3a1338f88705d3d6695b0ee8656fbe04a96939e22c684885586bc210c2d9896cb50cac8e3abdea16d9f05b12343454f366e72e649abf1ecd1f878e1e60ce46e4686a5cb49fe87216c13564433ade927cf47c6f4bd0c889f28d73dcef41dee2957974e8ccfe3decc3a875c03d7ad7ccb1df740fbeb4b1b90060157c247b579d5395c31c01f7049b93c95646447141d7582413f00f43c3b767c60bbc174aa1c612e91406d11062d92176943c1baa38196e8079bfc633f6fc011e3c83c7ef9468d5a600341c1abae77e57bdf23714f3c294c1e37a4da86abe168fbcdd90cdc3e3634277b4534c0103b4d0d01cad8eddb06bd8d6648c27fd572a9a47f56715c96428015c96db2a7b53260b8cbacb76be2adf0783a6ad83be46ecc2c6bfd605464156f6380a8b568d6ccd76e2d15c13683bb6c1c9f261a12f150098ebe955677b6073f15ee8235c84c37b33741bc6bd604b3178013d0b4547fa8c2515a23443a70e6d4e6a255c947ff8ccf111776bfcc966c80fa228e127231a8ad8a6796d38c17aee803835445e3666319373aee5bd8fc87cd288bd0fd269b341eb14fd8dedc8bd737b250b2e32a69f5862616301aaec8743839ed4f46f42cd033cf56cf58abb057b2ec51e11830efcb2bdc2f726204b30ca3257952d84c29cfb5637ce24a34b1512e55ca097de82953ccdd885c6034f50a65b81f571a69212a369f41cf138451cc8ffa805244eabe23a69f9bbcedcd79a0e9366bb86fed0cbcf489a71e6f66f1d6dc5b2fd3bb15b4187f293e73383190634ffb97ecba6bd99ef471bddc5c9bb34e376d4b324532c011cb5144782070640de7b9ce65c38b2e370c75f16bbbe8edb14f4ddf9475b5323fe31fa2883375460040afd96b197ac44bc9db7c3667222d551213f2cc8fc335159a2fb54d8330cffe032e08321d1167c1d111f09835d325e5b9f34a65f393cab4891699b830fb1010006d6ed66bee5d8b38335685615ecf2873244944409a93d7efa3f5a8d25853c3fe53a5f5555ba24f0ef1f3ae300d701239ca9953ac71cdc7d1a3f96ce2f7d559067e3f9a64584cf2c4eb2bc8babbd52333fadcade979d6d87cbff10045a9c06abbb187f7cd43dd5706d64d688e1ba575d1ece7aa859ffd27d7ea887be21f0f7e4365d9de0d9b07b32a6012d9cb80cb30688875fbff2fc181b27e360ebf1c086e678eec1d3054287b099673d43e50a9d84b213abae50c322c26b831b2f1084f3654450eb956ec92b867ce14006301e90309bb3d3e34eebe0638a10346b081cfe5922cdc165365a4b9e3c06b932de276f91e834b3e1f3ad3784333ba3e0b8778e365a7ce6ba395b463b1c549eb2b429e21d84c6852d6d57b59b8568a3d24236e8116a8f2ccdf3034d12e4c2ff82b25b8c2ebb63e0b6591f9fb2bfeb49465587f0d1ed38e6130eb4412c082fb6569cb6c3dfa274ad6bb8ad01b99f72a6689dbade702f1af33cc766960cac913e9480a2a6549e00dc66e3231bb6ceb895eeabd7d933e209bb51c0bf57cd97103fcec01e0604d0a945d7bf9c9df6038123aa7bcd759db0d03dfae2a77c5cd8241e9c304f8798a768e19ce8c73e3ca4c8e135bcd9b8994acf21006ea297cc5060014386a5b45e81aebcafc4d492bc4cf8b1898b656b8a43d00686a6075f8c523b9a9175bb3802904b3e3faf4b26a0f3e4a3838d7e78f52c6207db528ac2ac403488fc409f7887c0e5d0544bf196ec2da8264d03cc49a70de991807edbe153a2b85bc066c1ff752488a320b87ae4b0f75c78d372a2ef2765e5f80a0b8dac1d5f04c496902712a2fafec2f1bd3ae7d0738aeac64632687fe511af409192322d205d7488a80306b9e97e70bfc8fd1f5390ce43d411ee7f807cd3875a27b523e9b1bd57d1eaca5398c5077e2b56d64aa9c97c9257da3aac83c3d3c69eb480972a3685bf73d9ea3d1bb8adc57d489d8fca73ec3d67dff8c1b0270c98393dd98a6e69f642ec381acd7093ace05bf50f8eb2c7efa14d68b7c642fc0abfeee5029a84c480b4bfee16565304a68d713f5f19af18c389d4f9e1b018bb74aead988567212442606bbbd065ca5c7666cfb7e197b0518b0774e117da79395aa03aef3726eb105ff5867d31dff301b86be7fcfbfea470f02d75fd08ed159fa2a0b8ebeed7220698e1a55e57df58c709551c1845cc8ba2a7678d511fcd832f6076b368de024824186c348b2a63a4c221c01bba4e62495202f311821a4184d1469bb368030445f60e61eab68c21425286081798f355545b2e7ddb720b79972b3e2b94a7d05819f25c3caae7e392983e29843dedaaa93aaf4aadf86ec8a79bd71ec142430a95a98434fc38b56abb08370f9cd28f0d0050d3982095bfcce63c40ae7c134ddc9038ed4c431f338f70f5368cba55fc27f5dcd246c26cadf959bc18ec95c2cc49c4a317bb66fb7033b1d2895d254dc83e98b44a61d659f1044d1f6138083866cd7aeae9e4a3d0f460ea4cda0089fd539dae60b77d8afbe02c8bb899b5cd053601829b8eee6de68e4366a5a118b2b498541949974fa738f54475bf4773979452719979f7bf6ae7d0ae83908f244d34f77f859d49d99b52c56ab7edf7754f18a04586a887cd5b8ae16941ac34898de090c3b8c402b346ba84d1022c8c297c773c49cd68d6598c9e6f4658014d7d74955973c86646137dfccbbb740f369e921bcb62c6b0e3238ecb4345cb2435b233da1a729113fc8ffac2869454bd310d46982a165afdbf74f7c84668dd4e17725ffd1a4819008bf69ed238b73ef20e8249723c6aff2c9fb8e5621214a81b629f167ad63a6578272d7979753e2199531654aeb4932b7318927a0f80915216a3fa87232da0d70032621812db804f14e4b7f536588459038e77acab17ca6001f6a6c58af7fefca19bbfe69abe46230f3e1949eb1a17cab5f35af8a51ca56faa2fe749c56b4a07aae4fb658ac20a9522a6023789248ed0cc7f64dc0a1611071e3d27adbfd5796c4569470b5f5b86a2dbdcb0b95e926c96d7f321d5d0e08188dae5ce016a4e281b72d12b8f09f3915ca00dab57544f255c9e2678c178c55cebe44e469df013b9be25afdf02493aaadff20fd76df3dd5f348760f2a605c30099627e701f5b2b091061f3c5628c65ef4e2b3d6cbcbee40761371dd94174fdab57759695ce535143c828d02420e4c0faddd3049ffd9e3b56d7e9b3523d59424287dba9743726497f37ce0c11950102e56ccff7f4c1e47a464969a42928c347d075417b3705da96649bb655874e6313ec30f318c787730ca791816b14435b8ecaa41412be449d7317686eddb184285e54fa7b29ad116fa3a4bc9d4b7bce77cb2466eaf2ed27ba046fb68b29fa74e528e7bdecd7e5bb477b4679048b0634afc17d1309dd3acf99465ed4fb529ad45206a98b9be1820649dea21a283c0fbfa60bd25e24510e723f02f6dd980f94abaee51eb8db1e0c69c52e9db8de5fcf8195b457669c068f8d61b9f0a8e749d3014774f6e6d359c03409065bbc3b7b3c16b80b16edc6587ab4cf15c8a97181dd7e5d5dad690a675d1d532420b77f4b6759e4e8b73b813408d0c95bedba8cd7ba0b5de0b9814a802678f9a17b4605b24a3f8f8c6798f6abbf43ebca1821f7b11242eef93c0cd385422b0d9aa557e122b3c141665fd3fed09784885391937bbd2f61f3690b11a52fa141580b6d01200191ebfb6a26af08dd5988912e0d255f7635082b5196636a5c8689a52ff8c49ad231bbdbdd9e7c0d21b004dc222ce000aa9dc48d1f4f6e1e72a9e62d1a2abaf671763f1483dbfb6498d6c04a689b4e2b98760e9e564982d04e0627f936c35048bb3e602eab823ab03cc72b732efb19e1a5c0e690c30747a6b40de0771e4eef45905e7d07410ed20fd256f3b74e31829485d1eb230c9ba565f61145d6db16552e2aa91a6866911a163a8270753f5190c5f6989c0219bd5f5aa6e35c5c01864d478591f5d1fb423ccf4ca0596c190eae1b5ea89daa1c20edb8b07dd8c01d0db4a3fa468e9fc0a5b59c7cba4218ed6af218f8c89d4d45312c36ac22719bebb09bf6a4cb5e0b2ba226e6f21fbd5fd49d91b8cf441f340482c80b906991a8c7a0a89cdd72b53e146f57a39d93f1e5dc0599c3ae6aca6f9df2347bd11ffe76def5b644956f4128e197863cb58536922d638795d4f05c0e3368330d07ac4134cef1577d59f792850ba877de7eddeb2b721f3cff9a04ee26e34cb6553d0a494121cd4863c64b2a479092d02400a5692b3d92761096cd62751e5862542d6a2ad352f4592642d035743db55d5eefb8aa70fa4928559970741e37df29db162247092d14b4b8004f9d758b6e0868c2de2bea2810a960427839aabed6377fc87c5b02b46f54048fd0481a50a2be6c62e2dd51ba99f0cb5cff7762853df0195d6b8589b43d1718171412f115f631ce99c8105c33da36b87752523a36630c40775af48e636fca48b472515675baae5746c01a2b689350a425a7a1e7c5712f91baa2179875973500e78ec348bfe9c53d051e1ff1fd5772fde8457091ad6d59512c58b6fb432dfcb894f9e027165a08f83e2ea3b6b472828b733498511fc0f60b36e0a961ec507868bf935986c4bef59248bb9066cec5e82e69a413d2aba82bd2f35ce1e38630e9240d25d17be60a3f2db05efb8675ebe1b812af9f602a2e9dee6b8048dfe827cb5483d1b873844b00a1c7dbf4c57cd5dc501d9cd05a33f9141efba4747fed06ebbbbecd7da6c8d5d3e693c45386defd293cccdf6bdcd2810814e7326078e6e03d56a779df55d8d7f502925d0ed31ebb3e2143b9e6401465e4f1b29711bef4a401f66d2816a4f1ce3b468126c14090b393689816ed83aa9091f5da82bca2bb34f982f4f63820db1ec5c1ac0f037cbb7cb8767edf87142d44d74f15c79cd0971b7744abfce974ad9bb300e05a200a9fb2bd309649230f4361a1df1634d5f1696e7935bbf35fa6680965bd709e1dfb2292b85660c68427873a4761da7f85c54b29e1283c665e983a476e7d922afc7b23e7afd55deb0b1334f7204477ee4d9d21d6b1944c373ce20b156a6002b6a549612552f6afd069a2c0ff01990f0dae8811f2051449c43cf8725c3fdea540c7ad32450157254bf8ca89d36af707cee9a003c23c031fb558e9fb74992bd4e3c9a99f1163a21239c4c23cb862ed4c2e86bacdff2e5ccd222be703a911628fa115924d2347fdc21b3d636204451e33a3ad1b157e5da3f7dcc9ee7d0c9712427048faf0fa7d0e12b5d13dad0dedc28520a50466ea4414d33322b0952e05e8cf7133ff52e86783782d8fefe9d9a16b0d02b9a876c463cbb852ea78d288fe7aedc1f98cf329d7de2673a19fcb22ff736fab169d6066bef95496ff72652b8a1271aa18982391e310a3ccdc28684ddc8ab31885e78826413aba3c57f9a2d619dabf9754a2108ee937b12fdae480d4ef5b7acdd1909d2145a05fc81cd9921422ebd94f13dc5f52bff363651a03fa1511edf8b671027726fd859797fc8827e907d7a54541c91969aed8e3cb03740bab794a23504a5bd575b337f97933b9dc3a6a06a9d9af5bfe204102083f6772e698790138369cba7c7bceef0a5daa11a69f5f6ce53b5c616c44185169db1b1ca2959693f7d24872f71748afc25a160d361e92fa4383d6aba9bfb032163373706ece74de6c09a1349d5b670cc63ae6b6bc6d018bebd947291bb19adffa4f7f19c3cc94f9764ccf8ad7cb4fd549fa90199f9f7d2a5e1f2cfbb0b37660b4f3787486beef69afffc179a2ae2aa190f9059b7835526e6d4ed1307ec2fadfc0eb4243ae001106e0dd78f3d2525f59fddb88475cce686764f74fc52cffa94912f4d1e8fba05b0bd78a693bbd30306fccbb53af6b90e1f70e9976f9e4ca35ff20f6d7b896b95104344c8b1d2f4fab94e2fb4d790411de1ccc9db3abbc1f096b0e507730691bbf08b0b3d9111282d664da0d5f78b1cc6f9a1a3363f94e254fdf0e1609e5e8905f201a297eed6269475ad1618eadef201087d648d6344394c0c9bc3ba01357a4913c7a8539a8b68bd50db9471e728aacbcdddd9dc52e29f381940d4148ccee86fae0f0f7713ef37a644147173795f6b79801250d540c2daae258d6f3fa715a062b069ab4316507e785be79b31a08dc3834f9a70dcf7c588d38cf31acb0e829a9381467eb240011db09aa76ea93128de680d4bdc1580a1caf457c9795b280cc348ff9d28bc91fbc27cc9d2de6a02aafc7546058a67aa2928b36190b6349b14e689e7f02b84fcbe0714f62ef62163fed010b8a6d51dae13f6b111217868c92b6e21a6650c9e9005b05e2ab0cbc64242b0ff72fb32116315b0c5d03691c59ed33887cdd82912a93011723b4a34b65a1fb6cff88df0c1612d9af0a6c49f75795c5ee98f7788a974b6fab1f6c8a92692ef9c49f7f5ee75f813825a143a966a07b32f201ae31691ea2fa2b02dba3b093764044b7bc9ba99adb9bed0fcdd8d18cd8b935d5cf87329195129bf8c04d466d2bc69d14c7503c1fb301340fe2fea96a71277ca61c064ee3ef9cad6080989ef1967ec342f86e5d0b646b3469ee32745020572dd1052a62943838146e0834249f82d266a19d05283f07cac2803f81d3728f49aad02048c7eae557b0abcbf942f63bf8b3d101db536bcfe078208e5ae1e7d55f4812f63f5d52148169dcdf7cbbfe573a313253c95f71060c6039e1c5c77faf45064f7cf8fd6e07fe8de7dcf7a740c7a26f9ef7d3f3696e3c333d8d8b9b26769ec2d30ec97377c5f4f8ca42612c5340ed9792c736d634ac427efcd126bb2d91544ff786d362d0f436b14da417e164c429909301a9fbb8849ec1cc42125e88959f69cc9a3da0064d872cc2f22358578f989b37808bd100d2f8ec0a07bd56bad3ef11292704c0a0cdf69870e4e87f5c9c923136c830976626aef0cea3031d2366ade97e0efd6bc64950ac09a4f7216cb0a5c6dd8de508d93724ef4705375c2cd61456d30fd05b94ccec32475e70d1170901030925113da01fb7a5788221ab67483e2e3de8c615e690fb7b7b8699777312ca3cd6331084bcc33a259211713b32dd502e7eb7412e249aa1e2bd054fa5d90cf40e4d1713f34fd19f3cf541b18add17b02396b881cd0da644600604071a7fa7a51a68f1e90c3e2a82a425e2de773ff0b79736f7a1603777ce39dc100f0172a2109b37dab0ff4cb56c6e334a5882cec4d9058c7a259e41c5d87548611572c841cb43e6a4951ebee4a5552bd16449bdf325e86e7ded27bf4b85d07e3dc1d3a0d1faff70adc10bc3ad3c9edcf6b771f04cd7054541a5561308c36e8ef5430497be2cac64480ae4226af395b7f095d6a24f5e4a7d56a2defdb4c0507367951685bbe13a6d2fa4d1f99a6a5fb3a3f6d8826759eb00e0c724de426228b4ecc1ed25dd4e36c5b4e24222e88f71bbd1f8d2ee6d34b8b4ba744093bb2164a06ae472d2fe1f8cfb507af0db007baaa85fe9d1ce25ebd8056e98cfa30353dd87119e2f67204dd5613c6058cc824dade5f8ba3763a65b7603019f5fc8c5c93b6f9a48fe584d46ca0917afdacf74f97dbf7de49f358612315fa932ce1702b3955ae5fb131fe6089d0f1163cbc312eb10bb7c8ad1caaac41f87078b70c684222acfdb14f6471a636c7bd8687953704478758c97077f227d4f01cd89d6daec9dd91fd5035f19a4cd33c54aeba87704e38ff5170ed6eb67c785321afca031b9af4f067e0e3d935b3e72ce9da06fa875cffe05f6b0d81e072f5f8334892d0794d4133b1bf78c230d939109ac6a87c7760d6a717bfe99ac38c58bfa05b6f8d40f12bbd1e0b917fbf97c0f840f650b8736344da035353256794a25df6a6ba6703ce75642a117b39ceea14ca872556533349f0cf120fd3402193aa4337d6411bcb7d49498c4549684c7928f244814466836d42d14a5ed6a8a893e49961d57c101e382041e3a81e79c31a4399fbfb7a91925f5e9a3ce6fd721a84e20f49f9e140e3b19d9371575340986b27405077899dcdd7eb890c3428f67dee4af51a0b66b2fac8a308cc2375e0d8292794e5918d6831aa42e7f7d57ef6a1e1a0abec10726f626569a232075c0b5c93619022a21cc037939e47ede7244581c8d64bbd9943caa8b3399cdeb267e6095dab3d91e07b8639c0ab7cf9725f30e32baa3f813e795a04338ddca64dbcc5714372cb1e7eb1d00557632d6337f667e55d4df62e997d32c0be1ceb60ad2830f17f9be8066b72061e252e4fb1126f765b22afddd547c6505697d5eef2b18746278ace8a5990637594a73b4c74c4de26e048b02302d9ec9e9d4b7456ea23f812d3a18264bb0515c27cb5852bc0adb8786bdc701ba29c2b1941085fb1fe9a5c9748178938106df5129be6c78ba08608304247a8d9457c8c49a88fa494edc97eb8c5726573ea01cfcf1531c3aba05d00113477f32ec9996fb79691afb8539daf8241aa8b0ff47ee6a672d2c37847fef6d6691c1f32b5226d6ec468eb1edf2e84521e6e051d883f9d3bb86e3918d2745df7108eb38736e775cfe3e59f2a11c3234358c67915d141cfd2b0dbf5122f789320196510a65445d1c74eda2339514cfa90df8f7688e39372de6633bcd36be882669796f275ee0e3883d68992ae1c33ab3d3a3e91689a413da221275bb2175ee1200824ad1827e73cf1ae31ab6bb7a58fecdd3a2add670e387c1383d0b6daf1063f67870173cc22d9a887539504c25c9e061a1ac9093496211d8de9de0d15f7f90582de65dd08d17a8121068f196d6274760042d076a3694323994b59133b023b0a88a76914ca63b06f21c974139096208cd29c5ac63d461e9f2ae9452f196e11c552f178887178c5600c420b290c87bf5973f7e96e34f5aaefe7ca26016e95f5bc9747660fe4a405b9a3135322fbf04a02c75defe6100de9ce18859114202d9a362718e21a216640575e4a82a6590b62814c4d3640e64fad4b04470fa5300601988f82eea939cb05db4b0325b03e246c682252362924c8d1ed0e00dfd185594ced88f65fb2bbf50636ef6c38057e4d6487c8113e8a0383e879a8e78fd54053053f63743b4a8f488746a322d58fb7baa4450e1b0cb4721af02538e8fe62aaf98d9758e2b3c4a87f64453bfc32f8538699930d14f55e9f27968e697b826ebe9d72df940cf4003a37387e6690eb2c84207483aa503bd837487c3924b4e9dee9c0f37da90d9be92edfb6ae4df5e7f924592885cd063779223d60074a19e89028026e963333337a93ade9db30a19f96e8a258407af3efb995bdf2e13c6e31c7f5f02ac96df60a53bda0393dbf8d30a29c0965b000940c222b86a4fc097da723b3e61046f2370000cbfc19bafb95a30a8890d0489c3ca86c32d4b126637a952217914a85477f0db58daa1243ed6284e3e6343c9306e9a3dd12388fbe0d8d684fc0c6b4987fce5f3c0d3c07d464cdefa00e880f607e4add89453d64d71fa33eaa7ba56a3b82f52c7a32c1a6360ad9b4632fbc6b1eb3c735ca7b4126e3fa1e1b8203042a6f2e0104ee7fce313dcb28c2ace0804586dc19cc5c94a95f57a53086da198c2705a0595f1abd8ed35bd4e7e0f29fb0f3c704e32a70a49aaa3b5f525639bb8ed1b3ab357e7206f15c1806183ba60a0d26bb3fa4240430674ba908af5533ec7b06f212051484ea8fba3ace99f6d5f8ea8534cf1a27f2df8227783e90583ba727fa980bee5918642d40498e72e70d532560c34fe08fd940e32d7f4c3e8a89490d48c2c4f4ab171af53bcf6e0a233816ca24cb4933e626fe9d68f796e10e3f98d532e4627343f20f7806f6013e96eeea9db4d8cc5b0445f61cf9acbdf0653326cc9c393a1166b3253f4b06a07df3f5b460cbaab0e035b7d35893102ce68e88fbe327251fc36156d5ba21bb0a5d01555b3f01b1734fed6aee9d1f7778a401e93b4ebb8df66d1f9043e2ae44a9fcc2331b30606f008438e385692f22b0174bd782c6802b1e3aca9bd37f2efc516d2fb29b22adcea9517ffd958623584d5012510f5a7fab7268dd8a0c4dd8d8e945919e31b38838e51585cab854b24fa56a3d6a4e3f4a8122b7eb5ca8419cdebeb98356ded7afed430896eb9fad0dd88c5b50ca5a87593b349e3f2c809c58d15b784d6d60634821869523d3729223ca2477b87423ce44120bcaa322a568e0f3e20f2dd8e0c629ec6325747af356718ff320b4dff876a3be6c891bf99a786073dee5918ce0737b968099500ae2ec0f3d3a67a2bff95fd7a8f7c7f80ed718511f2cf94a7793abe2a1170bc8323eb3c91c1e8e023c77900b5df486735e3f778a4580999596eef6c66a1ae73436a7db5b33fd71c2babf45c23bfc2efe9f44792204bb903d7f9de9c4083956ea273bfd7a0115164112990f12a00d32cdaeaff8e09da77549ebd99d8fdcd452e7f087de732729e1cc116b01607ab6f82b3604eeaafdec93ef4b707c3ec9b02d53e831e0f6a54c2a2fded65820c508b14bad794edbf31cdddcffb610cfd9cf73d9e00707b9306f7f1788d6af885989f488282ce057862d9abdbb88bc4f650624fd64806e96ac04922300e33d26e2fff57bcc144a893ca8c4ed5f090aac035e5704c1c9f907f7ac4bed78d0b38f1e57f081c99ed9acdaaee75adbe3eae9c454847723f8e0010b98948b1d8c2455ed88fc2ce2af5e296e3aeb20dfca2de0acf9d2406fc373049f4ba9b02515dbbfc0dd4311e44fe3a4a5250e60dae97a08035bb816228946b351e16d067a327288191d3d8fb49d014cfa0258d78bcd4686d1f2b6b4d0e88c0ab6ab1507dec884d09cb2654724c85beba79a0d66b8ca3ee824cb6ea489be402d5f1eee47ecb1493104c6cb4a043c821d66cbb495427153300474ec4d95c81530c4a502dea7b096b4305b894ea4e9225e45677f019225a0a25e8bf5dbe4c46047203f76be7cc895fd0c9cd938b2389a15b72871bbe610921d239654bfe5615ddbda510c5b94c4f0ed4281df2699673a238c9a60b9364e78a220ad753659136817b2da5dfed31f531b46b1ae0d6db8616c6beb995a940ea5c12feb87c853a9bf86d9b227ee090283701c655ebbdfd7f21acb5bdd46b7370273309a0f47770b625e8e4b2d2b962eb219a6cc862e9a1e4dcba2d47ca25250549363842ce9c4a286550f77322b69a9ed0e402a6fcda35c59fcda3868a68a71e4b9565b915cb687c798849a8c2b3d1728ca42d825e737686e7c5fb6efb5be7affc08932833d56533156dfe5d87b1c8b1685e9a02b2aeb78ad5dd1fb338ad86a01a4ac071f9f74425a35d65f6f268ddeb14447f8cfcf9c1a94435a993d42ed2c13e96d411a84062634ebf3e8acd48b9301e14f0af1c47d7adbef66816ffc81cc74ffefd07e3b7255e3341895c1d15c4679a85752e9c5522fab594bf9b324fc38bb9973699cb275635ae5b3dd14db5654b74f0f533e6f0eb1150270f1a2ae5432d093458d800ed062381bba4fe7489e2d8ddfdde1004bf67087ea8e95df96c4c71ab758af06a3f4e459f544114891061d394ffe1281baaaa643c5d25659b4937cd0faccbe23f56459896fc86ee349642b9d4823eaad6bebdfebaec8a65d985299bc5488ee13e44e17673d4a2d2e8d54bd2d3aef4080e401b62a2374a189254ba163b0a8e34dae4407ad2882bc6d371c22206686e1e8e01a2ccbe9de3cf820857f5b211ce747d6f246f4b425fb576cb308ea39a402d44a78653212c5c08f743497412aa52e46a308936bbe87305358de11948962820076c1035b36b0681b3214fa25891dcf48d8b10bb77bed4c34b25fc993db09c41ec8f85924cd94c0fa3882db7066671b976272f76e09bc2b49179cd61ebdd89b65ecb3a85e13053560d2cab4c2e5e51c7f406afb160c841081f943063989f2f7eff0f0c33e7c9e5b5e1e9418041be311b19fce4076aebe7120c42220cb509614fc8a301281ae7c6a0e8c4985b84461aeb2a2c1e0dae947a070ed5efd0d91b2a6fd4c396c1343fc2ee59841e4cd058a57b6fdf06c657ff49010e434eeb06051e3c1796c70912d1e0194b66cd23deb85916d49033a65b87ffba5865ba46434d7e74f02abe0a5a42b041aa980754f03552693802ed9a4058ae03b6d9b79a6eead73a64cb7603bf78106d9376f1c8f7143d5272532af34e24748d3f53a6e47ef3a3e3abc8ad746911edac0385723666719ed76a8c59114c89930c550cf69b7831cd258fcdc76a7d16c9ed1895eb1275508a3ab919cd95e191f9e4a5533815805576a4b3be4632105fcffd2e31ec792b6edd27d3f1b188880d5b403753fd95852ae18c0996c76479246e10d44fa4186ceb81e8cdfa7b42df64b08a210f744b33b327ab3b212127098aa5591563da5ce659090bcd4bd5547c917081901fd295659115fe94f65f33e6a30802dc61126c23bc77939c5033d7f956d7bb4772859bec4dc2217488eab0bbde3b67e9b19791656c9ad6f3c7f743503fe061095a9b94861e1752ebe1d44eb6ebbc8596f7ab7a51940e03307e4d2e4b35cf64cfd36f08795a347f178884ff8dcac5f25666af4a7ca369c9da7778e03a4ac16be9cd510f643e53216cf504477896d7d7a5bf21a5854fd5e9eac50918f466b7c578fe58b14cdc7c3f0652eb726107979494dd5c6b35a69738573a59b3680ac8d24791df290ee430609a8a271a3b3340f5f017417df49c696faa15fc2c11fdae830b4303809eef1a2cb2935df137d2c5e8e267f47423089dc2de1a827a54f19d8a9c478f62dfd1c5f0aea98d32ba89def65af5a7473b719bf2ac9b68c0b8a318474b391268f893e17c35f591f62cde226c5da0dbfa23fd71ade5988d75f25108b8cdcfc48f1c8cd27e003bfa5b5bbc68a7dc0caee0b5042b4bd823219520ca91e86bf965fc368073b84afdfbb9ea0b11990ed1d4ca6b441d632fec4cedb27be5666f028086009fc9721ad4efa450b064970ead1d37e354274731e8bbeac128c681beebc6be6fdbf6f8b4279fb2c0541930a280d91da7cf575f6ef0a48b1a6593cf881c56b0d03a12508270dd2dc90ee1becb7d50ff00ce8156964dc3fb4436d9aa6525b33b03185765552ff741e77dc0b85ec157f0e7b5809002f61d29bbc63206e4a0fd6de47f661505a333b4e5ef77d0e2927030058772fe34a0f1edbb7c0d0a6832f2239992a9d5c0817789fb23286b59a44e81c331a82147de77d5f916ca85fce9da0252f3e6f752374cd056513cf67f3380ebe0c4e746b45e270a6edb563c1deeb0039bdf6ed8439945b44b8191d88c580579c9ad5f28114d8b4979913ad77687def72f2e2a69ed36886ba11201a0a35bd0f0d6efbfa6361deecf23f75de4927484f254f6df8a1eed956080c3722c2717c3cf54ac85b92deefb10de0504cdfc50b4daa2075953496f7e670689dbabaa6d41302c2bd945d40b5d2d7dea70225442cf90f39efeb4aa1b3121a4330a106b89d9cd29f726e0215f0606db39cf5b1fc0893e7a6db81d7c1c3740ac70b9ec6b4f1941d56f670aef293c0fe0d40ca06c1a94ead1bf3d3bfcc037edec48efa505f4c352c995e72929bdf30a53463d3b129bc93cf68bffaf9765caf1862af9cd3bf1aecabe01cebe0d8315a9d42381ff226e204852ca8b6852d55a142fc13c859d09c1fd359fefec812ad98d58b2b5566d6ba5c8c410ace757d30657f3ca5f7553c5c11baeb3d083304d8c30b7a9c2ea3199ed35bf47c688984cc9840cdfbfc5fa9963719c4fab8a9c9fac878ef65912f5e10de426ee22c3cdfabbcedba4f4cb5e60793b9ddc1a0f9870197347773c822ffee600f593566452408f624d7f7524e9fffd13571128ee8d975e72fa25a4ce50ee7f2807f4ae6039827c19a22b33510ebb485fb62417400e19280fbf61072f834e114f881acd548d3a458d76438b0008e2890820dc8783450e4b506dbdd7298cc33eb780761ab5af37778810912c47633aab7113508a4813712b0d34310bb14832f59134a2df3790bca08d7312433b396af691593204b288424c96a313e7ceb52997813e9d3e75d0726e22d8f2dcaa67fe0c3bda79449365052b434a8a9e8843af20df21352287d4c46978eac790b80360a7ff58e1a5b41078e6b3743486f26123621e0ec37c07abae34b6f4fe2e5f5c23c14001b1d75d5e890e86eafb08ae5569dfd4f5b0cb15a83c1f928d93133089f6fa0b80fbf8adcd4a9c668105136105ba88514e13645e72bdb99897417ff07f41fd6ed3f7d73d60d6c74963d9b578f8d7bdd1910b9ff5b1a2a7c63945cf512df622a062a0c89ade1830be81ffcc0014f6ebb26e5a42c135d89edb6921d4367bcd0f21c8dc9b106e4dfcfd046a662eb16baffc65c7c6bfe3b12c399e61d9850da40c1d00b8b93fe5adbe6b913b855abc3cdb32dba4696a3f15096572b55cf8ad5adeedf6641359ecf0c6b8ca4f2644e9551af798d166c54fc4f768110a23f9a077f1030a429b18dc216ac72e39728b02eb85635007c9f99f7532e00ee3891b0ce6347ecedb232d9c29cbd88dec45a41f2d6ae5d7b8a77731d3b9fc119ef847de9e8cd41fd3e5a2db6ec5c4dbd6f76870a9fb3601e6fa0ab028e848c4677eb4ce715e2e016198b32d08d923e1ac00657d91902575ccf15a5b744fdd1af10e1e84c2cc6c8d06496bb14633ab2169fe29199cf27c5726324fedda40457623a3bee1b621695a2cbfae984127a913403f26d00ebd8931a16ae0c5c60fbf6ad51a41f35380f766c4782aa6a6664b260eb4f1b910d45a73a2c191a45a4224be7f6d70317c2f4a53af77122a2c8e21b56c56dffacdfecf1f903e2b297b5f8c0327cf2238d2eeda5d2de8e82ea8ce15cc7192e231245c5868399e6096d362f3e15d340165a00b4f478a5b67c158fce6d293a1af94ef255a9370efae0b4bdec31392bfc8b2a0d451c614140aab6281c1fdc09a9aa5dbf948703817a2b4749dc173a473695bff257c0a92f35683934a49b42b0286c4e013af9c8328753510edd5d17d6b15d8f62fe64958013dc459132a0df63629f8cd7e8e5a2d15b9132f5748effb0c3333adaaf2a6e0034eb7f4c6d2e98658831bd6b8782fd25831d3d1725ff9b4f6e48d671cb72afbe1a227e1c68e1e9881a2218e7f1b1246a13b6121f3bfd5482259cbfce2f2b4510dc96b058fa0a34d4e6ea72e666a7e81140a5eb82441ab3bb13a26e5ac140dd2538d3f39b9a8be1f5825fc06b4fafb1a15aea69cd00fcf5aa63124e5c10ffcd677eac5a3f57cd664bf379653f846015b8d418a38b3e813802442e30f5bbe31620a320e8de8cb70381d51a29d74d4f2ceec7689592ce52bbc81eae4930a2334224fc10f9b897ebf989f350fc33ec684bb0a7ef3618a89d49652a950a11e54f7ce6959991af03b54a7eb8fe8c9423dfe66fdd8668cadd3537e9ead0c8735c576ab5059a4cd4268e000876b12a102ccfaf15a362adb168059efd25b590606d579c792e8f893385997acd0b80bc590db3825f78ff8768a2117e1d5a0932d3d6d31cc87cef2a67e27d61cfb064c3af05ff93f82a6449d24b8a3a5e0a7377ee4e8c1fba0cffe4a12fed91d7a26de51f59998983210c279e7a3e13a5c57f21253d0efb3c80c06c7bff26a3d593d554112c8016dc1be4d124cf11016dd8eb4fbf66320ae0b5d3ad583b09d13551f30e9125dc2faa8149cbfd7c31974f78de0ba491629da7f222f7bee6da82fc09df422c42f8368321dca46fbcd576c0c1f4af28ff1978713fee8a23aacba260a6c389c995de7704ac172a3f7a3b456bf8cd02902dc39107c1b29761493b7b693bab036256108e4427841e9ddbf6d76ee26050abb12925e7ab3479a99fba0ffbe3d0baf33e0f2148154d5cfd8844086a7ddf218ae98f660aa0d42607dd31e6688c4dabd8a6f8a570d26d4174d1dbe9c763fe89cafdc396f1d6a4e260d2106f2cec8036005dc2c1c4436a59bb111e7280a3ad9cb9230427213bb44d88844441b43f74f2e963bbd9996aa049293e57931da7bff32474c4d67b65858b06780867e6c01c4a76872ce0321a1f2096443397161305b9c96c5069cef4b0accc7d7d2c638323a14dc5476f62b6b68716dffa8af160479851f7e6c5c8919af50ef12f772def5d066b2e2f6d05dec613ea61e1dae3cb91da9d227c054796d5067e46b9b593af0c51ce0788d6498f924f19088afaab5060e5846d85ab4eee34520437027536de88307978bb3b9b97b9ad5cca98b074152bd426c1b1efcb038b1e1f2398744d74e1c5b00a2de73cd2e8c37a488118e8109b0b2caeaf1ad5b63ae353756557c3268f5c0ec4b3b118167e6e7610502c783b820628e7c895bb86490d55ba9c923554603ab0be1d2e9bddf730322b6332587716d3be1a4df62aa2bcc798c5637732f1a674b22c175fa59b4f420dca70cd7abf3772fcce97bb47b9f365a835e484b9806e0a638ad9bd3e723bd2dbb5afbed676e0ee2a3d959732fa695fb9f225f8b91667fe9f39ba3cc6f9938a4cddc091c968479ecdce8bc8c73c64628c78e89101f4873f5d5407694f0fe26e718cd03cee1aa62285cc4e8f826b284f572020a748878408e102b13c6b9f50f0c78bd0cf3f6fefd82a6e7b0e6913fca006c2a317860751443c285aca04fc2d64da42c28a924cad36f374e518baab3b7172994539632f52557443edadc3bb7ceec24f5511ab89a6cd15a07227c4c9ff7505381047413076d597af789bb64e1656312b943636d4924e4ebc41a5bc692778c6995df30c84e0baf8aa3a30849ffc2f2813a636089deb87a1880c4b29da2cadda10c24a2550c6a833c59c2e79c2dbeb0220989430290a7760640d92371b4b1c50cc90271e816016830620aec9217c87a657eb94b317f0d5a9637a23c65e42fb0c075a9cdfe923eb0341b90907d062ea08c1caf8533b80044399dd5f38dacac7e9fee7a94f66e591e3b4281725c17e3d55b0c62150bf9a1a566a65d74fb90e905a1310b417dc876d2efa2ab53b6fb1d9efa80c21ff423aec1989157dc098ec7f99d3cab9ca9beef0f044c1ccf6e5e7fba5d1c0effb916f66f94f09df0698ba4bf96f867dc0c563e0d338babfa9c7ea33708e9caad9e03f9d63c793c4ee3e978ee848c3744c5817fba49ff6f199f96f22a0e0831a78593bc48a487df0f78953a7eea558a9852e307ffb1cd867ef6a5f12fa1e7a6f925cf21d4935f0495cb5e23e563ecb1c8c82eb39353b6b00f494ba1a47e07673103f369ddd57efccfa6a9b54b4c368bea8b36b7960cb0cf2b019a4c57cb594cdc81fe564702157182e5cbb1f7920b20ab2da31ea59a2de9295bf4c24c947b2b59972c6b924230fe870422cfee80083077c9a4531449216cd00fbf7970197af6fb606a7f9823b1807064473e5d9c46bfe29fc77522580d23074a3022bad386fbce43c92c9f261a353be45140090d322b4e0633275cfba77290e59089710b1253e483cc28c21a31d3bded776f9463c2be0f1656a08e1c29268313a721d42e778b60f41c9093be768c65695b46268623691b3cbeec91bbaf67f6c3f75f2cc3eb14f869812c391dfc05da3f6cec9719dd2384b649fa39e2f990f60ae794a23d239195f9e85f39cec189060b4b9cd9e8f25bcd5520de56c2e74a865a5a37fb76b4d5e4406d17d53e32baeb6ccaf6f7ae03bcdedb8795fcbebb9719a657bf526ba4226f44e4efe802bfa0f21a71d22d5bac1e03c8dc32da18cd93571c2d4bfdca24857ad856046a6caa18aa095b470a119e7c3d81b30383562432db920332643a27e5aa0204d0e0faf479f47bcc34eea3da78a28de28a22b7f6e0accd3e46223f6ec918e7a3a11f0e2bbadaf6f1c52adc1e309d24eed01016d2f7e94d9a3964340269c71512e4a91157b414e0bb6428427541759d57294c967ae8b22699a1613c8f9d37a7f6a7738d8fba8262891a15706ef34fc3fd7484df63b86be1440884b91eece51dd0b8ab2ab6c24f3c8351280f74213cd627df04ca2f014b69d9a92b2f8f7cdf333e6ee000c6ddb87fc55186ee0e9247adbf5b1834cdb714b641fed4d208355f1139ab45921fbaddad4aed71b6358c8fe199e9ee5cb3016e3013f660418e8b123ca07b11d94652849a973b0fd173e2a9bd9f6ee0782b7be80cb12661689fe4ac45e4d90a3087ed6522303ee5814e3ddcb19bddd460cb5e1852042b5550d46f9faed0a949cb2d8a710962488183995b262b955aa4cd88f081fc4479af08328543990805e35825056d7b676f63dc7999bc75cb0496df7f33f19904fd6ec798d631744d0f034e7de3766c6ed0efb97e19a7ad61715e95ec608b421535bd61223ff414d593811e14114a977996b178735069e103564a4bafe5fb15f61ccf420a2c66662d00117bcb05eaf425fb732615dde83c02da7fea2487f3edfbada97d2dee4808f87b9b92d659604ae52a0bfe7e78fb9cdb221f15d85f80eb86823f6da419cc5c06c4fa267bf561791a938f7cfeb5294fee2abc21f4c1ffaec0c1feef5023ab2e53248c857996d2aca567f71222bd8518d04e785e161276dc710d6e04b03c4cec021a5a524423949638a0681c70b41e4ef8c3753dedc711fe5ebe8fece466efe477f63c9d2f8ad7b5d096d73afaa73024a7b8110f9f3c606fa559637dd553df76542ac797c770e387f95a12ad127c18b4eac39facb39bdb794a6b08d7bde27b0e28d49c4342006619a4c8b39efeb90c45cd9de224d6f0499298e42419926241327b750ba821481ce1c5419e6fbca3b1e64ded0b96e13282c19a53b375ff6eb163f6e8bcc105c960fc33999104e818fe7805956ec530810ab8814c100d34091d1003a82326d4e2f601985bc21569690e44d00d8e03074629ca86df0bd85bc49e64281452bd29af22b658136a2d87ee7a6dacecdfcb09b0271aa015d244ee7a77b040bd5d99debd411f76ef9e1d1529f103028db1cd2722702d2fbce01ef68ca300783b5c637776e72c0d9077b7bc74162d8d335dae56c9354cb14c7cfb7886d191576619d7c01f22557ba7b856d809c9a7c593aefdf0131f58ce056b4d34308650fd28636fee11f0f384e4844e9a770347b3e29b590f2ef1683f26884c40ceb59ac011f8406886ed744db99e791f80e498c2d31d48576a411602eed216776e363b9697e181af957ddb546ec02a389c599d86965aefe488806d7f7f6f47b2d3254012158661ebf19e211f565d4d4438a0d3def21ddab2fb74e76e8bff91a922f695f40555135dc3ca77ad2be28c9554009a8c46f5a812c298d18e18cd0417c605fda2905c9eb7faf38f083863d4953ffadc23f2a52f37d01e1b7476c67e0558a5e11410e6882d56c0b6f0153582f9e6ca64427394b88c3762ab5d659d5c937431f5fd132e9abb59138dd796f8cda58bd07b4763d7d431913a6471b0c5716b47567a872b026c77bb24e4c30760897573f0fd9918660b38ca46e97a66ef2a3c9337f34f5eed9a47dfd37fe734d7749c1a02b8cfa371d12c8061cda72c2f37f786e55c104541c0e659a2c3dbeb046ce1060ceb19e3d60b35210f87eaef07fe93ff019080b9338a1373e0f83ea7112a360fd9120d4fdd2a5db67d40b7f1fc7518432ca3877b767d6ad187cc331029fd73439c1e7e0ebf4a6b10a95f6730a0d7f138ac85d1e1c91449145c8f9c017561b30180853f19af23e111cbb97c5d3ef81ee45bf5a69c96ae97ca3c047c44f89fdff4d7a66faf9dd687c97940a39931e4e37eecb6338c166e67add4a8f97ee3670e83bc594b3346031e6864af2287ebc64bd44ba70d52abac08ddc28e06b6f916d9458c63bce9673ffadf60a53e9933bc39baf70502b7a0323a1b18129ef7a2e802a4731d5da59c907cfab453c1f570961cf9c9faa15b13f2866760b9cc0e45a74959cacb64f487143cbeb88b3e1495bb64a1144366377016185c04af33ae45e53092be74bc0d022843aaa8289b9191fbd8b98e6858276fb2866f4fa2bf7390cf13478e67db001f03cc95819132a65e16cbac822c3751988e064f3609cbda4e961f90e405982ed33b388f8b7023ee2f696c118afc3261d90c2a149961ba8db3c575563cb2a27f7f662252fa3218e3518723c74cb14088ce5facd1db203466e8833eb04fddeff42874159cac3ad693e0cf0bee68b5159e9f76bcfa9a530f50534594fd4ef85275ea1740adc5105c5d3b22c5f31426c486105bdc85fbde5e81f07b9e1caa92f321518f6f4fe548b75153d6b6fcfe9511d116f3917b4245760b61374b8d6a175fc5aa51f1d39885df36f57878255c3cb18719f9f631b70a541b6faa792f8b6eca9ea7e6e45347fe71ddd8c3fe1bad555879ab727356e7feda17ff48c98814a003a0a3a6c4f634444dfd823059e5b8428292c95f73172b5491a7470ff7053c8837040c2f5d5582e928bd91c9d1205527c66eda5952261848905a7f9d0449d5c944e94f82a4105c7c13f2166f1a24704023892c53559dfbe3f51902f2dc0051e3388ed9700b73f7c8bc3ae225848ea2e22a3d4f4de2f626690666981b61fc3cadfc63d23214b0952680ca625f51403dbf973ec48f60d4a17da4cd8e9e597641b48fc5ed9ca00d1d82f9dab0989dd90f348d4c558f69800b5615ef9bc139da5a475b6557a9bd906d87818840aa3d330b1a48a39ed89a27e49172305ed3c2aecb9b9db1e4483d14bc28f77587c790c68f96b3a869268d8ba7338123a116583f29a3d83d39715b51bc9a3ec18b66b6c901595b12acd1650b812acac2c16441add180e1b485b6bfec1e513b600130e835fb9cd326d93009daf30a97ec497806498761074a9beafd00ddff0b296a9ca9a7282f24392f5f3abf48d9c4b2ca0680e13d29200dfda4ba4933f78fbd8ccea72b38632b99f1626be4722d93e2d20e7a63baed480a2365f9f57177ee77b9da42cddf5a49174eb3133732ac7fe5d24275a8f6c99a8a4e525b906a5bc522dcf83af5fa1205fe8265ef8b4c3316a2363e53cc0d796e56bc9c34e8bf3d7d71bd0e336308ab0c5422902462fbb9a2a3acab138e4a40b3c9fa88b0b551f21a7ad51657797597fa83c09e330d6f0c8672a0c6b484a11f88d65595cf9cf22de4bff133cd6ed0c29d765f6e08481e0ac716609d4fbadedb232f8827dac5f4fbfddecf7940d4fe6902823aa4ddf49a25d5eec6125a7a99ebf93e4d8627b9192f62b6f18b635d29ea078a6717f50e4a3055df0a44a00aa1e671b247b6e0a163ba3e67f4b245d05d0aeaf99db41438b31a9a188ecfe4f696a37238e1247018c2143c37ff609265ddb68dea5987905e21b84618a5abdc01c3d33dbe7f28890bc47efdbf80cd754ae58e8af7b91f1601059f202db9e65f01eaaa95f260ffcd06ec582c5aff5258d34ddfaac0e88f23e1adcb695ab3873904e17b980e406dc1beaf445223e299803993e2cdd74d1bacc0f9887ee920f5e270ec45441bd265703c494dc1a62dc8689a2c48a2de7b46fb75830aa83af6f652a09106a64e9eae2af996365d360fae6f99ec8607cbce617266751dab466feabef6e577953f35dd26e0ca932bf8fec8bd0b5a1b03790d9a8229bcb5261ebead0c95284a7956a48635e29fd310173e797a556c89712822d4cae7437c7b5525bcd39f06e12ec83acc359a08788806758ce2afab2cb7ccb5609b383034f94b8908d116540e8b8f58f50eb091f54f49bbdbfbb6329147ac7b86a29204a53eb6123be6ffa49031f13d41a8d59cc4aa2306f1010f8c6eb020049471959a861f69bc53a5887564487417c4710c20b567da56c31f14d5cfe5b03061bdf2f887f79412060d424fbaa15dd5f7846c62bd16799e7a4c1c501bef3c3c5a6247b964e9ee72824bbdf8f9c667da40cba58080d8435369e1bcecca1a1430338df527518699e336bd05c40aa51071a1023f7487afe6c22a654327d88d3ab0317cd7f9bfc4aacf13e2ba1c1894439491189042bdc68d28264f9b1ae4e84acb492ce0d3a8cf43c27f7c588a7e1cc51ba14f825959a45a13f5be576e391d1e06c823265dd4c1b12ec3f925392632f58b90a7a6de506931f84bf45b053178b9a7ccb66ac51035401f95ef870961f7894520946f3674b1ee94cc0ec195826a51ab7405b87bbdc56cc8898b402ee5eb7563c5054db859f30ca2dba730655a3afea6b2c4a79213d3eb7dfd3da202253c34b1d3b6b5a064174957e397d56c186be4ccff7aa280f393090527c8b1251b53710e9d9785e1519054f477c2f61a1f9c726ff3bea68be49447220f267d3dc120ff4f6a0c4de18e0f18177fc9d8b10c1e4175674c42989028592a2e2d19f4daa35a76565899923cb5050a432587ab07ea2f20104327ab725e65f76b31d06abd188ec8eea9803ffb3f193ff52e3642c8e088401c53f6d03c5c17a3f176b80cac4a258668fd9fb62be2a2ef939eab4c8e08006ad2d77c5389781889bb85924bf8e0a26f69364772b69107e2b3ec9a025ee1ffff5237158ec46f2e3cce18c1cef2cf9a59e95259d7429991491f99c7c9c31f265adb6aeea1a1fa8c95ad901ace2c8da952cdab1c10171ed75432244c143d425d7f7c9448b15286a3480b8c34c73be732590cbf46437cd292e0f9d3b2401bdb1f39496e277be97268dfdee546acdb48adcaf0a7accd4d533dcb38f4b9efb5d563aee1853c804e9145df59eded440e5f4855c5030d82140dc980467c4eb896271a6ebd9ac52a8263805b9d69f95a008e23c635f2c816d97f10c1ec0c1b22dcf2f284e676e1b0dd3a7ab6ae601a6547d08f975d430d96fa43b81a7a8fd7c16ba8b8260e9b85456e2ee13837a6faa733cbde8e49ebe5dd463b4cb89308b3b1b10ec10e760fd0686332bfa5d67070a310f19c1cecca7c959e9afa530d07107c70a2d4deac56c649229538829a68afdeef56da18e14c9162f8b5fbfbc9d461b80942a16292dbcd20fb95d6935be0bd8fe158fbbb7056482e725f1faf504c4ae578e4c1ee73604e671b956df5cf4e0a50ddca020a8b962e42a77a52fafdf286687a982e8d24284f9f4439840516a0d791f01ac1052210cdb355d30f8d9802140685b155a06ea410c79930bddbbe42fa57cc60c2795a77fc75b4feab99c0f079e46962551de361808969e454c8c550fbf1f88d2c127006d07f6b2678da86f65e2e0dafc179d32ef8900b1f7a57fba86a2aa05bba3c27193054206c1cbd4c3a91260581cb2b08823fbdd9360944cd37a7d34787ba7d69b4ce3b3147f36ecc8eddbecc00b420dba909f7e0c0803603da47da3ce5f4c1a1ec3012bc35f9b335287017c55b11588fa5f5f692fbd6a45036975ca4337455456e483a7998e45f733d2eac169916baad050032c746879e29312aa37b9b4ba865079095e38154c3340291a3d9e6c4cd24203e830e9b1583fe7c412bef1f478c5456530677a3a873a784a6235e82f2463cde65a24f9e72787ba7e4bfa69ad36296f862512969bff76bb4fffe8e7e830a006994966a4360fcb14b6ae5ddae1cf97caf4ff100d2a81afec7d476b6b3d113754100a0854d386b895504b9ff0d50d97332d1b6707144f4fd710331820388d303085329dfa1e92453b3dc32e870c1045712f21dd6090fb23190677e159e8ede4605b03720a2feb07b429a543d2a77a7133296998f0e2c8cc65e5933fb4c12c57700cf63313c80b6ae391bd167a7dd7c3b39ea7d16d38f45bb9a93e0186e9eccd148d1f7cf6814c702f4513e2be02c3c5480bbbc859d9f8c626d574de14a4073c42b833849e3195b352d1df76eedb53ca2cc25ef16166d0eeec8f26f4bb319aaf4d1f656325a4ad8d05740e55ce5a93be83f02874c248e636ed4c765d0afda47753227b9238c87afbcfc1d12035c66cfcd96cc2958b93434df797d20ab8b7e4ca82677d28824c948c153102d9b8b13b47dfdb7f5e924135fc7bd86881feb564632f778c6b09186f9eb8ca62acb2649b7dbb5aa4af8408e562883bc4074a4562b951e53451cb84c7ea2a84ceb9f860a48559cee28c9eff32a9c7de59a602ea15c9c8dc3bd56a3c068b0a0a011c5d70efbac4a813ffdcdf014a7f488b6e3e26647b20828328532471707b4593036f53c99d41dedd2c4c8db79e2d056b0a1b3f88a38a132cfe09b9e315832e4375b6bc32bd0e24f45c7375cd807c1077a17fca1aab88cbaa82bc1369c654b39489fbdb2063cb9a830cbd5f088d92a15af8e8486fff9263f6c286fa3fe45de6271079d96da767bb55afc0d4aaf254ac02d97ac60ca518337695cb9b035dc74df356d4e5a9a2794018decc05a8a204ca0295f558081f407bfe2d6f1fa71010a4a5910c364afef3e2a624ad38351491c0dfcb78731feee1af27e015ab89e27f63ad7557855742877f30df03e3c40690cf1c05e8a9a391d739e92f69b38a769d388f85929b95012aea5177a60143d46acb3a93184257f73981bc7ad257ca65fde5ea42562ef6522970b45809880ee51a16570a0637feac9d790b6f2de3bd2d9053f75a0ebecb9d097f004e0b2eb3527c0cd5e9dcc4e2968582f7f0471ba69e915e07eb4a3f54d7e12533c0d21f3575c5321ab8b28d416af6bf0229a56a502975d0427b7f90a000c80441a428e4003ccd24e54d5e8c9be159e291291e063f895ab9961957b7c7b732cfc896c850d24d710b67f5b2302f4582138609636bc29f2c5e43cc1c037a0ddb758127fdf04fa40a7ee58e74b0b36e5e6fabb2e68a96e038ad6977eb9867b8697c6237965284a3ee423ee49ce5a947133a1d40ae9eee871ac19b1e2641d99311c58ca1f89584e3cf9cda1dc14c6bde67438be91d1fa69bddbbc15985e71459b6eabeb46eb8f95a360ca968e76ac205cd400a2099e5674a7eb7874754062968d2947500d7280fc8c490abaa9da36f6c59e5934bd1f985055e8004c66d2bfb5bb46c43902d26a197cc035055dc68b82fd09725769cf0efd7a6b57844e0d53386e0a29dfaebbccf1260c08884972f70b4b4db15b83a44c75376c45d47c9c4005d606daa9a913b4c8475222af4e418fc6a1cf1f48e2d357ca12007fdafc4459de415498c221ab4cf3668bf9ac74c519bbc9c174f500c4a34e372f05d5d20a371204e45d9ec7ed86f06967baa21e4949a2054e767a375af200cbe79abf52fd92d6b3a1ae7ac5336b77b4d96228f2590a19602a60dd66c73b86a02a7e50046e426a95cc07062d2a42f9bca806235f0482c0b0ba8a33522493e1d12c7a8db6f84ae3485d77d9d52381c1b502c378d5e7a5e8c901bd9ecead92e33cf011edfe775386b48706ec7f83bb4e12a109b28ca6f9e6d7855599d0a2f17a60f2d4eedf95c3900387e62f8a80be1caf14fe5d18e97758fe5d6350de783b2b5507990f67b969f69469f3028dd0ab724712845e54cfe97bd3e935126bb4170a7560aa2721335d4769b9c7896d1fae4add4a86557226b08cd5f8366ef63ad8e381734fb4d9ffdd53d6518f21a6885fcac2a6ee3c7e87eb5ead39bb6e37ebf7e151908f2b21e0a16b5c8538bb37806b518991c7f5a25f16fa931c59485e1c5ca5db567d72aa22f20ad0863fe8083adfe0c0de43254066ed8f7a3e5ff6a210a44ffd19ea6b3b3a78d3a847fee18d00870b834b4f3d8849f17ca54eec9ecfda0b87e2cf25a644a889f7ff4ece3cd9197e66c151cf75fc18989b280e57044663d86fbf338226e8c561a3a8e69f6fdf1e75db2be4840e80a9ddf06de0786e1bdf5e630c0b208d8a22e3bd615547e61d93617c3ab5d906b043dc6426bd056443e27a371d7456beafe9fad83b3f681c8ff190ae28b3c7c689fd8e1f6c5d83b32d14d0cf4e09d4a0b30c0627ef027d0c61a711dd3525adab63c7d6eb44c39e0f936c5b25e78f5e1ae165e7d08f74e98fdfcc98e78b891f76bf47b8cf3a13f4636a9de6550337a819c9528dc49d7c7331497a21ad6374ffb0062f2b5bd3cd80a4b5ed476e5ab8f9bbc4ad730b63cff8c28889dd3e69c00b3d41bd4ab0c4c956ee0697c934d6fca4961bc1b84d1873c334ca45e749a515dd6d8c4db43e27b9ae607237cfed27c01fc13028031028ebecf86bd6cb5dc3ff577f335f850c5099ab07ee75cd4ea7fdf8e1042551d6f4fc37f12c9c957641831690b5faab293cd919be6fa9b869423a827a16c560d433d7ebc2819037128cc989b753715a3f9b4f007cd75917a33f2c6fd4c4cabcf39e9725c099b936a6a8acdf7466d542e12d4de4b5e256ac15992d4780e1d0f5c036ef96ece4315979915acb53de8427d8ff8bbdd0fb4c4d04605939cedce2f514e74d51acb7fe62f736bd80e6567fb4b990931c0a816ec2f7b4d5fd66fb99919865f15186c0c835c70b719cd1ea2425c34df0fd69ec0be6645af6bd28d11d9559b2e1db15c8bc010735be18cc910b158c47f53574f76715a953b0230d561b5955371f5b8a744a864f8b86367d3f901f27c4aff0d42fa9d1baa16cafd29fb6014f10381db95ead6796913412d5b1dfecbe611d958ec040ffbee3a6cb2b6cb2fc1301f36e56930dd84cd81d48d2ed0a5254f2d3669a913c9ff3d88f46002f7667546a92057fbda76010104aa15b9a73937e943b7b9d89ef85434deab0b6b2a5036ee8dc97402a9244cdb1668e297b710d931f95ee8fe7612c12488652e0f8a206c35e3cd21ea9e2cdc113c1c9615c9e5a49c3fdd5006112cbcb6084544ea29ec860fd1e2728927e3fe5d8af113632fecdfdfff2a62e03415db88c0167bf770227b3be97dc5747e044c40ee2197d6bce16d096dcceb3b0c860871380600b42b118629faae1bbdbb78fad6a034dfbd4e68b1f3b557bd79c9593d419745b01470b0c4809f4065b950fc524c4a98cad19ceffced52d9b36d890be106ed40ab089e9d563f5aa736a7c3ecedc9f80e1287636347dfae8f98bfb2c6045a79e08193f09157eeda33ed5b421d92c3ad7ab8bb950b6ffe728b6c12de5bc5566861cccf44ac4d621585df55d3dedb88437614eb20e57cb0d63e3cc04281cc10d9d45b8ae5ef664c2e722e6cf76ab0bbc1f99173609d5c0fa7073a1e47357be3be1bcbb3146bcd824173ad3195d40dcc03afe83f163783f89c8848d1be88f3f0aefb21e5fc1848324a3593bf39453b5e4b0fb02e4ea542e84ab229368d268bcc8e791b4192741ee97d71faafde314b0ac4d846e117aa23adf0f5e2cb98d9b679a78f719e437c23c5a593d4ec8a58bc899e6dc6c4a3ae7a57276290ad94b18f143d9a77fbba9b15356c454ec70abd52655300d1109873f234fa425996e76830c0971cf313175f980e32b2fb94723d0c2f16b47db8f620c96b3385db41297e98a389c1ecd22c694cb978c3c17c426beb60fe337a2fddf8fc5e1186574f3b0ec143cb9b6547a5610a607e567db91062da14d692d295a3ef40f452dc05222a4804d1713d524a7dcbd545ee19774945fc28ed34ab96f183da3ea331bb458eb40ebba40371b4765656cc789197bfa024e4bd5fb14fd44a0319804069d726eb9d13c8eea5dd8dc43b992dd5c0f435d541cd9bb58e25b845ebd4f06ba42f2e00ef600e69018f9b07329b251894876df9e87719e1556b3b0bf2f62da37456578d9b022e548ee702239dc5c773a7604fc91ec2eed17924dad8760ca94ca6275920d9ec42105e2d8e873ff6d58a59f4e27fc5b90f4cb6a7419be9d966f47cf150453b2e383ec5870c9b2ad35f1bf0e41db3128f5ba988471df9bc61eca0a4f2b101fa3645d69771666dfb3e06f7d7dc6569979c0642e644eb5d7b025f3e1391ed2733b1c265f921775c2ad2c17ee1835c669fdf6ca2ab33292ba2bcca088fbb611cf6e886755cdd97c1e28c5cfe12566bbd11129cd25eb39a4e2d04e84f81b90731aa16c41e6692011821769eb7ab12d4a4b97f60d84091a46d10d9ea051f7c353f71d57dbaf3201d6be9ef662bff69886e0a1c6d10a523cf6cea7bc4476932c21e2dc4e763e8d364925e2a6a19f0ace72363fad3c3f6454608ad27cb4187ecd938fa5d95ac573143af3c641298ac843bb2c167403969e0660210eb2e691b65c08ccf8784ee10d34efe187d5d2a731abd8948c3f953a38ef0e6e9203eea5f91f9dd49d77c6f5f7d48a47105a0868ca047f55ea7b0741b75960ad02ad0c339ca80e483714e0b2a53f13adf4bffcc342da0a7bc4d5513726e7f536e7e421b12da6378f200be754584d57c3f804d54f071b68f20839c721766aa06302a8267e130bdd038958c3743e1034f40bbe96ec6f2987dda5cdd58e7f4d2377b0e1c5b07394539ae3ff1ea067ab5105f439d0d5bd1bdad43a5e0e0e6e244c15402fc2a0a0804c02cda6f2782097ddde063130c8c3149b6b814f5d293b2a5f55f90451b3cae41e17f344e54362c5c32b00d028f0f41c62490b0fe087fb3cf64bcc0328a60dcb3777bf99d1af7d3ba24162d47f5bbbfd534582fb8f156a9e105fc5432ec8e096370075eef714027b498986c05bf90ec6465f67b08a4c7487fa8c61c35fbc5c6a77e9ffa46a535d66f55328407f622241db9f50d9db3c6c9bb3121a83e101674b8cbf1f62e1b977b43a2cdb759ab098d3fa2fea304393e67fddacc31b805eee12944a1bd63886719dda525633e378d805bb26e82b2a33167126d487a3e22148ddd74cd7e1cad3de8c81a152a2be91feee19cf5850215cd44158239dd04ac1b193ccff5f341aa3d64d0c114fcfe00c1726795fa68570ba599d63e3357ea9efae539e791a8cface1bd35153d74346244c6e66b3cc82f1b61f3fe0886fb68fcbcd77f2c9df0755be1f35aac8ca58f842e238bc12ab0d7c57232601fcabc4c1b20a9a4a58cc792e346e92a37782e9f06edcf77f10c510dc8dbe8728efecedd93a8e3d0346a8742f2a0e0093e0deb630d1d9733e4607220be6782aebbc3d90a3c1ef7af7a336df31058814b872f49c1f42d9a8dfd0a7b5b93ae1b555983bc1ec6a13326caf4cbc7352d5d4b56a373ee03481cab9dd832eb2dd545ee4b5490aa92ecb8d9f68a29a3f44a3dcbec945f0dda114449acabc3a52c8517747a4498f9bf122dbde93a4aa0b4269035a3aa31c54f21c9aeb9312d39de2588b973f8f1014b1e5c43c8719924a8ddcd0828915838b89f472c951a6da3f86d03a8e878c00bf98afabdb39e90d0c9e0d0cd5d10ea15ce772d322c54bd2671f3e8f2d03d8a3a6ee5b41ed4fdb8220fdebb29df3e17657838ed8cfc0b1938c62afead422354f03d94bb7dde5483931cb7bbc413552e871dd5a2c0efc6d20ff108cae009ae9bc71ad87a192cd04e5e12bc9f719b1b9b0b5197d540c01c9b11926b12cbb7ea3ceb0e33c2aae1d62cb592a5b20fe0b118ff56630b88ff7f60724a9d06ef0cd1446c4ddf88491c355b0850494f1c860f3a85f395a1da61467669137ba1ded5fb5002da3ca5ad1d88937ebda298bf0f9e114911e08beb43f4773600ec2b4bb26b2b13e9743768828b18edbf5e5962c25368c06b4f4e02c2ee55e1d72723a272ba86ecdeca5e198a1d228a06a2f8e00914de8b3240eda5c35e5d179ac0ebbcf60b2c79c25e3f88ce35fcb30e48a1d53936b1a3ca5078dea2a981bb44a9b9fd6a2569de3390ff19b06df41c655c552578822091b44cc9fc64f0ddc76ecc07857b3a3ff9476bbbea327dc920e8908858680e2a52fbf3b464ffa35b715980ead34d0d623c43a798d90e2165fdfd124913c269cf8ee4ef788d61ea587f0c09dbd63ba30ec03af2570ddba869665fddff78c871880584768afcb1f6d9b187040d535c0f32dccf77b7a35d87e108bea663220fa1e56e78b792fe2a34e1cc413a91b212f72f5b006470197a7ed40c8794556fc3288f5cd34aadc4e029b598b4d38e775e557d7654bb84a42c429b8f9522eea1781de535aaaf42f4e23c5d82518e6245c64d80b1d09be3299836b685af497c22d85bae92dd0092ec1c90fd8aae39221c4bd77eb76c05c705b42077998f39062259d26d008750ec36f7b9e3a51d7db05d62438698fe70874d6365ca627666033752c7d9ad1b4b711f1d02338aae4003000b099b02daa2bc2b6f4cf5202b8fe1d423a26722f2c875c6e2ede720e97963b30d1634cde7e4879512f30fe5004feae2af4ed4847c9a720b2caaa184e85325b81218e799ac3fba2e95872445743bff94b077c354f13fb98c5c2314f1ce0b78457a61ba4cd13a09c8a5f005cdd0fe3f7ee899e07963fe02f4b0843320c93acc7208bf5001d22f88544c1a1baf955ffd500b0d0a84cb85785d340d063e51559bb54ef2e793bd23f7c0f96b4ef28bafc7d2594c1a1c369e2c84c4568da090d9a163c060a564075cb67e696895f560d6d79b61357c936480595b260a29c60130582b745249f134e429994acbb1e7fa0741f6b26c32dd60c6d46a699a56b393f2661176d598d157e46cad824dcd390cfb873f1b62f3a2d42a3ce2f6f624d91b8beb3a38c478113c0bf12b99969af6ea2582364252e611c5fe64dfdaee2250484e59d9a48a07cee52c3b6695bf41ee17b2f14df65ec21f03a7d7ff44098cc383b52bd43d80890cb73334faf80631a3bb929895be7d4021584ba789cf2443986a49d37bf92f837a5ebb12e41a519b6d17186aab4f53bcefb1f856a70792f1dfd46d8f876af599dfb09a3dd7fb35675e344a33693426dea453c29a08b7c66f1a1ae25cdc66c747dbc71b7d14d0dcd7f631c1b01acab0264d53dbbc482e7b753daf65767acc10ce312e8cb303c9679e08527f64bbd464a37adc90b99721359f3cd388f044e9338fee04ecb5f9c2482a6592fc5e3bf2f4873e765011daab854737179863dc37c0b21eb59b27f804902fcc97192a71a3443e65a1dcfa5815e27f508d97c4b98201b833df618930392e7b4f3f876ada3fd88c99fe4a2e2346945ccfec0b70722462104d7d1943f348c24318a877908fc980a94bafaa70119500df6e73a7cc4ba2783101397f47475067aa9619380d7807cd99414a45f87fc3f289b53a6be5dc0b7743513b3a2a72ed4acfcef0f2f53751a1cefce78dcc05a521884a996165f0fb7daac250b02f0e1e6fede89ebd76981afcc5135a1a7997525e37f03c507c839e4bdddff053f54186d0351f78f559d2a677e6f3ca2f9e56c293f389427e4d48d5aa6f1477bfe9f6912c785ad07e5f4b85def44c4709a2035dcec3612e309ff4309e9640cce959ba22307c8ecc42e31a565eab52c11d07c52d50aa3afb030279214202eb7ee144d27aea5bb87c2cea7782c65e874fef237d1f304f02b26fffd2f39dcd5bf40d39df2664f7cc7f0893facb7d3d2dca844c953c8d7c6da5c9e3cb8896fea764b2b09d2e85c2bf382ed12bdce37a175e870678477404c06a08a27c7657e16aa69439cb514690b4883f276a1616dad4f0846be9728b378cff4c0584c47e8d277c0569e28bd1852c31bcc8661e78fac01ad04eaa77e8ebc960ec6912f94bf638c3254eac1803639ac3efcf0103ab42e6fc88b0c10284c8633301477901378a26557e24fb6dc05a24e273335cea06f473bc0e051281cb1a575e07bff88558a3a83345a596b582d0c2f671789306e0e96ee4764329297a90d079bd5b77eb6e685368d641ce263378a261182eff7f13484999ca9f55c03f17a3b7b5c79ffaa5e268bcefe75809b0b98068e0f4a7d4efb94c9a7b8b0d6d2024a8bc1eb15ff13bdbe176edbd8dcd5430e959f280d57705494d1af15611f28fec9c913f7bf4e83e30b81ec2642ceb96f261830e4ef1e9a5921599e558655a89350c3714c7c425801b6344c71a82346b0ea70c4152e9f7932a639d44c9c6c8b2c4e1fb25632d974faf6d81668216a6073729d21ed347dd6d9eedf3bbfffe984dde1a0f281e33a160b886aaee96a6fad858f50df4f02434f27e77df8cff31d10e580d5ded93539f673ef7a5030733c082d3b21532a46aeb216b2675963a3e3b355ff4ebea9340850a18ad5c0a82e3ff27aa8244d41dfa41d22317d7ea49896c3ab6301f9c681f59334786ee95fa029ba4a1428ef0edc3eb44a16cc0c0e9a9701fa328c96c95e08f956e6c6b2f4a181601b4a6421281509a2927d6290cd80688939e19bf28e9fd9f8373a84816b41a6dc4e44128a7186f7591bab710c4f34b8839892ad92855a46a9a7ed426113b61b9c3f3ec84b13699e6f22be32af49324eef7eec1a1530958f188f5fa80b643d43c15347069863bd70a1b1da5b672b9f0c8434f56bf50e1eb00cc2ce7f78b51f35b41a4dbd99602e7ae4239dad47bb157fb22efeed828622d64a53e88e1388e795bd726a15dcea354eeda2a9a1a64889528ef70e1232dfb77bf13c7051049973df49f42e33a672173216e0f7d6001a121120e053c3ae379fb2144998e6dd9f33d950e75ffd4c80370f490bf5a9e8b035a7da60b493c03b2823b11a5ad20c1cd7f5cdced8269708eb0707fa895082880897b352352795f33bb0bcd92d4e9664c93982d10bd24fb590312506adf248a79d5aa00eccd3d407216e5687db9f42b9b703e9417c7be8606ff2146f448669baa99dca8199566727053cfd56f4fa497e6c33786b30c0cd7e25c032e698054864a0666a5dff03b2cabe9ae871f894d3a1198d6273ab5ba59f0439198de773e12fc42519b7be1844d597d30b6c76a30af6ab6d4da746cda60398a0c114c23ed5184bb6f2d24c54243e775f8b2f9d10ae7db99ad232aced9f422b28b827a992262a927b6408550d53f00f1064dd9f87bc644dc4d5ba92dd4345d99d556e0921f1771f7c9f88f8f65f880141a19ac45475a978fef1058ca9b5e82ca7e91336317c2d9130a88b65d2e13e90239167196eb1bb2e9619cfce6ee5d7bbbf8334609a03adb806c5a0aa852146067fda5d7bcececac15202c5f9d396493e452b1f0b8399e5fec9891f2c51220343ef2f7b704658ac5014c8f30fcff3c220681abda67513db5c605152534b3ad7cb30fe0443e5c44981f756d65d6b2d16169ba5ea5554235865f04b98f195f27b7137780461883e609915c6053bf5bb87f2a2314d54f56fb20b8a2b5d167330b8075a96d74b99e3fc3ebfb9bd224391128838cf15de6bc4b772db393693318d8d4e2618fb4c4375aa27b4c762f5050f1a27f22c435b148b0e81f1ce44713fadaa56ef02940710f314fd5dade0f4e5f32e158d3a7fdde6859f41a86f7ef77412e4a12a0223cb605e3fd8a37c613f8314986718ac245495cc77c4ddb54c6526e16c8d3ae765b49bfb508bc7254fee4041b30a2d776a84aab1b4cf1c19238555c0124db2c7b432a3eee6127022ba365eca102ebee35abce755e821040b9e5ac99b10332daca627b1f0c10b628c740857588fe849a15fa9ee020b73166ac2a6047b99fe6398eb3ddf97ec6d2b8728e36ccf0ad28e49a7092b46cf1f2718b766c4daa59e9a83c0271862204119fe68916b4fda03f30e98258d613140aa2f32c8b454246553afdb6df1f50ac7b27c37fe798f5476e943b18d76b795f1cfc591361d0806a219601e0168173af3f4406deda8318b6c7bfc857533bb678991f24ef6480baca6c66dbc12f83b32be6cd6e532a1b78204a257eeb44ebf58d8d5901218b50cd525e4fef7983461784bdb999a587e66eba9c543fd0254511a42e6cda9546483b7380e89601548b684412db97ed8444f76893bdc3536a3c3bd3575e0d20cf48d9e061aa2f4b0476eb7914eaf2b55bcd07f9f62c3b1c4036323d781d1fef747f1747378ee3e1ab236a06ca0639d626f7d6f7bda26f721d8ca7f7e98d3bbeac101588a6b426a3c517ea9a51cf2299a0b954cbed3bdcca721d1359921ed1eadb1ffc5c93fe55163a4010c8071795cd256cce439a974668852549d61b1214518717052645a7e0140ea658a321d709757828de7d72933be15bee7c206bd086543d5384941c3ef34e80051520c90dfa7794fdf6d03f89aafbf43a1c317a4bfd8bdec3d1cb4f48e1efaa9445781196f008a3790f52c6b68638abc896ed1646111809ee3d98a09ebb718890c7c9bbdab447ff8b5ee764c20c4931aedcd125f3fbff28584f5a47a9df134d9a64d32abfda8d9026fc575c5c7b3b3df0c34de9a88f71005d1b00d3f6f47aabdbe7bd6f1c6655647eb11c882580218a92086732e875338fbd6cf09014e0986f8f04974976c859957853b4d2d32d48fcba0dbd2aede7b4b761c0973b8cc8684d42cea794000128a33993597e05a67de5b05c2cf7d73cc95b339e991e2eaf7615b7a64de8cf5e21371e9b9adea722f4991df2ba1eb52fb427e9e84671dacb453fcb2baf973a3a7891223cd90b64944266ab5c9de2f91c29d894a7c295246948d9bd049401dd1a18dccd0319eaef0dfca79dfdf35dd11105e4ff50ef196b9b64168274854ffdc29e32ab85b7bef2d6974abaac3aba5a0872e2a1a3722ecd5e5ae14437b403ac7e9f7cde0d9e86983f5ea09c298399c5a6c5c8cebef9ac509db3da240c0b113c654ec1c91dc56db9513291268f869979ee5f11a3c6201d68c5618cd6033cca4498bb9b7ce2fea27a75734d569e790f88b8a4bb57f2e8ebe7abd132d7dd364911a3eec673d22435d8ea5e5f4e807b9ef62bf0e1cb24d71bd77dfa87f6a03f5f9e5fe72e96cb162afd61c01572e7ccef1e583ee949a3267f9d505027a7456b8f5a4e508376268e8b42a30a7284cc5fb4755f4313a9667a46125438aabcc54c55574f81181a4983d17e46d2e0a1038c59574dd7343f5c2538aeae570f3cff814382fa269a7336604970098f9edf7cd0564669396a33f628924f6e83193c2cb5eff51ff9158b382eaab3afebd4f4c1f6fd9ae4c01d807f350f13d4341e4dd24d83cef813aef00bcb8ab50f511006a52dccf6fd29bc1863e366f1121e1be6d397e26dc32fe0b8e1b35b7e3a37ca4bdfaeb07d24c983bcaf30b0b013b7c70c8cfb20aace37d72f9fc6f517169327e11d32caee0f6ec2a624f50ead728085d0c4645d0bc1bd846515604ba57e06e4437f0eef95b2e2b04d7dd019bb8aa02de2b5c1fcae33f4051071bf8b6207ac14011944749a4145b71e74293aa9c84edc58f13fead0679a1752018168e47b08150a97c98ca806943e154b914829816f23dd2dfe54f5eea3dc88ef5ded186bd47d84ae077dd51cb4fe61dd2eaacb0a149fd2d23c33fe5c7250c850687afd05381d8a7c8c2905892cb238fc2cafcfae9d1313bfad31ea842cdb4da6e6dfd17f3a0f2f3a0345cb15dfc04692f1355f9f96be74b0a6cb4f0a9403d0272df29bf5aa58c56947f094c52f410b15fb986013e6339c52a7ed80e0c2277d27993c857b2fe28413974926f9fe22878036ba67bbdb5751f78b35aa66a77395bd39e525cb612643eddf9ed20d450cc107dc02c2b4372fdc514c458d9c46fe5f76a88dfd24aef1d61bdcff16d8e847f41be8ea2f38a3636a54a7a9b3422d57d977815735b83a61426d4b78b0a8fd9a10033f933cfd30998afa43e057521d9b8309bdb17a09400162787fa487054b7ab3b874630615260de003fbb11176ca4c9c6937bc52bdf0a2c692321cbbecff0fa83af61c91b9b909bc28d4480068d1f4c84239cd346d31138c841e76e10b9b8c902ad2804a5b557def1ce934ece8e7879e59c70745eecab3fa76f4d6aed550bc814ed920108b0141d3d1b30c76b49c3df1f9f057a2992f2ef927562772266bc6be91549a4ba2820b5d803e486969d5c598f74cb2fa5c226bc63c9eeb8a96ac7d5d23abef244e5cf37d758cede837b4495dcda4ada98432acf0a664d62733297b401c34560724f464e5a249fae03924e018254e10716875baaafd6365a324894e5fa60285045a886dd99c70edf526db2f51e5b829d777631f308a0fee946ea6bcf885f03ab24c15ba8f54155ecdf0cb35988c1998848af9fb7cafb6cb97dfb60b7aebdb506b150cdc53f9a14debb6beda958804dfecbda9fb2ce008206a533c500f11c4867d2253edfd2be69e1a74e8d6975bc96b5c3841729c2492f1165d29dda3e7bcb20525f3f0bc302ba9b00abd72e88e3a71cfececc7989d80a8afe9c0a36d567fedcc36c23502af4f7137f9f764596d59be4ce8a17c95f603805eee1a9a941ea54b47b87dc8071fd5e8a9e4049b2212a7fde1999ed4ffc551a3415400379f90de0650d7f3975783d3d33a29a0a66f8c250b00da8de6253f1a05168e829d3c77234c168cdd0af6c0fc43ed59a1f780aef27af11168f87877961a3705de7f208291eec0f777d895bbb5f44196aff7514ecf76cbec8ea1b0bd3231a96b3a1144eb30a8f7ecf8f3562e14b33b712df350ed56d95cbeed615155e1a855cd32fab576e4b730000ef560d6affa8b7454b782cb259d7443499ce7d8ba2cfa7081c97ebf0b2d9f9ec05ae3ae4fba8190bfe1cd4b7b8da7e2748efb2b2c43ac039da37528fcb2d098855140f04984db4ff6ae5df4275f2c7b9b45b7984ad0007fe1102e7a8b56168f0b903ff727aa96e20ae30cf19641f5ce0c29b323b245b207c69012a3723a4ffbe3e985fd7abef0bc308a60eca9aebf7e76763c6ced54a0c604f944154a631ee10d532df27b9559567a5bb90512398c8ec90077b461200a07d2bc29d2a364847698a60a93d20399d3117c328962e3bf5fdd5f41c6cab2a1e951f4ebbee6670db11678e6ed143ebbd181831f529c588aed6b4fcd6d85fb5c1c09ec4090ae4ddf8a0de5fc41bdb2d3eb42e7143531d1a442b42a5349745075f2d90a971f9d479172e6df4bc09ced0fceef08a43848ff9bd3aebfa42fcf650c5c42b00bd44376d57419ab9d937bf6bad8ae784e1a149aad5107be89d6ab46188b316ce58aa89bfb0c2ff5aa0ba2d1743c8b051815c3b057a94c59fbfe5da7691aec7ba2735efb1901e8f43d0d451ff946a21f7e2c1c07de363c7f0d5d378ed8158f1084dac651845cd12f2f1d87c3f4f416b9e3259370f2e030c0fb9d7960437194c823ecd4586c576e1b944d5e7843a45a2b4707b843af525a1069b9b22ece64bcd5cc16fdb0e57802c5d478279c78adb03f840fbaf7f99807291abc7d587a3da391412560355414689bbc5410e95c3959ffe698af56d64d257c74b8b2f40a9ca079da7acd28d3ef24ef8d07cb668e066875a719def3ff3d06353221d87e8ee8af5d7fc3dc9aff578b5e4139c917632d1f7428d2f9e95bbc31755835859526c44f6c476641f02343cb23e9afcc0e5a6f354e5bc643640f4c42115868bc9222e07a5ad5d32c71e1d73ceac079b567bc546ebc94674392093554dbabf28f547f7647390288d75e3cc7501a01b421a6ad94149be39429f548d48f0c910e213117619544fab1e60dfb9b41b590d69d4579bd394b449bbccf0579bb68acac11bbee884fea66cad27b48f42ee97f04e7857f8084b0498b927652cf5fdd3fc73a9f0c4328d50b24222d410f99d3b7bbc1ff6e18021a2ee57224cf512c3c8055b492861f8c114b9800147fd3451a5757ae45cbcb0afbabc34032749c5870ff0cd16d5aa087a24600fab809e4c9f02ee4562513f3e88c69d4b751d216fbb68aea775ab10cb70f2904b20dbc18a0764e957feea808e5e7f43a87afc67bf49797c0852656253b07b8e863c1d9d8cf039b0e48ef809303e519ea96d66e42e325d97083fafe6c504dedd551bcdfa2a769ed2de0542aafc43e9d467c950c8bc67cddcfe4eb5e438a7c39b81816ffdbd09cde6c01b3f5e0e6813119e1ad43069de9ad28b020cd7f94858460123daf130229acb53e19a979aad6fd1de07b7c917fa2e58644b4600198803868c6834984d7a5ab69592b0e380b4859f869278d94b3e5ba5fd887fc4738fa6613832c2bf89ef5c7d848d0b3460580814e6533d50571e5d8216643d96d7a86ef2c762459fbaa5c57067d3f60e44e384b258e0ad099c7ab220117edbe636389970fd4842b8fae5f175eea1ba116292c4a86b239ecde82781c1e2779fb81734d35eb992398cbd7af485220f6436cf73cb7fd597851778818ef043469d0ad06cfaa320ddae108393d14ee83d1f91f85b2371137b4f2f83dc8a4556048563ce76a6e326e0a7da7717364c9f60c639010faa3682942919f1b9cc9262d4ee16e41739582f4ab35fa7792be4ad3d5f8e67d7c50cfc4ea90cfeaf6fca023810997756e22554537392f485106c3c0f58d2246c1d77a78f5907e5c4da6d476c73d4ce699201d311b408a3164ed5f13865650a3c90626aa339253c80c56ae84b73f0884d62d71b12a71cd08fd04f616dfc070f7e7b69e071a68dd2d653ae58192beb4cb89b49c2bcac30359dd71c1e332c907806e10cede1ed041b6690e95f782c589ba1b393358dcf1f5d3e41ac0f5ab76e3cfebd88bf4d743f13d844fe2c1e47435c1dc461c9ccd6bcaba4af8c8c2dbb1f81624a5fdbbab8f179c0e35169db22f47129df03e4151129e9d9273798d00ca5996cb26da7b75f06fb5eeadfd2ebec6758f7d39d22a927047986072c9f76a5b4c00e7c95f8033a33f705770b0711ce8a0f86c6853136c3c759da13d82ccca4b51e57046191a7962e40a363b7845cb3ab81a38a7687fb767a87105ce5b57fc60adecbd88d198f51cab20af8366a48507bc3bc6d1b0dd66424545b06fe7cf7307b53ce2e3d3afe4a83b61aa3b97527a050adcf1c2537ae4de0a4060555bfb8f241da94b7916914a19b8787d5e1023efec10321f8831615c9c9aeb5556d695f308eda7eed94ef789769a69982737cb33ba42d280aea5412f97b15be71d1d3d0ba2c365ca582d1a39cb89e752f6070db225073ec393e04811b2cef3e81d65ed00a00b7d7ad087882d25efc9e4a33e22870f8f2958aea7cf962f8d593dd36c07beba701bf3dafca5e89f3f3c4cbd5ac87743887a8c94475b4967bc3f9ff73d93fdd53fa97b877a3f25b5e499cbc24c70229b575515dbd7c4682c3867221b5a68b46c570320c889dae36add40f8c0710bed0c561fb2b3e54ae1d000ed5d892014b57c884495a7eedd4b3200d13953faffd94ab8ec3508685a5c9ebd1b9bd35c826573e8b196f9dc9891854c8869ae3f9b83256544678524605d9a61a1e344c9d8e43bc7e82f57a882297f57a498bec99154c654e440fb1c6ee406427a84d3006bc7deb33064168b34584be9178b57b046221e400437afb45ef6995c3e3ad7c35a4679b431a97947bb794d27e6ef1820b36a550cf07660837e8beb332997c2777c73bebaa709784c192758a6975804547c77ac66522d8c77a91510581475b8ea82e3eb9f2ece28c67d6ad742ae1bc49bbf3b6cff6891d3754c86d514f4b256d9354c641830ead8dea051fb532e1fb864f8ce0d71a2f9054a41a44df898fc1e16ecd7e714862e50d851b8d3e5569bc95350f6f74d7a17ee3840016e0e81161c17f97634ac2290f5a755c57f8f886de79931f855a4c8cdd17ade4beb51aa1affdb6b524ab227d86816ef07b05324d585a4be57b7356887e29e46abcfb9ca1903f8183277e82fe5c60a6e37bba86c018899bb1ef4331477c47c7f78974142f17969f631791b282b40726e40bd8cba24d92130b1d5c1fe236c8377bfc04e49f112f8d39ecb66e2faefe81cc1616aeff8fcaf02a21c25597a71c1f5a51d6de425a4e0bd530604f0b4efe4ff63efdb5af5e53e7c13c885ebd01e8276dd6c35d47af602517835813fb4fc656bb4afdf51b2c05cf55481ef11b4664aea2568c4dacee11647c2effb1240b750be282b821f4ab2e15dca3e5996474287c00b914b4dc2be3586d2f0692d895913789c5d098303f9ea8d7fed29a3532f9b1e7d2c4b5c93640da4cf661131a892ec37adc5686b4b10ccd33dec7993ac9b0b3787437274add8033e03204b7099405346184ae08cf2d416f64d809a7ca8482fe618361a421a0688768f5e3e20b0e11779bfd3d15bc6c6376869bd9c0f2eba547f5ba00733975f6ec30eca73393383f3d83586b53a6261f95164c950409fadfa282aade5297b3bdff62cfcc99321ff411dfc470ce90d2d0ff8d80236a84ba8ce427523b6948ed7f8ea14ee54ffefd8dbd9143aeab2b0b20d560224178880b559bf62c0a298287af9a5833bb03a0d1f1e58eb92e22e93fd978573dc7c4e63514f0ac706283ac67b7551db754ce0e491241d96ac39935df873c23d989ea0c8847eeb072dabbab8026aff232aa481ef6bd743e262ce48c50eebba9011386e1795f08f18d6bc4a1b3f4892ea3507385f25af32e5239e2eafba24119395a241d7c27aa87e04ada119a41984ba58bdc61417ce6e5d5452dd3d5378da08069ef263aa6f5e3c5328177efe079484dc3d6d455ca23d10e6d01d3828c57c246638789792024561182348b4380aff64ecb971b1c9a7a483129ca1a5f401f254b653b164f3ea70f528877dbf59aabf5e8f384f174b7b64ffd3596479716ae217a38f1dab716fa064de80f1cba65e8879c8f623548df4a16b04d9778e4fc7465371c9270a56865f8ca2f44286a46351d6f8eb4657ae35f69a0fef519ee4820a33d8882a90e0ba5e86587f7e9668a3c142f3b57c518ba4523988a0e28b1d8ed353f98f3bdcb55b4912c3c3200ff2300e65361689470ba33a2d43c826b4eecd0d18bc520bc6348c88dce1ed46a0ce1afbb8606223ea8abcca351d33096ed97a3ea07d02bf9937094affc7d667e75950cfc32439c809c1cdc70abcc2a0e232c23c74e48c9c6dd92041c97837d8ca8a1eb0d642fd5b463c62cc24aa92ed4f580f23b3ca43208b84e8b2f7db5a86c09b0bd57c5e6c4e8128ab85af88815b1fb9b2d498cc06ce3b5a1767de6fe32983deed1e9030eb5e0aeee31b907979c670c55058ffe90b5ba071716beda68d288cfa57f7535ab0d4ffbf2fcd8a16668512c236f7bf4f34fb6c72ccd75fb83d2e1da209a60fe2caa30130f979cb4c5c534a0c154515a09b191861fb332d8eec234a9f921675d5fff4bf8afed348b1e4afe32fbeafdcd3fe0bec0c5b6e40ddf3d1cfc2fbc13dfdc35e2044c97f3b1e1bdc918cb5b01c83b1ee355dfee2470c8cbc4fe50afdf94a56efb3dc8692224e5832f4484e0cadffc3cdf261f0c0ff90b4242996318733b67d6ef59c09d1d7d4185d30fa876f411621bd12b47fe8119d71bb22b0f832f99a86d419abd4b2f68ea646a5c3871e5e84797d1b6abc10fcd1af136bac3ab327dcb27f303ba9a75274487b2e6017c78e0c10f78e2fa80d6ccc9ede0d09afd417ff1cfefaacc7c3a6b90e79b6963b64f664ffae09ecc45ebf4b21672099d59596ff7f7a4fba11480b03b3b9e4bd5c4a091a768c7ab0eeaed0afec26338ca22b4e27a1fa5cb928c861bd27954bde940fe0d137029fc15536e8ab1f8390fbd9ca77d9ba3f87843852f534bdf22446199614c9d1f887759a4d2685d31ffb77b788340ddd3adeca65822e9aa027a3466151bf3827aee062b4fc3e2c66f55b1459e9412f3fd23cb06c2a04a430d4c31afcb151d55a864f87aa5d95f371b17edb6a3b7c614d5616dfc754389c2cf42b9810cb7b86df7e034a98475ff4c30ebf5b588ef0e2217578c37ee914af48f09cb57d6e8ccbdb1e5eff932983762f8e01a0151a6676d07fdbfd0270fa3366f20421a79f148076f1d1e7c8fe69e802fba7ad9056b19a837492c9d55982a733725bcbb991accb52cce5623ef8c863aa098a7f3d81b200b0cd8d4f90a9955b72d1e417f31e67635dd38969a2d2b919de9be2d4d307fc8637efc9296bae38fad843f97225e1eb484ff251a8ba5e04536f79ee88978e999584a9291a576735ea85687502aa73962e3cbd282ef0e6ad4c41ffbd59ac6a8814d984faf96bd98a480b3f5062eabdc2d160a212fff420dca46abc2c25fb9800de81c2a25b7db40eb220710e5bd4c63e0c12a68395efe96afcb10fb6995498fce777d2a0761fc9ebfe0f428cbe45715eef7db498731577acf7e41efc167f4969ea27dd64d0883e94262ca43a1b2daf6da73efdeefe84d45454baa108bab9c5e9660bade1f793eed7fa261ae3d260e667db5da556c994ef45bd8aa0f60b932dcc68971e86b6cc78431ab7bea0b424efabbb2d6d1817a702624112f215e5ba5d1802ebf1098f550e13387a49d641c9204682162a5c4fb175075792886018dc17d1dcf3a22685e0d7b1f0beea67f85a2d2fbf6de05ae5d2f6e0575427201068e0de972b7184eb64dbeb785e364d8731c164ff96a3a3f9d45ca8be8001f95469711750bf2786b6636faa08375b5dcc41b60bd063ad70a677955d24126627c55520ed76259a4f72016c8c20fcd4eb355f711a500912181e6a21977462641a94fa7bab22fa44a3f369f999541a3619f8b5318665bcd133d2a9e8cc15424599fec10711813a83b3545b3f3f49e7172bcb199ef87baf14bc23be5662d1bf3edb26a3af679fc53d01a12b5378f93320ccdb0fa625b794f89fdc73fe30e919656247837f2b6bf28a224ee9948428d7fdae9528d5ec841776f129b6948c078a3e4f7cdaad04e6bd238a08d5843cb6e287a8b3cdf1956d068d252a6ef7a542dc6ca2938aadb4c3d09863dbff9ec479769755d6bfdf5463caed50996ea3e74404fc7b10bab3c3fcc826db1e74433b0663e42fd7cfc7984e103a7f2b30dae716ecbdda9503b3e80e525b6a2ca25527cb263130e2e5cde9e76a93910f73a6a7c776057f675e1d1e7fa324d106a06129e4e1407ec2194ee0c7f3d1e392c228ad30b60bce7907d581eca0067d1e082b89f8261c5f627585147baa5c91418f637f2ff22f6289625426652cc011377ea4dbde028628db50c2f9ebe120580e6e581b8e7926109f4485b7a9ac7f1a5c3e23b78c31255153b2a82fdcedbb844b94bd73dd578b00d8482335385c452c764172ddcf2627b939a735f0e8fb76475e568da5eb60bde9b6600c6e6f6f6727e9ba11bb20dd4592d49c34ccf01db00f8c2d7c6db9b0b25f5b64eb5c5e89c52c9f2cb5e33c03892ff13b221648a010f020271f808abba3cd9a1e84badb52e00a2ec1abf91b7da1bb465ca8e6b71b8b606530d0fbb77225100781b97cd26114424f0a8d6e70d901d828a1df76a23484b3e666d328411ce35714987b933636bebc970ad2cb3bd0d3402f521a7e451c8c17ec908a970d2eca4c233f1df82fb0376af57bfbe2ac7b214d694c82d5c37d766f0784dcc1e9e46f02800d3aca0c08ca1a37803febfa4f7b413f9fa2387c5fcd33f891ae3e56cb3b07a182d695a52bf24846e396b949d59d206f91594564fa2bbc7f97965b157f10c9877285661580488fb17a97cbd10d4e9d9293912fa8fd5595f6142cb98074f635c3a0977ddb6aaf3b110158d0df29e1d8c0252d392b1ee211b495eafca057b5558d9c6385294626d36da922412a9f32a5934d60cfaaf4dfb8a1ea9887bf2862c6149a4f0c351880482672d10ffc279ed7a69c10f8cbf6b6e0208ffdaf05e6bebcdfd9445b528a70152ed004da6927bb92d12a61b2a6dd577ff09889b54cb0202224bd71b465db426286ab92e07c443b352f76c178d3bd8bc6830239d95d882fbb89ddaefffac7f594c4872a04d042d2fc1bcb844a6c0f26e2d67e9089dbf7c2fc96c658309fec9836e5b53591622f5802764914656ad2f2111166e6a8d1f1f84c60c7f214ef9b50eac547471eb6144506174bc01b4bf5c8ab64f6041e06bb54c227058691e66e73441d40d86f3d4c02a33084b7e62060a04d4d5238e1b672b58b08235d5a7b01a4e738402c2ad39be77b487056084caf835d220cf3985fb879962be81430fb1e543bf88c6284947e7d4dfcbad3a0798b5ce19c67e206f164bc1d1b69cbf803d34e4edeece0a1d6df32990efde0042894049e40da8a904a7f4c5ed186eccd1b204b06c8fb97d6db21ecd65e762a960a62d84fb2d1af72debf2902f4fee9310f36189bd010a0a2f3e1ec1ca392b82d5f571dc2356fdc6316d7da5b174d07ad516088b09a32bee8351bef50333fbe1431a29a9b50210b4a8ba2e555a52c0c98dff78efe07d89e00e5e4c6c7a974b20202d1c7fbf405fb54943376aed0c396d0df5f65bf587f08a5eba7442e1178820617692a97bf98f3a05f2cb524a4ecb574f5bdc9b84475cc6a903a6bd64ae56a84ea45206c4e40ebcb83e7f7a6139edecdf318c84c84c3a99d527b1200e0b9b50ffe6aca5e4a0ed26dc437e9baa38b9496d62a23d7f8d727d4c1ba7585d8616681fbf22edf5e39894d04561c68656aa1f68d06ecb6cc6a0ccdd321ff6f4d886e3bfc8464602c59004d452aec01a152f6cf017202372de5f795e862ad673631d951b5f53ca409e5a41365db4c599fef0bcdbc0ae7c941d76b9dbf812eafa419cc8555367c8971fdbf3dfe80488c88fe75ff84bf66ea941910756eb4945a22ef30c9db9a4e0f059382433287d17d80020f8dda86e948d905bcc86062c35df993bded3931a577dea4886a45a53139934794777a56cd5b80f481b1de88022595e6a5e344285417a36137eee8ce86b03a645413b25991ec18093df207aa3c4fb88cdc6843136cd697dfdce9d91c6cde5d6da3c062992392e9b8e7174e816251377ef6519b7daadf72ebea6510b15026a45ab646f94704d564442c5d9a1eb7eb633ff96bc57672a70d050547f0d704714164b7ea32abbf53e5c5cd1a66bd7a175aab3dda0fd4ac066198b116121c69ea844f6a7809ff4c746746aa15bdfdc4b1f25e939bca301f0c3867bf0b6f5437187fcab42253462ad25f423694e585ad76b4e2827c6e9244ac9d5db73717b902bec2d0018830e7cbb25c99671021f2c63605aaa6b29a51943cba338132a5fceb2589d35f188c417fc7fdd308eea5d01915dc8769f58c33101097e6b406618bd2ba57cdb6d38a4d84c81d0c8ac582d68b9622c7c2278e3b898f519fb78c4fa5a44a120a45998c0a70b5caadbc35537da1d64270498afedc74ffd175f07f703fd7f1ce4bc4b26b8b5e3887311dd6b63f7ff566c6e3c3f7eea7831ea47da4f09c2cdacd4860119911a5669207a87d85e41122cfca6d9e00371d05756060f293eb99687269c9ba9967c55edee4469201b05ff017e966c7177afe0852305043a209d749aa06f3ea077cf7b68ce3b7e6e3952ec1faf7f7f742e43aa3b06b0429e7a1e8394cdde59c695c745909cce9cfe276702ef92355ea273387201a160d22ce20ed4c66d5bd621e0d09553d8872c8ece7d190d0aad797548bd3842827e615378a7db8dee7f183de0ce4d72cbf2a5af7c93732acb1c2175fdf91a69023ca6c385ecdab93aee990617bc18b75d39047bbc6c55cf15b8d6005447dcbeda65f7cf8a1d07c356d1343f20d888a55dc6fe001e169177bbffbe74ec1678a8340e6cbb8f6252dc1faab208abd254b9a17bc04d59b831d235b038014148e384d7f0a810fa6909326188fb344d7d24a99cd61f212d8436fbc84fb1843f4f853bd2abfea43c086f0dae2aa66860fc8863784d66d200230f402aa06d79cb65ea945526c2a0863435e0d907557f24246519f29027e22338be93087ef26cae72e4cb564e1b768145267a529e516941d311328c1f061d9c3aac190094d241a0abaa8f3fb59a38d16d82d3efcb40feb45fd72162c6cb97fa317b31844e51962ee48d7cb53c97049e3fe75952bfd4645b5b97a82e5984e64a8cc480295d025e57b0075c79c795903f5b258aca0224f3f55c9968e6eb22c0ef440ef6a7cae48a1b3b0232c471a9d733d6d9f0f9eecc5496606a7446ce54e7308a14606d66cd7220a17408e88de840bd9887695565a78093ba723f5c6dc19a8e6901275bcf7f2a12daa34c5c07e62a8095164d331f870cf6e7372ece98703087e18c42cee78cd66964b049b9d75b90dba0b4695f3b4477b98776fbffdd0d27b5b4b7ce8c4b7aba3915736c9357a7eeb8acb39dc992ca3d43a3f24b76dc4b81939a13e622e4c623cdadca6378c75dc1c4d805ba54c524deddf9be9c5e9ab1e6a597009191a80a8e620e5a25742db0fa1da3f6b9a7db5190c48f17ab5ee419272ec360b2e845d5568283a6e0e919fabe1ea35e989b6d2ba9e74dbcd882c8b936e84f1b141799646a737d5abe5afcc9a414620e30b38c1478ffe64ba752543b674c1d833d0b2415f51865b9c59df9e0515ea3c814c2608f1b31b2304f0da89552253329b97d8f8307fee9bda7bf0f508481ed3264e263b6f6411abe45dcaa3397ea7e7ffc8079da52dcddf3ca19b26b0350ce87320c38a80b7892892cec9e22a437852ac174f229681ab5f81185ebdf162f3ed27ae344c4290419446111335ff77e1364f0f69e3b6ce5b538870ff5ec892f871a1dfefc000345d6ad459901c10781216d47687bcad826babfcda1c699d128edbf1e1573babda847b406fcefe73149f34c40cb5086695ec48a3756fd196b71bf39ed8303877b5f395e974c20111ca8cdeccf5b48ebfd2442b6d36f613b3f22fe91370a47927f14bd62f8ccf9d66ce28737ee36811728ce16f6fb7fa4616e37f25781b338fd128002259c47d81a60f2b9920448b3fc2e7759d521cbee9a0fc12e37b4b5bed3fbc8925982846492ce87d057443be1acf0c0eba8e12d93e9b20108251f2995ec2558e2216bfa87e0e38ddc6dd8be1c923d8254031ea2b78cb73851f9cbe28e0e1f89b6c9ae855c20135e480450734dd2535fe52b96856f002d110c0ee53f7671f5e1c43b779b7386504cf333e25c182e6e64d9ca5619a5d0565f5dfaaeafc20070df522cc02c5e94cf0fd4a83c5e5c4d477b33647f05f3126b29eda5b28795bc2a088d634e7f4b39f8aeb29eb8d197e8d9cc00575674f7b0eed2387b8fdf466706fd9b2795ab4e8cab7086b9f7487963cf5bed2078498b20fa75c8436ccc74f18028e22f43bffced831cdbe2ab1fee9308297e241a309d9f013932c021bb91944d5306788c1b1a2900441663ec014b30e8207bf55592b1c2013748d10736d61b74bc587ede0997d2c0075df3c80373e444391bc42d2706da77946fde1753c271df3f1de7266ad5ec77eda417db5d70da223c0062adb6cb1d31efdb42a7511cb8b1a7bb1710621cdac2bf53f73e1dd43e23547403aa173a2a38a45bcf94dc37572671185df929ef57f21836a149b3c7cfbfa800fb248a547cf0f2437a2847f44c7d60767b3582ee9bfd8429867beaf40c2d43bdbbd9b5e5af01b7a50f136fc9125e35cc73506e48e0aa5739f8b187ec74ed7a4fa99f2fe6a7ee2f1c02e9423bae7e9eb4ebbe8f1e2a03a46fd9d0d82e6296e72a8770db79f31d627f44ce3b2e2c6df9ad8896324c281267d0bb06ea4949d4c1c136431331ede9dc793d1837cbb93186befe612c1f282e350167412a0e83b90f6b4d208a7741503798a02d1b98193c596e336ad8059262c483c927262cdd93f94fb9cb982c06c4f7ac389e5e419ffb05e3d304db943d030db73ec9f5ea8ef005d8d42872df4c7c21714972ed9341e6597811585fcceb3430d3ceeedd6849b38184da2626326c5a13dc0cab27a9e73daf5d26ab990b39b73c6bd143aee6ca0044ca2bf009cafa60214d1d1b6ec6be3573f421b6c9a0f60c9114bb9b0628ebe09d03356862a7df2db7424469543f4ac4c9b9f6564e0a4c8d482b83d92bd90b4ccfdaf2856c0c4320dabeefe17fbdbe0d0b0b81e12a0643a5bd7522dba2c60a7413b69257e97d024b14d74e5b126e5299bd2962dfa894e282d81ef4a08a5a44aa9ca4d2e7473453cf1bdcfcf8af85fb9a0430aff08a9ec1b53e04580f1166bae0a6d8680029423ed387791b1e3e209b02e1af5356334080ef0822fac4300606339aee4c6d25a3a694ba23c531ef4e8b4fcf8897bcc51d77ead56536e67337a09ceed9c2b763a0ed6ed30a43ddb39617ea3fc4f6edf38cd12d150fe9199f5ee8ac63120885380096e38e72eb92bdca69161730fbc2d11cf1bfcf3887080b716a46b3f607a753a42117b34b23f427f766265ca62ac4c3ab7503f9034bf6e0c04285aacbd1fae78789fefe6dbb96738026209cffc2dc18d4defc0bac93f3330a8c391b41ce2bce3c5e903290c91f0a47cf746017ccc99cfe470b37f637f9302680aa8ccb9bc574fc9628f0fadeb99482adb73872bbeadcd9be90035c7b390fefea31fb8a077ffcc662f0dda2a45cbedd44981e370cf8a0609952e7277cf39457ca7c065292026c74e67548a307a5399d54c73cf24f622215edf6bfde837b1e630c5c444d76f0193a9a094b311c76c9ff39efc392d02a82c317895c63086859de27f9574732e0d2f6b1afdbea26575709b58cd2b460e3fca95e85701aa92c04461ab26cfa2b2f6c4f62335c401b4d74e8ed0efbb52c89379691e2d6c4219144e9cde5bcb8c54f7ff77df69b5b68cc7dcde939477156e9bffedce98debf157a2ba9896cb73c627df124fd788b0aa665aa2d15f9ce8d822f1b0a01ba072d69e889c655b39acb1a9d9c7588c74d2e5fadae7a33a6ca1206409855515e9f7c18be9c51aa36ac6be4d2ce1ce93cd26e517f5ec30bceba5c54e5151cc937b2ba10eba48fabf03e356cb167783142909e062a8d575c3df4c74856b5b2b7f2b7e6a6947679690e2e0a597db06a36e41d880f045e8140510ffd89da5d89c086665a3d3e4381cbc8c807e57138adc68cfa1da2f7d4bd7d4bb9817a6af2425403e09a9c8b916fd0a14dda77f8daa554a79b562be91f58dcf4dc1fea98bcae918a30d6baf2bea890869232a0d39288f7aad34b9e2661993dc46e30cf7924f88ab71c5cd0d40fe79b1f91928443001b90327744269a21c7a903d9dc76678d8a1a22f5330fd230902bdcb94236564db64cb698faf42ebf85ccdd4ea0331b60945eab4e387abfc72668bb96397bca9d95e9d81f604dc6e323613101649fd12be4028c5849e7a82d45b607a3e6cc7f3a9cd8cfca915e0ca3b3633dfa521795cbc5b13725390fac988f08d4604975bdd7c596305873fb32049d0ca371a0acd941c2b31693b16520b8fa15c79690345d3c53eca29efd9b677e4687f6ce3d2f7e0988bd1d782ed899bb1584f908eb221df22493d4f27fe1bfa31d4b71792153b65e26ee49b142dda304455a3520a91bd73f10e25ce30ad7f4e2c8896bd68492467bf36768155fe70cd10e6cabfa81b084ea271b2609c891b3dafb22203de7b76d97a16887888ad4c8ace2fbdfe39eb686c10e69d1ee1bd14aecf1cc35cc2cf844583f2639e619eccb53ee29b56874f9438dde0defe2380da78d8f06de5ed6e5f4f0bf0ea920e6283bc6e00c1bddf23daa2c864c61d7c18c03bf4bee151f017388fb5c93e5d492c7af2d91beeaebe2f6a48007bff59d693226472ba171944ad20e680e5addbad153cac81702854c08d7fa4482a52c1ce0df9b013c907daf06cd07c0eddf6dbec03b9c686a27ece1cf5196c4eb8e0fb04c74413fe890768fedefac89b049d54d52733e48fa3089e399a1ca9fac1f7be1e12f84f9e3c45cdc8afe8534809f75fda4125dfd3068a1a82a2acbd2de23c899baf29c4c7ff23e57d826485db20a0c31a89a1b2311c74c7e04578ae0119d11eec41c7d787e1652e1fade222659492ebabf561ed70ff6e907906b1d0097bfd240422a3c039aaafe34ed495c611b72e6ddb9936f12d48d5c94b1a9f82b64fa08c47feafcb5e5666c5539ab3057d3b0a5f23e851148e1f6da6011b4f7187360731ec208af1e06580fe7a731337ca4df35fca58334ab0cb9ec7f86044f6e95f274bed146a0418c88393e81ed7d55671e80634d796142f5476669272e7f582acd59031c2f2d950c161ca6980196c3b974c7b614d4909cf2aa5e18b51b31530b67f768d9060dbee53ed582e8494d70f59ff89c7764c12494667d28fa1685615aeea1f7f6ab369d9791cc68493d812248e5379c0046376ea3e77745d7bb1498ba93324f1322c2c146279b952a7a4ed767d733db1739f868dae31ab201ffa73a6204221ffb4570ec230587e40d92e388986512ba22e6356f1444a62da2d90b57848c392f4e5ece8c024b6ec051043a1ad7f44a0bd54ca6b1c2e0a56c6640a3387f622d5a1a25f56cb2d8b0b0ba09aa2e90ed34b45dd41a8e6949e30f617538d19a076bb9ed791a7711a4b644f87ff38021fab6d7a7deaabfbfce30f8869a194ddd40bb54efaf0dfce6279a3f2ea93011e6eb697ffb9e067631115fd48783925b8dfc143bdc68d3c3c50c00b4a86dbd84fe405589a84e693569131d757569cfb9f65b6426ab5a0b42a50195c40eaf0d9a28b9642782299f4237f6632bdff705cf0f9e4ee51a2c11d6daa391112481e1a7bc3404bbfd0a058f71bef453cd29a1245cc2c3aa77750c016ec7e4573660bc37b3082bf48f052754f26de57893b7fe5d6669586d9b98bd1f3d616f54bec14f63ae06a710a659a8fdcd4e33bede15893d17bc2fb92cbb3655e4d8d067cff022ddc2c60b6155256ffadec975344e92acd660e7231d8112ef2adf7678221f8c9ddf0e3d1fc51547cb9bc0323a9a7dee625143779e5f7f0e36470aa181e6a9cae362bda40891a148009938071ecceb795d1bb6f76d2d4f35b56e1378a6552eecc2313eebc9081d4dba8b8b1a309f081d818f4ed26a9616e8435c2808fefe6eb130752f74b7ad146fd39bea602eba4bda551e1cb0dd288d829b72e3ce2ae76cf17db4e70203e57c8d597b82b4972d6667f19db63a82bc1613d38fcf39696004e586b234f9ebbb015bd04798527efb2c9b5445c08743661da3cdc0dbe294ef2f97bc5b0820aaeb8eb77bf9a415d8cec3b0b0a8eeacd71e05a7e858b87409bb27ce965271e7041eee50da5ebef3a1651b8c942cb81fd8b9e39437e3139ff0fba718b1e15ba56ca4761e7eff8f5f7edb11559d12db7d4d1dc3b7af121b78b9a3f8143a365b6b80de029af74e4a35c4e96f5a7cb867e6ac8735829904e2251e6e28391dd27e94f68feb487701857717685cfa6db2f40ac140e32641b320f623e633ffee779c9c274993bdf9b591dbb4ef22ad0e8663f1da8a9a044ea1d3bfd00ab471f618f6cb36a801a6c6b445156ede0174005a78364c7c9420cbdac7dfbe3d6ddb39d2e3147440af648837183e0e177e0d33a9b3c29609889d560cc81ec4b477889a720ecdd59d89ee55458a310741f6766d1abd9b15c3c633d8ff625fcbe7faf5a3c37bded3839d5d81e8058034f5ef75248a99e55025cafb9c3d5be0c9f9012efc250e94fb3823c22c43dd63eac8ef8b4d12fd28f0b9eda14fdc6ebe6814a4bde0fb314902d2d3901a35d07f1aa88ec1dca03923109d9d1573918171dae3a45e888b6ec8ed3f41f26670d6004db0dd8a318dc5b7bc8483c46b60e59b457d2a06e70c9d5e91de6ae681b4b0dd6885285d3950cf1af010234e4236eebbfb8d8263109fd0aaae41a6c4dacecef1f78892f4dc238849fa64e1d081f5b7463b0fad3ce09e39e93981ddae4e9557a4bca1105bbe7c80782b4c56eb0e188e789c88d81f71e6ebe36c7b8f0a785c11b6d16318f6f2ca604052e4ade17edc6f9214c2c89f9adc6e8bd051a0ef2cd0b99afe9b0be3d1dd00d2c519949b6c5991465acfba41100d9a918495f5d1b9d05e7e095f73a69743832c2a6023e0119a3e48f940eaf2499a787ed6afea6f36875ff32fdf364533eeeef264b63cb6f4f77fe0e7d0bcaf3395eacb675c5ba8f136fd0006a46ebd7b59a46adb528078686556e044c59009cc75f9e798c5b4994e3a78b4db77fbcb4fd5dc8a217efb8d7457dff2cabed4a0848631d2b352f1e65571a5fb9fe762e541cfa6faa216d8b65fa8fdd667d73eb8c36f03656368cb1c2b8edb8dcb90db8f5a487fe61614a9b18c83d5364b8fbde0d5870c86352d057a30cb0863ee72df2d027450a98a5b9016c39c49e4979264438f0a16fce33baa7bcc6b1e49417130749df3e27e34184f8739194f8b9fed208f958dbf4013cd124006487021361b8e481479341231d487b06222162226f4b43ae4ac9e14325c415afd7bd870ab5e5b12c01a254daff54bd9674140e8c6ac217635d800e5b8283b07cfe0318742c1fa4908b83cd6c3148a677c4eea0d119d29f8908997de0adc48bfd5ca7c07cc7426f4b27c17f0b28f5e99f1a8ac04a9bfe6faf235b067df40bee1b787d13529f4a19897bbd49330d6b738baccd5f0979801d6f4646177069fff3ca00aa36bc3ae67c199cbd286fa6b30358c761f56f69fb5da1d73d808b234273bbfba905242e9ae1cc5a3f04ba9093f58393c667db6e3cfe200d9bb718057b347761451c098098c8a864a8ecc63dd7b6486a947b8488d0d1f2984e9581f1a929e6082669e2fbdc0229991756c056a06c67de2d1f01af076bf6953673c1e320726ef7fa67772d6dbcbbc16f3711591c720d2dda500a25faf50f3f9a500cd5dab7aefeec13c76acc3992ffdb4bc949adb0498647fd5b7866fa8fa2b41f7390f25cf8d392d87c873dbbc837975daa18cd7ac824ca2a04fa9df072d274c1b68bb300c834ca4e31df59ca06beb7f66c4612672adabf14f2eabb938acbd682190688f31fd4a53f81d9ed94daddb2a7fc9ba41e1911a6837a69bd9b3d2c0dd986c47a685d72c5a85014752b58a6f900e3cc12804c030d306319a79b453b9f64970041c9a00c14234598c7a20aa1e90e9cd96720269e06ab20a77efd6d29d270230d71e96b77b1077f89b41e6cf9a78f9d0370d8ede7ebd054f5abf17e977720e5bbb2f0c2c39733ade3cadde282ed4745aecc4ff34e5a5b9e7ad5a9556cb2b1697651f65739684bc6daeb69a265033eea7d1003743e8ab7dcb260de2c5d0c60e9f6071a136004a596b594354aa3163e266d64b3d5f881369e177d4457310ea07761fd599a8d88cb53251cf806b5430396d5d604cb5ab21450e1ffa6e4a3b3f7b2a527ef3185fc1336f7d1f76d17b30ddf848cb8dba8820c5552fea65929057cc2220396dddf2d4a925bfdde4dc513cd16c41e78c1efa93dd9d3d4997ce8e5398cf0b472af6e619fca659b3b0bf1a462e42ef1a1571fb338899dedd62a3189f7870ba86fbccec262b4d843f022f10d229351221a0e26d394e6066f97a0d9eb09ecf6acf9cad7796efec11f828b3326209d2f7f80d3db4da9bc18311bfeddaba172c4aa006270007d7940884a431aa0d87b0e31499003ee1492236ca77271e2a227ec594c5904705ce8940640954c2e1337b698f0e1848dbf1d4832b877912718f42cb0c471b8dfd0480c50ffae80a05ee5ea2ddb14de3c94c206f1869b50551d9379570201b1f66e263eee0beac3d83c40cadc827665ea2f76f64fd062f27bd8612f4c7760113459f93db8e26711b5bc630f26d3cffecc089918e75adc16ca1403fbcd25e3d2e721dbd501ffca4eb1ecbf616904ec7f679c05e92cbf68a9d1b6f5898501209f51d711ee5991eccb211137dcf09ed17269b588b5ee839a0a344a5b334953749db94cabd2108a407a5cfbf2e558f66b0777fda57d9cf1f8b3617008ff5b5dbda8f7c000dade4119e296ba0b51589b06cb7335caa62cc9100533a4b03f4d6c0e903a9f7d0777fb279ccbf0da9b42694aac7e5066e7b2b6635577f47e38afb1088971f41389ece21843f95ae7c60807fd67c1c5f01b6a861e047fcd069d53fb470e88636fb1daa06f71627f5797d98da2c2714b5cde04aeb02b281306296109e9fece5b2cf7bd7777f0305c1036b2cce302c5bbaaafe45554d7a4d60ff5ecc867892a4ea1709595dbfd925f545fd5c22dabc880ab23d66182ac9f1a08666449004b64fc2ed9ac058b8df1a6cd648cc947b328d39c1d84ac92091159085e8bf842aef39cac6f89a4cb94c50f804ad457d7bf741247fcca7855659fc57cceb735498381cd203302bd00d5a0aa0e33fab3eb3ff1752de5eca50a351e0b399f06f0d77728245667a69bf6d1bd62842f4a9727db3a622277fe28ec54c612248e3ac8368bd68998c686795281aed13d34c6939b5d49247ab3e4cefe549b641a4519ba0fb22bb8a22cc86c4c49529e65a8eee3d810bfed8212024f53d942a077f8389a563419c0bc0314da48850ea9a9d44e17963fb8f7f919470e0acf7059b4bcdb4c124c49968ac618997a1503d892f404ec5aa670504c89f08858e3c974cf83c7fcd70f083e77236f59d49538d11f16162cc609f0ff2d02659813578726d0137a18fefb2296f48d964f4213d978801a258c4c3ee8b0eb839ed8f7ccb9e915be12436a0ed0b21b36949f4e6f4de01fba0cf8023c59178b26d53c0ecdc9995e56796b5f68d516311de7e6249fa211b9ce0c348f899d6b58944d2f596e8751077bcd30ca70f8e91dc9a88c4dddcd499e968833772bb935e5fe5d72d0cd78b19e00b2fe4f0484881651c63ab4d4813c8ed519d499ab024d5e0e591bb84004ffaf09da3ca06b10703961939225b060c5048d9b7a669f305a2bf18057d29671dcdcaeceb06fb9b8a24d99c2c4218af59aa54d3db50c4af2cd2b8757121aa359b623c98e639588d441f5de5cdf8cbb9e296d51d9b2f796f0b5f071a7ea07f5081bf4c3bde5885aeb03159273cab5bc1a2a6dfc4bc0a15b58d52a6e96b93a187cc6073b8817ae37b3d355257a50d17ea8661913b3d3b8d3355394ea89385a8f7dfe50434504e5b7ac188279243e2dfe59726b727ea2dd401c21d1a8523769ee1cd4ae9c42ec7e5e8c7b69b6c1e584db78b366726f984bcca02a20215adde4d2b708f1aa27a547e272d5d49d9e37d725f550cfdce3edc059926f167eacd7ca8fc83d55f205af83f7576635cb336e5b13c219b14b96d0d1c4a24933eb48d287fb7d70152a60aded57846c5567b0e803e05ede82afa2e8df6a1fa9cf1627f11b8d3dfa3737069d4fe93cade51e9f98ade85b5a5dda7864a56a754e593118a7e09576c8baceea3cfa463d74cd59e46772350c4fa922722d1eacdd6c94b268a1e41b797806f37589b977ba6b14d33c6d59211ad4dd2bbbfd9e7a912b3fceab5dfca9b6fe161fa55791fe13135d2bf5984193a1a47aa1ad67081ee61b01464a7c98d991e73218f84a7f0049db3a525127dc24a6870f24e7b0321fd1f06f20f89b94506b72241c92e12119bbd40c271396325b85ac6f315c8f2db33cbab6628d0f0ea051cdd0e184b5aa07579c55ebf8ab0e81889481e23ed0dc3e2285622e6c99f58c55c7a3e1b3a371647f4e57f68f5708fbf2371059e985ce1cd176ccadf6ff8dd42be9cae835e2239536f01b8dacab3ae397f90b442834a8821f72ce35a928e7e60a718c5e1c029e3c96a1fa6735e7fd4e9ef22b6aa821a3f64fd2e838a03b83340840e3c833c0211b37131cd40698f8418dc383a4d04d267832aab0be67f73cf5bcad2798e581c455394e3e3c60ec3ec6ac1dc1efb39d3952b8cc3aa3baa0f643f86a38e893d0e6dd247ad4817af3d8ef1d43da0303a3d0ed3a3feef47d00307a036fd6e636849f496942fcdb2dcacfbfc6b6b9977d06c393cb1fd574f952dee736ec82586bf07af90b1bcb72419d8fa6a0ae2532dbfd036d5d040c6ec3065c11c98ae448e554a70a84279dfe5f75f626ba6cfefa0a9cc9f01244c7b8e099e27c9b73f5f0ecc5d6f65c6aeb634b5d8cc875f68a3df3fadd68cbbe75b74493fcfa0ecb3c759ac3f51d567149d70308aa0ed626c268cd6751694152634b4e6d8e3ab4ac3784ca327af11ee1a06a86dbf5534e827afe4285a4cffd68bb4917a03200902ffe1c4c0adee4901cc475d0972944fafc76042940453988d20c021f63ccbe488a9150a5381f30bd10a265831271a52f86ddca004e7b8e260ebcad875bf31d449586991f8ef7aec767a6987af0253c4decaa9c3dfc8940dcd837c5f1d28a39e5ef25c5fdb42d66985227afe07639b76a41ffb4b55a696893fa4e83e368003e189c5f294cb93308da5e4f18747b43641ef0dfd3e9a2ee2fb948dc744f770c560875b41c120dc0e0dc832470b0ba7eb2cebed365b8d807af49b1e27069d5b997611327cfd593c15ed74036878acfa5ebeb820f161fad37e2ba47a88642b00f2faf57f71a9e8517878aeb91bfe3084d006b96d91510ec56e2835c35a16ef59108174b7bfb7d6594293403b481a6a0b33dd23591247a1894328fbbb2fadfd672be13c770c83b0cc1b6d1dde38a5d6f948224f7b6af3689bc27a4a3734dddd87481183431aeb9a91f214dd85ed37cc76544ff1de54beb7f6c8ffcde8b3b65ecd2988deeb066594451147322fc9f48fe664000173cce11264797b1796a29fba06ae37dda6ede83ff819966d53a8edb5cdf4e63a6eae28da8ca1d7ec081c78061031f39c3023d01618d1f7d1330d71ac3f064f22a488a615ca9b6615016e370e254aa42db7d72a032746c12cb455223b79d7e803944fd629bc80dfec5fb645e450348c90b1b5a5ffc6bf4683cd3f27fa00243e50497e6545bf5f3a09e2c3cdef23aeef1b46f2be3740944c5a22f04b0ff10e7303bf6281d1c6cc93f8fea25a90ed53172d42f5cf0145c50422d5d955df6d725df6a1a8973c3c9604944c43e5b7cbbf4ec753d06f59e10ed7fea7bda6c173f959ee6bff80cb181af98b3a074091790d40cb8c9d696db4a0e72ac652fcb34d5fa9a530fb18b87a5f5bdd253232cdd5ea70fd563d2af9fbf4265e73f1863f0f562b4b92d3c3c0eb4dfb5fab87028f98bba816319ec30ea4641acb0b013e9eeebff9822dc7bd4f8128e0c725b8c9e6c3c673cf522bc0193fddab1807077565135898900bb0bf2b9ff03088a83b694d6391e866c8fa5e5b45fb1949d2d1ccfa2abe3ad227768f446bf1b3b8e1bd4a9aa7302c7738c7a99fbb54386be326a351fff48af3e3a47700df371d38d0c94bde85d8f615bdec3e687cc74d8c7c92751e3560f241207f298e8577b3c5bb1c637ed4bcd2dfc201493359d0c29bbd91a3872058b9fde0361f755b442d71baa492c7c7fede392f5bb996a3e740231ad28a57a403fd77d8c3a8ef347bdb357d7be2ed7cf403ea23d1ffb3e29e8d44bf5a7b1445d86a88ee2b1d55be9994eb5d95893b95796ddff19cd75a684dc296b29d43cd83854acf0940cd41ed40bd2655bd0c0e109dd58cf04b5408435a9beefdcc6d117efea0669aaef16f410906a0fc04080c30505056ba75c40c8b6908b640aefd9f4928fd62cc3adf2afdb372933b6ce179c32e50870bd1bec06217d8bf2be54a9535e272fcdf05db73bd297eb6b3748cc042ebff335cfa97830b78a21b2406483a2db8acb05adbab25becba393a7b04899c363778cee37bc1704829c0ec2be649dd2a73099430929a16907d2ec9d3b4aaccdd1e1bb42bc1efdbd2ee2438c071556f53b911cc93a4863fb750f0d96d42890cd13c45e8efc6a69cfdb1b36424cae1ff06152fd717851ce5a406a1e948f56025de45efdd6ef2e933f3ca239919035e964d22da49488e81cf7c0cae565d20065be14a0df6ebc09582cb898fb92bec113aa94e39440296ecf804647f741f98fe057e8e13f7dcb2b4076e609a0020ebe9f41749b194efdbde12378a93e599af4aeccc51043d4b86ced48fd1007bcd0a037a46b75fae38702d8eca5bd40e0831cb856537432033c2aaebe827ede464f6a0d2a49c219309072fbfe6ac0b8ba77a84037406cdef530775bb6140cd87e0c435cf33803fe1b5b29236f613bc7db5dfe1738f36f5eacd6d63f9d0be03821c2bfe6fa7f9a85238e19b4e3c4bd1e9028c30ea3fff6ed509d80456cb23c72d9aa1b8d6b4386016d32f3dd27807f4671d1c73cdfd6918be96adcadce49ad643d6f1fc913b6156c2958e838b16ade4d55c9bac158243fe59ab9a5ee7fd9f615cd71712c580a526dd6792541292682f04df66ac52a4a3f2cd5c1e71e3b9d89bf97a65d7a205782c89062e99c14f2915a997597de586ef9393f9919aac3bda0acc90bf09fbc12d1b3981faa762fd0a1ac32a96074d3ce169a956aab13b7fdc9cd6fade76df682ce1905650cf115deda6bb9d29f4b3d6b41cac05f8013392965a15e9a3bd05c7cdd76e36c4c091925520834cb4bb3ceed3b45a3bc6f7c3baacfd2f7e80a87c92db8be03b6494a44c91d27779c94814d7cc0dc303941f9f64c9b1dc74597250f6c781bc6908b9ef0a5a532eb40ca1001de9081d9a4a66858ce02e11e24744474ff2bdbe4692ad8f126725eddbd8ffb7279ecc3abac01165e3a2b06db25bb8a809d4b0368202acefcb4699b2f9c44f105cca314b7578d55c9161225fca5b90c95a5fb1b138ba654f5285aa8a7674aa90e78c366d082974591a66d88462fe33bcda24a02f6182abb0ef367fcc2fbde2df8b27a07a4905d38447177e2f66483aa2a4dcb568832e7391abc3047446c186a91b56a8c30b739a1ad2983cee444957deba77fa20c26f960c39cb88e06e476de5d82ad2db03b510189837c6998bd49a2a85c3ffc7318290879e11b639d3fec269826a6ac46f7627a225712dc473b5061e78431c63cd106c91047f3adf64987ee822f580006a1c3d14ec64ac918708b9c7d484e8600843ca546077a9de97419c36d371ae2677af9a2c88764b1e66b3318afbc78c9aa2fc1c4b74e59ee361b6ffef74cbe9e2cd9dd9d52c428b68e3847d3b686c79c700fddff64711ff5ec4b1639456044701c3238cac98ee30172d9d5861b1e0d94370ee7877826e467c0979174422e8d807f162f1e884a4edbd996db871432e4f82a6e7de3efafc85a7abd220a66f7acaf9ffa11c99835e0c59b8d8ca2fab95fc0d5021a3eb7e6a4b55c73a288fedaf6af638a76518ed9539964b4e50fcb2bfae199bcd893d4c06811c1c63ab400d7ef4e91fdf680b1a107fe7e300168c60a35e97f83eaf635e3437b9a2f003b37efd8179135351c903c6a5dcb3ead165d08b64b4de5e4f4d485c4e4597b8b633a91f9699703dcabf1555e35ca16f1cf4e946c11b220333fa804dbb08976e5831b053972ec4318b73aa423557eec5e317bc826717470b86d05abefecdabeedb29f74adb93d3d6e03c87f31414a64473ea5a34b9a923d4245d04599ce657d8659dc36b69d021b844471e176744e2bd699bedd6dadfcb594688520ff428cdfae3f555959404abbde3a3860cd798c0c7d73e17b72b8ffa055dc98f0f9486da2879ea12f207ff697df1cfda13a7629cfb0819289521023019aba1cf65b99016e8de12b85a0161a1f0be2d7d0f648c3626704bf60d1c6e0ed4bec3458c8fdae0c97f371c2ab8ed2231c0807c7e0a9454d90a994342366ac893d81a6977b902b2580bba05c6829d932ab54fea4ab3b75838779e6ec115eaa0eedb13336c1f1633e489d13fff6ed2ca8482783071f91196859e1092fdc1778ed4f101921d4726e0c9ecb4289cc46aa264be4a5ea03463db7ca2d98a802ac2a286fd4561b090137ccb295669a89153329954365579d22eecebde8c571b8d89322fe99c05fc1e4efc7ba17a0af6bfacc5623302b0998b8ee013c33abcfdb075f39167f57b353a5037fffd64d0f39c7d42ed08dd31919e9a50a0a6cc1c9631c1452c65302e3911f957bb0c4611d884e44f2d6e2d82b5ec0d8c30672f49b4b6667a0f288bd9cc1a4011dfb7a139fb984f2334cc6b35fccd5c3aa0545bf6876d6def8401fb0c3b08590f6870d5b6467f3b1083a33fda40531a29e79bf7ff03974486428d9c46ef6254893be65cf1c65e32ffd22f8c8dde449adeecb6f98dfbf5c8909a029c5a7c6e018a3e6d1a44ae6530cba290c2e07c7f7adf16c3eabb94362ed2aeafb0a0c891fcd052d65e56f3c094b256a29e2e00f92196d19a23d49f3ada7a2dc65ae163cb5dde2a37316394e9b64bd486086754c3fef6325c0e7bf19f12e3368450b057d8a2949bb8c95a79fd67a0471304044fa82558ce2357dabf0e97ed8f30775ae0d9f6805680a49b1bfd898c3579e06b556909f78b7536fd0d4456586473a5d22b1cc5be7afeebdf850959b3e08bbd377eb46ee0f39b40ee54c6c906925659dbe3e0b60bfff73d87e996c1ed023a41537bcf0aa181eceb5730ff3683d70f39b2797bbb6179b25820e98e0bf0e757c0a84b3ee6d4f2232f9089192e351e05502ae0cf0f9f4a7cc4438364c7355eecb24802a1a01c4fe5ef38ad7a72db836af2297a7fc31d2da4fbd8ad00b1b348ddbe948a7a45f61081e600ecb592e9cd899d075a0df1ce96f2232031b3445c2f37e29ca8273f11bd40404ae2b24770dabf43285df40d8d99095ba85b0bfcc8e209cb2574d01ecad890eb7e0faa9f5ea62112427142433da7224d0cf5bd1ea75006aa0e560cc85c4e6eb85e65047b2a3ada5c092d2f23dc6322f8d9247246c953ebfc508028d7392eb3c80a896b01734be174acba92de09a82493da43b9c127099481cebe34fb1e9463355a02885747ded1e392d75192ea1d5441ee8716a30d10efea38c0f16f518b38e3a3b67ab906952104f7a2dbc845265f7d46ae0990c62767287a7f18a5f1e9c0f87caed782873fe3db3b82a4653352520519f226f0f3bfe89c64e7562756ac1e334450383932168f8626534c547044323bfd02fb3bf0769a676da87d498dfaa7f2e969914fedf0034ab6265d70c89a5e3c28108df2c66b2fffd6e9521c7da1c601702317fa0af846c52b08e9aedcb88e92a035696f193f99db80eb3ece11260027592747b8e36c98dfaecc4fb6cc2c21fb1cd2f44839148682f38d1ae9a8be79e198ef44729197665ab5b073c62e25160889a946ba27ca0e3e2dddc9f4e88792c3a59b045291b6b2663aea034cd541ea271a05d012cc025badd5ccb4850f9ba839d10f8e25e4a00ba01fc32a0eab7b344655b61ae564dbbd3eb373d09de05affc965af0243913968cee82bfe7408e65c9bdce8f52b4dbb258deb43fdd1f6749d837fecec7690e2fb905babc0ac16506d6c80949ece254b32d473217f9db220cabdd08193831b32315f8afb2e58a41d0998d8362a8ce97192d363f872794c6c81e2dfe3d391d664123616340c7a37c2ecbf35810309eb5b40b0df10d5a87698eb9ed7af583594583c836ec85f2a8874dd1497492a47eddf0cf2bb22f784506bb08a1ffd5f0d77862de3dbcdeb771ee7805d3de5cf4405eff7a1cac72072e2c92d8d8d74e0bf9101ecb3f4171cfafb68960834641694050b5c138ec27788a485e953931fcb71a035be4a7571163894c804e736ce9c9a526b51bcd4d5756d10bf4ed01fce5b3fe67b27373632f177f1332b79da79d1afcd2439d06b77db5e112e590c75acd60ed6639f48d90b181801132d252f33ed821913a9b004a68ce3625f142cd1266cb67b95c802046aa8e7070752a0c0b7c0a2e976a06dce4ee7e752bfbd984c5538fb082fba9a9641c080fc0c008d1076f2e197b48db8803c39911cad79419a1137649bab7888146ec5813d2d3d03661a3499d75ad4fbe1808f9a9cc891bad542f3050cdccc4c0622f21636840cca15e70f6070f2cc5d529b1a3f7e732c7221c38580e564d02e357cbf9c946ef76fc6c6cc178623ffe6c5ce8088d5e1d97419d423dd6e240d7ad2ed59b9f90bed11c4cb53f0c40406585fa2a91820e532b57381da3f1ce15049a4ca56657d5d12db4bf1996f8d9bb486f060d7845e789d7c94d9af5d7a520989c937ba9fd529acd86be5af13172551e25a472a431d6205e94eff7fef239cb95079cd4df96ee04936344884d8caf0a698f744ad4951e1f66400e85127da74456f01051ee13da21691df1e6437bd54bed88a8c023d7d0de72291f8259487e2a478e7567d630dfc8f3607b86f460745c3cbfeea723799089de8d6390dd109a0d32331bd72fb9adb49307951f1090756eca63fe95894c907cfbecb32d9be1f7407ba1eab76a05072d8690497db5079dac11eb5eb5be01aa506260ce9018d965e23ece82de3c808eff2f833f61572348b99cdf1b2e0ab201b314ac0b18c71432f516455c2a3b43422daa473c67dec3bb085509b74424a721459c08f872626bafd21175f499b5d9b6e2aaa113c29607ce5e3e26a6aa0979d4a398d10f5d4ffca47ecf8b3a86b0911fd7a2f9c1fbb529d7fe800e0367b4ef4ee5150efdcc47a1fab538eca1e8f9469dd9b5a6e34fc15200ee5aaa1c8804e1cca3e18cecd29605cb87a5e422e4c838bc4fa1d1dc6b6619269053baf0b13ab79e8cdd838f0a7c2e46dc73bac932ffb04b991f8de1ac7d1a082d0fa8fdd1bfd2119a92f004946c0f08ca9c50e07e516712e9f5e059d29ab5042332cb92407323ac8eb668cecf50a2c06095d06cf4fb8e26b7c48af40ce6cd70b392456fd44837738edf0668defdbdd0c1ed2cfa21452a3fa1a4c6c9d40f57bec3cb6bf1be836d7a172c87b0411dfcef5e1509ff2763dc7d20359a1db8566ca399f40ee33f39f36c179915b8a1f924d568b9c46e6f1113624758087a9e84835d927effe1c8290b73b75ac4d66bfa99d2ba2a6bfda4e6b4f84d6fac42066e532c80a8e8e459bad9001eb449f45155772f742ffcba7d36b8d193949775347e1ef3a0cc23a30cae1e20c2a1d28fb4f6d1174e588d956b36be8f944c3c307b1a6f89ec8a66e216bc92faef41fe724e8ea12eb5f414ae29194436f417149d31e0a73f1f3e6451068e810b0a7aa58c9284e7b2f50ce6c8f180583f00ad2d9fefe4b32b03aee080e2547c766a670f27de500e9018dbdc0b84e678ba959e7ba9377d1d32bc12e8cf19e0a699dc5f1d5e664c915eb5ad7f11a221ded73eb076faa7ce5c5e1ea24d3673b75084497d375ff6e519bead1fd9f3a47b5362fcb89dd5975da0be63ee67b6674ec322c6af6e58453427669011f8e3520c3adf030389ec84c4d03f87df4677e153d3c80b8ca1d9917e2ab023e1fb6b6a1c573fafba56bc5097c54d116f19c79ec39b07bffc86bfa7598d84dbf0b0fc17c1f451448e562e9c16ade71d1bb030bf74ba27daba09706908cb1c6c2096efe18d2527d4c790f36c454403a82df2ae77fdd7dcbf1f170e5eba27db6bfcd1976861ce1fdb10e3b8d9bed404bac20cc812dd6bc4af8f9786fa7d1d5b6194bfae841cdb11ba4c88dbcf4001e7e75d115ca3a0a32c0095b3f01eef892aad93bf8e1f628f18ec675b59155830c21a18a3be9f58b168bd3bd28b54fb22cbf0def6d058870280a2c0476d18e01f153ec156857739b4c95c01d1ba28e35b07b77db88c8eab2a9cebc6c5d92f1a9e0730c7cea604f5bb1bce7ae3b2220b25dc6ebf3ff34bac990eaaa9324feed7ec2c62ac1025da9ee8d2096e78697137044f6411d0e1b474b11b87c72bede7486c5139ee8c4631bb1041d1482c7bb1efdfc1a0b317df017705fb52b329b7485ac841cb6b3759a7b36cf9b26e327bf11ffb0af384f1467ee0bb3a7558b42ea50159345f3b34e1ffba98102c3aedf63eaf463c0847200a448fabe254f0c61050a4ea8ad28cdbb390cdaef842d53226ad55d5a24928ecb910090b77f41afb5784a28fa7afcd388adc4558b239c10ae7795c6307a7a09cc79f22c6e7a1c0ecd98ffc367c6980393c7be86518d2b64571cf9e00fdc1b230074d498637ca15cd5b55709f28a4725bcfc626733aa99eb0fb1059225456c8e2d97b257b0d16b98060f224098e68eb689e00ed485a5f12f44bb6a06372a40fbc24605ddf37d9b10d8aefddea5402dbb004f67ffeac745f05704da7bce3e86c3fbd44c83b6da222bca60ccac732986375addeb1a1099a054f018c078c0de746db5412f74a30957434ce7cd47a54944b2334d24ba92d1ce3bdf84af02bcabc7ea70f88a0ec8358ddd8e549200311eb90b4b09f504e6193eacb314376e23a2fb86efff64a84e85517f1ed56445371f95edeb0359aa17476ab6cc83729a8f05761bc5a70979496c76f7f227d1050436caeec12436b7622564bb50d6a6c62f8e5f9174148b8004c9f2a95d75dc483dcd1eb84739180b2e6f78c7846d390659042260f006dcd8683a5d5d63f86a8838048e10cceff5f0946fcbb4171eb1c1a3001508b6989915403ea76d60ed7ce54cb034c48bbca6b22b223c8f084ac212bdd57eacd455195d7cfef3d685754c0a4921ebe8e0927b25cfcb34c4644e6b7fc7e1c089a70fbf9cd62e18c468a880115cc3e61cb9f5f2c9a72fceea9911a64d32039dd39755587e75ecf2a2977c582f1586ac18ceeafaebd707373a28cde106fec71a242d3d50dade33e8eaf74aa508335e02a438c1c783360704018139843b1768d9c28d3ac897e858fd3c2b13fa8fb521764f511f5883291f1a6fc5b1f84e6ba979544bb251cfb905840a01f232bc2275321aa09b8da9a7602a381ce962a7228f5448e1dc1923e2bc0145e927216f4f2d2960d025a980099afdc1734dab82850d0cfd4388fda8fd952891ca60d01c64ae9d30fbba05c50ad9a2651e13d989d94f8840c373ba14a4777402ac200e16f2d6d5814aa764b79464d8c5832415957c36cfbe952aee07f13c5a5bcb16648a427e4a908c1b36527fb9d2bb0f61fc44be1fb68177c59190e3aab47c10909ff4f87df4635edc3ddd6788e9732b673606aed971e8df0f31bac11611e2790e4a28a34ec641a7538f676c9c40670f0c5fcf999db670bb5ac80879e7c586d8873828f739622df62bd1afd2520a51c24c89c71d4192b6008537a54897f708347dff95d57355143c76ef9d437fecda341e0c5769c1b4fd6a4e36b3dc287b1855695e6b4631ce70567d517c2687e999becb0ed312a878f8e565ec28e6c3a7a3522e8de687773a30d4ef1e9c9cec2fbd5c1897c61c1bf0cb82d33ed40aaf5dbd8d6e65b51167585a043082c82969c4d0682d9a1e9c55cd6c90214d8deb8e8109e8dcc791cf10e493dac82a7637d436c23cc948a423dbac7b17133480e204cc29ba980e57e13c3aca66bb2c18ddd8d21832e7a297ca5e619a30452ff454b047796d9f29f3ab2487204b1be2036b811e309adfcc742df583ba089235f9d36ce17b5bcdfba7238e07572055614226457bea1c1afee5266af978666250e43d65054da96d10a98ecad1201ac0a5531711f04ad82f211fd0e45fa8ce383cb195b6dbfa8ba8ecdbb19122e7d6bf93ca2453f16869f5fe66c26c5b97b90ed4873c9631c0eb8f484a1efd9e59e16ab6ee8c10a731a92ff1cc833ed9acf22c5600f72b58d30d9d6518ad2f74ffc1085501c3c2d2fad8571ff91b701c06399a3e54193dafbb4f30feb5c37f797f844e2ed2d06bae10ebd9b1881a32b7f07883099d5e718bc8ea8d7f7bf2590b0eba2290de6ab1922ec825fff79d56a8b5baf3306cfba63410184e17001ece2b413de3250a0b25f28d51bba64b0422286a2c8265c92de9599d307d41e3f1ded2931ae93de27656160d7d78f969ee23be55fa9f2022a3bae479f3ebc806816d6cd81d9174e128dd2f8526df5d28d64f6120d96668ff58692fd5b3dedbad536cf0463057825c8ba0ecb6abbfd5eb2bbca6b3a01b7a1c936ad2a1eedb862976f882584d14ee5fae6118ff037bb2f28575e45ff718555606e0478eb60718f4d7e6d0fc2190eef0eeac2bc94042d441ac7bea42b78779462621805ea8515869126e2447624bc8d1167e14171e81e64422c8fad94a88f0d4f4a0ffd77f86cd242bed477d1adf52f32bba9c49c72463fbdef5d084720ed6bfd4b1921d1ff0400ae418d245e4483815853d9614ab766638d0bdddfb50f83b395f4adbd739c727d99f567230ac31956b17946452467c70952c32f1d35cbd214f29b5ce99fcfb75731a76c58a9ac97d45e3e9205f2b6dbfe0c66cc7e6c79a3f054fabe1f3968044d5409015b8b0761e660a530d2469eef22b4e381a63d9c26b5231220456f3a90a7447c6d977fcff732e76c7f81e1b84ff8658561bb9a819f975dd497c6338567901c21c465f4f2d85dcc2b8c23cb48fdf170129327f0cb09969566c4983384a9697213c9cc18865168c641a17dc73556a4dfbd7da62d9e60f3f153416250403efe2d8bed246f205981b5c419f3e3a522a02cf3f667fc962a75e79638761a3eb79d566de8047a676ed2218bfcfc2a30b73414267549a8ce5d26c34aca3373d56ca4a75035597e5d937d72ff09c30b6ef8dae5b95e59aacdc5d5d60ec9e47149bb9e060f77da5c4d1a6c70bc4f6d51d36d1b664ec0571ee8c4a4b7b99f98af8561f015e2c2f4b115c9da5f6d75aeb2dc9f745257dbdbef6fd41fca0a2970e5fa1224a957c8098fedb290711a90f40b3096f05b82392f74f71ed9db9c84e835ef9a3188d3e3f0e6b977925bf60cd57d9b947fd0b4de2ae99b17bcdfa0b827a60d8e3f24d0794b1ef4e41a7790d0ebaf7eac2e119e283511968560edc118059e0ccd78bf618aaa966c71ce2e64221d30536b2dc30c04a291a6610157c9b73756dd17a1cee9122bd47db1989f12365ddef78b2cef25f13147a83406ea37ee5cdeb9ec873645fbf529003708a30a948a35ae1ce52963d51a04601dfdf5ed10a6e3400ca4900a5c6b488333d6ff17c7f58ac9ad6d9ccc6bb5a56cfa45dc34d34f938e3872d1ec0cf82059fba566638f9072ea5ad504a6bc514ce7407e6ec3e6d41c79f3594d5e77b5979ddc10b887c02bf3df59a8b66ae36f6a3d9d2cdd2d6d51ddd5bf8bbfd864f5c9f1d18621ecbe2bb65b31ae708c00d01c0ed732d1765741a7e9f78496a8d4ccf52792fb322a87f74412dd0d676dbbf7a8da09f756891ca4826de4c4edfb12ea00128e64b8309884f514fdfcfee70fd2b831a9fc76771aae29f25be7f2a9cc9c7000a751eb25d7209cfc3ebf23bd9ecc3f722fc8588ff696d90a49b5f39727cc5d912371cb39d0dd242c0a67e9d7d98b631df2ceaee4a33365ef14bfd72c981ced1fe9edd2cb59bf8adaaeaa60388f5e0b62cf6115af67bce22e0b697dbf26fcf4c4ea131bbb089b3698fbc6706102b0dc2954ec11c687e97c9612eb0839ae5701d30beee4b1e6de4d9abb4963cd98305ec4b44985b3aa3695d45f5a82aea67cbf17e546f4d5b7cc591694906728d87212384444b33b2817a83c02c9fc68dc510ac9f8b625225c9dbc98c2c2f348f090f84f200772ec260e21f042834404d30a1eb72fe060834705bb38e2a76f0cd6b625ca660c8a59722e6b4338e3459c57232b51b661ef72389369d99db1415bc28d3c783f32a755d70e679d90f10a477092fa37d5cc695050aa874512b34ddd40e7b7ae9fa7830768274bfcb3c6400479473370a34a82a4e997dbf53b063ce8ea7024351da23fbb3e2bbcb4a59f3ff572bf7f108617562f0c789e750ca79412c2f91296be544bebed565d090c79cb40f0b2feec09e323ec71381cfce9b3188d24dde51711468b0e9d05db38fd98292efcd91dca267688e51755a2f4f10eca353112fb86fa43077fd00d856e76051a8c08a4522ffe28e5a5ebfbfa19a2a387929a924c5c58e2a3be9154fa2e3c020429f9c0b3dc376d80475138a64a34aecd0aa42b2f6876fa36755ae9cebad99e4911500e0bca90e07b3931e705cddcbea937a565a9057b87123b5f0c13333a885f03699fb2fed966c52f90f21d68ef0285378592efc2b6087fdd7195339fc9c04e97adf67caf4d68e1dc541ed4f0c3655b72797deb8ee350068d486b383330918e7ab6782ebd686475fed4155d9b2d08675a806da1dcfd2a3f97bae8770ffb6fcf9b1f4d11b39fc825aca5ff0510514f56c49bb6f6c03d50ef03b5de74837952482051bb440534336c7111e77608239b803209d886237471c06143e80a66dca809308b5d5353295659f090ebf9019ebef0da444b75b1affe8828e9900dcf4df9bd23597a31f26301eb2954c6f5e8c4407976df8164580ff847512846a4eb38e958c2452b257de82da58ddc9ed2d1995b1cdd1eb3db2cbc60f00904c6959ce0bf5f11cb4acd496f9132a2e85e08fec1bf3300377613ccc2b58f7df616e3c9e917cc1f715ac741a65f26995f2906d89a66b7e5954c7a128a57804dae89d3bb8f1e15109aa4c609371aa7933374cbaefa3afd5dcdb55d0437da07d9351e36ce895ef3526fce2f5225b88c453b47c639575e9d5f7040a144077ae797c6fde6c0933023d42b3d80d6a52e88719c116681d06f13559e733fe1f836673ec8ccae89490a583ae6f89a0ef1d16af814fb872a3d5fbc22e160c2c2f22383210f60ffe169d2abe5598e727fffd996ee7c4fbe21a2529ad3691b15ade83bbcc50fc59e6c72fe7bb31fe60bbe50782ae6e0235e058a555d54726b8627c88bdc2697080ca63c6f85179e28f4cf18f6d64347b10acfb9549edf732903def970454289ce5951d99518511c06faf925f4c76707f6eee4aabc06ed122b22ba8fec1b7141c7bacd25397123162ec64ba25f4ca1ff3f8845afaa940f5585cc5919fb813dfe67c57c1d01e52869b7a1db82e798ce8fa56161b287729a03b5f57d61bb3868b0fa1be27adb613ebea307cc1aef256b7e6758d06d2cc18d4eba68774b94a8a5a2abc45d58f096f70b3ee826a6f376f431ec64edb40758b1597d0c843f9135f3799f08e6b8024a0589431b2269387b8b2c2edcecd585dbe42aa5c850186b4d87deeeb6540c194ed104d4207cfc7b10169b2ef93a21a338b3286766e91e6cf608ca7d38f51bb341934e18bc911ed1a338c3b866a5f8de2d9837572eeb38dcbda1f858ab4bc5018bbf23adea16af2b300d5d44c3f7095ec9f7764a09364b02d920ce7c57670a7d23aab12b0ec18d6fb9640c96967d5c82ff7fd6ca1b740c0bcef80cf60b54a4fd068925bbee3ef2aa1607f3ecf2baf49174f37b08b44f1f1c4d9ad8460ee6442d563c692b8b7b4e46f898935908653522648bba20a73f635c2c8258a6dda18ea93c16bdadc7d9f4476755a7a4a70a341236298c155e6878db16a58f68c212ae3887c2f821b278fe852e02abe3462d20635aebb0c0cecbaba633bb91827503c3d7cc201b3f0b6fdbb0768ff4951f290f5ca57cc862666967ebf8e30c1095a12468244ff784606c103de39a95088fa204eab7a9e7f95de331cef953f5c500a8cd5b43bdf38be2cf1aaee85256c2f2ec0de7905d4b956f793b3d923b1fcaf5db3740321768ebde23b4968ef1497b35fd41c5e17334a282dad892e6ee6702bb32d0700d631d4ad7a197c67d22494b1de1e0f76113bde435c5be8872b77fba9e0e740da65a29cd4b924be20f85e8a418cbde26f1a434b825edfc1137aca067904ffff92fd87f4a52752080b0f93551cbfc79d546223e19bbae193c556fc16a46877bef9cc29900e2b6083272f5b4ffb008740c1dbd42d9c0c5c26c904e19ad6a5634a75a4e6b1282427b798224b30305df07b02ea894506bf2aa3e82a6614728af82d484e3502296ba1777c47f7db10c5ba55f294a49315214efdad99743a33197580315906c95d885024fd5d2ee5baa355cf7bf64917fc843cf282ff9ce6e4d38cfc7c8937cdac236e07744038cea66322ae41eb6b4063f4f9a9ba06bb848a1cd86dbeb0b7e8145746f7897b7eb8441146b89c3e170acde54572af2f8d5a034a840313c8e36c7cc35634c69566c148561e20963eececfc513614ac13922dacae4a60123915b81154860a1d1c029810be76e58ca880101c3276f0e9a4cb1cf99639a382e026e79977eef5110edd288b82bf25fb03f1cb36f45a6ae92859f8eef7325be1fea27cafe25189471318df03e24b7e314d122d9237f44a8143a14007b0365c81d0c58ec59b9077eae60cd3cd58119f219f864a0d82ee62a5aebe3d03b6e3562a3a41cd68bb80ec3a1849ad119bca6e86ed55903affac85064f1c96eaa3a24439e3a7e2455dbbbe72147ddf7a2b362d7b8d2340966a3a23a9fdc8791c977ace69c36eb5399c0657f895b724881d3d010161321a9db9cb206a2164b5c50e356c1ffbc722fdfeac1ce3bbf63207cf297b0f5957939751064e0e97f3c21a57b0bf92c52fdce581b3ea62d0a039ea8b680ee466ded3903f33d96a89f31ee3bf1c756c777a28923f73c6dee429ec84bb0f4ea9805b09a43fa124627e890a31792fcf81a67160a8cf536102d2c241c26a4e5b2f9b18d870d878e554015056f975f808efd3d2195ef7085f0ef6f5197e15b98b9dd0ba62fdd2a5b32ea492a594e568069c6f33b3ba1b291cd846b2503b257e8f03fb3ab3e20d86d05f422bd44d252e8b30bcffcba7b14f45f45c81dbc18bc6698bbd02b9a22117c64d2216acc23aea2ac2662619ec9e0ec385aff33a6a76778b5a064d08ab1ec12647a63be13d508f256081bec161550f997b2458430958e3a394594db1142fe93873d4fe449183e9ef749c22419515f71011673741c5339b8f6521ea86c7ddab8299400e5d85515e79805de9f11f81a29ed1f63be97a475442c5d5c8c0e948eea71bf70189e06713a6bb640555a50ae218e82c857a1d981ba67fc9ffbab8bc58be914ba4ad7b282cb8a16946ac80bdda530312401b35d971c079832f1004d631a19f483b186cb7e02dfb997e9507cdd7bb0039d5bdf567c4148f06df77b46ac2233e652e9707d1840f1d294268cb2b1d8b70908b9ce5ea90c705182c5c868bed38d63012fed57a8baf3a7e266274f90ef31a207806ae77efcb3cb26d905088e9ead13c935cad5edd16e0a98a06233c7f98708301450539603d7ddf68359d208f7c6576f95c028d09132cefb6157747498db24c698747cba88dcedc9af8e931c5057e62aa47cc8b5f9979cf5cb68fd9380076505165c2c7cf25e8410e3e5edce7a1fafe5162873d9f4571126013551b4742e892c5d5d1b1e9433670dc18535e6f9308d1150b6709614f0e831880e4069411f41ee886e5552b058f2025b90a53e37816aea2cf67f4a46e22839297ecb760d01afd2e9a5f0bab0bf5e36b839085feb12e0e43679d687de41de6fdfe588821ccf952996563850042c38ef3e20b47ea7983f475a24499b1c6f222c4878b11b1013150ea5bdfb6d6e4793b5d8e85be5b4f6e726de768a34848d321f5ac01bc54df5fb389fb3c21279fdbccfe00271571c9757cccc07eb7e28616b1deaac83f81517006eb2891b4ab42d8c9580ed10edde55ad0d4fd0bed9daf058ee2ffde63efa6d4ad7263b628d1fff83d963e483cd2918a3d9b4b322e8366b6e7275690f917290a70d567d23b6ad6c0d565a5825ef6e7031133f64e1d7aa43d5b88cacb11e909aee4e19357151b8673b60adb9f92e986285cde109c37cbddaa9076a38227826aa7b040f2d1954f69d6e87a8fa09ebd472305ab80db4c38b4f37a6c9ae17941816c10dafe274a5cf792be46d4ff7e589e694a4f10d5bb7f4036e69bad3e8cfeae3a4a795bc18b2e7a71d537e30cba6e551b24d356f3ac71b1bfdd07e486ac33ccdb9a85a1e2527da8f73b09a1900841337224a61297a7f3d3cbdce9033ba8bf17b943d91e211d8d032e1734765fe32b18d1833942fcceeecd667a4a2acfcfc3f77e710a21d245ea99b349a197e09bb7195a339cfdd066dc479badd8e7448d0ba9955cbd07e0b915b0d24631bd5db2c876f3b7598e80973bb19b82358edcefa5c6bacde1c1fabf77188d890861314fc2c4d64ba2e1d87d1fcb0e6a41a904bbc1e7153471bca9205945e1e5b0700df2c81622b76588d75939a8eb3405b79b275e0fe45868dc46e645cecedd44f78ee845bcc35c4a42d2068a033a91e4978cb035cde2f3e166bd43c6c7e8d2383edbde22a79c957255f9cfec0c0c5597d0707b5c4d61fdd80bfa389f6bcddd22db58e67527f7438a50fa9a96a6503e434ef52202173faf79aa8d28b2f76c1fd6e800fa6aec25ae330d42199b943be5414967ab20662b7c4497ffb366abac44014b177c9db44d42181d08d3bf69c10dfc11217cbfb933b51a6d7e442f32258b0fb9fc8abc1ad77c2b054373ee24301736062d0f9449981be5ebdda757fdc72023d09eb56876bf0ede0321097ef878cd2c940688c65bc695e709f156708686933e6ca6eaa20420611e79038d423c0da2543410a8dbeb62b40974ff55d860621541b123921794ec483cdf935fbb5e784c384806dae182b0275f67da20f8be00a6ff78d9a0dbeb0f243b17cd3f8b01dcd667a71e49c4d749944fab03be6586d4eac9623124ab4ab394da92399159bd776f89ef11a2c62dcd6cf50ba6be640bdede74d6cda173c205601519d1d173cab299e8068622130d619c19a3f99ca6050a61ef75b481b836e5cb9d4f9bcbbaf0f0522b88f564197bcd85537eae37ec948ba39e0cd6ecef458453473f54af62fcd7e2a2ac0717f26a9164d1b94eaea0deed1bc4027deae08518cd3b64a8a9318e16d1722cea76e39e8da1533120c4e2c9dbe4cb5a975a781bb51019df3582173e791982603d667c33cc1871d15e83f7ce0516fdff3e3dca9975c4b8f6f89cdea4f26569486d10b6eb0c5146367ad05d1a9b8f8f3d2f1ba411599500938198107c7e0445b2e3ffc431565878fff77d7d9818f4c20e859a3e0ce0fe3230f322c940c70c99c953581e78a08e17d496ecc604f4998ab81389379a19d13a3ace18f8b7988bf7b763bc2ee4df6ff8772cbdfb4bc08034c035091e41d447321fb1c2197c4150d09ed4cef52c8ef987a84579217099c8f586c8986f1a9ab10b47428c339ccc5940343d9bd5438372f6395bd9bf14808fc9d4d745002dfd0c8144ae6fa758c636f1a4a5647694d06856f8106eda6b3ca40250b3c501b8d8ca7569d931eb4ab1f2245a68e87947b5b2245c4873014da73d715c68caf6da9e28bb1562ef260589adc1832e5c9880754f41aedf31c7a1fdee910030fb3ed992d702a42ed6fc908242d1245f794a68f423bc669d014e4648bf0d055f56a706c9ccd238e1a648366abce112dcc5a29731a0fc7638af4b2dce262b1e9555683328c69d4761af01624d8895de1466d4ffa9f9e98628e15b8d8b39802234c163b0453e6148a16abd924a4cc76609e10b603018c7e265e26227e26487094c6a183dcdf906020b5073daf0bfbe46a318678463c2438d7f773a029478b5f3e784f6b72e97b155a6dc7f3b5c8feb058b9263da2dc4af7ae960c2f1482d76114830b989f1f1b43de3cf3d3a97a870d7cc311086485b3a1e13fdbd9ee14bd4eaa54c6e91e3492ac7c754992442840fca7fb22e464622ae0ba9a09ec49c115d9ecfcf758cf05eca23282319a35bd2e02e1904bdcc2ad241bb7cf5559e2322d3f3fc9ab2b8ede93c6c52b61b1d722e11b758161e14086be2738b9d9cb20964555267c484d2b3e70f639910e1d7998c535ba1860f88b71526b682755388b18fc00ec8eba197afab5d24482f5f5df66737736392259c0d429f408b7f0f3a5e1edc6e26a4d9ef1d3bf9a14ba09b21e84a4b789ff86df29c8c4cc117d81b751b8441604bbfe77ec4708bf78ad7455396fe3a47e6026707ed787a37c8985e15678bc802e58b5d9ef2337388b831c4359a247476aaaecbe8ee92a0ef07ce6a88706910c931f86da9fc85ad7410c80c486ad0326a946987397561b68f7db045a16527a0f5067caefd093f7e407aaa0ede4b7812a9b06c790a7134f01d06cda8c969da1fdf589f149ebd8ce7d3f8ce5728d5f41bf0dfc98c5fabf5cf3ef90e79b5e13856ea1011b33f7eb7938315c71e8b890994db72fd7e391d009b475f71a8b0c3b116ad612caccada3c1e5ec721c5e0dbfaea1a1a1548fe35cf758df355ea6854070d2849126f10621c7582c485a01e1b92a7db6776d7faf9c3ec73ef54da2305b39e0f13306f2b205bf0bd32e5ad7517ee1624f00e1288352980a76f396c8895dc188b92d26f8bdde7a3d3c85226f67759c8d2b1374b34799abdcba7bf1cbe893c84d034c1ff519b60da27274e1301ef656ef4b7e3950619fad45ff8e03736653967e23fc3481bcc684d116b00970bd7d28a0b1484ee78829b721b408e2229833e0d1af8d837e64a08fa613eb1dc506a5a9a7ecfc23d8489f809dc85189b826120852e511c4202b3479a001781bf43fb0defb2ec2b71562e2ff215016824a19842cb5c81a7a8f476bde464064c105ca0484ac283e3ee6c741755aca9d9977fac734afbedd5aeeab417ff140563442609fcb836a1d0c16f728e723cb9144dba70a19daaed8e5e2019e5028d8e4e6e4d823a66daddda4458dfcb32e612e4d3396a62bc72c9378de003f4f7efad5678da0710fb959ba8fb240d2a00b63e960b45fdcbcd00e6220541d496a02d96eaa07239a29579412d21c6f39f453fdb671863ee0f6b07c20e0e240598d85ae6203cd007a1a21442ad6dd367c89aca940ea5414793260283dddb1811c2ed94c56d2bccd05a17d09d57df1a802bb2d0386bfd88a1ac1ced6d811685737a7202a3248c47f88905aff41d57c1234ce9b0c9755c57978593b21d547397a08da46d81945d0191e9b138f5f43b244d0ac3d3aab47647fa9f231b71246ab2adeb2bb3d4e7baad319deca856ce0ff86b444a92189bc33990c596cd04fd163f25186d3ec8c19d44a244c442debe542a8dbc92bfece778c0c3939fd05c0b4816e66f1cf54662cb45c5054bf0b2b4a64ae0c9c25f1878cc508e6fdb1a49d614343e635efbf21f193dd022ea5d20b983a1a176c57fabdf680e377e51b53ee65afda40b7fb5fb965118e22f9274bddb2fe25c98323ad9f737d219c54f72307855a618eb7990b01354afdb62b34c5e5bf0d4671684991bc260d1c2e0a6eb9a28b13d97b2c90cee47fdd9e5eb6d73fef866a44104766ce408b58c054ee5922708eeb00b2251b039730e2537832048a7b1c5427ac14d8417701a1f9f5c00f16f80de18f369ed4fd0d1feddf5d3a2093fbc373b066718cd7ed6681d778afd558c6535aaa8743ca7bda4b8d93b4df1d95d675d48d9959c721a37c4ac58ee9f10f0868ca4351f69d656c7e1541f94c4e119173df16a239cc3b11410aff36e7b440eae18c03add22d84a5317ef10e87644c2fc39fa8d94ef0c8e0b362e04c0bce422b122ef6247afec570853dbf9369c664797b38815ae8dba5c7592eb64c23818908a9fcd7bd4e48790985a3b67e2d937bd2d897591073db9ec8aca69a25262f72d2166fe4a9a729034a80c32ba40e2238268e25bfc4b6e13d05238bb12825234aaee6e5c5a5059a74c883176cd6fd7422ce6b221e5c74429c3f9b0ff7e70dda5d7eed8601ebd8b458d6c34af2281c8d0042bc27fedac997588e7a132bd52e6bde9de2205e7d764704210878b5508410cea972a3fb80044afd98024a312d4e8416d128006cf332012a28882532a1943a0764faa1e8f4d3bfe00aae230fa43c32abb582c86d558f4c04508c2dd9d0f95cec60e8f6b179d2c249e73ad6d40a53dda7009af2183b4d4f09153bccb91758fdabb5348a0c532f15141a889b364abaa64f74346cf16febe4f6f3dbee96b520fcda1268ef3ef1ed856225afab3e5918d1053040d55e2d2841e1ba92296cf86ea91b8ee1059ae1d1d9142cf7192e40776917b9902a2c9a0f1d4eb7f516171d2b5b29c1e9a1525051391c684ac8146cd0e63003c3c5753e49f8da0ba65d8581907b3d6bae3736400a500c1ec79c18713f5539e1954fb8f30abc4f2ef866d2804e83393b520e32096dfbf310c425587c75500049d64dab29f98550c2174b236f49463f1006661c0ab33dc21f6090f4a4046462c875c371738c9f6e199282513cd7370e9be0bc1d8b83059d714abd742b730b92d9ff3e52d10a806b76be11de55fd511281d983e7de410e0e878542806eed3d4681049bbcccce3c64484ee9a1091f46588e23b97603d6375cdf11e4716496b121143f79af6eaa3cc3f91a416d4707369861760e15135d266c44dcb2073cbd3e13eea59bc5e14cb7b300daebd61513ec2a492ae7963c0722fd76e884299abe376874b3ad98e52c9ee8a5d609a37821916dc1f0cf004f69fb7c4d01db9601a2135a74ea3723560a932d1ddf7f3174f4e50defd2617c7bd78f1819d1b4b936b1a8f7e741d08e2f20f8ad51b66e884e60104df3b220f0aef5b97431bd74edb759af9d6b0bfb2b0a785ecee0bf169600e0461bb59a00c746827f7212f10b584b73b4b94f7e13d493db0b66430c480e4ba488c965e25897b27f15d8ca4f5d01e8b56d5bc1ea1d4890e5b94a68fb8c030857c192f44d6fad43ed718f18ec95b26c6f60d3f96e8fb13e2a0b3af4739b622331d59a6bff345e219d47d88119740651c87684a7631fe764c9ea71ccc9bd58644a754dd220f2a9e8e45fbc8a138155e836fd857d8c21b879e5f6d3b84c8c796782ad6c4c08ca9b061d04bb130b6e252f8c69da8dd9b8fbde13940197a1eb1b2556cb92c91d36eac9dee5c7ba8246793d9b6cba4265dc1e99b752406e38f77e0cb978f214ee708ab080ac92813bfaa1abe2958256f81d184213bcff2d7117a3476f01c149bf9b6d7a1faae5b6e08530cc5eb79ae89d06e280bdf8968714fabfa8d4e213ec7caa9c9135c8c1f057d760f2bbdaea863adec0d7d373cc2b0563486690d4e287724d3375bd7a01513a10b8d7b92723f22cfe2a26d5bf59f8270d718abb4c9e4dad4e11237c73fda1b549c52e1b18dc244a0a55ff7d1077e6779041aa82c3544d974223d9a093ffe03631ed968bdd8bf36d9b8920245d4386b326e3ffde864a881caf9b67428519edee9b4dd869fd9b38f1e91d11b4ee6b8b84af6c82d284ee7b0bb96f57145ac0df9b04493db37ae43ae174a88f612387a9781eefa020df72bd0fb83f2f77d53d6cf406860df1f0902756b840542b1912c5f7f24cf5806a4bae4faa86033f210fb0f32fc26383ab833c7a1672ba560a311f7593996f005afaa7a0e49c417a8c3f5435585d29a9d0e8a7e0136d151321d8143ec7a6e0e308d3e5e3bcd2999c7da91c177d4d70217661be31849ff3027427da6fa6dcd957b4b39a32837f468090e4fd0974681901a80ede7f62a7687c41301989f66d40a2d558c60fddb17275cb446eff52eed63e5005df5803399a2dddffe5fa6b1db56eeb22422fecce538d3ab51ff6531208c0a28e47af93f55ce7c585a0b145281397cb1ba97b49fff04b6a3a0fea361f280eaa26bcac91569654aed296202e9165b11f55ab9fbaf9e5106a78f37db7628dccc2cd0e33962c215a9f5a0c121e98833cd540e43456dcd1455299ff58d34a3fe2bf81850ad149d50aebd4da412a4f14c7e58b5c3760fc93f15d4cd8a71a40ced622300bb45dbae11b73bf0745eae9b0451be8ecf68f4e6c758e3b80e0af81d46b13d5f67187150c72c52696c08bfec022a549fd7d9dd822980ece438b09d8964c996ae74c9a77340a0e82038b36e06f123b10398abf8c35870ebf8201e484b3fd55663ea614a7bf5c399f21a647984e453cd4a299ba193374403fb6eb3336814ee91563ec898cdc27834c78d441880588a4666607eba792053b8fae953f2f9920af36d459ff223e6904bfdf0a50457d0d92ca10a303a12471a1e5dfc19f8564215365362482bd8a1517d5685e780ebbe96e73b8e6f2f52a9aaa8e24103cb4d54077ea1226aff5f8d36b521fc146fcb83d3c4eaf6c9aa9f70133b4f14da70af024d59bb439a86316091f82a0e79d5bd06b708821b2e45f6b31167afc79f04ddf3f08d27ad08f8335a6129239da9a05fb6e3aeded4a3617ee56f3663d5f2ca00d78a769d98c895c513d9ce5c0de436f1d9e5a856cc98c96fe75782b7f66297836ad0d50b27bed99eb30af7ed1d8d773ac05d5c27b0e15f1efd7f9322b4880e6b375b06f9bde139a69c9d30d5dc23dc99fab3e8f6aec909ede6f8290bc9a58c062c751ac4d044e78e6ed36a1cdc667a4a6f3cd4e33e6dc0cd5da5e40e8fd39f49159257fbeda824610b42f29b8f7fc40636cc43705f0723696d3479cc1042a1b36a15501343a59a7303d78a84f7df5fdedac7dc9ff919c394e1c1fd88e813aa76d8036e8f5352957fcbfa736db5039b92ea756f0653f6da3f736fbd4b423244639b1149e79c790a09da4961dab397790902a0731314ef246865ac04565ccbbfd96b29581ec6882a9c2bea25cbb42a012c558802502761530969b796bef0f568fc0da1eb6cf2bd85b17144c36efa81199848fdf038b5a4d485b962c2e1bc513b0e67a45551382e5c66921265a1ff794babf51812b161dd48d3be79e17a4b513d71e4a37e4dcb5109e7c5b32ad758633008354a56ea89ac673ada7464aeb4cbed957083cf5c3e891811704b77c4c42d4e77441303b6419d7b180492803fbf91bc8bf8651baf447363520211e6e8cd198bd53d5f73e1d5b5698cace18fbf8a3b389f8e155c8dfb8b8e8c16175b78b5e22fb42c1d3b22f01ae7f0bec940a0c67674d344f04a1ab17da24cf27c511976c4c77bdf19afed706f57a5e27b5dd645bc637e5d0f30028fe166bb500c5a660290502094d537e7ef3c93f8650bf3919ce3bf8382168fd28280d749894f460459e436d644b8fc4001635dfa88c7090fe219d6a7545719ff9a929614c9c1f42f1d8d693c078191ce20de6918d285a06cbadc17aeaef9153b35340ba86c3da089f7681607ebbf63fd4a53faabb31fe2d1a4b9b70db168ffff548e4936027832f60ee7d3d5cfe588f6903e0e8ea0d1ece79d06c67ec073d3bd37d957f541d550ac1b95ccf7b2469c67f59de2e0993877b7fc120932aae332a95d33f0e0e1997f728ebc9ff0e49339cce22d2f5a2cdd1b3cc538f109a68258cc836b25643670c9e44fd80de7f694667b4a8423fa8457da79565db2163a91c20f5ba227a572ef3b6346deef872addbd10c3c1e3d9ecc180f125a5824fff34b809b47f887d6afa41bbc53a7b187d6dbb1d1a7807e1bee4e023c8232399083fe6d797d3c77613f373b3e67a1e9847286b4b9245e70bbd3afbacedafc65e30810bf628fba4cc2a0d7221d8f2723ddc9fa2f234e5376d85176d96c65e1ec3cf704216a3db44668fae1f3fb0b752e9156fbeaff4a255c8af4b99068123314ed5e5c100f9cb1f6276366fe254cadc50c721d793f3f2228ab67ebd716bca02185b4eb2b06b8100cce1368a7628afb163ff4dd592fdfc6a002ed70c82b948eb86c00d673d808ce0dfc5baca3d821b13c86d6480bc69cdbc0e0eb64e82f469a357b87bf2a895a4bec857a38bd18c417fe7bd49a4bc99691a5e23ea5647a196f51d44bb79b360af014b4004c56f124b53ee4fbff2e6ddd9d9671f5c5b0b6a4d16cae1fdcd6e45d508ca9cd34aa6fec25c1a9a17981f2f1d679e8c39d8f4541a3ccd4bc136977946745958d449e2bc9c8a7d9fd8198fc404c8e81a1e930fc94fdb0ebef04f21e431a1c947c959af6f42bc80f94121f0d73fd176e0f31f1fd9eb4ba2db99995cd22447b9b559ea95571504c006dcf65b80eb22908698bf7302e04d6d7c742b7d4c47646d0caff8e3047e84a45cfd1d45f2510d28e2a568458dde305e6c8deee81fba12737b47b3cb212089a0aa156120bd277c61b8dbe2c1446035d9e511b881ee14829c2ac2f607c7b8a0905ea45e6e8e66e24aee417b5a2278190adf0b11b5695fb6b5558def50544f6a1b31a5f56b9e745ad446e7a17d50bf91c9602a1a7912e65a415f1f0b2dc10df6fd3d213e137aab4a6569d9d435eae5fcfbc19789a01d281c6c28867820e85c014ffdc4ba6c5f2d2c46be04eb04b84ecaac7e7ff3dd1caae36cdb59ff0cd1994a47a34f7524b8aa1af8e586022d63e00c727d61dd255db4e9ae91706d29cbbc49df21cf1215fd4193196a498cb8c4f17d9fa360b5052e3664abbe1928ecab8e4cfad66071e63dcb63d98b934b325634ec85cb65a46caec6912bf092cd1879aeeee2c2f11da78f987eb8d90b95945006f6a03ad38180bdddd29693cc88ae2b45f7f1d7aa95fb008d0a8793e2c158c69af85f7bf4074864f93b1108364211bd42e9e15fa134a1de0569990ac65801e8b8e0d7e2cff4d0e051acc7cc5f0a2b3e1564bafb9d721631104a6822bd97b64b41bc801367064f6bbf65695c11ce8771e0bdbff87b118de05d0449b52c627ec8ce918533255775497f940efe83df42b8e4eee7e46d22ab87563ee7bc0194785be9ccdd41c4ca650d26cf76907e9213228f685eb584cdbdd6f1f626916a99aebb67c09586472584bed6ea66eb973224dcaca5570960e20b42897f96e2151037dcb5afdb366ebb58ed62521e481f6fd53b29b3fa3d3aaf671cc821e655310ffaa2d5e65118006cda5da6f10e303ad8ecf0116c4c7e71b5d34abcdaeeee1ba6c9ed21dc65f6a35ad012b069ea191cfb30f547c5a56dd70d9f4afc0f6807b860990c1ee68513af3442409c833ed6957b023f5b3bde32725259dc2a79bc90717ab53f34a1c98a77ff4e966a280bdb70c7971ff177faf0ebb4e27904f2743d7518717b1d9ce7213c606800f77a41fc23f2829e2ab8fcb57d1d3170a5b033e2ec924b85f8475da14933401475680099e425e11663dfd467ab17ec5b812df0a11e2bea3c5b1a1c5a5c976eb453d1e3fa7b98fb8428594fc9c742b5209ba6bbfeed307cb2c310377b8728789c6bc0ba9e135e25429e190e2cd2b99a7d3f8fc80ad0602b39744729c4dbb57d766ec82d1775da0e356c9832018d101efefa144dca49e762271e9f406aef937ce260a9aadbd32670271056f6d698827792117d72cb272dbdd6208ffee6afd3eb642c9c9f7c0b5568219c7f24c8809f57a1aa3c9b412ac97b73731f10d73c32bc5624a232a2048e8d48616b405f90345bde83e4ea25efc222c61380052d60e96ca377d712cd02c87635835efb08a68e7d31c40073cbe01b3f12d144e40499518fde637e417006f530f4a5078a37eead68114b0087a18cfc87c4e386bcc9e6e1a47d8ab6e8209211a116931b6d85a03ee6243d3a47aacd1a6c90f3c8431aeb8d009fb6b9d1ca9d1b8f68d007b3660ac88ed81593ea95c1d1cbf6b51adc6e669a418d975ec7f38402fd03b8b4ea29d8ded1cd8c666941ffece6fe7d3bbc9c273661729c77ddc6487628860194c396a09de567767fdb60be312bc1a23389710b7e38bf6ca0e874912e2d44093b6b00219d3fe327c7b32b14c0348791ce027c05d9c556440538b2b3e4ee0c6b39df092bdd58be4b9fedd6c707968d6c966363d205a0ff91b606f615ce8ff1804cff5e2db0d05eff52ff36fb16734c779478a199cf6da054f524434cdf7280c8e13f783068c22722ac046c770f8df1e7908022db082d20f4d65b8683a123a88d78dce91e40c3aef5103b320b734ebf0c86cbd2c721dd06b1b4f45dc5b589e4d823ecf6c4932d8b32554a6dfbce3837a801bcad1feb2f0a769d2fae5311f71a78229263585c044ee308cf2717932b2b87545b69e116cb7065226739446d16d4f88f00da7af096794fac00ababadc2f2c23b251805fc62a17ac4a44efe604c12fa80f398458056f2c2f2621e037ec96b0a299b9099dc56c86bd8fa8fbc9d60ae1c8d5ac89df067e533333b33d91f10f698d9e752b50f01a5f32675218bd66466c4ee2fd63f7602182675e5c9c6bd67e67c13b70eb9bbba2cddcee392c33801ed1dfd010c5aea49a5e1eefdf90742accba7ad6a481399ddead3c64589e6dac0ab6bc2fa910138e361b86451a3f8ce28ad63ed258d7bddd66e174de50d99643bc2d18b4b3fa1d7f08d552aab7331a8a974cf63bc9c4d4d2e96b148b682da3e33baa3f27e40384bac31491a51bc9d331b5120f9f10c28e940e48e49b8fbea2cc26d9307bd13a1ae582a2260bc962b6c93e9871924d30e672b772d9780b0cec1325873dfe76135fed788a7f83828c51fc0fd63faee70672589ff00ec582cb6c3ee1d58c4915bab0296f452d6a4b1fcf51f4c654ec6262fcb489a09d76698e849cf5d2f1c936b749d189c34d1afed2a3f71af60c59be1ece0bf2bd170485ae4c20bc26180eeb51a5d6da321b95c37fe16018443823bed294b968de09801e3bcdf62c4908c7c60bfa5a85ef85f8ab01a1944058e801b607ae50cc1b8aabe3e0e248ed95a3b464ab4b24fb605d86ea13528c029c76db64662f431edb1f41a40c3b599b43a4ac1ea4c82ecc7a3a754d48942f3bd8434641b6d05001a7f7c780fd62098483a329ebd3a51ee0b1980cb0f6cf13de6e4a03ca90893eca2aa90779c1c30843fb86928c7472b02a3f3daf52f1af7fe347c89e6434efbdadf0e47c614fadbe7925cc461f7cf578cf844b31056b65b246bce3cc60cc81514a1de3a40efae82f9e55930f292a62f5efd9320cabc851424f4dbc6a18c75178be6a6a055d6e3394ae9b798af2e2081d91d041c37052748eb141d2e0e26a241b883dc4eb6a9773ba19156dd3466c09d12898e79529677f41acde9884e3663bbb178f17860ffef779a5d0401c2db0525cd4b69c3df3c92d888073c42c35d0e27329fafd316ef051830402a02e14dbb5209ea25bacca471d2ece974f30a760520d7f8b3a61ff175e0f238b89ba83c3fe252c951976c88722ddde8d567424884b0936fd636ecea99a153d731888e2cf28f5948f3b6d11d6ca21f22c61180ef2cb1e4832d05640d5761337abac6d10596d3d7abff51121d5ea0df1d398301d217965b94c6638368bd9b99cdd883ff55704ae01e1fb6a118da142a18c6bca3c08daa312f29df4e7a4d5b4c36f390040f2b3d9c6d3901827e5e5f1c61d9b02f14a24e9a786e55c532b628bb71ae93b475dcf2caedd2e301e362dc5bf5820596dd74f05e5e6adaf0d28de06933ffb37c54679b97b3087a778837ea0eb5014cd85ecd527aeedb716176f6f51a8040c1b3d1cc85e7b43971db68df649f85ebfbac5deb356e5d836eb3564c9dda41af914e387a1ae8d3dd4e847b0d5e66f682060b57ec9a68f4432e29f6376e3484e2aee60d03481ed3459e9c0aac33777c4d634fd10e61dfb0b138ef513759f45c56c3ca2606c8f54f5ec6829709ecb36f3d83de51360def0b775e6e218f22bc4f16d3d6d5f25e28d81a1324733747455d207f3179de3fed7754adef7815fb42be300897b5bdbf12b742307a27463a90c92f6aee5c3ba6c876a8bf01a43cb3c8aeed655097ee37f5066ee11a974e35ca9ff4cf795e4374ae924ffda70b6c98aeb9b568d0fb2d37f92ae98d222834b37a108ec53a5d3cd62577772d20ec7fb8844321fbf0882e67493e8c6804f824999049ad49c8564e354c5556b4de45d1b14ee513f97906d245615d2a6dce92816f3682321c457e1121049d9a4607e48feb3290eb13c045adb85a7052682d3bd0f380be46c796af8751bb870e416551eb116433593d312bef469105af4253541a15c9b730853e0b9448cbbd71b09bfb981cc237aa9dab74a23cc8fe1185c47c469f013f8f46489e99ca9bbbf8d27ce282d42f296feb51f468ed820f871051939a1f8cb546225db70f91f338b365058d8166688c07a9fa55b341d4ed81ef8d334abf6b7671f524467a86e2c7d94b3a95054d17e05d70365ff9264cc9533ee4fd7e68d6309db075a491a7e16c6c51e982132114a51cfdb7e06e8fb2bbb80484f8a2030e15fa99b5260f61768adc32fb2ede96488ea0f11bcf60cfb8b22b1d7f703d2f7ec53d2fb240bf630e0d85b14b460e0bd2a1148b7506a9190f90ab47772a3829b00bab68efdb734e340c9474a194e2437732c941a79194a7272e02ee7bf7481c22d0def9226554b4229df86140e44b936d54aec0495143ac187978d23e4917d6b437d89365e84cb02355f3d6ec9ce64d0b9d3f8eb6c6f352ef2b18238df47934973b49f5c495d1bab368a163992d880899cfe6bfa1d04e1b69951374d4354fc77458ce8a855fb5c219de603017e2b93476f70e6d148b36728a3b5983289b334d2dab6c3b9ff9abe68d2e9c8a2b411d41898d131a66ee9ed67f12d594b4c56f4b772272e9a69b470c9c87d635951c604edff1da55427707c89e66fbb8dce51930a7b66ab816cddf3ea61b28500db9d0733af61b6a3d21e598ce511caee8d0df8edbf27e9f8b8d402d69043dbd8d94576fd01b731b7cc1d63ed7afdb5963d2eaf1a95550569daf58511f39015f4a864c0aff163978e7c9a285ae1de912a71c9d3fa990e87b932635ef8cfad1e8f3b142367948c8310715f1a60c325ad72d999dbd29235266d88e2ad96066f0bff2ad17ff0545a4b83fac0e18a616cbc16f3450ddfda6f81e096052b34d7934eacabeaa8e4b6542a27ee12a530a359275297b7fe7698dde0671d513d40fa72444a37899ee7c088b61c3f52abe1873d32f0f49f0b85e6bad7981603779e974de1bc1c90680249757f0101d2159eca84b3245a105605ea4d23bb5b688dd293625352762bd6fd164d6a14b33f5b8d5562d0e0d2632a518c7a5c8b5a3b0f3e4f67f3ed91db8edb098349b026234d0142706d84ed1957399d881a16172152fe478a1ead501a46a1351082fda2986439d8c4b0bed46e7c45e2a1c5a94543b84a17437e4f15dcac0a9f530cb7d9fa8211222d6f001ef8600b3762ed0e60999e547f0bdb61ed4478a4236166b3e078b7093b7f39f52d532ee7898f38ba0f4d576037ce943804e27cfdb536f56ba9926eebc6b73d467ee33a4ce2d2d94b45afaae44db3ffc72060a931edb2a29c51a5a978270f2dc26829544927c1c1c491be13eeb8ffec9cf39eaeb731c6c7677f3f3687ee751ae91966e1096cedb859981d73fa1be3657db291d6fad6e7ff547e28b1d2e66e86a72c49c62b395afb3afb2bd9892f6bced64ab3377efb0ace7417cb7a3c4aec0623690a6452b2e576485d4a8bc2cf1cee7a7786fd747037af5cd2d393338c12fc190f3cd5e07dae39976a390908ca516e1a6d05e0bf4f2dbd53e3d2f0c854adcec678aed91b78b75a32757423b07de830e756a49665ea77972e16ce0d393fe7fc8da8b854e997c8643b4a5cbd9dabdff4b6a91b1c049984c949538d703069bf7995e815fe291911785108430861ea2a087a2498ac5b544a2074918e44ac64e89910944b38b7840fb460497d0a2884cfe7c5eabd7d8b71a9fc4df71f0220720dc6b034216c5244af3db12cde684a48df0822b9df5d13a64505ff21878ceae59964d97ad6c81acab5c3d85c46f9faef64c225b3b01432503550c12398a5039ed1f572319a854fabb7a837e32d17001c33f41535d20f2ebcde6ae5093997d723ee4ffcb43688e855eb8e44b9b3d0a95ea0595ee94a82c3afb43fc42ae8f5d6d8fc81b1ffcc08be7d4a6d608088b5688dd9b981b2987275d03f6e6fea942dc5a5aa4af805bf7bae56569f5393732a79bdb21afac8d3c853bb1514742009a9d241789383f79e5ae0be489543cf2c4ae260c6ea4948297b9b7a14a172f48b68ff056114c437d3448d329ec362f80df403b3e6078e58f7e1b80896ac082f45231e5779c785ea9575d54d894ba919e678b6152ce8f4fe9b8b1d9cb558cd308bea738f986f6f6d624fe8df68754e98a7af03c860b2fcf14189525f60bad25b3010b16cc5f064aca987b9bf09f792879e45b67f3f0aef2865eb4743a4010beeedf6d0aa8c3eeb77bc52390f72c4f7f1b03677446c21d1fae48ccca899c27b9a5091ed1c30664a32805545b816e515ad508257daa02cbd8880bdaf6e90e5ddbca3ddeeaf4d594e0b6fb737682ee42c41c39a6f8bfdf61c42927bd999364524a9b7afe1b9c6c8e9eb497793e5d1afd9eadc264d2f30e98e9d05aec3a2f4750b2e9aa0607baa4b08512945e1dddf097310e0d00bd3f1adb02fa6bbda9a3aecf7f7552cb8fe376eb5196d2b4198090d677377d0dbddbf18cd0f8cb434a7d3bf453858bbd29359d5add2192c6c6a7299f111f45d4c5ab5594ed36c3a0f31e229986ab2493c88bfbf09ec3a99ce4f40a76c860ac62af22c5eac4a68e30966145ed7fca89c89f906daf6315f137f025554fe4dc10382de2b5271d51e69af738138b2a4c633a102bb479eb12aa426f0268edb9f14795e189890804969c5ca812dd3dd5c5b3ecc293335952b37e8ce4db3992f5898960bba51f307ad380a0df840802f5cd89e58b4020bf4305324c2b95848cd2819f9a9059822414fb05da8e53b6cb32a1746678a0b242796d4b465b290029328a11efe933b0e858744af4428bb29516dcc5f0627e7caeae956ae8bb256c9b55419fdcc9a85d430a748cbc258b785a0ed71a41ac76819f4a594970bb9677dce385839217484b2273cb28190d19341d42b1cc17623a3578a9b3eab8b9e44b8375335057cb3602ae0e500f70ea6ed083b6c980bd2d66ee8080f6c8008e9944f5af4829e9d56ef462c2dd1839ab9089e4247d6a7e0d5a7214bb57178bbfe7ab51e7daf5f4fdaa704631b09a1ba24549d0ea61e114744c4303afb81cf9dd1e9fc4aac1d858519f281da4c6de715fece78013fc141a8294ccd23d28c775267d32f0e40e3cc3bd77fbfca24b4fed633c671f0864c1f3b148c13e189127255ea2c18f4b2b55577cff7ce15e28ea6f1d88377c73a693902eebebe910a6acb74d1a086907769edbbc7dce0f8d2aa7633370076170b2f89da08561c5e0279ece73286255efe6a87e8841207783b1300cf4854dbb19d2ba7acc15bf6b6d47d3ef06bc61ab3ee363ea80b41ecaa0298fdbe984385f066ddb769b5d5026584cfdc29d04776f57e7d4e5e997b918b3c6c7483fce3d6e92695825f1c7313591979f2548a0cbdf63054d067da3e96ae446a94ba18b4104a1cab3c0df16f914f9b7476974b7a7027d1a09b1de26f3a7fed9a94adc9cfb7b22bd192dec1722662386ae9f760d503ec32ff0b82e55a307a9613669cd8d051be5f6ab51b28ba59bf42f5e29e90489ea271ffc354328508fabbaefc861ca05cde95ea8b0111cf66f6af4d13cf354f6b74d6dab635093cf4335c398e0a31b09962bb1e9805e86428fe1c65d2805d3bb181a15d6fdbdf0da5e7f34bc1c07322ccb6c241097bdd720a3be376487014a9fa77d6d9a1d580bfe12e8ca4ebe8de91f3c01f3a4a8e2594a25cb44d5c6fc4b0b7c035b2f0b55d1a2cc0d3bd59ab4b053aa4d7c3b185381c2df7c49c23d6d89b69bb0560b789ba8f28151a58f3a27aa1a5321fab046523ef63cb1ecfaa000e92e4bf1eb01e9eeb9a15fe9286c4d8dc4f979565807007a36fedb9d1b668a373ae6e02dd51a4b3d1511aa738d0a94228c436a24dd6e04eea2736c783b4f81ef41e84146bfd9c031c9868856ab4301e22e678db64223624f4d9dd03f4736753f8b24ed89ed08806655b29c2f9ede8c22099d3a88e58c75f7e7d1378a0bc2fbef259ae46b92a2a44f29e7eb1fe793f440fe2ee0a45497aca0e46c79a3f172f884133ebcf188a8714de1830c14387e3258e9005816a4bf40bf41c64853598791a0eebce58b0ba468db9d603430d75f8998798b064632593f98648dfb5a9df053beb27bcc96c016a7743d6f323faa8e32a48d3a526b490e03ecc40597ce0f5f11e91c14bdb55d12fe95250e48fb1b5444727d042bb25b9619f96a7c67be1b041600baa8eaf7be9cce17f1e07f5756f2ff7b8ab3ff828968f027a3de152c5ccee5f1e3d0d72a391b2762ef32dec509fa705da57c27b57d91970257a5bbd02c11b3bec7adfd9837462579df5758d20e7ce1a1746faffd3848520e17b0d31cb340c90cb5715006a37363332989a6a2f6248e7112cb7f991b38e13d95fcbff81b8445d12fd633dc870913f73f48c2c4623c71b28e6a304ecb7c1e590abd0199a6d7c0b31d1b5c0ccbd9b1794c58b842cc6c7a70b246efcc28f6189b4b7342e89cbfc55df4a46b093fba6ba46ca90de026334c8950123fe66c1d84d315232fa4b391e2138432567b0a88159ebd05a61a7db366f9d797e47e62d784d657bc1801f5dcf508821ca32c12ccb782fd529934525b5948edd3201842e132d25fcdcca415aab8925d56707a5e397e98eb1b90dd6038a1ef00ea6a74629c3952f39dcf8df294b8cc41131057213b11927553a09c6315a9d4561322f7563185514c376bf0bcfe9b2da4a9a58d2a098753bf258caf2cd82992476d1c0e60a315bedadc8ad665888e97f02a30c85bc4998468fe03396bb536ac906c4d6091e428bba8e34546929f76f35392d0e48ba223301910762b49defd115ac2fbf04f36edffb1be8075702a90541483b541be8a1bbefa60310ed2ed07633d3a74c97bc682b8ecf2647513a57d8481a90f4d212c182a203b748c4b8b9c03368ceae3559f47ce7eab30a88e9bf465aaecb2c296add835e9239fe0c63971caf19963c517cfd70584e76fa51c702dd697b1d96bc4da696825d8d786e5070b7cc9a750911ce550b16f9b483dc5fd99d70e5dc942df08ec2e18101ef1b83aa2f93e03f2463f8d6e2c53b173cb73ea9933535122ecfb0d9d93d004d089309e99e7f9e2d08a33603c4d11c915f699e33cae57b2655ee68cad8505a1cf0cf0a01370918deb3020bdc9b1151883ee1c9b266b0ce74bf0db27e28c5fc19b1fa4c7195a41bf216af8c3a1324c688fda657b36f1e6750d323d7467e639adf3750cc52052e46b784e2ab53a5e7f0574a4ed77439cfcd6171b799be3aeb37b5789fd32973143f3487cf1a3376f87fbdd42eca296640e14db396af70f7915b7b5049254e815dfbeff7e27c336222627d795f104e74de171367000241c04dc9163be9904e0e349c6f534312bf116e47635a4a1ad7d06657d26fee2992bd1ff0cce6da87e09699283c7de50192560ef3a0ef8deea8fb271237659e57b0ef41951dec83d7e23d39e12f872df75ba5d4ca0623217fa0501ff4f4c9928135339229e82429f35d831fd9eeba6345e609ef5215e8a55b81f43a129a6eb137cbf9899cc4702a25060c99be615fc396295abe86a9ed9c26fab407f05f4acb2cdb1da967f63f1fa0bae934b5a4f898cbdbc26c68aaf915c05b5c90a5e50a381595f3ac25d1d1a1aada0e6bc9d6b923092f87851402c218e5c48b419aea74fd16d5481fccb82d8a36e32f92d35db3e8d60f0d88d9977b367dd4addc4a50efa05df52f810da496a562c1257dafbb79d047c60f01f163ab263933cffb13e37c9a88ce9eebac87b7089e3f5e5dcb3adbef49c41d60cd1913b496d9fbc839847b5e6447706e48feba3143e4d343addf0787034e963843f916be90ddb5cb30635af8ece67e508dc39f13765c93b15023481f74f68b67573dbff5500203da5adc4c3000276258031def00280e08af97594048543f6e393f86738bc340b21c800ee0952a05b29e7d36162c786020883fee5604cc7e9eeeec493fd2a96ac103f4904fcc850d74990db556e7b2a8339e3ca00698ef8bf37daa2af556cbcf4181dd4df2332ad42a6be8e9f725fef763ff0fb3852e3d8f5c53a6676b30f23fa1826e537339d2092b21b0d89c34f279f49ca6eabef294a4bfcb5d32334f45168fb8995b6f9943e9dfc30a94d97948260becd58b19f7f9d43d60a2e70ea4f2d6d0b129810b3675f280e36d55f6894a96ee30cc9a95ff1944c38067faa8b9a5c38d2d9ff9a6bb3c54d6afdfdb0aa20d55c90160a75ed9b0e9eb29fa308ba135d0ee04dfc99abf0464aed2780107821fc2d3e3732acbe062d3728ced07fa021ecf6901e0ce71d344c68365779d3ec21c099102a0b42c3c1be936d08f9e95e1daa1431b60b03b28fab5dd15bfff878e859d182b82e393950513c1be03941cc95cb1970ffff46d480f1d1c0bd03790d308ac44f42064b5f64874852c3c86d41374d2c91a13406c50d621bb895356ad2ae57059be3c7956d31122bfd7c3f36b690934b93ee31380ba331d7e91ceab64cdd83326adf374e7a9e71fd6ccd9c6f6a699c0074e27827e6d7680632e18ad231770b877df8346bacbb8a1da5c7d41fc6e41ab477aa5751bd0ed8a21030d7625f025e944c1e57cd63351772b9e4c9b314116cfe7d69f073c288b3f7eeda7790e05e7892ce41c7f850d09addf10c5a9efa484b5d59201cab2e7c143c3420f3651f7b7a77b108158beaf999d832c6c28c08b346ff14f8812f8c9df66231d84635290b0a7ded85c2b808bf612099089cfb05b52b522af1fdd36e0def68bdc04ad8d99ddd3f3229b69a32787b714e1264aa34adf509ed219ad41b79324e743250b217b82b554d52edd53d633bdafbbb8f8fca70b6af3088848be7ee9ca5ff257ea39eb85c3267e1796ae5b639eaeea81fe2f5126efd917ae7fc36a88832248c380b542b913adbb87eee94ad763209918ac6d23d80dfa308314b33b446aa5841ca83a29f998e62024e0266787d49be2008dead0bb670349f448d523996817dda8bd4740640bcdc10a54a8aae443638de39e5b40df56741e5617d4e37680b102caae7db59592b0444109b579b46a4760509e179798b0a6490ec8c788275dc4fe79afcccf7b2a1319b497427ed8702353a9de452fd063cf531ac8a789e9ee6887ef3de0a79bde106ac76050e6db7398422d862c27a76e693c17e04b5c756fb974f301d586ba9c2e88c7f4a4c7ad08590310daa7d7fe9283e679c0f024f2ab868d38865d50216cfecb6a1837e9f47e7630ece580b644303f06e02160497462cbdb670256d98b7298efa9f0fa7da40e54fdf671d19e06f0a46747f5800f497e79680d4ada316b8218a436c14db68476916b92806f35247aab4866c41293e394b24d929341cd8aca6631ae71a4f30812e571504789c21502345b6d56420a5e78c3b3646f66461d504761d2dcd6825b4087796b3bbea29deffdff5e4371d81cde4904edc38cff78c587f016d7824bcfad9a1c19c730f42268c10ab02d69418bfe97dac302c4cf6b2d346e7cf96d4bcaf1ef986bf6a5ac069510de06360b343dcc23baa62170b3e30254fb8ca793cd17efc43c168a27420cb789802e0610a2134f8551d84b2429f305ed20393e96acd178c2a8046dd02cd6e2e53465a4e60255c341f1470f69aa052692099f634afdff1036cb1371371c33fe797dabcb6f78df6df20460032adfdd8ca8495a979f2438a60f3468790ee28f30c1c604ee571d50055cb2892d0e1d34ee65ce9b35efc6769cda41452aa9343f5c8d73b39da7a380c13c121b9cef910bf2f3a0098625a2136d825521a9e57cf3b98d0ad8ea376acb724993c2e047acb7688b22d8e9b8d1b01db45864f850baf23fc108769b87f87bc15740de60fb849a85e37d5680612081abc49b488ccd738f2c1bbd2ab59bc9fda693a9a6d90023a7ec7f6c3819c0ac057c4f8555c9708de317bd85e4047ee675e1436b70b55d17b5096f84ccbe641c8d4ab148007758d86e874da701c7019f0a088ff617b87e51a46774375c0f9c90b195e7ef15958e34c6d42b3358441d74bcecdbb47951b7ab672e30c2b0d66fd650b2c6eeaa1448bf297f07db01283b0c8abc6ec724f0cb68591bcec86f565fd3c9671e736c232bc6cea4436314b49903dd54336c1f6775385b20719ca86c2eaf7050f7aa8da0b876a6f2d1a4eefdce02a0e1af8f1338490f3fdeab1ada755391cdeb206f34ed1d9ad0bcc78c00d1f20a18183f1f1d0b64a850693383a3a2653376adfaf130d77b1d4b53439937e8faac75a9dfb49a8eaaa4d38c5fc3d013d87abaa82d876e7a3e9eda4b00b79f01c2a16228e17df642fc5867541d99f8e19c92fdbb463841c2a899e054206ac515c55f63781b3eab1c4c1e0f4a1360fec1b4bd7fdb426f4bb1703095f4111d3ced5c9c470e8933a8d2b4758bc28ebcc560c92087be58743b6f3d36323c6b21e2cf0ff9a9a0dedb557fd6801f7be7f377db2f3169951ff9d3323a549604ddbf9f5dd0914589220e232b6f6d87bba66e179d315a071ad3b41e8f86424b20089383e8dda29c3a48ffea3e58be4d00b79ac65fefeeabae337213655d403e74a4d55c9043945e72deb7c2af05efee55331d96dbcc6ad58ff5a562f2ea606eb9822221fe4d928a67b86bf5b71bae1e803ca4fb356f85437d1559bc8fb20d551513e3022dcdad3a9dd447d9f5ce572877fbd490d5c809325256aa942617092efe1e4854918194beb39b7e07bbfebf12697fef8d89806f33385a3d599f3c4eb9b94051a76a496fceef2a20694f1ad856c2d17a83f9ebca64ccc99357301fedb39ce55da5fb0394f93a0f2e3e1d871dd546072a04cabc84bb9c6bc40ae9c2e4739e1f20b75adbb52b2203619877acf619cd138ed90f642e8479b01fae495c36843d2a39219c17c6449b5e6ac6d9291572874ea80260c535b97467d660719b07adc0dbfac431e4a417641ff8f6b74332ec708c3eaded4d76b083b178996cb328cb43e343239146910f534b2cb7a305d42d8046cb7924531e107f6245690d241af5333b911e4059b4db2b4c42db3272574914751a7a536e13a3d0817501d83b93699d9907e385f4c86571846cf3b6cf44b1af323b09817c728822d71c4db810d09bce999e0bda5c5bca2a5298740d325848c185764cae7481f9d6c95e9a679a33a52bf4f7980bb7f761b4f7b4c083eabea8cfd16c86ede21f22cb9e32271a5dcbbd586fe5e01c50c30bfcc72f8a30cb6bc596126e1664fa3f274b88653bb51e43fa1044a02650cbfb907eb4bf1d1618a882d65657bc7d01ecc0bb15ef529ac34e2c4515a8cfb9151c187e8f27609854a32ea146b35fb081e9fbcc7e5d818bbb792596585fabdca8eeb83f3d0f7450837c3e52bfef1ec1afaca9748b39eeef2aed24d975d52e3b1a9a9a40a0c65e6e2051521426048fb6771f7d8d350499bded92a8aecdc29a33fd9d683a968d6398000b68d34178ce31c53fac522f07bec0d801889a96aec54b323e873dab19685cbcd40cd937acc76c6089d6419ea3cd7a4de6d941efabf45833366811b578f73d1f782aeb3cde6ca08f3165c28c4b7fb08b69fa53862c6eb89a09332c48709166051806dbd6e201e574eebfb560da37174dde3240b6320e31dbb00ceb8ac6e8ce0ac8638a8332a28de85afc5cc889f2ea0ef1e89830daeabd840704bcea138471ee635f0f87a10cb483402e413522ac0cdd407bfb2b7a2c5f3d00fc953dbaf8cb4ef0d4ebf3f81d3c8902ab6f6196c5051ecd9631708582fabfb6c18de4a488725e20903e1ef82988432654a6468dbbba8f134b675f3e74acacaf092495a82d54d1b014ac492f416c6c05190babf0f3fc7bc1c2f3fee451efff5c9af72be42f8357b4a344bfafffb1bc8a38a5af447a179ac5e8d3b70af8af8d541dfee295342470206e66098f9f2129dfebda90d6b0d1b267d78255d20368061e6020cbb51ee5591c46ba757642cdba402a244e734911a72c75f9be15a55ff1bc262c139539e31da56bb08996faeb2c3333a3eb01c22103f411523d73a7a51cd57d3483cd46c9fad0ebe4eb3431dbe0922374211e76cae266e0a7ba26faa1d7d7877568520ac4aedf3cab0b60051a08d2baf45737ee1a1431d239553d04009b40a24a57989d50b2bdfa60e7bb5cc24e9dd69896cc06b2e444b6874a9e826146a004786bb045749178b6d890c5158d21dc9e48c1b9874fde45949d0eb02c27ff23b7088e3347190ed625ded4a3befdce3676cf37ec2f9d1782ffcef95ca0e555bff6be45a90c0fdfefb176a7227605cf86208e781378930c8363020c6332730b0fb00f71b95d075660784a218e0120f8a0cdc9476995b64f298696d4f424f2ed3fed4cb2e76d1392eb3bb20010e2ee4186320bd079b04d2cb64b49244e7fab861976138836a057e6699238e82e1eee1dcfcf7cd9721b809ea36060493412a7241c8d60beb8743b358e7d2637cd0e074612c0142d434a4c30831586bbd16a05dc0c0ad63d16ef53a78a23fed164f52f2b6c5935724d63d7651f98c418807be41b648b27170e3cef46cedf00084a5cff40e6bae0ced125ec4d3ef28e46880ca35201f459fd2e3351f783c1143f7b133b1e5f299a39f39abe3681df31db0f14d61a1e69d3997085d490c734f813be9e351e9c62eb4c743d9aadd8667ca26c101ce60caf1900cad3691644af78ac03eae286c98cfab4c3d0f5bbbf2e5f4edbce995f0db6dfb738b1e8a66055b5bbd8b2d6dfd2ad721cb6e5eb4903dc90129b0456b2ba194de8e898c41924d1f276f4676afcba2bca7b3c5e2f3624cca6f18ff77fe3e305216db4983dcf5dad56829284af6a6a34b0c0fbe63153c3ecfb4b90bf319c7b93e8306e74a74b79de95e4c2d86eb62a45f099d4c5d377666d4b959b5e8d84c77c5b1f96d980b85528caf2359a24793010c73bd35f1135c09a3585569551b8ddc2b050b903f64b832f1c5d7f93afa5f457385c9bba9861849550088ad532730a7b36b625e805d59526e9bc1e8126728d15a3ae6351341e7a829f8fb6afc8210510b8850ed3093098697beb49157c9daa025e772e390b6a3a16cefdf7bdf120818e2e95db7e5019ca80edf4ca040dd704e267b8c343ba16cd92055c1a1d672bfbb1ec3a28073bac655c0e23a494dbb452012049d9fa6b1fdc508de0fae2df3ecaaf1ed80102ad617b07829fd50a37a9d285c7e1c34ad1a243ec99437a290d208a3d52c0534c46d68de70b4bd37848481bb9582566a577ad8ade4a4e6f5653ce085febfb3c79ca7e5711f32257789ea22a8d0420904de55cd0b2bc597e0d2af0e8fe22372d39c5417bd4aa37e68535c62743a91e20ac7560979ac497e1b67610557f63af7164289c8c4b28a4f39402f24ac24fa37cd0ac139cc511773ca6b69081531bf41e11375c827568dba7202ede0e2231ce4a0130411d97dd63ee1d73a73b85e3a207be154e68f9bddf960e6ff05309ab89c346576e183df36383a48ba763382f43173dc2abcf64100f8922df05be133f7fc0979b8e79031177ff665bfc36475bd320155b29fdc7aad352a081dd37da13fba8c1ae0e09ba792b1769ecf746e542936594b335063883ac06e892915b153fbadcac80598b75e201cff6b06ec600b04338e3e51872378aec18040ed462ee58dfca0a5ea0368fd5cd05e9e2e14a90dc18aea71bdca205513cdef8e943edcd667e30eb01076afa420c8261df7e39e634b3029fba15def44d3b401b7ee185dcb92f4c42fc3b719d64ace3899b5cdeecd94c2933a9d01211adbd4a58e42b871fec5f910f7f266365d891de4b59327822a076981b080a939a55705a842b400ff0b2e6b5c644dbcc6690ea4d2a45af0e9d3a685f46976ba34a56f53b8f1a120993fcdcaddfbcbdfc3ff669c6db0f43e14fea24f6e85533da5efd2cbbf870fe11ebb171b1fc465b434cffbf94582db1c4ec93032271c3e9a2ab8cfb891d7dcff620eef9897b43598043f2a3e4746d17e5569197aea979341c4d934b86d5b21b42581a1d4b7396cc8a4541189bb4846575806719f127d15e647e48f330bde15c86f6d5374aa6627aa536e1e42a07541827ab8f0689fc076c6307c18d5d3980d5fe71d4ad57d74395d5cf31e053c4cb3cb803c33b0e128645c5b5948ee43a9dee017f1d970a178298553d23e37e5c85c166f0aada367a8e2143b8faabc6dbb6f8aa08ef5d3044979fc58b1093170fdde41c4e2dc3f1df17cf34ca50855566c600c6e2f0d7279d5a63e436050098fc0c1cc0ab559722a8305320e36d67cb86ded0001f9691de7bc7fd641dde6513ebf41b0a16c2bb58e0a7b2799bc1250e00ee7f70b00499e2c0a5805ed1a07db2e89196bfe4821f03be3c6fb6e2c2ce5d34e92431cffe0bf0ae4e21156a84c86795df43b390b150fe0dcc6b2f5f6e89fc026c80f273dd2b563c449a95d4f407f0d509dab00262e3287ee011ef2b9fc3d9d42af79a5ce3894b0a44f3c086bdc18f7376cb2189b16fba8f31c8e8a8d6c33656813775d52e96ecffeba3916ce91629d0cb0391a5dc8ed7370d93a99a3ebe8b16f9fca26d53396f9caaf95e4a69f91420e8326cc390b5ba8657ba459613f999b71828b5047ddd64bb112b6eb144bc8ce8e155bb9912d14e4f3d5e5b31996b5a021b1efe05847ad7eacfbe8f786843f22badbb17db287e9f3cc43c72fa182d34688ccc311d937b07e29a70eb3209a8c71d2c5f5426b06af5d9acc98a58e35b3fab269e6ca1eac4d960d946d884cf14bf1019036712bb155ed697a44aa4dfa83bfbfeb79dfb8c5afb4f59f8e991ac5a0414576236004c8aeb09fd4e455e4f0f6a310b85b7926dba9ce7a1a72009984f98f135544e955f249ddf1dfd76bce708d991c5d7e4fa256abd51313ade3449d47e8bae4a4ddb986bfd9f7597fd2a233843cc54fa1dcb10d6da1094d8499849f666a35bb40752cb7f917559d5fbced8ec7d2e8c570058a661726ea9b93b47de0fa470cf49b3a90574fd7a0d4d02de3d360c8efa598bd12c1635a4c1c5f66d31aaa310a169fcf56cc688bcfe10ff4f62b4bc9872a0f59679e5cfa0a2ed18c53a8504e5c32d280c216fcef9e792c985fc1780450fb5a85bd07dde1cf050841e292b86db40d27a3fb6cbd9bb7c29d0a7f13465dcac88ed1b4c9a169facccaba63cb38f35991af9b2d7a9303f1e690ce4f9fa1f6a2531ef6b00454f9f91ea0279524edbb7e3e39d752a593d8394dfd47b5de4d8ccf0e7a110770c0ea09bb29b79544a2990411823744bb70f337fa22345675246e1bd38241e902d2738331c09a68b04c8e518e02efa91e7e5cb306e4adf980a863111920d28c47c4ceb3c9cb5898098b048d820f8d4ac02b8e81c6205fa559eaf5af25be84fb08c7bffb6ccf01a9f7b587eeba3c78af5811ed2ae30fdbdf4a17ae0de3792b9b9d3a5102f96869a5bddbf87f2b213d7c9742af2f572e6c396e9b1231e2b02b4c538423f491bdf8447972917f1d520ab9efeeded3a53b311f82be3453d81c413eab8054012ffc1540acad1425c86202bde8cdb84dc3794d98f9c841036c4f979eaa55d8fc1b4297b33c343e839ef76644d9651fc3d3662cbcdc7974f4a0456c4e35bfe578307051a56848e916a0480a15192aefbaf76cba0911cac703df63f2d50beafef43706e508333f0d56326aad8de8290789bb524ef8b83101e0a64d5cfc18f5cd17064ecc974f608eb8e38b7d7d92fee38cf3d936e9ba244eb2ca8fddf7358ea4b1a762f17d129f63c7e6f7b49bc4d19dea218f0f3df39e899809897119df7ddd3aeaf386d811a6efc59f4b6621a7b59d7e325994b48c8f7b8e9d9af7f2786ce01dfd77af82b8d0797ef9d3de09d81f21175369ade6d179f6fa22bfdeb041dd4b1e3f7c23f501f454bc49bb25bc568f094796a3f82fd505e53f1156bad55fda7dc4cdef7a18d375b6333b54de2543af4b604ce93976b1438049e71a0a22c858ebe6f9f5af542c0d4b2fb300c5beddfaffd09488e31877cfd8d4590aee44340c797b13b6228cc959e9884ad0331b2417564e35a17784b3bffbed8c427db4a4eb39ba5392e76de335b02ac58d90ac102bb3bed98388820af2c94e34b9d8bd251fffb6998ed44becb97584a1f240babf493ade765a0309df33ad9043825d20a554b387490ad8eee34aa814245011f2444e97026dd338f757429ae505c57e6d88410ae72143bcfc378e3b8de3ba023ed5a2dd93333d434e6a3a520da102787f7270527d8c4bfa1291993fbcc25be4915c682617f19166b6ec873a0878e6dbbf28a5e82c8aab015b912220afecebc48cf01e7796ee7806c5c0354f893043286f37282fc7a1c5d918129c063134ca63ba8293fc669f647aff29b243849651592d7c65958a00cca0c08987b0e89282c23517f4a1d6a4cd070e8b504d24fe10f84d3331c05e078cb0d8e5f3c914700fddec63d18ac4f16dc7f17ebd8189a90fdcdf7adf98fb6d5ade34b9872405232d89e0183cfbcc6670061871462202de58e680af3bffd2bf177c61d426485dbbe857aaa4e5773a96fd6af69b77a50e16c007f9d57b5b815b11498a73d2c4828359ce7068ab760855f9cfe4eb3baa3f6ff09a398c87597a7082295c30763bb5b836a3ec59f72bdd32e29d673c676ff375e7a95aa0e41fa6b75bb1ca1bb4b7b5ad49a8ac0c310c2f96695468c2991b601bcf3f8b90e4bf90325b04efd1499d0146c11920d7ccbf250374765dd969081c37e55e2844d1d725c730b06b5a2fd18e529b637ff2af4b98d766beaa6e988302867d9055c167214f715d4f36209775b941f83071f99cff196e79401e6658cb6df769c2ff728e650dc9531be8d6909a72e2e5f32eecca72254e1d6df799d5b20fea893dcfd489a266b7f40fc3644ed9f5b5e1f305261a089f0b4d4637a21c315c3f9a9bc3a3a6882a909a8941dfa7cdc6f262b30a4183b1d25b7972ea96bf973ae834ca313fec659d5e28032bd05a9459d23183730b2b531fa5230dc53470b059a7ba2a67847bbb1d693229b5672f4cf18adeee12d3848258727b4eda55ca9c3a1d0b81705160c1011bac70d66a6c63f9e5dc376f1d0b3e11819d0a1410e81082271c3c453a0fd17a1c3d587f6854d9e08765df2a5940cf384961456837e924a574033471e2154a34fcd514f57534967bb4e99cc823eb8f35e0427ced2300fcd2fb54f5b6e91de68e394dbbdcfd2c26551fa752dc837b5ea3d329de196592e66f947eb3423385c413c399518d7d89119acfa3a59df169658650cb801e9bee3c50d5d81cf946329b8665e1f1c54f98f41d99a7009ef727ff4e45849ff0621d0609b582abd56df762f78bf0bf2bed8ae4918c5be9f6cd8c13b7604d0dbc5d5c2c2cc9359f08e805379326ae5157a73b66b4b783e084c8454a36eff15d4b366417347272f028f78791fe65465c5c56cc4bf41043caf56052d647501995585bd89e75156ffc0706c0a4f6fb054a9c924ffe55bfb95e421a54590b9479600a1ca84c134844383ac35d50a42607d140c60f971f53974687ea330590d642468976da172fde746adbd0b9e649c6f1f99c0dcafe283e1e1131d659b56c1c7064064b10aef714c796bde35e285c9d568c86d4654ff036f1283881a8e216f73600b7542fd648e4e1a6face215c2fe4fc36e72139495c3c6924a4bf743d58f8a3c216e1129b5fea9a3b78c91781d100d519053dec3fa9ac18b364051d1d514e41f4830c3c9074117ad09bf8912143e95cf9a98048bbc695e4759af889b34964de92cb9f6eabd819fa11d5b6f20dc24900a4281c4d9ad510c9839dcfd349501081d552489d987056b078225d82701f245b987a711421245b0a77ed48e442b165acf853c17ca82f746131ce0f0eaf08dc25d372ececd6170c4d372bfca8f5406c9310ffae2e824e2ede3b8b77df7cfc89cd248255e1cf2ae5bced70d034c39eab0c1ae2290ad84d0a6e6361d0fe537667eaa107ceb441ff39bef48496be65e9dbdfebf773ca780fe8bce44b5862dd567ce6a4a7b95aaceafa36d4933ee6da7f80ad85b2c0f1df8b8cb41f673770f82c9601fc716b0d9d237273c067845eadb63c068c7a309d463f74e11580121da6ed4bb82c3923b4c2ff43719f323fd460f76089ed9d643dd26f3d7e81c12c889580d64992a24a86bf24e89f48dfe06b138ebd2f0e72b9ec941cf4db1ef9dc5ec38967518bab3678fd495e092d654c2d3f021c95f224ad8c9e624f36be304f7f5fea8e06e57d6f4791ceb8563c0fa51d55cbe15b5f767e36f8f74f9095dc27d35e18588bcfa9e842be1bc9e64c11746befbeb94d800bb5079a55e14fda5f3e7fc7d656e4b51046cbf0b1965472fc1872d423c684b9c4748a3c766c7695e675a57b9433efcc66b5c7127fa6f66aae4d2b29cd76371601c27f3521368899f390189eceff6e13ee7d3950637eae16f3c2f8bebba84a3a46190337323f9297c4ab56f83da8ad28447f6388d39cdeab0aa450ce6ce582a9f4833396c28878b2c86b795609c3079ff0cc2f85bfe2b7f3546842cb437fe3b9747bc3cc91f4a6a49031e85952ea4ec12c7665dfbc0c98646d29593bd5a49da7a9a6d5048c86a02b38981f412b962d0ca767464a883aa62655ca1c485c2fb04116eb2024fd0de1178cc81e29db63c5a521bce05f5e0e4cd55679bfc6649efb8b7a4c56adb930c1d854d621d5dcf8e53fa253803a6ee61d444bccaa0e2f1f92eee026abd451094eb1406b7a1c5c981de39888fd73139802beb377678e27c02a587166c38749e90fc8a1ae0a81e37c549d8818d301cdd08e04bee876c00412b947891766620e12d9cb1503c633458a874f81d9ee7ea601ea3d4b165b67564685b6f1c076e61250ea64d2022415abbc8bd6ac6879d14accde5359fdde8d2b880d7278561eb933b02251f0c3b01a219b2d823553acd29fc0910022ea4343df59e05c3a44afaa5501a303f6023c8b3ee4e3f978cf76b0edc56cc4bd598f6cf4691877a624a66efdb95366f979c8acdd4935202cf7a537ec1725c3576d37e1f1d29c502d0f4adab520c8afc3faedfca1ea589a173a1756fbe7f71e5c862d7a8e1a78a93eb1a689e2975a2f61bc6304251fda4e8be27478715b97de7ba3bcc91137d8b275d4ce194637592bc3e0b6ab60fd2f9acf235f19f828b6bf92662a33c95bff3dda08436e5880916221a40cfcb704e387f7072db41f09a3e608a5ea7b7b14c969b6c8a23af414824ffbafb5c09fcd6c9f2be62831ba88f5a938fb9ae8194f3380d47ed49d0ff1d5a353b7600ff0d881746da02fb3fa53404d3bb366fc4a51f05b929ec9a3ef8d7111952e94af556d76ccc33883796bf519b0bd267ca087207de358b73fcf8eef7fece8020b98dfdb77cf7aec94da6da4fb3a583129355be51ac371f65db1070c5075117161cb25d068d685dfff82faac82899c8960cb7d4e5437f205b926ed12e8cb40758c89856c459cdae61dd7a941b5fc45cbdd50e2f5202a221f9b5d906d4a4fead056c1a78202411cb03a2120d465d974c51784b0419cfe8c8c967cf895895eb59deaf957d31249f273de9fd65dd28cbc5d3179f8287f49c179c1bec64b837949fd2946941d269d27edcf45d1773f4af637a86b3dea50312f524e9d436b0e692290ee51800b9b0fad20aa697c07b12305b2d6e64487d83b4fcd975e32d150fce78dc78c4dcb95cb3e7080fb3cae5a1c8bfde0e427ffc5344558ac2e9827ef556e2fdfaa4956c7f116c0eb06492c9ab364a14ff71af5b68029b590a349990441bd7c2f1cc00a162e883e4a90ed9f75ab07cfff6a33326c81530d5b11df4fde889fba067d0f84402f5fe8ea1a17f9462621722f4a393f3a14a89a72c8d8257563abf3b3404664fa2063387a383643332579db7636bff2acb4546fbd0ce5715e8776abc711673f005d62898f45f540c828a78aa657279234a5685b1713d213861adfa4a3b8093fbcf7e3fdfa43ad6db65235c953becb529727744a4bc8fc21214de737bb0d900ba64aee9af7dedf62776dc66216357b3b2092b47dea8f09ea24d994aad4388090eded035283440169ac0b2f20294285f4e3a3c169a6d5705282187c408c58de098a94bec3c40e0c2267a5ca2016ef3ef7b6426daca8948314dedee2cc0f72763f60c2fb475618e2494a4e8056478a060debd605b1b2f83bc592a12145d04cfe76a993fec9cd17ac9fc8bb0ebd9e8815a296d080e8b1f976088440908b7bec1cf70cc102f7274321b764fea712d807276ff300ca42d617539cbb2fab7a461bd719b1ca87911645a1640e2b53fa9a0de7ce42bce27690f1eabca0818b55eacdce8aad4288f9943ae6417965b78d1eb5101a7a6fd2b20eb236e93d60dbfd4274df57db411e039a4ecc1080f519a5d18f692fbe3960ca13ccf43b885f2b27cc14d453d989569c25a09a1a6c0750e88eac57b661c3e35f03b4d1902856c89b96cd6d700d53e8f4b90b1bbca1e26cd893fd0f18cdb1fa65dcff3f3aa0743a235339beda6dcb68b62236a059f5798f5be645d773a380593402d38ccfe39d42efa2f4851d8f9f6ac89f1039ed6a4f026e5de28c7e2b784bde1c9b85a73c1a028c07211332274815158c1414e65ad3556757cd41542d2b6a5bea286207b017853a6c80f63f2dd43d3b1ffb639aac6037070c3588a96d2a258a4e696581b8d8af9d9a47eebc7cf8eac3b56006f7f272fc4eca5beefaf5247947df96f5b57806335b0b39ee3d9cb98098582d6cb3d19926b3163df2efcac00ea761fcf85ee16a806540e520450cfd3ab365fa793823b2d99d4fe5b135bcb79fbba17f9e0652f8a34afc4e7fb2870eab77cfa144fa4b815d65e13a58379550912a4d958d4b503e919bb0a8a4636de82922f95fd04e440391632b470e809a28146678d80d52c9e79888c7877358048c069a33e82de57eb08ea4206ad9b454dfd38054f7e26b19e9f49f12152b600f5c2f338260aafb2ecc45a0c5ea1221dc073f747465d9a412b7e46d2009da60297dc835ea1df0e1562e30054f2b7521134e9f27949cf2a824eae9d1d3ff1642920f888be042a882ca718a3eed87ff4abbfa00526a594e579b11b93ad558f7f3ee1d3ce9dacbee15dfbf7cfbfd17bd4591f18b692d2b7f5dc250affe69312f681e345367b8b254aec0072c6ff35ab0cd57b47ae843ac74434a3a0d5f923b7a427ba6111930f1d51f3250bbd2c610de78220a19626344ebaa14d33d20422838e74184b52421023a13a85a008cc52706b71568742e8c1a12aa46e6ee474e6a609ea0316e53f5b2920ce23b1a9add44fc9d3106c902e01e43afd3e719ccfba145a8cbfcef99f7c9260d58cc0f8bfde477c125016717090b79dcdbefc99e40d96c8605f4b3ac6b1b133686fdb346b5480c8bff03d5d6a8fe3cdc8351db86a0b7ed58fd13639b67b0f9e9100c2f22c6bffc9e863c9719ff8b690b110a3e7abb8f4b998b74061c7b629eda43d95ed8e2080a634257dbb726f4acea959d3f2a84af9adf63bd82b9991c80503872b266982790bfe64cfa38e8a024c9279e00a9f03a49fa771caeb4561ff90690434611a166fca767d4f89baa33fb6b82828354c7da0cdb28b8047a27951b1f34f3a2a4737d4e2bf9c4d335c51adbef25353a23a744ecf489a6c255bcc2f745b7c44a750a1115019adc3462bd53609e5c074ac09d14a6705bbbcdb289b094fcac08f9c36705d34d7801cc0b39d8ebd2aaeeb0f667d53dde03886c8fbdbada3a55c117ecfdc242aa797900132ff630348594683d98bbd6310d4d5935f3fbb1d3430c89c5d45263b47eeaade6cf398344a75345023edffc235661452539b48170e88cee8d7cdacf10604ad9a2210826f4dd1baee7e674112e83e16132979a2d0952f6f731b88e8d7866980e3caf065cb6ebadeaecf3a3ad8ebe2d14db7f309b2bfe96558b84e16b254e4d28dd99208fbb6350cee05becee21a03e44ebc26b32ca62e795f05052e41d90cd2df86331784f4e828f632abd1f89637e819435884b54f5c96aa8273edcaef39cb73a7386648adde0c14a65c39b28db5520581c8bec8bec3924207cc73ed5bf39fe87d6d1637110e7e8a0ce7a448375cc9f42b36a949ba566d3969d13d2a929369f9776895b698457f33aa18e0b78b8056b00e33dfe8a0fab63f4245869427a576711410c06a986d49842e1ac690fa8e6c0b6262e276ed6eba77b8a92d82e5f16729bdbc5c9d13442fd761e3c518f2f60be909035a9489f24694cdda7477eb0a639442e4ff564c2a97cc126cc784450673962fdfd461f8094fbafa89abd1dfd780614e181f2336b92461a192d5498f09258dfa7535f185b6f67222d187771ec4df918b348804a258f9092f406a78991314b80c11af2197e1ef8cc5bac6c4fcb009ffb3fada39abbf80342d7ec9fe0048123366b256137b99221a0bf9251df28ba9b8f6e67fb5fd0478bd93f1c15ad61a4069d68dc3a6dfd4d51b2e97bf0ce7bd2349057c9e37ad2cccced4de232689f12dd2beb4211b1f6f5d7967a9940efdc8427cd53e1ef155a4dc98eb40adc037ff0a8b33128d21a52b3bcf1c7c0dd156cdd4d8d49c74c1a9157699cb48277c7bf2c86d843bea797fb7c49e374123b05db261fb5e92c534c9603453cab0641385662a732c2ba993fc88b5a2b64b31887f95cdcff8893c420876c9ba08db51cd4cd9183244adfe84cea943b114690f0f75f8904815a0da506a9c4d120f30afe450194ad0601d459432a2c5c5a2f8e43bbd31bbc067c2a67876ad31d4945dde0027388de0c363b7e1b8dc8cfa803eca22bc8a495f0e84fe6ea44eeb47aa0d3176c953f534ef9329ee7d6515522087eeed7087d86924169cc6ec9e56e9e26e310ebc38a987f9a9378ec2eb3fdd01067b7be7cfbb38e291b1ef7486c72c7b623db72aa86277f11c2aab3d390a98643092a01d7273604e9379145ed781d0ef47afaa961ca3c2f769ce32748572e87fd15ad7968e8a6a581b61a064caf431008a371760ac3f1fdf025478b318bae4827dddd043226f71806fff264a3a7183fd648b38a649fc58c537446aaa40d0812225865be1cc2a6eb3b5854c12ac51ef6a8bab9d69a660fc8b5cf8d5abecac8cc5ed414d3dce22943225861aee52e9b45d4db39d4188e379d439b84086ede64361235258ccf8ff974d1ad11f9e9eed8b6ad60a01a6c311a9fc7f99f1a90d47469dab6024df9c34ac2e646857c370bf80faef3ace251fe370183b673f48e1742b7d71bd980218ecc17b3a22fd3177e157f7fbdbf84f8a6aa0230b68d0cd8d9f39a668cc87779c8df25f0c5485ffbe7fd8fea6dc99b68a352002a5b464d58319282d19bbe68a763decec86a86da8030cff5cb8aea24ae241d3c7f41f6a531aefaa7265550599343a61dd063e5f26f317a7b5f84d39f826b21473df1b68414c8b70eebd2d77c786766f515793252f7a22c660e7fc85d19a52b7f389cf53e40e29d18b2d92cf3096109bc9a76824bf1f7feed8e52669af28f15f4f5b4d55e3c88218fb9d65413085d47abd5a9751074581c61c42108f6c7c07bc01f7b79233f31e0940ec845fddc8efbe3cfecd290c848d2d0323d5885e1ac71fc6c49dc3b414aa4336698635006541a2a47e6720dfe59457e307762782c6145c85520faa8729081cd59c646dbf088c8b10d088b3200cf89b053ec1672712d912024c48691c612328a7b26f1c755752719a6bc819bfad782f1c66e3c708e738dccd15af9fc16773221cbbcdfd3fccfe5abc5bed195880fb295bae38dd158e8ccc763eb0e93bdca16167469de8decbf1a10c5e62a9eae4015b0ddabd157bc847ced31a18e576e2eaaba8363bfdfd4e7b2598775bf2c9f04186306191c3bf7c7745d3f3cdd47bc4281f1efa447e0c954128a63168a11c6d8e522f4375177526d2b19951ddd5fc8a8c0f3311f6d688f574b1bf411e38d927d9caf1ae1b0c11991b445aa6b2962dc6abc9f75bd8c76fea52d55532dd1cea86dc249a80f41c68bbe04e1fb98684dc97193bc61a832be9e547ef5f3b067aa78c2b08033390e1937a82eb6e007e8fcda0b9ca46f0e5dae8507cea5a364254af604554b9dc2ced3010ab61ceb8f211c2585fd33d42d1689358f86daaf4e13dbbfd69585ddda65df66d6730b4ea9e7bdf853b67d6ad3703e4d7054d6b320f1cd3b975a4406ea91a2bfdfd67ec7ffcafc6ee915fa1e0f424bc08f746d9dce99f7113cb96d09ee58e054bfb7c93af4ecafb3da51e48945c9ae2d22d5a5e40ca8912072755a42e6a656ce7a682225467d478cfa75792067e7a18b8d728142ba40e64dc22d23152f2af2f2ec8364ae89444f7dbed9bb7f083889f634a8fd02c07e8f08628a6279686fec6dd6632c525e16c8d79825d572da7b4630f5d1cefe88a31f92fbe74154e7edd409e5b5ff27de18f7e862bd4ed1ca32290dc2e6ba1f5699f846c06f816b6b63f2ec3c1831c4e9b29fa58792f2b68e10501d442a83a03125e25ba993dc23e0e0ddf83e6e0315ce6699f2e85428f73806f70a80b0820245edb7df1dac81042324709f06539b4ca6e0d2feb73963eefcbd5ab5469713c792e0bc133c3a753a49c8079f61de29843f05950a66eaf104d785ad734bb4e2e7c32997951a3fd3fa72424fb4a3f303766d5faa61cb4467cfce81b63c2cb8cb90b0758daa79283461e5c690fb7f3195dfd2abc7cdcae50bee587ebb7cc8490ad0a4e3896620e691e5cd36bf1b562e667b25bf2be6adc997b19d2435faad59e7be077190725622a85a697080bf983e86b0afadd7af7709f2280d795afb417a13f9206bb508d136ae92eb1548dc19c10d83361ac6283ae2f1dfb01333328387f95159fa2536812268b519d1cf379b8f217375b90fa52f4ad65c601e8c22b623c1ac9e55876e7dffaa10df2894bdde1f4ca72cb01ca28bf73996a66981ccc5e8f915c6dbb6f5203be36b86f8a094f66024e622bba5f7a69672e0e8e2d2adce7b4fb41e46ed630af9a56a6e3790a6af7dcb690b5213638c007442851d378985359dd0e6e914acb0d66d71c2d69110afae5f2bff37e97d742699e6207ef12b95dc52300d7cfadfe33da29d4dbff442d25a7fa36b1e6327cedf78394c6672228b80a1b227eeafabd0dba9f403f800356e370eb2de22d3ed85d22b7f3b25c201a9947135015397d95e54de6821ce50acc326d44674e07c36dfce6644917f786541ece09a95405085d6e658c2bd1b8592bc8277636d7d9e04a34a490f3755f7273d2ce0855e1f133016007a28a9228318a7b1686db488262ab35e00b4d3657bbc0a67a7d2462a8aaa844cee1c9834b5b929959b9e94695ec49a974f5ab312bd92d8f2a3077532abf2da3ec1775a7b1fab7fb767e536efc02baa8ed6e67c7a2520a9d55335b8c0cfbfa131cc44d7b8665908c30183870d8e3289b9a55bb373cc6eb7c4fc551bcf1c412632c16c23c0e79ab1908f8db76dbcb49e22316ac89fbcd9f6e9c05da03aef1e36b6e59f9a90ffe1754f2fd0c9d9193ef818190942a322b3ac7fb35ad3e96833fb25ddba4f76d09b517cae0adf55585c6706ebae913adbe5892d07598915571485ebbb2d3ee8293840946f47ce8b28a149445f935c65b61b14f904baae9d51ff326e17ec0318fd885e31c7746ebca2ed41d46a32e338a865e5780d1e8cf1e6e6d84e14fe8a0696f4c25778019093544b9d7ca771b3db553b2ab711098fbb3d63816d5ef88e436e42ca55ea7a78666717bea235c4fc2d970806edab29e1fdaf26d8c58c8b8ce340c01419b7cc17fe3c17aa6bd35617d82da8fa34c4a72b7209a55ad191868c2b171e767788b41c07667751f042ed3a4ff06aba9b4547ddb3672774735b1f997ae0576f443285378329d7be747ba61283f4c928b3fe532218ac83f17cf746481862faa72c87336aa7f14fdbf55cc8c6cfae54f535d285e55c32a4dc19c0800c0952977786536fc1a6a654c2743768676e396548d6c00f7e9878b06b7849216e0d0fba8b81e474922da006abe3c3fa83ecc64799b4ce0514452d94ab0ffc6684ef538dc337785f2f62805ddd7dfe915c38942c44cb898450fa65fa823ea7ac443d3f33db5d5ba3d6e85e25cb65bde01e141ab3597f5b9a87ad36503e58beaddf3f5757a69f6e4f38269aae00b2617fc4c2c96792ccc4a037ccf7e520b4096d6894ff6a636672e502340e69df7c4cd2f30309fa692d50bf5fa9a80944da36b4d1577fa5beef3cf9a9eb2ba8ce0753902cf4d14d572519612fc57740867baa0b24c856743af9c3be41111f00b08b8886f21f48a59cf917cd020a86e40025080d0b50c415ffba10eccefa7852e0cccefea3941bb8ce9bd02ae2584b8dc8794b1799d7c54ca8d692129cd11e489fe3bda98d059a649b01c624db3d0382da8d03e277309f48ab38f5669100634e66176a1d79078779d45db222faadfd768576a971656fbad9659ffa5d994988df885e6533c4d4c004b45cad3e576a9b547b481032155a97b3b22fb9dacd6a8b4fde46e931758a274993986c89bf158f51cb6cfeca5402c134020c867de0e03cb81b03c13240c4345eabdc7fe76719532e64bf9bf44c568ec3fbc35e56ee79ee4bf65f703cc95e5b158d3d47e9a9e24f97e5d2f363aee5e6048b4c7755fee75e394d9f45faded72e0d582a319a6c0156c2f7957247a147e224035a276852ebefe453c03f1350e720f5d430e75b20b0415b5ff0eb2010e3fffb436a0df1d7aa032638a464419d03adaf5e25d13b6e22f72e904a7d7f40d845f9b80394d41a027a4706c465211a90d792fdbcdc3196053a80d6d0fab20eb1ed06ff28c80e366e88d024a228755b10a4a5e078ff94da7a803d4547c407b712c3b96dff53fbf40bbd70c873194df7a108272f2ce6a1ca5dff7c6ec8f14063cc38b185387385922a37958de245eedf2731f94680792bf26c888cb4495017230b2fd571577d9a164554333151a62fd6932a25820b5f9b9a00e9c6fba97528f4d1121a674ff77ef169a74c198860a680ddc9ba1366a6156e31034ef065ad5d733bde442fb7eaa5d7ade9569d642635ff115df1c4076c21d647f7c45eec48fecb4fc545c5df03ab643d98ef699e0d9327eba1c3452f4f6f42193ddd8e7175e1e6c505368b03e730aaef77c76d4a7802a3f9e12293f0bb785c36f6c06d4c1fa9be8edee623611dfc2d8efe961859b61577bc5414ae0834b0ee25d3a7507868eaf4ef14f5bbe3fafebd6efb073852bf80c0ee8beadced380bc0855285b900906b19ef59084287ef81c7568d7b1b26b5c1b3a20b81cebd7b6ff96fa3de475a2f62da0a35b2c04ac55b9077d769c1b95f447fe7ef4832064c5371a6006fe5a7e8f2614d8661cba579117745170e205208bec52ea7c4f4a91a7dbab36cf163deccb718055a4229aa3d224f8090c313877b1edb4509036e1d3fa19b009722f3518e79c5cfd52f89fa15b258ee898c6da2de216c6c2fbf3489942121334a824282b3ff9112ea299e9c8ba37fc3b94ef72c5804af32d8237696ed4ed0288a44326778312b2b8ebd02bb12ef864fd84970e72ad02b59e4c7761a853f49b253d67c75b15382e44204219ebc17cf3f7c775812353bbf2cb346aad4878b49dffcf47f0521a9da47c3730190b13e4e75c4294b4c3ac932dc74f71e2790aa6309295431f6b3066d8b1299cd3bf4bb87129be38c63b082e2df72f9e4476041dbb58742560010f90069a518a1a3fc07a87d84b2b9f65fe96dd0d4d286be6ea10701c328438b0a4f1bd60c9d6dbf47d63604f4aa55fe0d2a85c88cfde35386a8694b841315b3b5609589bb443dfc7f7db5f1cc9317b94fb7473801b8013f638ccea90919a1bcd29d8bd2f9ee9ab33b67f13aee404b8615159037a04e8375cc4816b76a1933cf32b4381a2a8ea6411fc9497e66aa778d81bab61773fc69500b6e74fcdb77b4b7e4600b6b94e105ca4ea2a0b885f513b588936f8b972d055fa8402d871c3da768a0e539f1a3e93fa66ba922729730a338150797c948981a24128b78738eb154e6e624515300649a6a441941b6317735565669c7a4b7354e38aa0633439a2810ff54a8f639d3bd4bd249a7984c1054df64a8a0bbf17041db4bb6b943acfecf5b3a16a25805b1c666ff5d5b9d7be3c5fcaab406cfcc42380f3138507c81e775f41a25dd39dda473fe154794bc1c92e4577be0239577c4f828a9e9d701da5cac3325f33258a09912f052cbec09623f5fef0c895681123581aba5039c442c6c9084cc6b69300adea64fb4ee79a691328e875f737e9074da22d26d059f2e7de8089c3e4d40d4dbf17dce45b9abbb469e5fe9b017f69dd50b007011fde6f78a0a0f3ef68cbc83577f1a592b3452e9e9be1b9060e07cea3e45ecf8206883a000a406807ece756507de7859a8131d2d70654e4b13119736fe96f9ef55ee22624cdea6070040c3230134b0d89856934506053313c562e592d9892fa0284751e3bc9a276c986c119ebdd0a581d3f753572750f561c03f0ddc165cb7d72a1d150a4f28174ae24344217ef30bdb7af2d4c10a0ee021ac0405838c81d204ac0b4b36c7b29c8f34ed0d6d13c098bbbd1fe1f4e185306fa1e686e757c2e42034fb989451871f3c5ba10a13fe97de72e3b026372f4c6c34daf6d59718c0fb8c73bf295368bc23e74c22073d2e6d735fd9775fff6829ccc19ae88c28d8b3356cad3b6a9d9db7a8861c3459cb8cb45cb359e98363ed7b4f1f7136449372399ccbf42fd276110788e7f073cdda39349fe17058ad15f85df2c90e7f9ac3a2e0fb15fd3327c24885024e8c346b6c8385d93810453253bb01b150d3f9bcb1aee34b73a56f41fed423714c8835e360ebc9f7b965436bae31ab6c7d0cd128b8a387145e83bcb1e7109717a6a9b94e4d36d50a4a29512773ffb97ab5907ec7202bf1a523f958ea888d742844d575bd07b9b75788a7adc12ed8c34a5988cb9a24c822ad89f932a5c8740a2835ebc15a26fd0a5e68b7f8501019a2b4f3a3c9795245dcdbd5855e3c38a81f4aaac0dcba1afcb4f64c4a11cdcf5ff4d9c5dda63d4bdba903396dae93d6dea0f70e9af2824752d60fb27de565e93e4ec94df3fd3b2d03d25c58478cd469402ef8270ef8d83e934c61014992c0230180b30cecd2fa6f1bd8e9f9e81dddaf09ede6bb507ba0c080d6e6595c02ae0a3911fd3108a6bfabf644265d1e1bb8101c6bfb24a3e13538911010e5a8a595833242f935c4fe125b1d5cb2ede1da8ff0f6ed293d28a34bcca7f77daf59014f7806426c307867bbe33be29946e9dc80b667e887aa00783a3cc183530dd93787a2868d7e5d2ee0328b40d8ec854e834c4f7e892e0ccb3757d33024a28d91b87757d0408b764525a79db25ddf351ddef95df4f87a7e881128a8b655d76d7d4fb7e266ab2cf9c417f0789da147a2467b621305694d0e8924cdb9d60a99d760a0241c60b2e9ba82d6afebc614200313b227785e827dcd37bb70fdf6818ee6d7819f6a5bcc16ce21cd1db692dfef754ba84d674f9b295e55fc5f6f4e961a2ceebc8882eeae010dafbd14e8a272b34fd2a3d85c62cdf4a78a56664dd983cecebbdb9e5c2f0cc617ec43415a13d0dcf584c84a2d9da1de682b83f5d2a232b3cd69bc759c7fd5a3774cb4f77046d5e25d066eae7889c8ecd3aa9075b175f7353c0efc8c5f4331c1258a3798901fdcc1d1a4df103c9ac913eeff0cd555b76672238eef15dff5dd95fa191e5da48c3ff595abdc2051c54ffc24e54fadab8c9b25fc5a826ebbb2580d66a24ce84a90f913d37c965fa98ae6d01a14fe324a0cc03422be4b0dfa70d4bf98d0cd526e6b2aca503056c87b2ffe4a47e187e0ce22f8d6c54e1a96d530f21b42e1f6e2a25f39ebd32dac8fac3e3749f2a046d7ff08b1378fc0114a2a93193b8f69c195756e5c28ed5e4f11ea43d2f90b5b8499f75a4269a7c82f870d876e4f32b8aaedf2f6a240d93f4faee1e2bd1e033a728462dec2e8075aed5c00ac3a1ae1fbc17981803e5b06cdaf87cd9a514d7c84e3a6109613c9517b157c3c1bb7ef96b1dd5b0cd163053ca856289998009dcdaeed8bef48fcd4ee4225fcea0d9962e1c18c2b41c742a2b480257a20f961c525a3a90a27c9134165c62908778fac7c3a83b8d6c26ff4e32fc3ecfd4e94516c69c32c2c82811d4728505e379eaa660f149d0087217c16c2d56263895b32ca44d32ef4c60b2df8ba6edb190b9ed1912cbba09f380e6f147edbcce0dc67f58599a3617aab2755944ed70e02c91354afc73ae779ecc3c759460bbc3d698a71bd5955f538ba4d6f1d63ddd46779dc9b97c17915461852a2166a2723d9568dfc43241f85b2c7502724b9f14c843acbb6ea31703dc32ba25abf8e291e4b63c54eeaa86779e54ea13e8564a0d962b7a5a14952c18007498ba782e9387842cad846604a8a485fa1fe0dd7a6a0e2238277616f5f2a493ab6a17130d3426140e7113db180305f35ac24b84a4a168bdfc850d2b043c8173bde08c1474eebd21ef4f8d225c8a8efec5c5c4cc70f578098bb8d37344a6211e79101d19677022cb6227d3b8adb6a3ec02e9a6259ecfdfbc042258e1802110c0f0992d66684709555585283b321b6f5a049dba536800c6325a8a8ae9aee5ff844eda4d3d32790bb500b7d8bdf4f18aef934c56f8a48926fb3ce9af64b7f324ba7fa76d64688f79304c020bd7bdda3b4fe4b809f632a3cf8c719e3ec53758dcdfd0f37e766dbbffcd98461ab46567a2bcf70be0fd233b698a4707746468e0d8beab36116a67671861430efa4f0b3814c83f762839ce6c5ae94124495cbde8ad4f9e3c23a8d336cdb6750959c1f231efe13b7d95c468e4acb34f3c361c3cc774f77127224161fc508b72c89ac3718d393e9447268e14ed97214706cc9c45059851b5adba90837d57e48e332314666b4e39abe47cb661bfc818b0ee2bb63a74e849efca084eca8471be43428cf96af5b2dc6f6e79568ea36b39d80feb3d881e593d75d37ed42c9cb41d7e626b2ee470773be77a033d282ba87e14fe81b7740e9433ade7b715b95a2b35660ffbf0347c17cb90391dd115036a754dd1d78695c118c77018b78269866aca59c0490972cc680d324d1464d50fd0f0d181d6765b9cc99605dfabff0bc4f1c653c4ca30d2bff911e05493b18e7036b56c74632dcb97c0f81bfa8181815ff70cabf7503d3018672cb92d36fb3dc065fb971e797cd595cf4d03cd31afe5806b7b40b8f0a8306e19053d58706acaa92ef81946d1ee3eabb71f0ca1d0fb930779f19f6d44d0a621711e18d408dd4c99ac3d2cf146be2fe46a2d1a5ef4174b7d61cc050aa2506c6fe68056dee8b9ccee37b4afeba2da3c9eda08b0dd9007fe7c81fdd349965da0ebe7b8d14c0d7fc7debd43f74767f608e66190ebf073c148835102ba2846e0ffe458a3c2dff682275225109c6b93196f0567b3ff18771fb88d1f0463df9974e25efc4b3e1176664a57ae6ce961d1d71fde06f38f009c9b7b90aabca44ffbd444eaa55eab2c6f3417b29800574da49b901c1b2d8ba5f86ec65614960a0681732f4477f50d00624cec42ebef4d175bb045f256502070186c9c290d2988cc4fd71f44895b139f548244fa44a42f6f579b5d3cfbbc4e612b3875e73b9a83fc3737a7add622244e30e1bf44a91643da6a6b75af3cda079db3cba36eed2b824a89205a3597f1111803266b3dbb30c0926aceeb6b0e78f5219735236afbdee5265aee4d08ccccc56223771b18dd29003b3d9bdad08cc129b3ad59aa87ea92f3b70551c874ee22b232eaa5e0cac773a81c849d90c9ad8b61774e2ead226009cc8f3b0af39387ef72661702ceed32cb982a53f6e3a502f14fc2e05a184e94b12abe5fd0c51aaa9c1e999f117c8940d97cf7f09933bcd66ab3b6e15d56a296865fdba963bcd07f7d1cdd7809849a2129fc2cbb14e4b07948d9b9fc633a2e5953c8c9da38a04274b5b41c1c0f1590f7d13aff3a0039a9c6577a303c56f7ae911b49d345a76eb9fb69cddbd5af034ce96624ebebdbe5ac6c67c8fb4f372ac131928c1d97c1825f757d60b1faf662f0cfd91f019cc916e0326baf85ca55953c395ec8c08a97b50dc08fa8cccd0211febf4681604dfaac049af8f06106ec70e9265b31e8d30551122bb37f0e10fc945a6a0979d935e0b76adb65f3a17246d330cb5e0173ab628dd90d46212cbd80e7498dae8b06de27c977b60fbd3bddbbf7ed0e798c84c4b76ebe3639c66ac69dda818404770501e0752d0bacf95fc945c94b30acadf6161c39bec19c99149935a57a78ce5cf4fcedff6a20323c46e01148d071531e8ed9535f69d4dcb9f5626eb5a147560fa6aea1df2e0945b0f32e33345f3f01a9d97f158739d9ea154b30606f7e6018a8609fa8c1dbee59fed3e36572437dfbd3fc92165e2221f9dd823396cadcaba385b00b11b3f30d0c3bae8c61b9262cb75789dd125c8ac553bf80f1ca484ee6bf7c515a0109e9a2f4f7cbd51bc1c44af12563d5c39671fc527312e622281568caced8bab651b8119cbec51eee84da36803d3cdb2ed293059421d9027097853a5391a713a88a8f0506a831e6e4944211bfa5016219f7bb0ed9917bc070ec4670da69837257c8d10f8c610b83260be995cc297fcd9735996b59b93e1bfadfaffeff1634b0d7077e72c3abaa6bf8ebb1f40ddbc982d5d7b6f43df58dcdfedfd82765fd41eebf797ccbd1c7e72e5c7c2464486e00752b6270b89a53a3a59fad938268a7e2538674ec64924c0e56ddafe62704b4e74b8f958f7d66c488d14a0ca0d9b1348337a4c3ba5c7ccec967707a31bec5bc1ea5b59a385db6de04291398c2e69ad9a29e47d4780c7ed6a09b818a01861b816f5caebcee9aa710c123f2d52699383b7264f6cc63ae6faccabe2b47418e9cc97401b8e611a513329be214fa7c41a48d3bf371ee8dd596b406e30e41d21afdc7fefe4bf991201d1ea412e30efa63db51672954ed337c4ff48abb1d188bc5cd4092426b85dfcd2f006268ec363a9bb5da890d13e0781772946e54271ca633ca5e3bf5ec40cc218bcdb9cc50067ce5e0974ad7c91973dc1da9dec2f902d11e47480b8bda68e39f038df3f2c942ac5ae9792d28077c88c899131c9119bc576bace9d2453e21ba80ea8af0eefb78653265a98e2f1e9e839002f8087775703e25060c7c80c75c39e7af0b3f60a4de94946f529f52bcdfeb5e6d815455feee8603abe60c0c1210b41fc4984a13477173ba7fafda4398eede3ee218a321f20028820b3d278f7d94663b478be8d8441d3927dfb56796436aab5acbc94cfd3b2b03fb714df4114cb644e050f7eaff06967c7d00a5167c84cf4e2bc816d279365d6cb63e451290b76655e83f837ba5716874c32f47f66077af1e6cb1dd8bbad60d918fdac2e60e00855cfc6c85f0214528b79663dc6ce96f818d57fde03e834761d84a010cb990d105c4645a5123823b17dd0d92f009d51479107b9dcd8784fd39e83a77f2fccc1ca6bcb1c63d106142e4a97ada5cdfb034aad5ed10af0145388515acc8086b32a43d6616611b4aee26db36528604fc661af56daf4861129e24c94b70d79ac36970a118616e0bfcaa65cb0a834cf0bbfe1848e301d5a3cea05a8f6d36add31dd6a53373cd53d6d61e8cc4733ab42cdb257e47da6b716075c059220c1e7172ef9fe0ec9ead32f8a23b64d695eada45a73e3a82daa23fa06331d99dd08c4688f9818dea86905c07d024bb6b4b2ace7a424ecc335384b8141b1e890827ae7458732b1b1910defbdc1ecea7f32dab551e9c7a48f36f8d0330dff7b589683bafd20b63a31f6bc8f2b6c02d256b5e7e30d67125d4d177368cdda93ede4b797d738e208b01e12d826e77a93f591ee77c691f34a555a9c8b109ad4ed8c52f868795e303b20545f39f7362328fae4436e47382728f254a500b5c7d814f9f670ed5f81bd86c1e2f726dda9b116b672355339651887c5cd222fcf172e1c8f6cab6ccf160035cf1572a43b0edcc5b9c391ccd5ab543654637318044c5f15fb590d148d208093c65b314503b7eb24b815b30e6887653f3575b6e78f924749d3929504a052ad6bdb9670b60dc20ca5002422d80e135a46a2bf59e5e9efc21b5a5a963fae236b622d9918119388929e72a13d2df5c6a39f19aa328b8b9d2ae19ab76c937f780c1c9608373f3ff36ced973bf3c0c475c6296369fc2389152caea017f7158591f9748610c77ba08827e88930de0ca388960a350b6579ebc7580dc324676c3d2eac935ac84f8f027e5cb7f75fb945e8aa577ff525c9bd92a34e5983da72ab61ef020b1d118209267da319b26d42c4a2cdb3b2b11ae8a5ab02725ae3b596eb70cec811857f3f6fb93452b8fa24ac5641f53d2eaa0898fe515d1cb2b04548e73d97fc73d9a5065dcf440dfddb81a800a09c377b82eb5e526bf70cdd961cd7d71051d007578aba443407cec0e7245460c6fe796404d36736640a55e8038f2a0da0c8ea9cda7f697f3ee521e20fdf99f5b20d618eb65b7d58a8e3273228ef4aeb77b27287f20b0ff250ccd5658752f40c732ab8ed5fe0f23d4ab16061405902859a39548cc8a97dd30d98ee451117cc8c05b7e42041b397ae9a1d18f79065c100b4be19645a401df1d35f7f19a66cc57b0b50beeacb9b5555389b2c036f9a91c4d0541b416491009b2285f8e06f44e44398ec828ef14fe60c3fc2ac5d070ec6c0d7b20d6ca7341efc3736262300723b19114eadd4fc7ffc42d368f843010f2548248fd386b795a76d65b12cdcff02c55f1767cc3b9266e63da615fba36aa8dfa67e3ba1ca9847058bf888558223499c3a00848d8f95b3a866ef7f12a368665f57aabec58d73cec83450d7aca636a36e02ed4648e2ee4b3333677c6c1b4e71452b7ecb21aa749e62acaf321ba37180a2901095cc80e23ad26e0aeba06c364e1e86d994917915e567c41b8990c348427cd07c09a67e6e75acaa211a04be2d70d97608d8495fae1eefd2f238faf9f651bcf72ace1adb37ab53e702c1c83732268726477d781ba2f683af03d04c861d23013753d9ca37f59ee9d710d26c2ae3160062d5c628190fcae7a3a96a17eccd9dc6864ca7cfca432c3dd32cfd4ee08c5e10274e443ce6e748df02d9a361987144fab9f474d9e7314177cbe9c3e31641d17e85861537b67533baa5f0f1a4b55e421369f0df30bdd62caaa9427446b09cc3c86ada6a8ed2a39aeac06748b2ccb029c274a690246cf856e5df51a138808d8f472c14a399bb0d903ab1c22196ed5a40922801feeac85f2ffa365c0f7ea118f168decf390bbfbba8b8fe34b364951cd11d1253d40cd98efa58b10252a5b39f7631ae28f18e24776c94dabaef937b7d02be8a890d910941eae146bcb61bcfbd46a9dde6e25e9e093c1489b3f00b9b682b9d01d3e70392117dae84433a8cd6e5ca45dab718b1419af2dd861a10cb836c3b2fa6ee7faecfb25e4172c214237ac143dff055f16693757b01eff09f805e79a84616ce0684e83271a395856299412c1d7554bc09fcbfb5df51eb388161a58b66c64a7787f156842540c67025254e0915a5b3b1d8a2f0ecfb08420627d490b853ef426342833686d5c71ac44b7f072e39f5f006f0369c5be55ea02895e4e06e02426280a56f055d94ee9beac8d71e6e500e0dc8a1f108ff4cac6720755e05be006734c485a0d8d81173515001a86afbea690ffdfe8c9727202efe15947790bb8284704e6016d09a9ed99b3672b079c5f1361fcc7ac7f36897ba38eb8bcd46d4421c9cfd46952cf129a4f04a435f77d93fab7cc8d3289837acb8262f5ca13ecb09c6d7055acf2b6f0c692b0e0c3d5103e9b5dc2d3f502f4654bf55a31c46e8083d0a4a3bbf0ed0d1971703e490954dd020a97ca016dda58e3ce63d39ec7f7e915036369061e3fdcc7cf229d55cf469e81787e28bceddf76cb4b118a615ac956e6c337d067835b65abb9d19bd576c9ea6910f6e023f868f9d4c2b366bbba05f968ea2ce38ce1acf1a97c4e85bcae796bedddd92d7adf707c88b68007ce4c7c5dc499f4c6f001e0287ad001c9ffac217bfc53b4283859c69a9579826a551899728ca93729287d5cb7fa62b2962cc5ce3ccf7af51d0fb2c4680a9657992bb77c9c9d26e2a3cbd692b876f7e2debef5f7c1f42395dadd77ae43a49f29406b209c71723c5b8a786c42ecd6f071cd60d2406e9744d79cc25763f758222d73118e65f7e1a765c0159af5b2c5ecf3fa049452d24d1464b03c0d823e835ca8d1a0c2ab01ad6f0e71bc28de6abcb90161a1e0842a0dd2c72740c7ec7949f19dd66d6ffa9e3f42fea05643dad7541b22c9f5c66960dba87cc3845243a27037bc58e2ef772e4dce80ba53a0eb6bd230ce699ebcdbc97776f66914da90add1d471f10b37468eae31e59cf73c6308e52857ac72f74c3409b822c92ab1bfee6438c2d364a9a73f0aeed107a7f29b2b17cac01fcde17f4c38cdb696bea47902a89380f8b4bcac16b69385a95d15705e2302d89927b8e79babe37fd3257c9c41160fa057d2fdae4eab61da72a603945205b06cb8efddc329b2bcc675cb212118394a3ea47d7bc72123fbb4966c99992fdc528c167e5a27ffebbf28568c821021fdaf3506ea098362374213fc6ec9a338945adf40f01e7c3602a73fdd3eab4e6e30030f54879577d332ec8c2ba0cbb4722a97bb9363aa70cc24808d42ee092a21bdf800c23a3e1001763f6efa32bf0bc7c19163de04d2a3e72e141301dd8faf2b2eadf0eaa76bbe019121cd7f9e94305c0783d73df812aee0cffdbfd051af67e3be98d3c3a80f67e96273ff43449ad9bf3286c6dc6b874388c6e40481da82a602f77b96b137f4594c8f3943ac1567ad7d89a2d0788735e774fff88ee8848f90dd8bfc162f0096a00a220a67e0367dc58962b922a106e9bb713916fc015792e3d419cd82d106bf28d47828cc54e1bb2f5d18f1d810c72f0a0def217f346279f82e226853f7808f38e7aa229a110e10092e07ac9d1492ef7030b73f3cf0404a46ffd2fd953ba2b7fc812db30cc3f5f542de525935424469724047d56881e2bf97f4ec736d7b3a24d83f11536375f6f62076307cb36b05b4d6c7781a4e486b551ebab2b6901be947096e1bea04097ee92a4167050b746c2febe440e54a8475ca2a87abd67bb343b689bbde3de4d9641aa61fe7ef9736c407987ed616ca9b8ba97605b2d5ba499301c841d741dda1d9cdb45376bcc5bd5db74418c446fa19caaed08f12450909a32e05d79ad79f3456d6bfae40cc70ba4fa7b82a19cd9aa74fe53f51e595047dba7eb0977a903bbdcb8e398d82828ced8342be91b4c753fcd8f4bd3db26f40875e2bdda9190f103a112996c25015392137daba8098c7bd460bd378605e8dabb81e7eb77c79de1aed1c4e753b0b9cede4e8d9d47c9b7953def15d01c6a052416066acdbfc72220468d0801fec1acf8e8134e4b3d27231416abfea16deb7be14a15c897dd8513e23dac6db5ba63912b8762c7bddec1adc899372046e8fe2b8838e46d16f0586700a698b2887c9e2b1981480bb45f69a5c40c6e01cf351f6ffb0a1b0d3d7371dd732f701c42fd4008351f24a117edacf1fab13448b0941c87f3e23b07615628947b011f0b8ffe7e8024fcbcf299c7547b8db7950fd79f4d0c84f028fc48f3371235d56b209c69841ede5d00eff06d27f147be2d0bd9e68a353a87bfd7e11f1f87528bedfdcabf1c91afaed32041dfec641212da9663d5ec4996bb425cc9652c62e7954887972702164407e5a40f21dfb1966ea36b5a611776b389e5c7931c679478635e6a726da4043d26810b83813cfac6e029406ca39baa92780e8c1a95a2519d190f38eb64f24051b49b6c1c1153bf0fc44b646edc62fec43ff2086a68f68214b65bffacf494c1a8567367eb1c3552820138a20cebc57a3b2f7addcce71f1993d6fd42be6db043d47f6fd32a57f353f9d4d0c89017bd3d5dce85261cdf7c5d90a54d40f6d20560d36c3462e044a3e2b6ec3aa9e7d87540b66261092daa37def15d84906ac51fa0423bd370808287c79f15af8f3852883fbdc3a253a97cde9e5d0f380b821bd3afb17881af98f90af59e36d8bf13c1d2443a5db83bb764f806008d5cb107c91ed95beae34951fcf5c191433ed7a2fc63130584e9cbe791097351180c3773cf2448b7d0e5c2e816d051b9c50f969a372e4b85c860e17576954706c89f28c541224b55747b2e2c523eafd108e2a73853bad9c66db03d7c541ba83a96526236cac6f1c9ea54ea91ea5e86bf807819d0586f1b6438c75f863f10a731304e0c8b1379f9331b13e5956280243e38823d009d7f68f8db3d8c2b08e08f80383fc8ce6ad4ee4c8740aaa5c19b4ea225aee5d2a8aa034bae2914e49018883c30006340c78027a40522e9346ed44f3a8b8be7ce78bac8085826a85f693a9f3edf0d2c0b8991fadb2f9651f458eacf24c09280870623550442795005b774144ae6cd2c5ac85e01f852326d1d430216b2b2198a909f55029661a127a21e5a7d2d29bd8deccf96a32acc35bf09ed4771caba741116fe2c94066c411c7912954e3097e09058a748b87b3b5dd3a4342f9b3e614c6590e8c4efccb6ce63e7835f47de9aa23eb494e1b1c559c85df9e8f0d6b86391ab732660df38af92b4bc1540b06327a4e59d0157e30a6686b6941e73820022ccf018349a2daab1d41909aba304a843481ad23c57b2e6c8cfcab241705160cd9f9ca16c307396cf562f3741948c6d76fd0714d7a2f6723fb41f0774b97804e075c19d9ef833a2d64ea98abbdc452beda26fbb6b345ca836bfb29f9e09ea613866f4f5b61e2c496d2693f0da7c32413ad5b16d94807a2ed5bdbdfc2775553c098c7e2224e503a2e92546b3a6bc2bd228c63967230795e9b3b66e21794ece0a4f5ff119d27b1ba097fd52be5183fc7537f05bb6e127c638f41b946c068deab602356f156a75fd5507c3948c28b272aa9a02e6425e12c8d5a272c75a7e1eb61c6cab61dbd73d18696903b9ea6d42e288e82ea351d5e0c44741e164ca02676459ddb0ba7566568331a70c1583faa927ea697e9f7a035d32b0ee14d452ed51effac1d17438a9b3367adf8150a9c31acdfbd455f2a0112dfa7936004e1f76cf5d2607328f9e398a9da6d8a6381776d4f8778a591dcc6f31276b64adf07e1e6e68b0288c2b64638b9f95dab314cecbe5bb5ec4ca0c1674bc2cefcda70d82ac6fa2399b9e7f7ce3c63580e0e0068bd2e031f81e75d347d34c9ee0976692a7e117409ce505b129613a5af34f3650d44fa2d6bad46080802ae680d58b9e730289a4712da6d8a6c79e298c8a6d7e1391f7398001479f34085f7b5155a9671b3fbf3de563da91a58d4d06478317cb269b61706d1909d28e1568c6279b9a2f872b354291b8194f9cf30b85947c59383386a3aabad485ee5bd10f9bdbaf95d8f0b90ada94775d69cb1916a325e834fa3c7da11e4704a6a19334e5afb24d09e6eb98b163010470cade51bce071920ca249eff140ded359ffbcc0329739b21212b0b996c57b233de7993f1d2a6fa1ccef5f170da4d60e6f982bb962e12a3b85c3bda9f230fce1281dc764aa46a38d0818bfe294c6c353fa793d26a53cfde77fe6b707f2deccdeee5832982256001bf4fbab3abe6c1f55e0a35deff55ac802266e7bd43684fbdd67279908a78ba335dcc9ae0fdc75b79968a0149367f5bc1b7839a16d5a334ab2f0539574df8b17dff9406462a29d49b8137c9767c12d36068324af3e6869e2b682ccd665000a40775fa71176f9df23a931dfb6722c36dd61a1d72d9b36a5f13ab59539b9ae1cfef3704a4b693d5b5e0ba6ebd4871e162b6aeb4c90aecd726b6f27881d3311107c16832153f7b338addd073ffa32a7a487f160cbaa43bcd2ac37da333c5f56f267199bf329916f1bcf4c15b8e75a38e798ff8ff805ff05b6005ba1e97f4c74f6db3065232f8ca4285287ae177925cde584a99174686ec0144e5d78ee9b9e10ee41cce6a764db9167837a2eb98d851ffd61af4cac03c0d8dc4d142b62a6034e96b1e8e2cbc726fc8487311c4cc2260c5fc26394d7fda8fa3403f024f30a593374bca1b1a438040fefea0ad36414aca550b010cfee1b7d13cd51acb989fd72798c57a104d36f4001db2c0a2dbdb77dd538d99ba71b76cacdec42c711128d605e0bfdd9c9ace02a508f246e935cf2226f49561aaed0cdb23dfa93cca156ddc1632c74b857345e587e749087cf2e0338ae3bb5d2b19486ab0465c12ff36623c19a2a1962d67e717854031d51051a48e36d1e25f20d8dc15793e7037b1b682da01ed349648435165406eb9aeac946a3fa4d894bf9e7bcb3352050073a869ea229d134ed94b89850c38d2ea5bc48fd5213db66bc141984f12d6b7b81d6565a9a5303242cf62077b1bc59a62eac17389df9d149103b82d02904a1704d98bc09c1ea8c8b2cd4199139ffd3b0301e8a0116f285319a88f0f987aaab9c0f6d261795ad4522d5a40004ee921f3c5a4e368419ec9f421d29a4d3f30a09b5abfc176f3c486dc6f91ed2252e77a5665d63c42161f93cb37c2af2d663be297d872775baef2cbfdddcb93078d91d3600c6ba56d0f4641aef85183e21cce8e7cd55791128b5fa4744521f9b4c231f26e6d9a066f3259234e7ddf54e7d1e0d748a18aaf7ff1c8120a09749c4476ddc9e6e2bd3805e4bc22f29b4f5762c88f1cee7f65879630351dfa10c95c0720772634816315c8153b78a4c3deb011b7ebf5984a98093b39b237a0c25a6d71685d159b085b24a04ef3190a85e861e626bdeea692849964365ce9e2331dde2231a7dcbf026227103485adc5754f2089cace4f75472d9b7946a1dd440d9aee8d7c75e6b1907c40d9111a8b5cb7b9edcda78f07b641705e8c3e3c6d3ec67e201aab4f14ed47ec0cc57966a2f8117702f43a12f16865f53ef14b76785058a2b2f4d16fd56f8e032ae6457a1be6106b994efb1dac3a23be7dcb058b2d3d83e52e220db6444b75af9c9f47bfc9e3725021f6c98f3032f0da52438d028f36cda759a92c0b1ae7b3877d768ed1d053f3efbbb88922aa5127c464c3ced8085ddd5d71da9d9b058f3ce365b720c72ca2ab896ad04cb88e9161c23ce938694a0311e8dd5bb74c9e06eeab924d27197cab28fc09db1fac30855f280c37a1f19e13d1cfa893765c1c4899286c91c2e946bad6e4d5ee023d3ae6be7fd7ab5a1d5c49a5772f536516cf53ae1e7f3776ac439b2d0995510b1fd5cb577af3d13524e50d9abe120694a6323a946bdbdbff0c758bd0aeb591c36433c42ae9712f805e476c5514fa1a3076629d5807c2d6c08fb86454db03bdd28717013e188884ac4b4a9e1e07c4952be27cdf9c6411071187bdce59024f00d03dd99f005aa5c1a76e129ce0eb25aa8c9fb009ca665069a93c2f31dc20880215459966debc9e741eaee6087b2641ee38592dbfec087b38d9db1d72f25318b5ad015d3a938eb615b7193c71e0652320e9034f776ee02544fadb3553ce89b9721cf56406e4d8e9ebcf60729664d62ac603430fe50552c7e46eb612cc5d12f22f4e93c1e8e3232d672b50558afcb4af672648b8eeac9d61dbcf3058c641249d61881a0db27ec9a2454bc3393998f71658cb44bd3b7d4c8da878c2b26a0e31ce06c9b350d6508000cb2bc2962c1636b14c84f1aa5a0bbdb1b055048b82e9413e9a4a598d951badeb1a4726e22a2171d6d1aecc397cc7570990b730673ff8c08db9d70e51becda30cf547b962164538fd91e4813fe26ec2acf309d5aff3ecffdf23ca73b53d67b100eabb9f996b7554ce30823e43254a6d434203e35b666492ace4874fdadb0ef611d9d62036996dca3b6e2814c5290d208f8307d78875500e3d4eb0e8010ee4ca752054a7947654762b6966f99efa09653bd75ebea805a1d2bb829423cd57975e0c121780c99545e2dcf93454463fe4af31f0c4ad7bf5ceaa50cdac2415177ff31806d8e35ff96d4bd8943a1b57a7fe5b9c8431d1df59d214d701032a36c9178b3d63d7df002ecdd03035c6d1abca0b442fec081e9e0474e372f0d6094da788c81d457d6386180dc907492733d911edae99f22b5824cffffa8aa38a1d453e9305ec1f3d10b397cdb457a8122c843fd058873fd2f647ab0389f5d5519887359c2d5228543312cc7a64c6ece47d9c7bd6eee5a69fff6559af13c93cd484468be0e503940f81663e95643d236eeacc77302eedd1bc2366d13c1383419e41b787d2ab24357a4e295e71769aed737bbc19d9b8504edc42dcd92ac3fe1ddd8be306107672c4382ce2333db3ff2451b0588ea9369da5d497c4273840a5251aa3a3d63e75f6b55cb17eff9a1b859866931a344457ccca6a5ad000ca3724c768036873cf698f0d7605f2e615bf797c7d69b3f3baa7ea917511383d7257ee8aaf69f520acdb56cd708222fcc86790c89d4caf622da112392570271a29dc54c356b12cf2b3a04d6510c7e18b0c2c094d87f596004e8e571da6ee9aa46f234828b00899830dd1661dca26c64a02640be6cae44b89b331831417d2ca4536c72f280fc380b4155e4187c3827dee2eeafeb3aba93f6e3c53f29030d917e08d050fb7cc3298356c402dbae0ea6ec21245bef86106010f027db417ddf78fc24eefbccd0e8ab6e1a2747a3380e8cf57ce95e8acf83cf32e42077864c0ec3223858c01558a6c769846255055828d5981132b0c868d6ef634b5006a57087038b4d059dbca9d7449ca3f380b176020935c6cad83bcc01cb161877249463ac9d3e28db1b913dcc1fcfdf4ab9626f18d78e8ffb6a2a53a359fcb51d5470622982cb2c4b0a1e302c152c25862d4e6bb411c206bc0a88ae11d18b7774cdfd110649aba7a0afc23025d1d927759a8ba3267c7673ecb02699716cbda16ca338db2bfbc677f89761152e2ffd7cd6c6e212c01e3abd51089b3e2c639652618001f755a7cd8fd7b4f788c71d0b23ba77a2c2352d923c8356a1ab80d66ba3763b4a71c02ad6cdc6bc79803ee881d64a97e8b6b31df8297c9ce5554da87e901eee2fc5cd2c86f57b9c0b2e7280482be9d0cdf8d7c69f9b9adf61357426ac8443a2248998b02872924246ca6fa5fdda5bb729490d4f5d0ba2c0aa3b67d0a0d52691edf8dfeb1ef1c87ae8c60fe7ed9421231488e9f36fcea334eaa75c9e0278590aacf079314c5f88f5ff91cb0804d641a0f8d4bf059bf820c1539253c4d9715fe1bf5dcc0a1028a5e82259a2afd2625070fef6635770f798693b913654259c38bd974ea9ecb5efe7c523ada9c878d1c7c7ed8d714dff7729882d0b41c231f386ea24541442ff7fce458c399985d5c7330198551ada37163f0a66d0f4ab0f74803735339710a51733fa728ff7e902ccc94cc3f7921e3c762aaffe0ecacdbf1c249fa1bee85a031cc92ef3a412c039ffc984a505ab9929a21f31621ccfcd43d2fe197eb5270d61499db14bd1a7f00bb7c6a863b17b735819dcb6e559ca656e4195c91a7179eb5967fe2fc4c5da6a3237eb98dbbe29522d418862fa3dcd5fd37c0803235c17cd0eb9985a92e8b76da2bc12e58306509d5d8aebe65007196411bfe8197c8e5662caac68d6b6e9baa7c0dbee04e3a66473cc0826710ae87af24da8e8782f27add70ab811b4f5c62d27692aa641c44d339c3574efd4a502f0c429086666a963dd6e61431d2b9e096cd84b0c291715b318a3d7913a9568e7512cd84308c80d07c2096cce095daa09b8c55cf0f806d41da7f9bdef70a39ca8b4c7205af900b6beb8bf26de25ff6122a9ac205a68700b9b2c46095e76de26aef6f31398fc8f6d8a3017f451e712d5fbea79089f03666b72140b228383c229b334036042d28f4a35a4f4711a35d281e4f7d8bc13f2cb5f4c1b3524e8ef9697084652b39fdd65b8ea9ff1cf885fc22a2960092a61bd8ff24633145875905a9178df66d6ee85713e09a46503193394d242615389e983b04a955c15123124ab78f31ad13f794fbd002091279eaa2dd76d82e4ccbe2f21bcb742aeab0330d4e3bee91cf739f3eed9d96b2d4cdfbf37c14f2fe90a72cbc1da90517c24182d7c83aca78a8c1851cf5c8eceea631f3eda9acac4443ee6afd21bcdf6d5733d8cb49fb3ca26ed19735f3a06c786cc6abdca710f35f0b8c812911cc79c888340c96a7e7868e678a4452314e898f1da1230764ca98b88f879530b2e3e447d1487f6f87a8ce4f9ccb2ea5a4b225b28ebbef70d08778557665fb1089b20b311007e394724fc2d8d42cdfac3f28e494a2d3b371db33afbf5085e026fb90e18a2f7134169a5080cf737691050b50fbd5838b0b71fc0885411459b20ff0274149062bcf90899cb70d48d706b17f1c69f8c00a313e1da6ada8e3ae1b88da461ac73c6373c40e401d02fddface15d205277a221780354d1e88e9a404e90ded48b6424e5a7a500515a8f72b361e808593340e5ac5e71430ae22ed990c4671167d08e2dad6c5c8b4aeb4e1cc578d9d4d097289a666cf799078cf0d2da5e4af8293d7324dc77eb931dd83bb651ada34548ebbccae798d0f5206922f0eefa3266c7efdb264e4247d9ce40216903ede9b8e2f6164d0a7e721ad9a86abdf4a789a06bc4f693f5f0d6ae10ce5673d265d00c885980a896b9e0db6a588c26c07427f4ea650f734fdd086e1741af293e6260930895c824920bae36301295df4400746eeb6444d8bdc39da65de9aa070b2f1cd82c99a31914f0be102f5558529f208b9712a3244111c369b812cd3412670343298d3a6a5da6452ee1579349db5ac1232688dee760d8cd2158622578f6c6f994bea78eda814155e442e670e776d652b79145a772d23752166f94c9ce15fe051048bef913ab97a9d39799abada86948094a5e45516f2f8a22efac5ca839bcf7331f096cb9b7b7f0ad3aaeb7c0646b7519807155ac996894cfa4d1a8b88d6eb79c60075aa03777afbecfa3c7a6e7c847dac4245b4d0f9807dfd453ffa0350f5ccb9eaabc53d327e1af3a149d74dcd965c3a8132fe7c8f35d9ff23744e43b7cdb014d11bc7ba3307bdd9a18f2b2d863b79eb595662c5790bc3e8ca44ddd7d5895a80673bd929328e716bce8c6632b70666ee044bfa13319970cb437bf58f637a8e10bbd7f87748dc556f6b54d2d87eb4d1b05905c3d9e43320a3d6cfb4d473912c02016ac5d1c9a852afa7cd7eac03169add8757aa9ecf2e7349effd500b5aa90e2960473b696c9b1418502b48f5fb075a0ad809587c26e20580dedefe125236c08bc88d20c13d874b971eb4e92f40c4c49f64aece81be37df51a87e5adc6b8546353bfc9850c9a039526a352dd9930dbbca391c97b7c71210eed5bc70ffa51e05211399b5e833437c35ea5c0047e01327a9572a3918b4ec8df90270a530753b506151ecb1669932ee14b15a9be5736dc170d7e5e8f48a9a569abaf5694c5a71a8c923cd072de2b1dd9554ab83aa0a2cf974eecbc8560ae06f32d11bd9fcef3b736b10da1311af8fec0cb5f6065a6fe169d9ae7afcfd78bed2c1e81fc4aee735f6831324cf3cdac7e18314a21399eedec1003a331c66ed3fd815511bbbc8a602013cf0147da123f9235a9ca52b9c6f81d63011d36aedc53766a3943ef2cbf7dc20581c6e2b3541b70dbf76d23b661526b86cad26b4feda5ee416b6e8cfe5e1c1736a39db77f7d3e5ff2f634bc7797692ad4c9e4615a8abe519a6504f7f7c26d2f818226204718b68b5a26328a9de33fd44bb47a056d295773792957c4e5b93997c0168bd0065e285215510d055146627ec74e5fbc6319696a953974ef75af159135d75549da13197c7e31a3148f7cb0c1f31f29ff01211a3a7bff62d6268e2b6ace6e4f2b005c8af177da148deccc706f6cc61eb0d68354e2892b1ed4704f5c61e94820e3976380978d7ee252a74cd1d583e5a04f0e599246423d306f3b32ad93c0df0bc0a94b2ea8b7d98eb8a38ba4dbc9026a9074b10af37055b26c091c4ba7133b605cdaef2d1797a4a9f6f53cc65a0d257929d60b2ee9364b51ed992936dd3ed7fc4607be9400426725c08cfb52177c093086056de34831c2a44ef33889838095dc92001268144a5079e35d9e4f598465dd2434984fada81aae5c8639c66982c9a87fba28a4aeb3940aff0dfbc5032a46e5afa64946926f1261271a5faccb474e9f1f4d1451ed242bed4466e3884d3b684f9aa21f692fbd2ddd2811324136eed2f1a31715d9b37b6c6e30a512cbb12207ea6573554beaf08f3848961fb8fd1e478f0ba39b4cdd1c9ee45fa292112cd83d0962ba1f063e07a6b9c50c5c829941a1f02c48d16554cc7285c12ce6d0b92ee20b3822f3607975b398392e5adb196afdef88affcb59b1c94d4d51161456befebad7c3b5bc4f1c6aef22a4f2cbc0dbbb9f36158aefb8ed25d9cb029969370b327873d19593505f21ba73ee9f5544d0025a212c5dc3348d917f6793cb61ce8fc4d32ce72b739763897b5c9c6de232baa59afed62c9b140f411d5e8e4366b275ac835da3458fc9272b7a3ada0c481f46c0368db5c4aa57e43f3121f7e8fa15ee696d1009ea9c81030ef7a6cd8970af86f737fc0e700fdebf5fdc461d66c668cb0eb8101be24e39e00be54f0fb14272cc350fd6471a28c2029ed384d1a72e7c52c752aefe19324018594e4b358bd823e98314ef371a690f44a26b7cd200ae79f17aa43702bb7b09734c0ce5d1acc4b5e2a4528b8d752ae672c61ddd67c0577c25879598c1d8bd50f2565216bc389a8aec77d64252018bc5ae82ff3f6cff09eb986213939079a1eadc3dda8ede93a7ae476c7b9268cbf9ae1e31a747bd54faefa96f5b81c975279a4cb71c60476f9864f488db965fd2b40978dcff7ede9d3c13c12a7add2a5184778d0af25a72baa298b0ec8256b8a7606104e6b053b714ed870461aca132995094dabecbd9e32e2284f100c93d46d087f0522117b477a17e47c8d9af2c64ccf971ed0661c8fd98e3d0074689f8045bb043a905e55f660c015e2e4afbc42c0f55293a70e8fbb31c42f503dc9eb8e1577832662833977e912be1a4d53acabb32521b41c3fd04d528f43d7dfe02c2545c8ea3e58dacc8107dedc5596974bec062d5de87cd08367dbb91a529b6a8ec1b1fb747de4ed4e18e3ea67e49faf6742f506189144d37e6a22b208df701b86461c9ab8d0c8aa1240ff54a273003c07ab6789c73f681540c7333a5dc7081fe1d87585a5469122428dcd52715a079795883975171e9d68dbb1ef16b69133304793e0de84c710c1f295a5258673c4060cabeabf2e1bd137420f31b3e1b27c9273d3480e0eeee4301d915beb6529227d30e70375b1bf5ab183f6ac09f3b7e87a04a3abe14f6563cf64c868c9c4f7cd45ad17511e1229b965a39be4a3298ac2f791e5884985e1a5a6fd9c942880bbca74df0ad52be8aedd516574bbca98f6201378ecdec5e75757869fa80eb196eb5573fb9e74d8d644dd410394bcb292e1b31472821810c0714caa30fb06b8c64c459b66fcacf69f188fb3f13dc6b33bdc8473ef983b5c15f16b0668f4fd85be54dfdd7120dc1dd33c92b408f1529c6f35257af668abd8a462f37eb4510d66f212a411457f54c1534f7b0e5a14d4051f7221f8b4a953d7a744f06f771a579326f2fb7308e7d5856676e6022e02ea47cd0568d96b44a86a76b5b33b6b75b9a2c04c36d96c79b2324271e32d96b9d0669991fd4c0fb5a8f82d500f07232d5c78f6d52963256dca0da41ee15712e6f875c3af26f0bc037dca3229fb826738826e40287657bc5f235aa04e4e7721593bd32cc0407425107dc91bf66ff7ab1170dbd807ccdee6e6d6c987eb8731bb92a1d7efc398555da5594f7265d7440c74832831078c772559afc2ce015c90dbeddc4cb4f04fb3028e0b54f417a28c52504174f4243cea4316a8024d26cfaa07d907ef0eb5b743ce9bfc72c972fdee066f4972d13b1931dab0a79b1426f3987769798d189c3cbb5f540bf27bc01b7f9a22bd7c5bba7e55ba9e2c335c8ba3aeca9f971f2fe18afe5c9adfaa5097eea496487b7145d4966f8edf2354c0f08cffe00a0ee969f15f3b6114fb5d76c833adf4702c77aad2d4c7bd8145d0ba2b1922b0bf3c9e5ef76bfd0244487f5f1a52b7d1ccaa33beac877de3558a22590591224e81a1e033147d40ab0ac1c45d37ea6f1440523024b9b67bd3d01b1dcdfa778370c78948ee43ab25295268587375482b8fdbc2388e773f73c271eb69678933b1b03c920cc020eedf38acfe9853a2d34946e09f340a749370d2dba6406abac787221a5a70cc43ec77266a75f15ec3bef9f3cc65218fa6bf603f5b5b9f7ed0392dd1d5f892476a4f754e623d6d5f2c4f5c7800f456567ac2547a514c3b0f50f0a48ee876d18ac6aaf2b8138f328788c0737d917ebf122685d5ca7a4113328800ab2d51adb24d9266ce636f4db12100ad694e18f028724ea52db9c70607bfa3ce0455c62e3ba6b7b5f0df3bb36f468d3bb918ed9ff4c255facb32a723333b0739de37838431219564d251c4fdc75fee7eefac410141dafb447f0214a1387ab0f4b2c06956c18a2fca35fe60262fb8c4276bb2a41ec5e7a2eed7a7cf07031d979a4c2b1d42723305b113fc9c162413dbda564e43049ce82cc6055c6695ccbc756fe15f37d41e0a3dde97e5f87c5e02bb3f1e4c82232c45b15d0f69dc0c17244a5810ac854d56e3d5a138241a46d94e8b513398740151bdc89da4873de9694e9c89e1b162208600fd0fb53182ed8beae7552b06cbbeed6acf0f8ca9c40af770736d4f95fff85392292a1907c76b9620dd6b0dc17fc55b015e8d5b911684a42f2d37c73c8226fd6b8ed5e453ce105f40e378d3bdc2143d0f35466f94e73dd8bc076a59b1a13a100f68f045cc8ee3f974c06b2942700f0eafc19cc335741a427a3f54c0729fd7b30dc030221a788dbc36d8ba2c419ecfc493b4c5868561a35b5d83ed93cbafe65b96e3d5c5a0408b82cdfb2e483d831d4c7f539fbd9f3ec796a3fd6e450b9d26fdb09d1f95c43195079fcd82f109490a3d0fcb5b96fdd54b058cc59ba49bad7738aa55d190123b4bcfe18b6ce03b72d940fe514a5a2e57876e916887d0e2b0516a6a96d0219a06ea2dfb3e948d73bee2687f3924b6a2454cd7cb58122c5fa7a5c415d55b63b06e9905b575b4c7579111dd77081c1eec1dcd4197c574f3e598acb2ce45579d29c5f55b9f5ec0d10be6bd5aef673ea5217992b11583446f26610f279738c0502476e1043467e390e5e6723d7c1f830c261c32588f7b7e75d93d9fb13dbb44bbcddaed7f03375de4f242e896166f5ff482788be9b6cfdf98928149e6917909e9c5d1ffc32ed856ff34ea0129212cfd97360c9dbd145aff2baefbf69b8f73b0aa0a0fbc72f85ea5091a5575f86923943e40b370ef9a9ab38999c1a732ac1576cb68673eee77f192e62af1e08548273603e660a496a2d5075b2ed2f4ee03482063ec286f675f074a821fb307e2076f5e8e96753630ab248fdc33e62f79accdb05665b50e87e1c9b3ece0ee51845dd7327ce2a09194a85b4b9860f80de602d27ea569025c84ce3c8d0f9d982597acbc70437b7482303e25637f5b8eee753deb5fa38aff342606248ea38566ab0bce42734afcc1440aa4c26283cc81fbc74f5f9097e47e7e2cfc63af3bfe5877fc7cb0a74bd1e7495af068977741bef4d5aa329942fd5dbb85f1346df88c6c4b25b2aced94764a51c6224f766a44781cb2aeef72fe4d43a7935a6acd693c8ca5ff3aedf5aec7b2a78213ec027df8a6ed249c2459a36691bdc5ec2e3fce2a4cf3a26a2c171c8a11cac238b612752bb5cd19d6389bda186eee6f579ba5a1430a8d35cb408f5249fcbaa0a6b2ca1cb3dbcfe740d0b517516ef687f344d1937b2b689a2b2b4baf1ba88ceeefc82ec23cb30191e92aad65d1b6333a008e48c73497c37ee2565f5a481549b4fd8e836fe8be42878237b93d4f9734dee03aacbde013ff1297a57551b10b5bfc78bcf3a4bf5ff88a62a5f8714c8e0185304f17156de1e55511ab85b1d7837025aa6401b5cc2f18599e6e2b89d205e5f97edf31f1863badabe994f0ad32b50bc1420badc9bde386c1a494d46e35e18b2ddfc30452c5e317f0cf70ee70a9f1dab58e30fc9e25809834bd24c2208cc128085e275b56629f0f8e0424c239ae638d0a566d167cff802b973ab1f5d58348c1402b3cb813d0ae67b309a0bc5186fdd8aa4392e880a315b164b828ea9094e9304e4eae15fece5986f51c498db051ae9a8607507fc54f10ff2f8d51aed1fe14df659065d38143fe4d7059ffc382bb4d6c94676c53c0fc426108e42a3c20e37b4fe847b65866cf057fa7495e5ce2a763a97a9a060d000a34dffa48fb90a5f5c684d4aefaa2d832eb54195da0f6acd94cef61eb79702fbac0bae02c3581b34efc7d8090767516afa3975334301c19699ada41295bd9a5d4d72b813f8fe4a75139b8c2c87cc15746b8c5fccaa83063665effe1b51b35cced55e427db33eac9d567faf5c420d94f2ffe32e1b7f15cdbf71ac9e3cfd2003c1afb9b5e9af94e1834ff62f7978f727e626954235c04ac415a3e07346aabde14bce17117797e730926c73237ff0c86989dcca8d1303ab7189abe4b5fdc8ea7926403887987739672ab1615a74cd38087420f801f47451f0d54f53a3f039ec9c31a5e285291c7f86f41364c5f7373e76846e26f41cff5cb00b39743e077d01c358934172fc995828973180459512eb6d1ea799c40a807846f7cc5bbde9ee9e43527cbe426dd9f039fa3d83f0a2891b67a068fa89e1c2d54ca5f398519cdddbebf387809c3fd0d57dc288e9119714faec391a0eee8191ec3e9a4f83b15d7eb1561918fdbbc801064816506126be758a68a86bc7a43b4a1d7c6a431f3c8876648f778de509a200b230de2760b9f935491b9f675901a881746adab0a154188366ea94e88728b802d0825a273baca59c20ef63b0e039c9c275eb74b6b2e76715deb9ccf482e0719c3fbad06b5e497ca0544bc7cf08c76e12485bbe3ed874ec864caf416cbc97896e106dc72e6589ee5ceb51e6ab4dfe7c0b35045aab780aad64bf4b8b6a0091f1022aa5a1f5b0d1198844085d0182ef551056a13834b019016a336b420fc9d1b2daa4cd06e767ad2b95a872353aa574a9eacaab06cea0433954e2e4345d6ce9e2fd3bdf81ba357d637e7e105edfc38f3185c4bf1eb523c81a8e440d9ace4eac19ed2f9c8f5388198d044afb16d643d3d44e03ce33a74fad73a4ab1734f5fb9686ebd4174b3a341b8b90bfb8ac7e052f2d0d278966f5a5595f9836f5179cc2be436ee22dd10a2d3163e8195ed15cbcf06368d9b68e7c90d8762593839859bcc2f22f71b357304b3b738d19aa2e173ff0dd3d705837dda6ac9a11eb19133fd5df6d855db19b53ac6e942fe8d27905118e4979a44d4f743096f09cdeea08b514b3fe8894ab2d316ea2ecd6890d0517c537833cf518fbc07336573a7d9c1083e1c1a9e218f6c8bedf36dc79e6a82c28883f6f767fc68ec274c3e18aa19f06790c36d128d48afc8778ed218af5f4ef44cf7d177c93c0cbe12d1770e5923df26d9fd071b866394cb8157e34a54348344ae400bad19b2d7499c72fd6721ef17b1616c4cc406c0f26081046a152a583692cd95649739755c532545bcdef7493950fe787e5d5df5492290a24af838d5e34b7cfc554ba9090bf6c8381ae679cfad2a3138f3b6f942085f6e3bbf2eca452429decb5e1f603a2bb5a8c59505ee3bc90ace59f45c8aa773e50eacfb102fc78797df2819360806f8dbe231732d774bedc3212898e508fe6763e34a64f2f0803fbd75ee1758ddf3315c1dc9cafdea4ea630545a5aefc50b6d40ac271e9ea29687ffcc2705f5fa7bf1f019bf10f5a5daec6f8c5af29a1e694bda6331dbc10ccd7523cc3e2e46fa963f016e88b138c1548fb7e0181b8be0ca28de82cd930bbe070529a5ae093e64cb17db5f893e97d6b9abd20662b7dc4832988ee9837f0c294fbf15ec807a70f3af4fdc69129e472f341174a09e4293dc79bd9215ef5974cbc69158c2655105192e3d17c4e2843bc8b0659aa80bdaf2c9c9cba413019ae738678fc74d2f4cb2a03054d244fa54141325f6988079c1e79ad9637e604dcfd5af724a507c17edd51a1a1a179688e79a57c0a29f3687d1735a9f5edd67a48a733f88473b293b2b32873fff5e2c04a1fa43982e1ecc8688d93726b113aff3c548b50e4b3e76e645b6455d2972cd9a50e8ca63eec9c7191c08c3d0f8426135a3bb3dd57afbe70ab1d6ab8b10260d0be0d336cc3f8e688b7b5e5305a4f775f31f3f4a22e53e3e91d70806d4a97cf2f7cf1184f4e6aa51214134126d4c2cd54e4446feb115f4cd0152a057da74a76c410eff56ec9ea63d09f1a75a52e9dd37091b58eb6dceb6b185e6683833567d4aba97ce78812743fc42cef09702b95436c577959b49ddcedfb5a5e4ff88669675f427205a92e7d8d0bfa13eed9fdfee0da1c83fd0f1edb2a82a445696b960f0fbc6e04ddd85728f366d05d823ab3b53b7edad1849f62759063cb7efe893fc3348de9939305ef596150c4826f3fb0f164aa3560fd14165d5fd394ac3121b40b5889866953de545b0d7def804defd7b459f563abe0809d781de5350f9fba8b17852d4f14f392b12e292282b1979bfceb3c5f4828fbd6c5aa05bca0147c19ff94be8a9ea3b23108886fe36a8302e156335ff813ec6f4b05aa6b2f662b33769b8576c66e48d51dd11575bfe2680ac7b4ec31685eff6ef253e1352315340fc47fb2b820b566281580fad989a196dc61d41dbe4660b41e6ec2ad607d90f7c4463a8d0f2e784e4e78481d7789e65dd87d85a29763125fe051a4359d58043a72be2854c0c66f7b2ab4b02a312f48ab683fef230f415e36f8e11c97365e6ad0e17ddd9b6f40aa87048cdbe2ef5006bffebe40d6864d6f63236f55dad83fa51f5cbe9d7f645721d7c9b4658ad714b4483c6ad3d287136246a1de6b2119f9d78f0bfd868a96a4dd270814287a0e7fb2313178fbedde8b94028fcc04a7b7715517bbbabe8473c75b7eed3a01bebbbe6370f62f79ff377ee53454cfa670c339a7d3183ec075e2a864ba0cc2898e25a422796d7bdbcc24dfd7a4e0f1a7e029882ca21ef052eb23d4d32cdaf14b1820209d38d41724e49bc99e095fb92810388389ee9b5fd46b50045d99793654046d72f7ecec5e4a27abcf21a0f8f50037d094b16f3a20b52d07a4a6ed18de516478240212b521b3590f9d92dc4089c89c45bec8e347f848172e9f48f480aed0ad896102f18b72c7ac057ff549e9348ce27e0d787eedc9deeca67db818717cf172d1ee5ef9f192557063eb5a95b2991bae93af042e4595c275ac94bb1b053d86ebb6cf301c1fe11a011014973157546bcfeade68a6e588ff3a84d7bc872e12376d1f8a008d1b5705b6a06b66bb96da5b97715a42519da46a8043fe9f61d45a3f5eec23f5b8e205af40fb99b6f4de74776e8c8dfd87683264e5635e3f86b67e3c0f569611d13b8a488fc827cd41a9e0c653d6a860d3e105b15be54725164226b17384d47c3d6cdd1200dfc3dc348f61e9fa80e18a73b5f8e5df75af7864cf17d2f5702a33dd30a51d4a0a7ad326a8f42d0cfde30de3196f0705029d4ce3b294525de7ec8957feed454847343dbec25d9531f718959ec71bccdc684c63db7bd322689bd73123fc147172f94569a01ee1478def4077bf8fc1657b07b57739f302e193a2ae2d1efb508fdc73cd71748f7f42a7f85dc124957549d3f44351df4917b5ffb0ccecdbed83548c5dad9d14f247357f0dbae9669f0a1ad28c62679c87d6997304a6a376fefed7bef9d74f4e48163eb174dcd9ef74a53ad855447ddbd74915e0c65d9e732e96da4b852311778373ece2649350cc50f7ad18b0ef8b706f86a6c444d4535b86e05dd7dd2d095d7d2bf95ab81e09121ff58dcb1b054a26fb8d5bfd9c603b4a7942dc1c3af7c35377b9ec101000e4309d19c9c05a45be383af36c2db4e2d7bb3c1592d1b2417f2cb736437a6987514f673eaabee575857e6f7ecd642e114027b556bae33fdb9269fe38548c7d94bdbf8d1da188c9582148b0f2ae491becc017087bf1a41608f31b65d5ca01a653c5ccc2a6c26b2fdb40a545918323d62420c8e867ae40effb00e6292d4ec7b9e446d87dbdd968e4097ef806bafa4efb705a82ba19676fe3c3a8c126e34eaeb78a52f61d94a290a2f01ee6acd04689e5be82ec243e8c177667fa34923b59ba9de95b2c2c4c7da36652e26deca8d502615ed5c5fe70d52b69edf9b01bfcf93d9e49fc9f92e875d79fdb720aaabfb2b27f28be0b909ba15bb63892ad0ef262bf13035330e6479edc3938a62097d1a23db81916d3cb721120157e0e00276678f6b4624d9095142fd13d3669e3c54fe8ae29f859612c288341158bb652b82752dc5daf81125d64df18e7df3625466319341a17da002d451a189937a369ea1ac65b7ec758630bb114f4c7b1bed0557c7bc441e49236a0886c5d2572621d1a7781196696c1b306b47a6f232fb6b7952ad1269eff540d2aeb5409f0bd16c3fcdbec7cb887ffa7447448a593690fa1f4e4bde4c8e43383b267c7375f4d36cfe2c16a6ba87ac2b88cf11c55fd8e482170a5fc3e3e9bd6f66c19f6925fcee292e6f48df9afd3c172d8d0c2d2d4e5b1fd2fe0363e3a7eb0c3d47fa9017413eef26d77e296562368b56edcf50ec2fce18d2acd97f8f66cae418e988dc0e37d2ca72e70c2d3088b6a3bc25d6bd2650256286ff40a08f9331f4b92ad089596b23bebe235f315e741b2c7dce082809fd2891c269ac44c518d6a9ea0fb2ee32caeed6fec841b6aa5bc364babdd34b5ff9f1a2e1461748f7bff9bed316d2d58ba2b477ac85b50f0ca65e1ca1a1b74506162c36574b337545bbad8015f158e3eea4b0ba360648c2ef276443721e0fcad4d554d1d4d70c31d0b4129e93982d86236e89d97d4f7ff430318bf645370bbcc2629ae4cf7df0e81079c3a51b4b8ead25eda12c6e1032d0f93ad4cbe95a0d7fd1f21947296ef1b1747aef5b4f0fb92503cc9845f9d5b7a64f419ead223bf520dab43c29bc47efd91247f6dd9c7b3f8e6fba4d41afb8392aec617d719daae280be2436cea7995c817336046cd7e1c24e7c74536464cb6055298a939327f3187eb2cfcc443cf1220232f24495641dd95e8d602c73c732c12e9e6febcf2d9968a6df2b9d06cdba18c0f54a7f653e47f8ec67f2445b628f9f23ef28ff79ae63788d1356ffecbf4302c923e7e35f16ee54794eceb9c44f31e8a20ceaf4cd552a9d4722c56aa1e4a07a2ea546012e963a193300aa05cb15f203972d7482f1908313b176ec29589b5d9165fa5247830027dc192d8fcaaa8f01a6e5119e5e8bf5aa85e78e38defd92c9d5b0f5dc23e4ec749f7c0b9161401fe24141c27765a58b6e52ee7b1f424568b097785e123de0bec8f86a652de0ae0a00d07aa82a25ba843a6bc1ec18f73577526a4c499d316b1d8efcc74ea33fd965ca2d9677decf14a6ce635bfd18b1d403583a00597fbf70d2103b00ae7b8964d4d655be17e7771defa21cd3864973ef129ecab80aee8b75bb17018b86e96b3150ab647f48286ab5370c3c5df027ef79f5e63da437d58004d54bc4f5c25f14da0ff2e4dc6ff23aa8c1a5c48a5f2d93eabff4e190ea8bf685dd91e37f71ba0259d4492931f04eae06a36c229f9b8553ff5d14a7271a436a2de6040b8a9b140a175f5c95728a91499b86e6bdfea46b8f25185e74f39540a1cf139ff43b4629090d905c3dbf811befd6ce1a43dfeb0cf1148ba3c142fccfcb6bcc2be5c9e7b33f30e4d89fd35aa7d7b2b2137ac4eba3181c83c115d8756eb1c2d0f28c27c9fc13b6642dfdf22f91a369b5dea0cb8c50f4f6b9c07121eecdd0dd34ccdeb69f3e5be8369ab4fdc4987ea5d5d3102fa0b16cb257aa2ff62a32de6660366882a636730ea4add5a78eeb70098a41dde2eb4c8fa031757102707b80056d5f918265feaf8a1edf01502aa0d92b355939724ce1d805b47f01bc9a9a7f3d491bc9546397d02716dfab820f6960b2a2066aab7062dd87aa10020045727f4429bfe73ea612ffa616ec56d340249c09d16f93eee2be27d4441ee6444425b2d6357ffcaa5f53a5171e3986b36c5e19bb2d435da9ec53f92ced49a88a5bd5c8e37df3910e9771d0bcea16e02998924fce2403fcbe5618ed5626a5302125f91d3c2d0bdd437a11b92b4c011f17c04dfa0c36ecc9269a9fcc5d335f0dbca8983853ee41e7e3343686059255af37f7ce72ed45c3bc32287889d02adfa7afe6920474fd4a037365265bfa8924b7db89ddac8d41297a258298255d4a7cffd7e44ad010b11aa6f3e3a74e65f081e8d757c9745e5b79df741bb3a6c7e446a81c6b79dca97980e8a97f39b742827bdd2a84afe97b706f8aea2fe7adee62bb1ffd6582cf922a89890a6ee0685134721b02935fc828086a9c95f17ef96f980ff043d55f681189be32410b055f95d376357208928b6de9d9b02151e877617cbfbbb11fc775537e5cf6a2ad9862e9abd0979e53eda8fc9014053503cd121f8a561ac42d1044e34a8403c3c2f87e418438131862d8fe10a524bb5eb57e2f10ab0eaace4ac396b6a64187f0dfad0125a54f730be8459798a88cc76d3e563bf1b75a8ca35f62d1b47659251357dcf47af606e76b40c21921dd8cc8d26de403483f675ee807079920cf881d0ae6e5e1c0e545198178a3ecab0fdfa7ca96c80e657781efe81789414f06191e1065eb112d3fa0c7f6e3a5aa160d44b23178f051fdd0c9e5d80fa4caad415108921191a4bcb82023d69148d2702afc901e23a0d6f6bb3e001fb6452dca9938d519bc647bc7be56a6e4d8713d975eb8c6c8e6942359b9199bbde7b70efc9d15f34b7f10d507c06b7b8638b138c148280c063997df43c11ff837253607d705694e20e0b6c1ba2a47b7d920e4349c07f51b1eae377d9e478fe3939792db456f13647a58eaf6b8aaacf5ac45cc01847484d8af57b59de281738f6a6d2785ef73b9a480c866dfec645952896c911b11ee053d3a5b812ab0b0d5c519cb6896437e4822d1fb4c47623ccfe1306c6e1ba4d7dc9ff676ca847a1e026342cae43d21da1818655877418172c1509d3a93a8dba804daa99e87eb6e8e429c6aa1955ddc100ee0fb74fece5e88ab2c301f8507c80d59e2d18841a4e3087c08c971f235550fa6e195614211879faf12a48bf8ca3278944a6836e4c0954f5a58369a046044c3c2b2a820d511d183fc18e22b5b41f51262289d2478f3b4eab3d05e44b00fb5edbed38a7145b22483a66faea6fa4aea2b9f7ab742fe689665458cb51e6727ed09b8481db24457e0dbe4d1b739c5566d2780a99f66730b246fbe398d8d487fac4817ae9a90df84595394958952e826d1801d3d41452818bfd26d4e54359b3645c33f6d1ac13d8060a08a6aedb79108957b3a5635b0e4eb5c8b2e9c57f994f0a35b859a209557e1eadba243f8f7a8d6febb05180f0adca77e53a78a810b99271ba43c2286060388c9212f99517916c8b795b1d5af78e1ee01b42d24dc517d977fe12e6fa18d1b523e4ee9a7fd8dd124fdbf38ab13777cccd9eb19f66c885d5c443bb68ece1a606578c1ef765e2aad75c87b6dc249dadab2755e5893ac7917d2569f4dc5d0b17093aef16830cdd89598cc705632ac9e8fe5325026519bbda23f9e1607de8fb331a8ae766a540094d9bee735c65d8764917215ed8db230c361d8989181169cb899afd1bb2425735227d55938d5ce0d9d3045701799c0fd1a4d983cf50bbf24615538cdff42f36b6d5b80bd8efedd23d764bd3a34862b161f64ab448be2c56ab26ce82822fb96f84835a31c598ff46ecae0ce796bda320bc2d2f7141d5a6f3c0705fb8713a38e3dc9c174c8f7494a2090d53dce859ee0c253e22f756ebd4157f843fbe0610500eb8cfac05b98c30860425745a741e2dffedbfc1408d66b677d9c5efc1b362206cb6d543c95645254d29aa1be6f382406c210b96aefa90d95a4e56daa8792e61bcb7f1e1aa3d22329f47082cf811405330c1ef19d28de702aea7341d245cb9f554b6d8711e2826b705ba823426d736b948d6a6c35efdcf3b845ecd7859729f67c56ab904eff26bb01601796d6a38db49575c64c3d7890ad50e428b39d29bbe3b18eda4879902ead131a74146b986f1cc8e3127b4b7895c1e8f80d3d44ebdee849b400520a2ea6aab469324ae2a78876e10bba476cb9a3d44ad976f12549569b1c192bc9b2969ad1832fbd3c27526605cdb2eeef4a339ef5d1beca7b5337838d0d4fbfad913f7ff8108711b13d8394034777daf467e51f94e3e45d04c674356e4bb2ce0db242b436c4eba301b3fbd10f069400cf199daef7fedfea15ae4ed2710cf7fecb3bf5330476f5f08049752f019f115e3e1bff3df2702a6dcddcd4adcd9c1074690920427f9d0881f6ff18a3271bb3d0b81184484e01de54ef14cc32ddd2582f03c0d704ca095b873fb8c330de8ee5591e1d0c8175ffed9ddd1c411caedf594e5da577965df2036acb6ae6aea8cad28651e57d661e6f8cf108c93a97c27ae9a28a337f8bab974911923514c24a1ba4a1356bbc25d362d44254de9e5074ad1bd48843f6288a487e0bb17f7fb1d1bf9d394bb2f548f9dfff3923e71aabfda3439323ccdb7353f46483c26e957049fd6988f940576587f641eccb66eedb074e9f222e17e180f10b8d29b7e15a6d64f0469a52beba149ea9892a5cec27dea221f0ec94b730b570dacda4035574851514495347997e86988409b301f4135a11d67685e2278d51bd47d9c37aa23922e5f244a7ae2b62eefd58937210a5fb4abf7439053b58dd7008ce3bd3e4ec6a24ebf0c3c1aa77a972a7e276fcc017083647bd137a6a93ecaf7138c858e6813926d9bfed23abeaa245f466a5d127464ec202797c49596757575120a63ef372f06c0d2f0d5d98f2910c1b39d27366ab258ebfe5f7a80e812d1b307ba8ea6f19a6c1275d7fe0fdb5595c17552088939aa10f90bdd42b4be479c1a56b6b03ba80e8951918afdfa09098b0ebaf0aeac56e7bc6fc8692ba1e0726d4b9515fddbe239edcebd5cb05536589549b3b433a2565f42ed020b4d217a64a6da2990eb3f40b6d9401c2c2f93e3698a83bc4a3f2373dadd11b4cf85fea2dcc74a8012ee3df1e46a5cb06ae0e7d47454322dd646d31a72b9c18462a956a46a4910ae0d1b58828276e9081dc8ccf69cf42e69ca721709409828ccfd3dc06a9018832b1ae444bccd0588c98d4d21c248ef6649b55d5e685b80608aca163a6e2d44bb2f17bb3d097e25d4b149f8cf23409bd066c82d3ba7a1a675032c302c59ec787e2bdde53645ad912f6de2be2cd684dd955e696a85a02af8917b95541e8e48d04b83a2a588c486b94cef0de9cfb29ff36cfe65c7f8368eafe0434417c27af1b837c63fdcf9590b362c4b011d37b0258ea0493719d0bbb97ec16faf0b84f4dc1d6ea5f113d7442fe761780db603b3c0903ab3f3d9dcd603a246856634e62b4338fd30e7f1204add51e76dd99e626c48ecdf39ca879368b28b28926e35b848c7be1f47f714c7bb61abd5addfdd2ad6069226c92ca49f23c8d8db8b2f8aad52539a84b8ed939ab1eaafeadb27dd31d1d913ba4305b74565e44a6531869a64a0b3f3fb7e4c00d5b2528bf5e7e098eda91ff7a9de37bcd90bec6422b6788fa74d77dfc584af66361ad412ea14e76b1ce94e80a39b6e8794f997824bb8d453d15c1311953f00e3ee89dc0a6f3ab753abaf7d3844633a18ee81a3d9d195bca1f0d34abf66e636b3aadcb9aa59b3ff34342b54af63eb4bd63c80d23beb1844ab12ee61c01eadddd258e06d1fce35b544fd8dfe9955f38a2784a01cb786e9378b5bb61fc2adc6cfa028766cbe0757a8583f7dda37afecb5449605a295b53461d2775fe6854be9b4f9309231a94ed88dbf87dfc8928e29754b29ca901cc82a7979a1edce76c06bdce320b2cd1c4050c1d87c87dc2006bfe49b4edbf27b2b7fd5046b6ef7e027e82b4979aa33096513ad337d929e79febafe89c1bd7ae92f5acab7ef1ff1573fafafff2567b45fc20837794e38e6cdaed0605a14ea56d6438d24b98bd23066e2814eab83be01f36a2be16908bd20c4d5b9d0baf13a579ec29edbeaa6f1ce1f7556459361294d1c4d40e6e0fa6ef988048d75c7bc9056da0cbb16f6e0cc7283cf8ce6b5705f5e4488df1f781361908c9cffa85e1966000da8bc8a437bf9f3968f88c204b47f0ff2dffb90ad4d770059d0bea54d2d910f3a8d385b4372623b41a8f3faa5710709610b3218dffa021d5e82557e1a21f94b4806c5fb26a54d45bc1f44c085ae86c87377d7f2362073b748e5fb547e36fc376e505d35dc2891eae37f9dae7f5ae439ef0edfae9cb8ec2b60568d1c0674775e4a866bc6299c69f6eaffa45231a98239c9755819390bf097376b85aff2238391746962387fe05ce762ad4a39a5e240228cf4312b3893963a5a2a270b19ecc1d472680c2460aee5476b5f08480e967006d975d6493cb4be6706fe711cf308edbd9f4c065cece6df4a440f1c9afae59ec97bd570a61079c5990e53239e38b7c52773b64a69e5db7a82d75a94486dc4167c43f99958217481ffd384322d1dc7f77b96fabbffbadc06dbdfaa93907f8c61da9f06a5c4dc4b5693709d875fdbe99091a0ef3cc4b394df0a08f90a3eb5ef5335288e41bd417354f95ad83b399d3eb4b044e186995ce3a942e85c862659c920f4f8f3b4a3bc23a684dba01252dd985b4e2e54ead877ab54cf6b05684a7daf49ded7bbe23b96145b6871bdfc3567d0713cdbdb59bc460e348eb23b4f062c0f2b361d5dd8ae39d85a2bb019ab7e5ad7ca42a64d3e79a6cc2cfe5aba29261a863b9da8d297d7640a619fdd91fa767165b10b08016b9be9099a373328c80bb9124070422f59c3871e465d4d18c638b16a06766887339bab67b2dcb5d32f6063ce04041b76e1634572feae54087c7b9a75911792bb8ae8fd12076d409289de52395553f27c07aef9993fe06322ab73fe94ef81112f29f7b198ec89ab3a8799010dffa5c6a24541cfc80ae647c1a919c11ab67a681b4ed8407bc498122fbd177f369c977c448e0ace8711a925af052419b0f71d1cff5165f9c8d032046758ddf626a7ebd9c111c5f5b41911f8d3c1395f331070af7a22a38003c670c219649e857372b69484d8e4510ca20a6c5b959ea1948444fc8816997b3725828a33fa69d11ebc5ab8bb3708caa5041a49fe0ada0dcf3069ca452bcd21629deff9b24b138bb6f5ec6bcc2241228763f5c100387842e5582eaabc900caec4a465de8a68c43b721930b036a7684d562ee618b34904a84e3f098fcfe7bdf7138fd30800145753c5eab85427ae0ae87662333f7686d33013acc25b4020f6d3991d7a29254548906ba59a12f71e8a3c11b9b6f5dd80a598d46fb2ec9bdb40ee821392d943fd91d8f285f6d58eb87decd69762f4d77378b60c0b50e209619762e2be9b3b14694c82702d184840f64c4e27a46414bff6dc834304735d82c3d7dcd7cfc570a4752bebda178d7681b7d736e5dad5568fe05ae0fa9ef1803167868363f1db789ae1ccbe7cee580890e692f763c4d643fa9368d5a15465f0998328fc89e2977c16093c0e956b8354428a59c0370588a34092cbf10b5230a9958ff0219b9c6998f0fdb7d0a94c6a3dc8ec0a9f99d9800213798226becf7a1f182df790fa7be05c687d1ee682b9c41017b6fe650fafc34e8db28b6caeb73d2f77edecad8eaf03cf728479098a80541d381337381b93bca32bb58ac9fbd079624dac1de3c7e6f6cf624e66b3fe5d063e3a56dc10e8b70a995d5bd49b213e17ec22d3bc266c310e08dc06a9f4da5bc7981a0c9baef243e9b54c956c27874fb1c5b5a90f8d8f1d62e51c94af32ebf7337287d3ac9a7e2c06ed135c7df5fe2caf8f382b0a053c0e2ea7d202235b6e458b2f25d04e400ec0475448bd07c7bc4d6a4fd405548fe33cf1d94e8f4507db6bc342dee9d6179861dd67dc1019a8d257331b178335733ef7a7aefae8fb360f1729ebe7645b21a23544826eec11bda80e1b8cda6e4333501cdb7242c996a36a4421be2bd16322eed8c8813defa885e65207337f6d498f6e0543459107cb775b3d0bd6170c35a31c5f6d615c529b3da85f1a40609f1ab761e3d805859853719f260f30c2bcfb3a81d65bfa66f4546ec5bd07a7d692347bea748491ecb1c3ed89d6606d04ed6a6539649e313d9df92f73574af4b1bc122334994834366cb46bb2ddc0a5b6393471697ec26110e2acaa372a64dfd0572f02fe827d371c12ef44a43fd5fd75011999f668b22d3866a81377d29d93d219ac3f327cf2041eeb6ce000a46c7df538c2943aa7f5f0230bf3216cda8fceb43953f8fc9e225dad79d0bb53e6a3144873f43f8ca758350260d9fcfe7f3d6a37289515efb5c31d337547cd71f9b5f078bc5fd4b0a752913c734aa1119f976cee74080c34a3d2bc6847438ba41e2b7e660d52567b5b129edc302270fed6fa0cc711700fa67a0cec73ff4f5977a2a9cdcd7682b12af8d0efb625f59e70f826e6c4c81f37adf543db69f5afdc2a918e089d4eaaa4a7b5fabcb467d5bfdc88e660153870972a00a20a8ec6bc35ac9ce33d74e6ecaaf68b95171fba5490db6e21daa5b4eb47dfa2c8d6e3284b9a3ca8eaad4a27270f85279a73266f986d3bcd14b59948988abde53f4db855c9b5f5d838af1b328d34385027508617936abd5b723b8938efd84801ebc42f83a31c7653ae31ce7555a0d7eaebc8fe5d7a9df30fd46113a8a13314f6952f4dc60f5030b2fcc3188c3bb253aaab5055882ccfc986f34e52f9a39de1b0614b758f282c1fe6f18a74a7083030dff5bd6ad9354257fd160193572e46724262fca3857d52fd9f4e40680c1f311425cb8c63ff887dc4728d226fe6576e8191d96187a10cc7214c355d8b0fce90bb7639ef033d469d35419621cce350eccc8043aa7eb676ada7f6c9c916f388eddbf10dcbe5856ade8602077156f285ed898bb58f0e66b1b56d271d5ac46d9f0d6c93a89e35e5c63602a721bcb3fe8d50eacc154c4b31e85ebac08cccd35b27e206b35c716a06c5a5c1a084f83a52db9f10130eea65719ab739f4f93745ae34c0c495cea7d15b8cec927b3c842c4fcdc24fbfc583f4c589a2bb19250fe2cede27290918e089f5ee65080005d859eaa3baa0baa9cbf750a221802c46096f281ac1bf4b88136ec7d4bd5ed2e494162bfe6e56f24464bee4d9315c63b9e700e9261ee6e2a961de59fe93c644b0609d1c44a71c1f2e0c9816aa5a5f50396dffe27e27f7aa49d444c9df5f8f713d7d3703f766641945fb494de625c5dc22396b36d5bf5b1ed492bd0ddd618c1e83b0dee99a6d72ee74cd6c0a96f27026be1137e778924c62807c66133e8a1280b504054ba98bf175ff6fd12b5f66109b130abf7f86d04b740c2648fceec1f3dfac999089fa9f23752cff5d973f82417eb1342bd8e3616848361666fe3238eedb2780ebd60e1f11ea14a84a1bad7a6ad964d68279fc28fad1bf2c1b381390f64da3910274dc66826497bdab6d3614fb817e978df05c939bea4ae7e8b0c7e12ef87485701ccd020ebd863056546362b6afaaf725d659081fb210c618c17d4eb4d8253b3c3f0ac7d798ab74e752d42c69ceafc389e16e08d2c9cf2e03555a306332e369fa489d99ed21853addb31f30a091f702641dd7e06f30c6bd50e275e8612577b4b7c373fa81369fec62589bd55e6a581837379b73ac7796b20aeaf47b2139b49febcc829c18765bea10d22d499c2fce0e315ffad48c50a3c1ae7d80e7120a61962d558e48055c354b5863644c4355d46bca7a088ea6593a700065ff4e493f6ba755330c22d8b7131d1fd7d50c8e9b0a047d974d4dd2eb66c163c9f60c67eca83ce111c813ab4c7090668eb61eacd997eb41975ee4a783925efbbf6cbee56d19c1e10ebe2f3e08b4e9885672d8d6ab742d1bf3894bf3388ca00a8ad5b41bf1e3b92f9f1aa197c3bb6f58639c42d2d7916665b16cb2412e33b6e6314767b5a515d3adb700288e504caa17f1567f8f4d985dd6c7622f55bba6acae8598605c9dbc249238370e791ce7ec013698c6994468bceed39ffca0e1dda357202b6985d1ce2715a51bb022d1441d4ad9ef8ed125ca2a392dbf876ea493c8d0651f3fcf99814578d706f0bc20642f4a1949d3632275030d82d1e987736fb25ec504b4a60a95e30a974f07f96131ee34f53ceb5a6a671df40f16761b182cd0d40f563969ce66179c1beff073347744b0bc5325345c0d24169ec5d2e891fa613cbbdfd3cfbc3c9758e97d25e892ecdf4c503c9bdf627d6a5deec057506163aeaa6d6258bad60d8a8a79c280a5efd95d55f182f2b09b5eb2dcded13ae8186da6472aa32072e27e5f46a2e76cec2a89243c3b284cfbe8b2e810ae850c7d60353b35c0af3176a9fdcf338056dad91cbf51410721f28b25ceaae6fd1f75460768e0d1f8760997305bae22e73194c835470ef3b123444b22890e6ad180d1524c8268517a29e7649d482b74848998b13a7963ca7735f12133bef61192ba78f235055310923ec98ce089b21684646d9514406a6bbcf4be39dec1b5566dd6252a81217bf7afc2284d3754d9af6ac0322213ee4e67bc0a6b82d946eac20451a42ffd6ef91141a064c6b3277669857f414338e3b764348d582bff5bd1b61f86dc927dacb2ef5d44d77e198a7c9e8e620d4288cfbf26fdca946aeea8efbae73c9a2692f9450b58e1e1f3597d2bb41d564039e7b69aa59fd4003d6e591aab29e6d60a6ddf402bec0b1f3df486a1293eb2d9050e4bc47f5b2747e6e510ad284744817e7f28f3d2fbbcccb72e61275bb5334044ff4b926992f4d1e139f00662c384894e7e844f5c7de4a4bc11e6b648de26238b1caea0c1f413c3a51c06629c4e9065645c5b0756344daf2ffa018128f779e12df638dfa89b00fb8648cafbd7eeaa101db53aa2f87064a5e5a493f579023b7e25aca7c31f1bc604512db4d46b819dc21aebcb8e6b24c455d309ab85219ab52f9e5c1cebc4e3e32675f917018cb5140f1959c5cb0e8941d48cb4b195e8345500f17d07ffc01d3d4649d0b47b66feee128082ba39fac208fc4c82a344a977444197ff61c68071fb4fd463e05339034d2da2f8aeaef0c2372bc392238de7f41e1c072242e578f79aa45525d1342e4381cc6dd83121d76c8d65ea4e93af8962b6ca7024d89aaec16b069ad9956f4974dad5017f3008f7ebcbf10dcb3beb01b9263a46a0249e048925a99b82357eebab87097aa08e57fb8ec71eb051fa966033692afc0c7d991603f29c0a851806c22f0928edd80975e605f4868f9b4e741b612adc7cb10a65a9351c2705ba18947007e77fd924294422bc5e93b4b314a09fe2d8c9eb4eb4dbd9e927c6e7f2b263168b09b1a2208c87b4e585d37d71436b7d29dbc2279dca9545b4c153c44a5abada49a5cb22e337c2af75766b4977b6d53683eabb59373d6e9fbcfb92c372247f7c22d39777ac3cb85e47e50851c5678149d1c4287f215c74348578676908a584b1cec575314b4413d6279825d4a06a45a45117efd4b2b3bb56522159c95415d944ef25df390a5936ac720036d4b54dc921d8967365e4358973f9f306863ef440303a8f140fb469ca4fe6ef8037ea05997952eb72e028e7c3bc79ee43ff34dfccef23a8313a9c018e47ce52bae16b57a832956ef888547c1219aa832171d65db3e281ae84b364209b51c68899210fb4af0cb630720dfccbbe1e40ba5cae019e9682d2914ae392cb11478763e146efcd3fb8c318ad9c8b83ba471d97029e21c78529c3843dedb325e76d127e06b13df008385433247c705af7c1caaa04dac59a903a36e396552a47ce13e28b9660957f30dd6e0d3f7e8f4c748bfefd996d1130ebb0940249508452cb0ee5ac08acc249e670d2a914cda51a2ccb02517beb9e42fd9e14b547ebf2a6a46de92207da12e13a301663684e8c24f766f74e6583aefb5f3f6603936c0e55f74122d27aea1ed38a76fd3af6d0d25756de18d1ae25177269f4ed81a4900a2f8ada1ecd7872ffdbd1e61b98f150911959dea256e8699fc9c1ee392241842e66c0bab43efe436ac27b108855bf417362c562207724e5d93aa476500b4d81ff32f09f41b67dcd70ec17c6a997717bb35474cd9f2e9540c06377b0bc1737a938ecab1eed44f3515cf969246f8abc8508055892f8e7f45fa88367370346fd22d03e687d13f706bc72bcda9ec5e230d29da82db921ead02982eb5ab3cc658d1e41ff31f65acf905b2bef72c41e6be385218acdf432919dd0b40beb1cdcc6d43c0ca45a180509b07f2f2ac32c3aff8ab63bf6e4f3491349b3d6d58e5136e4e762ee771d83d059c6638444b610095671fcba4e6811d35a538ca756d34f2d1c5869e9a2a87ab7412f6eef24650bd4093afc5d59eb8858952e17f6917df02020a95100ddfb704341e366ba18e3a46c202a408ac3cdc2d2f0af958435a90ea34d5c8628befcaa8ec2d95fa67c1d163e6d418e6f51f58290f9a811c8aa8110737d6017fea340894746275c0d61822a873a33cb3e05395dedf4a3ea1fdaa1a8b490c6a6004bfa7e89068a3359b3f988d2a450fe889d308b1d992e3797e4463574cbe7582351f35c9b1d375f0496e58bcabddfcfc4cb03d46383ea5b59127bd3974101039798058899e4d5dc14cc85ca82636e578e2b1761e6d1b8696e757c51dedefc396ea14d2f534fba707acfa3085baaa1ecca3ef4554a1ad553f52ad1d6d693e5d0057bd89a025a4c57c3a8cac2a7275dfd6bc1131a3ce5ab0f23114624d5a5c1b3e0ca928377d142968828d09e679e3beb3c0d4ef07d07fcd8734688839035cc6e3e43ed04d3014a7d9a28f44c4f4ee5e205b435687f6455a6eaa61f26cfac5f1bcfa158bf325e04190cda3fae39d1d03cf5a7a7d093633bb31e21b1c2d0f0c45147614c6d5ea01480c6a89c5b8d7e04d27056920ffa73983b54d5bf3fd2b90a2637ac8fc3798167a5a93f7885783061885e5472ed9bc11aa38eb45c34f9cab1100a37a8976a43c7b2c4b2846ab424722a63344b7934fc25082f76a5a1174eeae87e38f44bcd1bc6175aec8ced2d38a77823b017ee5e0e7123c1122ef38620fe4a093dbc78e69bb16e5e0935f3397697289e775c85e96a12d853be18f6cbdd1f27b8b40417db20b3368ed1909196ec6daa57880c64cc77b634720b4384a4e9580291b7eed635de87e751d3a806a3ddc53db974c9aad4d71e04266a766d018329ea52b1233722fa07d032fe916d4866b1c6796d5dd2f599434c225ffefef201006755a763b086671c6d8f5f0e285749576036a4e2c7c572d0b3a4e09d1c2ce0287f8b0e2f37245268eee990dc3637a4926e5b337fba0ce1a57ff17d8e4c371c551f85e52db1af192de1f5fb05e5cc4c63dc31589fec5056b8906dde6162e2e16cbda27dc682b8145317f2c6cd4d02a7c86182f95b25b55b66a187e5cb22e8f4cecdd657a80996c0b272aead85a3b78c644c96f5d7b871aa43aa7c69565508dd708bb8ed9cb2e3c213aec51695ef616b506f756b088af5e27857e606bd0e458a8e42f37ce1063ac192894f3b8f318f28073e20a07c0d45983a12a68a0070d7d47f7f592372e46daf52c7be3f1c3be5f749e1ae8e472cc93aa509f6e3c82b70f35ecc3ae089e8a7f9ff6de2fad60b45926555f5ea6e77df6d53bf388c6aa9a642c703a4471f0a30a20f0aaa749b5cd5c1923cda17dd52d9314d5fe65799bd51cf5f35b50784d0bc7c3f7901cb410335c08f684bc02f039ca1f49bb9a3d577b51287b6177757658ff82c8aa1c4400395cf57937888f26d50b8786ebe0583c74f4e604f4099342c12dac52f286d4f5c74ea8cefde9e79725af970352cb881599730661d6c8eb9bb9ee0c3f32442ee520af8840dc3024853c14a7054cab885701e7090f3567630e2953de8738ced20cc8b1e37cc75f9379fb2402eb04edfae206f13005d53525c13f08f5bb674a4d02b26400b2c3e64494d313da8eb4475c0b587b97a7c3c9da29ef80bf8c63c7956855e84fda4ba7d0fc26022c50e186d75756c93e34b15a7baec6578c6892ce0bc84746d3bc8d3dbfa517e81d0b26510070db447597def190a8d7c84b5318649714cba1c9ac5d94986912a4f86bf5b9c575ec77809677434de4598847a377f8c26e7e92ee88b2c13313e3ed682d4babf480aa19438413ee0878dadad90dd2b90283f978db9afa2737b30ca976effdfe00a85a95b3564047555ae6e00c6dc4cb453e6637f9ff24027b57e84511cd6ecb0d1dfd4bdddfcc2eaeaeaf6f422cb6915ede9eafca13a4d9eaa29100f4ad931a80e961310b6a0414a64e9ea3b6be11d92a42689e77613e23a0d6fb2e4b6e0f7079ca929ddcf8b670b48acf9b5702a17aac6b5326697bdabe9f25add6cd2fa3c2053709d62bacb7a83883ab1217c45c8f464d3ac39e7f3eea36d33000713054681ddbf5e659aaefba830e5d22a3aa31faf4e80f00adef31534a050f2b41e90677bbe0dcd030461d91d5dd7b2345dd9fd7e7ef473cbc3e4c57311193b6063e7dc15461f63833e17bc63d2251fcd89442505ef7e36b183655f1ce7cdbe69335099d2fb7f284aec51cc46f9f050622576c67699467877f6c119cc9f6ffa4430e3b4f73394a5b391dd60bbcb0594e3ded6fbdb9de86fee33951ab806a5d25b16600102c7c5e222835ba694185bf42ac67eb0d6b8e6129403d6a12f89f0833e42f9a7bf690d7abe146c57aba824eb5c2917abec5f7663f06ce7a645b9756d97612c09c37401a44b72cf2addf4fdff28807127b09295eaf09f572e5fd58932e7defb045744f7431a22b46aea4b0ce5c57a8b1bd107d6eddee3c4f685d91c57452552558b2c6d78b41b2ee69d99bd83af278a3cd621d37647ed91116bfa1d70f514e2f7f8adb73b1929fb85601f5ffa1474ffbb5ad2fe684c51e0dab1dfccc2ef6690d73d89e8ff80a650f6c19f0fb759eb4682b5527987fa4fba931a79c356ab86debb6bc75aa601cdc4610e2999ad30438bcf447b1acdf1ca6014c354ff7d06bb7b8def79a571ba4168cbb5f7099032253ea4d63ee5a3f2cc10566021eae9c0c544d9de4778143934574c0db45cb606eaaca589da71d47c9c32ac8ca074117e9718e7514fbc85749229f55f06f307d7f9a4ea2724e4996d230e7ff0cd7b8d1004dcd1e7e5f8bfa0574d2b82cf0c40130cdcabcb8e9ec55ac855040c2371ca078892d99e70bd2caeb6e46a7f1818019b0021379cfebd6a23724f0355b916a49daf8d3bf1f8559e81390bc64d1775ba027a296270377a675715e4d4426fd7836ad7c6443c7b8f242cbbf8aa8078239e5bdce979d01114fe50aa17df1530e73a57791cc6d4d5e8ce28c290198bc14c1d85dbed62c99039c43b14b09c11c4a2eb69d21a9cdfc51aa2ea623a62ac46da5757cd9d9e4d1fd9fea3883d5f6812d763957cec9d987fd3072c33f33b2b4ea290a666b6de5b07edc96df6086c0c2dcaf5705c5e6683f72caaf4972b1ce36db31d7ffcf5a15ba0e3df209a5eb5e3c7f9b5acd9e463ec335acbef0185a736c8387e686bb520aa11ab1fcb0b8b04e691522ab524ffdab590464859c43389819c4a8de78e5f2acc654a37d8412e576fb30fc41964561d869de16b55585649754fc6fefdad0b1f8472cb4f9ec37370c7fc8334d6c5ca686d3c53629926c0006bb51f2b702a02663294b86c74a0adcdfc3e4efafd5876cb8c9290cfe852337b706d77aabf3646c888d6dd1a2c7603ba5c6cbd5eeca5bb633554c15d0532469be6da6cde81a2e5f65f3ba456554fcf165e1ef4d8b950b86cc2e37f4bdab2dcb86e59af37a036132a33cefa6d759f6db27bb85d59f75c09e373a60a9156d707b19964af69a6da66cbeceef3e5bc01ab22ddf40907e1f44df8f0e062c9caf84b5e789c4af040f44da03c655cbb80454633ecf3fecb7e06cf9859187a6a3bff5b1de938f190647d1245b9b929bd25a08917929f964c8b9ccd5ee80477d70c16e26a714b9086d75e88bd2830f78eda5b3c3551f3dd8f4d0bacebf590b0f38c2bc56430f0db464084e8eed2661f30cc3534b2d5adb19d7d266ad82e01e0486c7a288a58e1f33298a0b733b92c689543ea93e8494bdd4d74680906fda8bc3463b0206d98d3c9cfa16a0321e2ea9f9e44e8284a9d965485502fa7354592b9e198cb48c4ee2ec1f1e176c033dabb03e53a6202d65b5d4a61c9f8f88c4638342c26f9fcc32c70731f64834305c0f33c40ec8a34b6ca37542d04cc0df9313fdff399d5c76d4b903682eb259983a89da625a042d0c533751e02f4bc6bc9dd97997dbbad9a3652104f8c78e067b8db44d7180eb51b9aaf319e3bc0f617aea290252e69ee8efad302fdd9b54c8ff42c7039b2073eb6c5f2144b53ae02c7f2d3c6cb2fee12cbb4761821f848c945371ed0c91bef9d14d80e0e51c786ed40b7718457a5b6012f3689db595a3fceedb36762f46ebb30cbc25a306ce31d36ce8b5724ea4e949a61612f6df561c4ba77dbf9cfbaed1bb2847cbf036dcbf9b6e0e20b192e6e92050faa2c666a46d57425cd7a8a342280b085dc99580ff54e4e766b7cf70e73753401a2cd5831bcf4ba9ba82f4e8f0afef3ebecee8de4ef6077f1040727eb7df0db9c6182a64e2438b361b937390d986899a4a507b8ccf0e86c1cf552a3ffb2f959d7279f22be31c91d82a3cc101afc1ee137128afb274359630fb9a662504e18db98c956f292872e5428865d00e7c5b8fa43e3cd47efcf5b3d851a3f3a023520138847b45ae8f5d55b7ab84a2939075e6a373b5800d5eb36cade92bc9fc347a2103ab3f706d3491f01702a1bea4e5614257ef5811014663549f301309474fe98b90b60cda45a99369f8fafdf7dea54c74b2d37fd7833abce33a7d3fd5383133c2205554e7f872cacf04b4a4944a5a1928af09c2bb3c83e497379dbf67e8c464d7c10cbc1e48c43e4ff39c3fab3c30950aa494c18db016eb5aa0bb468a0f66d05908ae4a902de68824269f113fb4d4a04cf593494c81af4455d1654a2208b3dc1459299ddceb1f6339b78ad44c56eb5d3f373e10e48c22c6b1ca1d4aefc99b3bdcc4c99f6ddc9324d64f1f55ceb84eadd53033a00cf717c2f2aa477bcda88d86757292869960d215cae8b5d08923e23c2401f45b5491a81a9674b7d04b6bee671791c08b0810f6daa12476964806808f2490751f188e96484b11c55ab71861a3cb1c130922c52869a23a1bf41371e5dbca60d36c7a50383fa9727d684caff6d5f8aca3e1ac9c4bcdb2efa473a95bd7bc8e29df185891e71b1217b9d9fc8b94e63c40e9a5470a8fcf3acfe562fdad372fd17a2aa9efc3bbcc1da2dbd51c770ba5500de607080d36f265734c1103fae0a82b459f7c788edc9c9be4ff3f83a144699d1d9b20e87074ec2eb5b15f2b2c302ff58b52af9b6762142ac405777cb2c41e2ff3f118284be1a7b502cf04ff77fad7635f591b543f92c22551cabbbdac3a0df78c60ea08e9ae501b73f3147601635eb6514f598014f2004580ea27b9743c0865a71924bdc21df39ac94168a9baffeb3489e2cdd6c5352224445dfc8e2916f7b36d45898c1bb941a673f97676e1cbf1e4d3054f98632315e496511c2f3648c89d305c3487c937026060056252abe7a4119c40014e4d6d3371581189c7b10f6f6c38395204087eba04b4580c6881bb5edde83a1fa45632aa68384cfd158a11801e981a3ab2c76678dbc8391b9e8e4e1e66a54f43f7c56a6d21546be0faf149f7747c49e6e5f7c6cb9e38370662cf1ba56b2e6a9c256f86530339438bfc80a78b5a30ae6b0b1082576cfc2e7320d3b59eafab274470dff6673f413dc0205d5ec8c9bf0244577382bd281879b169272b5793f9e96db8ad8d6c4b57cb689d64705e33f1e7ec7db72f181fef054cb00c7f0d7b611998c62149e26cbe77785d97c174455cd40bbab671a1d383d9ae3056fdbb0a3a4e659be4c8ce8d3679f5b470375e331e564549e950e4128ea88ebdec49db19e966eb2d56be00cb24924e1fa50d29a168910fc212c0b431d44ad5debfea9c9ae9560a8328683dfc5c2673724512f0f9ebd155c0f22c756e785b743fd76a0dd038554f5066f684b508b74d642b62837658ac126e2e52e0d6f4237bce8ee8f27de677ed9e82fa7ccf61eae7f735c795d6c0e2c296d18523be48c588a6a426f89ced19e33ec922850aef0baa9aa3a35a0b927ba2301ff3e2e384ed68781c962c5d90522beca088a3303b99786a683eaf8d4c44e811a4c5817e4079b296730268649a3ec9d1628136f983a38e75de76524e070568ffd5c66df6a07c8f8f4006ac12c4e582105e2aa48ddda2d73b508676cc9cf0afd805c36f5b7bc8ff480c825d275a58a3cbb2a09bee51366ebe7bfc4392129ddc50a9ed6db43328726271c9965918b79f4546af3110c85e64ffecea5383d5bd2220a3506ff044ffe8c8b3ae9538c06ef2ed5c938f36c93455084f628eb2bde2eea6ad949aba711de1897cbee667d6f0b847452e1c6618fe22259eca678ceb651f0e7a6f8a8686551859d59dc28307152d386e7aba03cdc98d962b28fb2726bf250996d60265cf780f66f2c55a4774be0f6b00c144848581254c88628b923e873f2877f271eda12b4ec7f0ab03148183752e3cd68cd6bbbe4f20762010f672dfa2d3e7668f97846c745330d5c2d062f9d5a11ae13ccc4ae86f6597669ba4caa2823b8903192581a2fd63a9ec9657830e238d1ef5a6ff291aae4b0435b80cb7c3544535e31c5c22d46431fe7650d7818a712ca97ead1646acd488edbf9961b3772d479607b424514282d38d7a1510d5d1f43f177f156c26bb5def75fb116ff0b13d568da98d9005837a0871bdfdd71b565e5c497303f93c2a6f5efc4f75b2179e23a08f4b0494beef0ea8d2ce95d445e2f85c81bb65dfcb92e70bda87301d91ab9117b513a82933a159a690c04b54526c260b268a9de1fdfad16af17604932417fd50dbf91d75f418fad11aa3ae553402adc91d8f1e7f70acf59cf502cbd996aa5355d4ab7e8c8066abfc16ef3adfd54772e5852e58ad12aef46dd0b01255c0af1df5a7e02edcb7e3ccf0dc75b2b92283d8c8543b11d4669152c18753ebf286436c28df6fffe946a5603bf1bd8d66475242cf9b4093808b3a3e0641926ebffdf9af7dfafce44ce6df7a7a408e976105e7b89080d5eef180b4c5be326ce91b6a0d300e088131fa23fd65ba0d39bb07e1d7690fa0485df59c3020cbcc1962718c70a6743ab57daac6430e4b5eae1e947dd0512fd2da95d2a63675348ca4724b07d5e73a3f983dade13f87dcea0eceb995b16cce48a906b25a0d9093a49f12a14156dd0851fcdc33fe896346c798dcf771c09f5e76e77118ac3af82bb4c6bbeb1409bb0a5f1adcff4b92c76c1c0571b335fa2f6a9acf7ad93e3b6bc7dc78a05b58f3d018cef1ee6df19e82a48dd419e1ea833bca1aa632a98e29493529669d424ff61ec4ac635f139d92bd33d73a1636fd75cd7bb060a545063a0fe4fc3d564faa64eb46fe6d27039956c84b06741b7f6ad657e183240f23fc97534bc2e2ac812b9261bf330352009e54622cc6a35c4f036ca39bf1a0fdd926e02b0f740600428869cf89ff92e028a41b065226ec72071822464270b269806c20c883743d90fbf28f9f729050821d6aed26a88dfecc2786ab533efec931315fd5fe8fff79c36cb86e66d0d0198838db64cdbeb19b520780b19ffa6be4641823a06aa205b72e6b58a60e4cbe9cba44b1514f692db11ecc02892eaead6bdb80e54bba7dd337c6c497d184fcc40798805fc13342f56da51c906232b803c83ae5386fa0071cdfb95118b2db31b872c7b8e568a447e1626aaff5ab32c485c7f09c20ccf054aef8bc85c700f90daa6ab42405021b115961530bc5da4b2c5b484be7156f8a9fc58f3fee256f3535fe59553de0a371c0ac9bb46795b5ac2c653ac908cd1f54d49624473021c13fedbc042b002e2ade277c3c9dfccf299a19719b651c62af1e9547dc6887ce4dfd1b013c8c30cc348fd1852bfb4feeefa2a48d2a8405e3794541e9cf56f057eb042c97119c2aecd43f13345139f1f2a06e90992cd501bc4ac43f99a86d709001df0f76fe8f16958b6030f15fb275b15b63651ea5ef4b437b9c46dd92ca794cdb5f4bad2c480f49357936d974855cfc815f94e5f3665602affaabfddbf4354eaf6f5a911e3c5dbf3b8817c4509315c2b7e9d45ea0c748a98d73adfff90de56f11bca3befd0da96cb51742a373c9916106bd437beb15e642bfe004d95d45065f75efb590fcbedcbbe90906be1304e16c1be23a081f3b3ffc91a4026d300b62680b710f0b927d19e167a5000039cd350eaf0b2a7d6d556b35b38374462ebd6739c62c91c8fe511089bc9b4df37bd1bdd5da7f9209c4d74b6dfa7033f2a1ea6457d858abdab8bda04f090444db6236c76fb5554e9f6427dfcf02de6efa51473ecae0bfa4c530bab75eb514b7d45ad44ce0eeecf004018e6a75d195e03832e47b28b3b3024bd49d31ed4ad2738082009126b93f0cc8a805aa596a7435dab6be5f7c122d2d0283bb2cad1fc94671a7a50e45a4db5d62dd66540c8f13c345f5ab28987911a9fab66397fed9bc8952dd6f51d6fdf5f1a9d6efdb77ca7c198a3445c83ea96b8d1ab721f9a719af68f4228dde20f0e49e5dacf7e1f5243a2c7311035de37c90af2c2533feb46cefc77f1a012d7a1123fb1fe1a5b34b0f8582a88f978b8a21e22707e8471cf2289b39f2b468bf790219451df9a51577949a2c42db1feaaf1fcfc825089c522d0bb805637d85485a9265f8d55d3f6c976db7b9c4e71e606034f64a775a46eb7259bf1fe9674a45221b7574c1d8f53b6be348adc4625151335363287fa0b19f94d762350bd14df63ec6ea1693c0154ed039e31acc1daa316a6c28b0784fd93e76127d125dbabb1a5aa0dfe4308395b2f6f25471ecebb499191092980f6cf00f613329dcc47300800e2a6112b91918b3d7aeb0418b3d4765893b3cb801f8860f74bf906fe26a747657522d06750ab46b66e255f815867741a6d55019c70563572139e65813ff4d3aa13af3e0c0047d51429fbaa954d19bd84b2f74079764d05f2679d1230fd874ce06076553aab1dcd38bdf58b092e62d2fe8b7aa8f3595839a231892499530931d17383656f6a0edb94675a4288cd2c1d614dfdbdb7001e41bab332a39f1308b83d860e8fa9ab11bfebbbd624dac78607d08bd62c2999c918641cfe9068f0f0b70cf4ce9b218e73ec8eb4b5fcb95d91b98d260df40b1e1079a2fc784bc154839618826a252864259dede93a89c9eb4755d7226b16994de8fe93aee900baea9b864380e1d6e34dd19a078ab96d7ce40cc499a7142869eddcf286165f8b7c83852f7a5b8f91a566db6ade59c72b669a98e2d1c6cf1e53cb8d45e5ed5772923fa99de866e848d7334b0b749cc9bcac2d9097ff3b387a5a8e5f2f8b63993e03b37528a5e653221db0877c2dce2f701f940ad0c1719c2a5a85ac2618a7aa7f569cdae083e54ccc430503dd29fd406a818fb103e6ff92b406a56553ba23fd9e9a5524ab9f9f220f5aef03531f9c92bf25f93be17b4ad7946e9f6755455805d9f093681bcefc07215e716ba8190ca2766cbc9b54707d053059b46a1b5b890f649ce822f4db6d3e58d5536e3cec49d55935615608eb2285cebf0aaad81b08ededf4fd8b845b4eb9004bd5e2bd7fcc1d881a78e22c121782f6985e70965f59358bb2904bde6f4a53f69ee4e6051fc67293dd899ab4ab582983cfabefff9a8e623a38ba36c1e95ec3f64d8fc4e817095c6e552e0612b20830cfbe8688a38b7b1b38e823c11590ca15859bf4e34bf2c3406b0794d759ccf68cb81caf57f80b1994edfbab922bcf278cd6608c98411d46f396d6d31a9f635e0710d48ef152d17fbf9941ef9df7f28205635f4aefc5c7ee196dd3d2443672ba9f94e5cf2f60f3966c4dd8c44ec41a72c5ab68a77f243dcbedd45db125e281ec8d457a4d37b91218935d4bccdb468a854956bee3f1422fd0a1445676d785d6ed021788b5f8fcf6951b47fe35312a64cc0c93cbc98b75a3f7d5e8e5d0b6d23a3d5a7f52afc078c08747b19c042c06bff12e858b78ca0269f716d76b732af46863ad491b9683c4ce12c6fece75264441b663622aed31fb153d2fe9bb1c5360f1df7cba4812b2a8888b77c4523d385cdaa277e5bc5603a444b2d76666b943714de821fd055843b350b877674b4763524f237b378c8f734db921c6b981f2e63fecaf5ecf8f0534e12e55c8aeee6e6c0839319b8484387bfcae79be4f2d3c02cbde549c1786dc25a4aad1a60dbcd0d9f485d7de9f28edec9dc54fa42c4c7f94bbf05d1982994c26986fe14473c92c8252dd48ea118151d13b879d5429520a1a1627d1e5496812a9d84b2879e864bfee64f09fff759353e0b33e4079381766b46a4e5965091ef0c96ad57ea07e067387c95d6d885010b9b7b95021fa91f9f6fbd5d2303b5a9e14e496e5a4e34125ef559f01a62219253aeb6897b261bac16c553c4cf47091d0e64abdbca3ed39d8463bb6272bf68d3d6ee2d0bc3abc5d00f4c133e54d62832eec171d9372221442242c91c3a2aec95ea79d977e45bb3115c6e5f5b8e3a5e667218f8d657ab334908b33f31f62123968bed1d73f96f27d038479d3d2c87168298214143e96335fa5842c03b1371add97a1924e025891f5b34ce2bbdb9be8d4c6cc039a37d9917bee7badd7cdb6afa4c9d731aad2129210720a43c1a9e3de41ceeaf8872fa4553b91b060238fb24db68c50acb93929f9fd0085bc4e4e4548783297aecda1b4b8f2da989f0c6b7170d1b37d85764d97442ffda12d1e11e449f89694604ee2c40f79fe3388a43405df3a0645a4942d9fa371d50dde0d8ed230d64f893810defb2d7695535676ba1b098992401e4a36b0e8322bce4b7d8bccbc9868612a46ac87914822ec34531596124449ab8e0ad6777d60455764f84cd2efd1443d9f57645a3a5ef6d39e90709ce595c194d04718a4b823d3a54ca931a08640b2111b6bda6a54e13c17bc5f69b7d1bf0f83d9ec3122455c5671fc4a8f973f8f535fc7d0c68e7c8241f20433a436a5738dcf07bb5586b47db4055b49b4db0ef7b81709083c5fd3f254f9357e4faccf91b3ddca0168b5d9d86e5b9256f990e915c088000d11ee1ce804dcffa4a24b39b13e08fab61b7ff1c9d6a84feb2a66990a47d3b72eafa9e5af71b83acc23953b6de36168bff63e29105e232ccec4e595e1a1800fe6e853af1a2900fbb385fadbae1bf4e6c7a4da161a712fed7be0ad7ed3a8e377ddf3f9964fcc9a9a43b95f481d8df46fbb7b1653168d12bac84c42c38eac0e5bb1348fdd20eff57ca7aca977d82c24bbab3fc335431f6a1567414f0f83eb743ca52ad493466854ec37c228c4bbcbaa4a6e71d7366352de4e837cb626c081d20f192f3ef9e574bf9f4c3e8cb60369e8cfc38b4d67bd68d3cca7dbd0364e0c9c68e8a3649dcb76082a9ca3aad17aa9d9fea1663f4efd7a6eb98eb2b5f30b55b221cebef3db0f6c686f5f1ae3d675d11c8e611be3c219c48e0eb8e274c97e0b6e318c10e4616643cda81f9e4af3b00577d3ccd2db20221e05ccd70f85d94fd60828a6fa65fdf9f7dd449ca6831c2ca97cf80723e0b4cd577a68469355570f880e3b5aeaae95d79b97bd3aefc76bde19c59b51f8449970919ad4173075895a37095463484c97609a7c7f7399e76bc211f568e98a8b6837889121fe4f0a9d5109e4541c41f3d1c4635ecd09e8737a13211ae8cf8da2332ff7eea097e8c15e7cb247f629de87ecc2733cea0194452fe96e45973c93b331700c66b053bc613889b4e53c5d8941590520bc4f02ded3a2e431c38878432570faf30ec48bc8f4893d9d89e665a743b1c1603523219cfa212ffee3d623c999a4081c52eebf07d024a88b0faa502bbf7348e48a968d6c8bc120d6e05abc8ada6d27602b1f2e15aa4d70548af177f9d4e8c63ee90885a06ed620df1bc3e239e3be75454a2da3662a3ac362cecedf1d8fdd92d518eac8775831e4f6b4f51615d27776a5ec070fb3afad21838322293932117fe235f073cdeba8e26360607e1b09591991ea58f30e9019ef7e30e2bc8ddc3d90d06257f4dcd1ecab36274487ac730b65e40874dc3e64be227adc17fb4ad93b4972bc6f549fca387e220fcc43d7356bed24c2c71d7b6d08099d7796645d05d753c30afdb4bc40cd643b14652ae15450ef8a6e013b6c457afc177df4356df00f8f6551022aa768063731a33c1381cab7a28a066b42e4f1ab632ea95f11c69fa05d2a488cf13be26707c02f4495d93ffbb7fd4d9bbe0d5757b71623fa4e76fa213ce76169ffd986a22b1f550b8a6161c6f3045ad0519c7c1eb7da581eb938065ea3b4497204bbeb24a31d5b27c786cab23350d532f2260fbd5926e4568e1d279d0ddae53d4000fa2497ec662dc5c822e3e8a8a0e2d44eb06d2b325ca42291fb83db3b17a19f8abd31a85dd02afe82a64b6cb26dcff1379aeb1ed31b446fbb0aa1731a7b024c01e74db38fd2c8d8e15c3b24393cf94db757fd49a66fdc45d082f71aa47e89a0285b7466e889d7efab19323693280c1439de59c93496c95ddd56b86538a20e46e9c33b63c64408114dbc8078b91b4f70704ebf488201e464df68c7c4aec08da62ce7adb77ea8b5b005e49a7f6d51fb59f9a713b6db009a5f250a9eb040fba4af0890f72f7023dcc3708d0341180e93dff658152c1c27f3bb05d89a0c417fce6baf2c299161502a979232d98355a79ce87b001175289ab1f0aaf844f747bba1d9691dc2ef59c85532793ed51c391c1b23dea8ac741bd85ad441c74e12a44a7b9f9674cf7c150c6687f9442fc5544d5ee8bc90507fca63ef97372bf37459401f26967cd928601d874e7df619b232de4b2856eb3e57abe6c3b65ead2581387bf12250036f21fedc0698c47012e3c2a224e56b85784de71839c4a608cf2f053af3c78265c4cf89b547bbf7abb4e6085d43fa9df671a50aa2368d9fe3f7c1c0ab4f6115affc7c51f1bb7a6fa7c6c798ad356bab8619d82510dba733463a133e80c0e4babf3d39f24bbbc938f4fd700c24dcd02575e3d5b910b785c2707cc4391724407ad377890e6958a7a186262bfa4e18a8b8dab56273ebecf7c6f9db4438e5e65af85d8efccc64234e18c21035264ac9f8ac87aab8d2fd8f2cd181f57ef6a6c54292e877af9031e5724acfb3f6647aa86724760e02a04bf2561eb28649c92f7351ab3c7a41525276d96a06bae6898aa32aa5f34712b22445d25700a794d56261182e6c77559e97f2faa3a16974a279cf633de6ee42a44a1dd0d962658946e97b3c9b9aa98a9db9b969827426aaaed4e72e58dcf6ce719dcdf0c9f8683d9333b7979f6317f724e6c596d639e61b2c8990a49b10012cf441ee1b0d5a7db789bab172375e3a05a0ee44e5b87e7d0877d9b1243a5e57b306551a072957b958f72b381fd5afc00948406ab1a277300e2a1243dccf642a2b90bc0b82e96142fbda64630dccbea5cc7cd7424ecffee92944352dcc0bd1820bc5f06d013c8b13271e71b88b06cb2b62d36e307388b9a0f739c6ce3e284f7ad87ea5b12d1b20fd5b29af4c7b4100112ea428fa9200e6fb093b96e0c687773233ee57a4fa1901b22614b317877af1c23271ce2705983a7a26343043e903618dc5b85e0b6202dcf37b73952a180725d93518c36c073b3a4d5ae0d4844af5bf1b4ce2ba92dbce3c061832ec65c0f9e9b2bee219eda900a276218bad832ad1544a85cb6934c29ad8d72cba9c30d9cbc2e39690c96e97e89c330a3f2acfd34c5368d3828188bd5dbdd1d2c59ee81402fd4259d7b77fc727333e05927cc7c5d4b5a6988c7f45aa9d2fb37ba89368119a2c4779b599d4503d88d424391fe441f5c01b333407e4d10618a47870b9f0c7f81e67c1b614749f937fc23e40eee7cfc65f3cc45c2f9f3ef6af50143fb97ab9367d6ca9040ceb090965ee66ade6558546ab04d8b2637d3817f3a95a15f5e02d230a3cc2b5cee91258f8ad1604c507001b8e2ab94b6501a64f6e4642eda0201a7807500dbd092bcfeb3f88b2b9ba55fab20a00c41ddce2083c277e8a1015062a0889fc3ea4e811fdbc135a5d14ef4a6b74ad66e1b510560143aeab0976b480700b1b40bf410f58718a4fc5302e202173e6696620e8c81d453963a560892ca0dcfc4f641211ee1466ab6b79c9ce0a6ec96cab7bbfc94b0ada24eac51eb75a1176c8c44a2a8faaa456a87225eef196de4bd4702d32ccbbdfabb98dfaa0bf665e2c434f6a9f44db8e64ff81922d5ce58a2c84a497774d83747757513b7ff7e148608b2ae0e39620a77ddb730f554aa452bffab6c8a62cc35e34ab9d88ef5bcc1d4ddcced6d6df17ba6a4240fe913f1264c0beb0dde3e14139ac10002bce9c756d1d193749a34c256c4b0207831a735e7a870845ee6ac8ba11d4927364be0a618e91a2b3d2f792d2cfe243064c47445c52e5b76ff43ef8fce32a960495911ab73cd682aaba774a31a31c9e6c0d14de07771900e971359381706dda1fc427ba48bf7a3978be61a1a0983d982650f45c82299b3faa5a73cece4d003bd6cd92b7cc99a190682a5438d47f4b0ab5886cf8d9ce9cbc8e3cd16bb0b0c91df0540bf1307bef1f154b46c1372880b72b3fbcf01b29b2edb529f5598c5fc607e0bcfbf93d69e74cd9889070fc91c2a16d5c4b973c1147af38bc693a6f468d30bc82c454f0596c1be2076e3a2dd0c752d309dc2809b829ea3ecbbf018859bac977f3255088a8c5e2fd4c58d06781de3f7c6331dc6fe99d1f459121ff65a2f96a3d51488508656a746158494c69ab3edd59f998b6733cf7c07e042d5553fa3472044f39516d6ff52d9be340d88ac910d39d092e7264ba792a9a56e69509a4237e4dc5895ffa6a4275b8c53cf2938e6c77ee63f0b1884523346e19fbcb65c088916f815a7d66d58ff273163134705b9cd4980999f7eba880b36fbdd3b587acb934f195b144433f42e4c8a3fa40074fcc5ce76aaec262e234f58a69f21745183972e098beccee459779b7f603d36d9812301e9459975c2c7041eeeb0c25d4ab3ba9a5ccb98b6a63656bb45231bd9318198c430af38f66ae3097b07beb1728649274be753f432309910e3cf46be24026a9f65dd95370741fdeae79857c8d6e330ccd39f15d443847a650ed98a5df685ea3cd2ed9775c133493e33e0217e63cde6c90319d50b00d862d153399a3ed6637fbd9e8c8e2ed71eab62a527882011284c47edf6006c681647a344dfc56b5ff6547c93d1bb46b4aaca4a1b36262494640044966e1b8355619bfce9f2ec5aef3aaf4ca47c1491adae5071916ff2a178130b8b3066ec4321baa24462948f916dffc0a20617e44fc7445e0a7b7fd8ce9cd73d9f1d485f92a9002a70dd3ecd188ff49fe746eef248186db95100df2ae083a3c3a981cc45c6fe1c140b2d648405a3c770a52a44c4e92b3d49676b98788d03c6b1c40bdf0c88707fed80bdd77ac8e0f40a10e101ab12f1ba192f255c8e7f30bfec3911c186231b402c476645be8017b0e20bccabd557f5ffe8ee7f1080380b9c3b9751c04c362f430091d2ab254040d5976c7e65684ec6c2a00d6a1a3a0a5a7fa87cd679aa584657d423e25bd94eaa0695a6fd7eec9009b80411c48dce812c5dea027b8e9505d4c44a505701eefc5aa65c154dca58068661a5606a828ae99f7df88d34fec43c1edab2539c536e178b26502e84240213b089e3c3d86248420e49e6f9834225bfd926f39f92e2c28c43ccfc9e81bb925fce6ba02af23e00ce8e55abb838d9a430d0b7786b6f1ae9407decbe024498707b372a6f53211bba5ad1771ae5ca9f1213614a70e8319c4f0241c943d86f14722c34f87e57ea657adc5c5f7c943b423ae112474d38aef3376febdb72bc411fa06288352659f210d4adf182554a5cc9a45139b402297cc3606a3946afa37e506d5f44d24d56bb0a880eb8b5a48bf8383e6268fd21dc1c3decd85073d81edbeb0208f48fd0e3cb89bf0ae05c5e75d5907f9948f43de38601a0c9633029def1c56a454ae7590e4cd966ce988f303b10eca71c2c573e8aaae86789b2008bdd5187dc367364ec465e0a3495011490db9b4ae8fc043e3495e526084dd2050d14df10aee24ae34e8aa0435dce832df110bfe1f1594554cf7ed4fa12047957de7f7f97e5251cf13f0502eff12f1507c72a54a1634e47049d0311eb653d6a42f58344542e5aa0778e5a82373fbc6022abaf2e54fd8ee7d7e0c829bb956dd2e5e6bd57811fb196f4692124e8a52ca22f4eb8cc501f48d2e3261eaa9dcad9cc1150b1fae7c08175fe29be8f58280095f34f655a71de22554a4f9b278b8484695ac39607b55f01c8fa55f882dc7fc0dda1f3799dbf7baa79815ab777c1a30ea2789364de6c501e075e299a3f39826f0d69f66fd45260abb1afd4f5ccd8193249ad35d15f14de5c945ae8c5eb689e00db700418d723afa6ea6871b39292bbac9aeb9d14ba056f867cfe50bd268883724582e9584e321d25ce3244ae37baf525e20c1cad1d86623c935e6c79d17d0fa9926edea944c0ed22851266cc4636919bd50df57581defa97109296bd14e4e6ef3df0532639d278c7fa959c51b975cdf61ec7be559df5a4463ef04ae8929903ab32cf09198806643ec559424d45f3b0e894ef98bf4d92128c6bb468d683b3aae2ac28a1d1962c881f80a12c2a582c314a0deb5d7bed40a2fe274b24500fcec4f631dff1c77f4b1bcbe9ae6930231969484cb1abdf58e939ceae8e5a68807cd4ddcfc6f83b3d31ca06ebcee5d7d8830396668f6ef037e7236eb144305a4a7280b440953f48f4cb88969503bf70d9034e17c0ad8e38c4e2f9a5553100f7327d9263455afff12050c0c47e5eab16d235cd7fa7665fc7053f385038f6835bf8b529676c3c43cd93437ca2ce0c69b62e7cd4d11c4e29dee855e7d0984e0979abd3c5564198dea7ac85f31c0d6b079d121155377fc0d2d535e74b86fa29c9464291eca68c01115afae456706d72a5a7f98da5e848912967377a883dd45db70c3caf2210c51576ec0d9b7c1c43dd63acb14fc0e6f7b8b61c62d5fbb004ab970d91f08eaab7164ba3f38f6b1a9be4ccdc038abdcb42188c6a6a71912a59f1390d0a27527740153571ca39b2ea95050a3ec3261a806c1359d32334be18764060a45cd33d14a3fbf401943d5de4272d4d04995c89d4b05519cd92a610081420995e540e027076c618a7197bc6e042db02a7073c7402aa1347884c0c2d9431d86975927eda5dce9f02535cc1670474e3995a42e202a8ea6e69fbc0b00e81b6b4bac956def04734929b034a86aa4d3a84aeba2a570dae209fdeb19fbc44b57f155cb47916c2d72d87eba7fbc60a954e56c2b7eb1a8313faf612a853e54435f463170e566d4ec605d817065cf43ca670d7397aae418e14da3f11a6104fdd59696881dc998f189265d99bd2cb350d1e3340fc8a3d71550b7175143168e404264f68a49ab98701ca9024767139d71ac10501cc2c91e8c10055602d04df108c7a11668aea21aa87610a46739ce9436d131c2d6bb98a90bb7dcea956dc5b96d743e91d6c31078411d177456066efe3863a57007c825ffd79d0a9ed17466489d8286ddba18c0454fb4ab9f86d8e02df76452aa8f08868a924c066fd12371f74b7c1c3633a4ba7b217af94a1acb1b86a693fb8df8285af3d0d31d3cb96b78c854b50dc85de1e0895acc929345c13eb420460655f27b303c14b2bf7fe8b143fc44af91e398c369da04c552f8f2ad26cf5c1230287c6d224b06a424d83cc9394e45f70e2bce9a0f7067b70c76c50a39956645712e4aca912959d1dfa29e0ee3923bfdd72827763f42c17bbfa56b93061cd8a65cd88b05b6f77c07a866898422a6816e1b79c6724e96adcefa8eabcef7de263264246215ac7431177929ab96e3fc026111f58bf2a61219d96b5e815bfdf08c17e04560335d7c81263bf3647596a08631ab58d80652a1ae0a7515ce1ff0bf2d0e617722afe321a76f460e033add79f201ec7a47497691eb92aae88e7b39c8bf47f022fda1af26a99e46919cc3ae80d851e0a95028ffd8b58a49f9442860d3fc272788931b2631849403b605f45102136c7a389d0dc95548b4761aa9ac51eda565c41751d7fdd9d7016ca97d3b510b17dea8782c8fe4d37978b0107964964d68e9c6cfa419a6a4f06aeb778e48bda0c15a2ff7500bcfb0d9c9951f7af50f8a97e27bf8dd81bf03375233670fd73b3ac2974a68b90174589a0e0dd737a9bb742791ab022cecced7f05bd2d96b15066e57074b41a467dfa6f11d4f5d1ad9906e8e038588f47e8c2d5445e14ed66dadf18a16e15a6d29dac1b03aba1ee748dbaf963dd1f8d985855d0c4b47fe2899d8d09eb8f56da0bc356e0eb2646bc49e0819f565f05dd9f4cfb112a5ab607447d5296f1eb3133c326e70833b5d35b017e4d859ba31f5dcceb2597f433ffc6bfca31761f6b7d474e365ce0d8623db281cea8d61e0c6a6deeb7eb95fda98521d068951aa485b2e936983b7dcdc06d6f19c42341d89eec4952e197b47781847c276dcd3955ae82ab58545024466716aa53872de3c1fd7b46be8a725c31b8a52853973b7d21dedfa61235a03f887acaacbf81f77cbb35b25fd981678a02c1ba5657f8cefd3b88d47debf9a7354e75ff3289e205386c8500984cb01047bcd1f0a584d125c55c43a612f3b8d9809464488e735405e90c014b43d05f5c410c23e3e2c24d30635cfbef980a1d88078a7e2891d6be59ffac58fe9bd2034b71e46e5528d3c342ac30114f4af69c9d9a917aa1c1c5c2c4e3ad3c97e4c13b5ee879c286950968c249ac61305be121d1fa0f0d48b2e11ae25b6f8a3937c1c45df16d396f817aef6229c19d1bb17b8129bffb6cb0c8c4464aa2a9cefc74e9691622eeff55c70d1ca97fe08bbc84ed4c0539764f318e780dee3cfbc8c6cf2819e1c10b8f523a94f10dc2d266178232faeeae4e68ec639c984e4a65a7f107ececc66a11368d818087de5cdb4d7f7d3a827c287f7ba4200d702f8ad67fb83e51a56f168f7672328eab86affdebd9b28009d66084c809e7b2f9e0afc0bf8aaceba4fcdb5122cfe82136d606ced58011aaa429ba1e361891abcd011643eb5317265adbb0952fc00b408e32c2268b8741953809651e623b5f56e3c316d5f8a206b8d1d30fc69ae872f9da7b46efbd4688d0127a16e7b78cafb175f44348653c0b14b5aa18db7becbfdbb68fd67acf3e373a0f971b1a2d432c1892c3537921607cf4440ad0ff300d8dc7f8696d9d28135bd33918b460af01631b55ed1ff33e014b7c2b7adb6cb52a253eec518f22f99b135020013c900f06189414f99191e21077a5a91ca88d50b864d0f252ae9e7cec5b1e40639182c67991d69ed0db76f62b3a75bf2249024b0e22040dd3fb91119c9bcf8994d42598c281205460b50d6a30a763167c7c9326c646914c49b14300f0c7095dcf4dbd369b7dbd55c07d1353537f9c8e27476b8418003a369831bfef4b079814b1aa97ad78e4332fa9ad1a0fd4ccbd6a86e1fcd40b4ddb28ea30bdda16ab259250fb813cd1e899a6bce94a753cf2d3ede17da4b6dcb4304c82a5190aba4675b69c6d16c6f497cf0fc40f2cccb8f0055937e37aac8d1f95981631eb5c8f2ff8155d6e07e56865d0d0875961e15348b58775ed266c50265b24e7de4cd2f8c29c52ffd226b9f5f184045c30650ec3cdabb8f60df3a11e8a5d04e138c5b309925e08a3defa62b3a56e03c1eb3e9b9e9ddf964778f42f7a6bf0baac7f3758689314b10b765ed261787606b5d35792df1ca298a083e5eb80e4bc8775ad5b89c1e2cac8b8b5c1b2315a4b3ac632592553052d868fa7ff113ad52a7d00c0d5778c90c4370641b3cfbefd0bde3063e9f0375dfa476af95d87c6ef6f2fa89f6c1af8b8100e21ca88b3a311ae46d020cbb888bfafb0ae23810b3415afca592aaacc1ffa5b7fd4af8717161cdb8a90a6ca21ae824f5fd2781434bbadb132ced3aa594177e82134f978f6c783e5d48c9f80d15bcdfd6ed8deedd74fb91ca6a6b4b603ee1333796b1025da47a6eefb5521c426afb740a319fbc59462b9d9dba81956c13fa799c337b783f043b5f7b50f69dc22ac67831d6050d0622a230fc954d8101ca61073de10f316c03466f9d387fc28e2f839846371ec1f7d4bbc1a4df08377812b6cf6114c153aa8072fa7bd030f3de9e33ae0482584b47a8da6b12f223e57ec11b49eb59860226027c7afd54eff9079037c3866d03f3c0e0ab9c27a8882829693d4d51728ff5ad812eeedf5e6ffca88b8148ab432c86b642043c4b525ca7cd9dbedc7c63279f0cb0dc3a419e7136c06d10c87476f5b3b3d22f4882fa6ba4e8132251f3e0da4d34fc8fdfe5a6721d43ad59f470d7dcb953ff505d5f4f84938d0234d447d48dcfb29d2758dea763c3c051481802439da23f339ed4364a24f4e20c2d132cd0e7acbf63b85f79f85af3e9a7a00a40e91a7dfd962faa82826a4b355c569be5bf22b6c7a93925b85814720c93024b80509754413d5fc61839356db098d18097952de473d197476bfc508107a58c8b62cc6d80dc0a32503b3075829fe2c70a1b8ecae48afa83d8fbe28930c10a9b2e382b383fef98711a88199422b292798f5303b78ffffeb0925ff80ead58dd895afa8d8006012557e37a9d826c885d80bc1d5ea5700bc22e007a77dcdff29e52b11729563aa65e80d6e7f7f950d9efc64b216f616be3db81c80ca4f582cc40171400f520e100fa8c56e47cdef076454eb947575ddecee7d1db1b6f7f708b5bfe948a1d3807f7efdf0bfa7dd64ccd2b51048baca0952e8a2606fcf42eb8ea5d34ca902d414c65b095ae516e345509994210f7516919f019e65ea9617bc6b2f831b0cb28d5454265aa0cc6eedf2504283fb7a4985ec2efe98a891477f2558674a3b3d84c9db66dc3c53c5dfb6b0873f69d4b34c6eb9896b305d5a5ca260c65deae9f8c27ba9f2cc09182b1002dd5a347c4d79abffb1934626e1c180cdcf2fb4bc290629f194c52d3edf61a6f3394dfd2ba3237b0a9cbc3aad3df182ed66d3794e146c6d2fb7e51de3413c3e4493b15913167bed06248a6866d06a57b0b97011aaa56e828d453e5a9238c327fb01bec81c8596609eb58afce7675b9c6d6d537a15eb450787078db3fef48a8d1daaea01569cad9525b85276b6d26f35e4f01dbdf19423f5b9b7086e48aa6fe3d252ae2613193231b8330e582d5a38d86d7f3e77bb2cfb04bcf50d447d41cfa37d08efd5ea4f575dbef3539db5b36c6c80dbf8ec724ccf86c772cc28588ea96d4b4ae450aeb02893621ccdf86521c55e7a8d7d60361e1ad2807c9e231d5f7a03a885d58015bb06dcfe604eacbaf8c40bc4a9fdfd9daf3fb91d0a99595c4c5bc7c9065e4ea9bad2718cf51f945681db2d02d0e42d08756389f7229cfc86997382008402fbb582b89b96ec18117bb1a1ac909f24d1dbf86bb62159aa129611f843e4a78775284091efc14cca20bc199bbcb01d0b82832f09f732a4cecebf42f29c246e6c52c4b63392981c6c778cfeb070c56ef413842c91890334cce27567870c6a07e52234caa834c51c433a01de9ce62168c76123163507fb1fc932c4b0888aa97b07ae53a56795385bae352d4e93c5881f80c82c27e404d9e94a5d68004de16861fb6011b8a5ce70aea9c11dcb64a5913a34ab5578c12476b0fe9c789a3b45ae3dddc161acf19c3d75843a2b872f19942274f88af795bd5b2465b3d02f36e870f1cf508d35a935fceac2f45a398f0387f8b5114c35d44fbb81a74549a682cbbf62e63575977263d0042b6060ce09fc18a38c5d403fc4f8147257ea2c4c76e16e2288d5f9b86c1a72c1deab8be48ce57cf8afea379391ff44156b770c4ace61a224b384e213728c13bf40488643e916511f637ee88f48ba14618ffff30fba1d2165c76c1275fd6f12e0afe731be5a5bda2d7975ec7086e1c9f5cac66920c08a206e13d16d6bbcaf171b10a696bafa07ba271a23c8ed3674f19a1d09e259dd3bfa614fc29760c229172316f06612e005f006c55c0f7c0868916f551adda5d7f7222e6fcd3ff77ffe44a3de8c2c5f5b8e09693697265456b313e57a87185f072131f38c856fcbce471beced7532d5a705aba3d79066ddd3177523346f33879d19a4d0020c268c918b7f44b5bdb8cf2cb3bf9405121d489c4e188353393bc77a79d466837920904d0275dfc18e711d2ca9a24387d22231a16757dd1b569b03f1a72a9b1079126c52ef49594cc27fea481230accc490194111bf3f5f6e5095226c64802add303fe9bff00e1e1a4747c36a315b2f92b8edaceb17129ee730ab2590f91dc26a043c4382f2697ca63f1928777d7f35dec88bfaa333a91aa6db44cd1a977236cada82cc9da32fecec74b7e710d5d98c159bac12bf53ca2a02243549f6e6b67de07c2bdcd42b820c2e2bfb7cfe7da583eecf0d927f3508ced50efb771c50c27254b1a0b984df13f7102c5adfef93321394b27535e1eec3b872d96f6390e94b97e9d3b2e7e8574effa9cbc7c52094d30d1563d8e93676fd75ddbd456d799f0d67b7d77332ee4923b0cdc018491489b2f8cacf15ea205f0c6c8005e380f10bebd167fe35c89d73d6576a3c34662037748b2907ea05159982e019d0ec09045458c5bc64dadf02fb7946b8d24cfc924326538e92d8b1f19d17ca635c47b31d3cd0dba5a190a833ab227ff373923a4a4bd45fd83334627b183e58360fa17576eb9e7466618ec171b4aba013cb67a3b45bb84baed5aaf76c82ec80371da5dfde28c52a6520c66af51ed2c2b682e591725708e6b97817015272c9094302a198e49751576715cb882648e2721d8d558bf420f1484539c457438a19e58b23541e15ffdcad1c7c748f2841439c6e33f451981b7f1ccb236e9895a475b09d6aab253e63178559c0e14723065f82921d4d1ba4630799e94ebdf1f41eb049bc97eaccd8589c6eafda767831c2b3f2c58d268579910dd2295a5f74f7d1c0eafb4d8e68319e734f93cdb85b3ad38ce4e136c4c674f5625f8edac20e0b1d7b62024a1a7378676b7ed046bdc3f33851edb4c285c0c0dddaefc4d4a6611411dda49ee867f52b32d6e9181b25122db2c283179fb88f31c482ac0096cff3c8491f9fa38a7dcc9154a9c06ee4c5eabf81b6df082c567eb6b65d6edaf1abfd60942ef3687a0af121ce8c6732682436f069a3d13b5a98204780b2c52465487a6e12c02b0e81e8d4712fae32828ec9ce0736104f8625719b5bead2abc8ba76ec018f610f6a68aa7f817fc42defb79a63b21a761a1bf057e053410fe5e32a0910ff656ab14817746617285c7f4f97e03d02dde39a0ca978d969f2403d6dc79f2ba632b3a0104d67eade49b07bc4c1dc87e189a9f26c16a8d284d6d928c3d60cc24c0dbc02073dc8c07ab7adf0b089b4dbfcab3cb66c1b3a4d7b76e86b5edcbd84dfed32609862391de745f333dcea9c5be4a7883b0469e029518391ceed33953f8843969f165a43e9424d7a372db6c4a5bc420e3b75c271fc62389a77e7b3847ff9c0117d3619f2d716e1adc9edb10317b2e04f5b883f72e4acd546416aef5a7e1a47f9e68a51fc01807e15207342ce2b8b11b82949bbf723a6dd28332cbb449dffe7b6735d4344722a2d84bf9c4fc942a3b064cc13924359cbab06d0e269039215686969275832213dde152fd211b4bd83e5d5c37dfa46a3f15746b275733d379350e332a285626a227a285595112b8c7feab07316f193c2912f535d1b7a8cbb0c851a3cfe45e919e6b720c2487188ea1451b9ea077fcec51c69ed4bda87665a5c59abaea2b528906fb2725fe3ccc1e186f99ed11dfbd5f7b1494978b759edec521037eb2013e96c55a322ccfad1d05581e5a9053793dc364890431fc51cacdffc784811b74703383882946164456b2f58e6547f40ddfaa6067a7881354c9a1d79d0f38274b430a49414e9093c2d9ca73c63e5be6c09268e36c7b302b66507ca2bdb934eeef2993936b5fae550e9146b0d48d8dae1bde521ab66eba19d662f9cad4e238c8d2a33c27d526d782c8bd118ccce77fcdc381f88e99c8c60646adae16fd37d9382b2a23a7d49b29c2fd75371f24fabf5308a693960e2fef5db4e984b7aeecbcccd5f540a55341043fa1c510f675ffb4a03772d0ec567c586a51bf7f117084c3fe171a5fd44f3ad8b9b4dd213da7634d3722f0b0adf8cc1682162e1fd093e408eb453a4db8a54ceffa43b31fc82e64032c9861b88d0113e4570b59e1d269787f4f23239d1ab33ef5a0e5cf9fb801e500d5dc88adde88570b489e52cc01950aa698639c366ce9b30e06bb72178479baa976f83f54fb53fc9026d2b979d02fc6d2ce4896b3954e685ce8c21069a7b5666d03080340725bc73b26da14fc9c4b3bc9734b4a39e7cc9677b7b53e1d4131ca58ac1c9a6e25e9041bcce9debf857e96c863eb4f091de1e72b51a2a124d951ab408cb5909b2256248e38732a9331dad6d4fc56bb5f84840e694b284c852b57407e8b3aa8a91788b9e6df3b00440bcab6845f0a0f7c6d81197c7ba8cb01a154ea059b258cc8c9c3c2ba53b11967d2811a74c54015981054b469ce44f35127c5df34582182469a93609f2741ca9bb736221c9ebd9572099d490a684e40c31bba78b8b04676c6d83d00a455cfe699feee42c9d60cc243ad005f202d955e01584848f51328e37a47bc65ff6a79583c2d81f97582bab37c5bdf98591bf3ef700469b889a020572b48c994bed43409d1f5eb3bcbce8400250d20bfa5d122a357eea2ba1eaf99f103f8add3bdb1697af63a1e19665532c4401eaf5cbf64ce3a7eb0edea849bb810a4b17e58cc454b2aa116432d8dcc77bfc60a99b8ef1c0c4b3215de853447fd5b68af508d224ee92c05e8734ebea89255c0aeb8db4fa333188d346a3d95170bd2ed73baaa7d8ad3af0b5c5ff714d67d7bbb1c961f53c4f8c72a88a1af737634e74419a826e6e7d5bb8379871b45b57761d2f02807f9410b3547ce4a80fb006077aaacbe9d7f9eece10c62453ed60508787867b14073e7303e0416a8d699dc4cadd0ea2f9137af4d557c476b286e0cf8374a81dedac490a271df013c6e82ca7025faaef56ca0ffce80b52fed2900865f4033a0075092eae416b29dd1d0b46d1a9922a7adece1edc42fdf534ee102f30a310ac60ec317a5010ba1c98f776b2513a662ab9a9b3e8e91f5adf51cbe0d60722ffbd3106dd0ba1df24f5e33951b72bb6619a17a0d8ec5ca46c3306162c6770e4c1c698b87dc8cc4382fa5f299e984315a1d42edd4bfe65004e24c7608e9ecd83eb8ea1bac0f16ea170e613a772e4823e15684dccf2fe1161f0e8ffaa29112764b0c8c3bea8d634bfce9b7f49a409b911a118abab6c78bb0032fa7664e1e8ee1df827dd0788a411c78b3b2a056bea3cea0c8a5160a473f1ca17663e16d6d55871a0ebf437f8f2b68351e20455d1ab5106a2185a1bed874696bbfb609cfe36e0606eab578c75d71d413ebc22ca724f75de9ba3452779d36a699c991ea40453bb53baf3c1e01b4d01806583e4883418d014a5e3795ddec470c46b5a5e2926363c4eb27875749a4450598bb2fc092a4b87dbc5c94648c0cc6d6d8af9911d159b2792ddd0d89e50c78695f97373c44b3fe000e1b51fde278792d81a0d948f9ee9abe25fd6ed9717425ece6055433002a964d686cf8c30a8bd1b4d0cc034a110f2aeac87a8ceda3cc133bbd8eb3d4bbcaf04e1ff824576ea6542928241cbfa17724a624c7b578a6343c073f5a7efe550ffcd0a20b297f06d710db822dddc2e4852a1242c4acb6de2f62fa93522fcc52f1584d7e18e8a970384444f34757d1c19d8af94ae7168e5e7ecce860fab1ebccfaf6671412cdc5e14a83dab451cd7cd0f8c078fe91e29e00fba7137256b82f02c481da202cf6652a4d4df8cfe4604c31bdef0b64ad904bbdbdf478bab62c846983f4fe0218619da33d238fa22f56e14f2079bbf707e531dd55c54c1f693ebd6cf679d28f92f186c5b8fbb3a302919c36306c653ee07ea091787f0ab2fac655c6cfb177ac12252d170d891860f25a9135c72c7f324aa9a130e1f6ebc280aa5e63e2f2724d3a53f09c522059bf96d844b9b60e7b1db4da6e165f1a84a3bbe5f269146342b735b7bfc9b4b25afbbaf9d92d6f55c9a1218e35102ff130e5cc5cdbf851d971197c22aeb1d63689b69d646fec55e008157e7310d903e5fa8c2c3bdd66eedb0eed713296a839dcd2f3631e620a02c412055f5196df777b689aadafaeb1fdda7c0adc1e7afdb0cf1e24e779f8f651a50ad4ff5f7f58e5d83b9b74f1ddccc97d5897af423e37e062620f11674782ff79f5a06ca0ac72309cab0d29d0fe092826fccb43949771c4e26367901efeea0338835475b8d6d3cbc864759670cab81cbeed7543895fca4ab512bf15650e1936f4cab7f3ab04c1e0583ab2a63b77e8e8efa5f6fbf68611b9a00e4f3db12c6b9edb51199cf2a377ea455f06f5da00e20ad3a347bc340988806d88331c8c34f99192f9208f5df8197d6449b58887c2c34228d217b2f3c62267fe4fbac99475e1f71a9d26da4779e3c42950bc6bca7bd768ac4af36974ac7cdba02aa03bb6071e3832db8a72f74505cd3ca909a8eacb4001d8d5cc6377fa7514886f4402fab04b035f72990c2a0f54df7c398561742b4a71ab8f6f16329706803f43a5a5a5289a43ebe7ff171cab103d0137671c3aba1e2bbf037b167bb8cd204e76a5b7a287170a5b4e4d466ec815868dbb9d62ee59a087ac6272611075a27c6838cfe09ad7c65cd58b38d0d95b5d6ff538bd665ead4a9e728ad532dfa2a41b41c987ce90a73c3eec7b8e175f555e35e6cd92fb216acf980fa8c418a734d719f706dc7eef731ddfe595560c58f576cd6a89788c3538d79ffa7e5a52a37f030ced439c1dbe814444e388492b715ba4b2376e98fd60baf5c9b76c75fa7ecef7029a34eadd18904ec153239c4d349dbf980df547a493d5061b40f7e8653462fd50407a400b1e264a4bb671be558876a8de8820faf1cf08b6d0e3942bb694e39c999aa1cb631a6219943ee96aeb7e3e98ced7422030100af11ee908cc389dc4316bd096eb24266e321c9802da10d4483595dee479f5759fc3319fe32591d4d3f9d42e0092a2d54d0d5ed62314d5888f3e421f5421972818e9095fa2268c4b2f977ecde832b1fc9ca09890664b4af244db18e51112a18d9def794fa9c59f184d68ac3798ecbb7a9ff9ef4fac426c3532d68335e286dae00e5d1799c3368b87ecf26110f21d60e1d826a3a66eb5410d0e950a4da167847e5f40a0196eeecd515b6f7d7c79ec157eeb7f28b34b8a246475b97b78ac88ba658974d63041ccee092ee12c73ebd419b9a5f71d11e542d8840fd59b0aed4e5a65498b0cfd3789667b6873ddc39a75c6d2896f417efd396b4b91251a932d75efb03aefcb5e3ef0b7a45175ff2c54afa73ecf35161e1cec6227688ebb63b30e403468bfd215960d6dbb1dd0fec317b0cd5d643c3c771b412e9f6fd528ce4d78fd9726a66dff29f95ed2351d920d0aa35ce99e3992aa58dd73d414a16f7a148f3a4471e98f4323ec3107bbc894da5570c4d67007799a0fe5dc4de3acab35785e7e98f0debc2cfc5a1bbc3680fc015ef5e0bd5087a68e2adff5d399c5af68c2f76a2254cd9e387c98ea77f2feaa9ca4f7a0094811afb896ce966a1c6460c5c1313a0604943a0a6eaa6a9619aa5b7888b3a52d6d2ab001ccf738157707816828b960dcd8d2114befc81f16b05bdab3b5fc51fa8a277b0494881bd91c623a37184b0c280ccc968d16ca7f76bbd39be84e8b20ef0c9a11cf2f7fcb9605f274de7d951062ba89fc215d1c3b17527f90263616836c5623b76a7a7a1fb41d7a80d14b9b7b50317f1a04e7931f6c1a1d27ced14ad6117f72d9b66aa4619cda72344c43ff707e8b3aa2aa9f75c680e5d2ed18320fc705abc59aa38c297aeb70483829194a28fa6c101c36f13742f712c4bd40307efd8a43a9dc5e2d7a69f7268f45f023ece9e88116e75134f19d9b1a19e94a93c6d91458ec144f39b9738037e9258791d2e8a0167a862a6b4519cc3c09af660ba50865852a89e622eba6e9ef0a1b3881715be333ba877cc672d7145d02ca54dca3402e18fe34ab8264230520562a1a7f34204ddde2d9d028363fb69ad49c321f70ce1388a1b9f6ff94bdd7c545bf199beff7d7e6a517eae60c0e20d86edca219ff506db84fd19b4ff53884d4bbef596a93942c70dbdf44969b2d9f2027969a6964d6c23465d799b56815ef8e219877b625863a72f60c872c2449b20f69282ed3dc3cc6a0770c67548c316a23e3d8920031e8532622d653c488c2d1f882cff9d22e2e82f662af7820da24cbd24c840a958461e2d929486be760080a5994ab5e7d832e19d68f6a0600255d2456ec40a7973702dff5003c026bbddcbba51250c811314e2b7b361be4384503f107cc24f74cd0d81bba5f241108ee51d90d1b25154cc86807e805a6f453134b4e7a47642ed944a03b44adc3dc7cd47dcaca9255d4d24cd5c8bb6d1589d500d85f1aa0ae5744d7c45481019c542a93764b7dc3d4bd257c3094763283994711d8d7a4eb20214364de3efcf6f50b82b6d0f8c1f00494e2c2515617dfea3b1fffe63e442423db4d89aeb3d30e6348b35fe1c410af80d5ea98f2924d80c862635d19711b3c8e9a9639c2234cebb844fa9f5214f3728dd70ec3e8eaca7ecd2b00fe5e79a2bc279608f80ef2ac1b4d961fa4a79d89a5c13ba5e3a61278608c6aac98d010339cf7de93f15c4a126d015fc9b2f557f92bcc79f03130dd6e767c9f61bdeabd1ec7990adcbf1265f4776b3534fe2dc50500a7cb206fc143a0ed6c7ff13894f4001115ab1323f8f4dd9e09328965d26d6e80e98cc885eaabe6b4cd2094652d9b8fff5a845d281698259c4f53ecf8dc8777ea5d07b32383b58d5231d8102408d43583c8c8f2a19aa9a4b193144821925c91fd7c30c321f889f8e038cce1aab4e2affa1ee52d0fac7f6292c666b67601e027da8e4f1d258fb11a6b0fcf3d45c41da7df646b7e717438c0d6df51e1eb525d3d037effe5ce6d19d72fec375de0e8af8b6696a77fb2ecc70188559ebda164e880ee763cc130949481cbac15925d8ce626ab6b870b696e978fd3ff8b4fb5cd8053e60ea04ba24dcdaffbbf215a8e56b177123c0c51540b48362d6f70cfa89664156b28e164483141db61a495a00ed5e49f80d2c398b2cf13a752a4079d5aee185cff579fb71de8943ac45f55c4e26372235ae73858322ed0cd737178cb8e29797d377e75366222c22acd9920882daa3107207d8230311e50bfd1407bee85a3a1d9a3433600e83b25302266189a6297ea1210338a28667036b6c2f8ef71bbf794d13a674ee5a84f8cf2918c659536488e3fa26c3f56bf105ba32ae34b2feb5640e952a5c4ac57c6a4a7df8276267eee98e69d6b58a0a190b975517ea35fb6587188019c8b13cb101ce10c0bb394d82be1f0c9240a3818336e5619613b48081b25cf4de7639ae01744610fef221ef5b5bb49e8f70a29283b06c903c2b8bf2eca95225fce8450f385d732380a8c5fa9c002d9798a1d1bffeb8b34629a77e05cd36a8a536c3b591bf493c9137bd6652c1d64d789de7c805a0d05354948c9f65dd4ada316f1583b22ef669a3b222b281fdfe2c83c1d2bbbdb0e378566c35a45c5765c9f998e36cb7c65a1c779c533183de95f1509052dd103f3cb96736cd3ea73df8c68b55296c8e54da5ec5beca3d1e53b6ecdf1078aee4cb2e5f5089fb567189c994962e5b9e78f3e967d802675f7c7a2ef92c4c0999baf91632cd4399e341ce4d8bb023c8489147a71960be6b83f02c9bba8a2391948dbc0030a7f2dcf49fbcf558f6ef8d3853ce18eb4b7e2d2c74308a9bea191a8322da16ac4e0d67ca53678dd7b2cce32a395e5e33f020616dda77141d03e776ca4a966cf512e9670aaa044be3ffd75aea820d891e5dfdc3d2b1c48d06e3e1a69fb3e2f1c63bf66ec82d58ee0d2a4d93249145dadc5a308a42657b3be8aa614afce71f7b83225b9d34abdb1a5278782081b32068dd5ad9e1be7755a62039dc68c2dd25904cc893171bd6ec5848ce9037f611c520757433785492be17ccbfd2d3536a3336ba19f7411418f8c72b3f80e4a945fc789b4d02588030910c561472cec8456f845063a8f655ffd74acd4a24e3598108a02cc13466f67b1e9ca97e6cf86caf49ff871e303ab1c74d773c2bab161e5a48ea63adeb59b0e4ea10574fd6771f664300785964c9098f5d4cc73daa76b566cd6db1b685e394bcbf098ed6d45b7591656a7958c243b03620a77e309bd95123c1f358c19d1833fb1c15524218dc6be8fc87e303abcebad871bc0e334434f17935585f3a896db30c713fcd441e3f623b978276ab4b26bb4fe60bb01097a07f14ffa90422118d95a1488576582a9b216fb4cffab43dac8dd264f5cc66fc4e9e4fee0e7aff7567f69b9d512787ba938c9dfc1625d842675cff4bfd1a46970cb951e319e37c408aa69007a0a70c09723c89b0c798d8b918d74aeed5e0a8c3074d4dc6aa5c2fb26ab8b627ea491c2521915691eb9eb7b929661877ee4008dee7a432404ac866ed4caf48a54316a7a3a52b95224ef245acb72d771212d28499057dc8840d625011efd6686b3f2125ca6ca44a09a813b8f526f4ce32185bdf5dfa5348586d5ed745f1c6286f8c4d5ac00c3fb893decd1841cb621ba716a931ea8c5b4e63663d7d09cbbf5bc8762d6e6d36fc33b44cb1c7a99d2a3a1cbc00caaac633aea9a0803505255b1c26b8418e3ec5bfe0bb86251eed2c729a26ba13a0eb9e1dc1c465a6cd25fc0c595f8573736f1ca67bf607eae4be3e126a07f63fe7f95b55b21febc0870b763d2a740587076ab11a8e00106f097478a6d0ec556dc4f05c2809680c84e1bdf99f1b7bae5f495083cc96731e75ab035a6cd2d3be89b055deac058da97049a8359c3b6bc2dd59c2d0e3639cb097f9d671e42a4c58ef57868de020e6bc1fb634d069402f0ddcec0b112df9d895414233ec60098a29e17529c8c81df33830ee37b6c9d116cb2d6bf4550f492b65957569420a790c8991ebacd0f4fdf655f542638e0eb2d2f5c3a8f70d25711a054ded74baa32a16f27e082ed4fd3be62a4a55dc6cfac8443aedc625b6be34aa9e1c32d71d05371ce5f7ac619a9eec435fe3e8acadf444f5f40fb6f1428429393aecf818fdee47d635b6f21d1a1b9293b942eaca90ae29a591740b21e74a62eecdff09165616918c29849df51c1ed4d2c490a1efbd55f53003eace65f3a42c21cdf66af0a66f61ef757579bc25665917fe5bf27c971f3fcad989a942ff67e880b1329a4967f395bd68f1b52109d65bbfa67c3b199704acafd5104b9e0c379d08d58337583de165ec73cc24eebbf67aec46ca42775bd3eb2ecfa5b88288c5b95e7f9b7320e1e21ddf8290fad7fe6287627570291e786710c7588b5698485a3f20718f074a30c27aa92a6855519d8e8ee4549723294a1beda46556ff58e8aa36e930285e4f94a839c230d03fd91986ba0f28251bc16c9780b7ac7d1f61a06bb2744849db19d842136c2697d713e39deb236f97109fc2d2be4edacbb5c37d17e412ec73d0cb4c9185645d703ab8cddfedc63a4fc552d5f169d223aaa92444121029321520248146801156d99f58afeed8235cea2c50d84dcd5634c32eb9a600772b6db63648ae6deb3e6f000fc8c775ef312cd5fd408c572dcc9ff4f0bfcf07181389149a3dc138fc64dc6f8e7e70cb6db4444356295dd1e0e952fec7af243f6f5afc82953cb70a3b14f3d8f9d32861a9020ca555bdd7a974788475bc773ead4a5e410b75740259e114ac11506ea52548ee8ff022cd3f88951eb2cbc9a280b8fc7e87fd4aa0d333ce99e9b3425496e7ae1b89b7b6c7c41b556cc732e39241a1c5995752befda65f8211f66c5e06b2a6490442d9ae7f97389176f760cd74c0637552e9f8eb692adff39dadf42b774479fc33e21a604858d18f5923eec4e88fbcac5cdec91cc94de32c211814efa55d65c66808deb4ebcc3598fd9946ee9d7355488e8e6ff93a2b571c32addac44e191181bf9cbc57ebf25cec9951cb92d4e1006682de22dd29196c04da8e56f74821283247b2a1d544002d0a29d522550100e31cb47dce0b683eeb159dfe279ff564caee757a6ec112c9cdfececba96a7be96f84817ac3a76d70cacef2d2353474cac92bc86585f6d5ee60e0d35c1887be433c74cc5419d106a7e3168d4168a63e49c4a35d7b5d0a832c41d3e9eb6e7bcacaf64a6f95f059b1408dade02ccda6e100738c9a6593e7ba6f879058b2d0166074d405342c5ec6fd513ef19646dd06d85131a71e48e79db57ffc266c51641665864f1fdb36dac798ddc741795c205371e0a9ac4acd68e7a057ebdcc870d11770a66d5aa9f50383f1b206e593b8d80b2719526ac69aa8687e2c16f67047d6f7a0827a7b33fc590a51e48948320d3f3d3f5feb62dc5c80a3a87f41a67ab0cffd6fc264af03eb27afa7cdb985da06bba291e4caebc3999a1f4620c1cccc896cfede631b1d454c7540ee01758ae0df747fe39777ff7610dc22273fec9850ffe8e8986624931f183ff5fc093bfdf84d50db62460817055755aa59db617b259a4e352530b77585974a8d53340f8abda07d3bd8e1651331d9969f10cf958fa948548a875bb9b51efac4cb570168b6a848cf54f047c1b98c32400952ec739a05a000f958511896deac9ed50f40fd2bfb8c670d36976dc696916869b59e95c80999872b8960d985d9b69a8c7077c9b63b6e52c58caddb0ace3efa08e3683b7927a09d68d7f61ba511b20d789a38dea9ae2876ecd130e3d7a867650c70d80a7858539aca1d6bf50ad1d1101870c6510531377b4d76dc03e079b524ef927252afbd61ac1fa4119d068e7a5a6279b2bfbc2cddb1836e54f31e5ee868177c32b308b93986007f62ae06ef6dd13eae14b6147f091bb832f039c679cc51a21677f51c99f0c94b978e6e63361e93a58c2b723d54d77e8024bca583afb8da0657869bff0d0edf84f47635b210115007e54af8219e8b725d795a365fc5b7a3e46f444263c891fbfcfbb7991f6a36f297486be30e35d0879c8d84213ee082a9ad452583d14f55b2e392a1293584921c32f6e5a6e7f487ff9be9c67faa960a5a0600d8b83f91a4762d65a79939a513ea25fe65ae2d561cf78588540b6d0600c7f386f41a182d344d21610d68dd9e3a14121c8b3d714bb4d421fec2f5084df55dbc5dcdd7daee3f3e3828d26bfdf526e5f138d2a2622bfb027d46dbff72de0296f3d0a84e3b3db4269b2d9a2bc96f71fe75cbaeff3ef3985cc832cc485a2493630dfa36feeec83cd4d87fa1b59fb976f56817cafc9cb7c2064db312ea87a2c7761e1b40736b31e89d1ff1ef27468005177c140d5af303697c91aa8db9fb8d3ae5f767f14dd2c0935bd8d756aa12130c64ead19e2223694deb462082ad78fdf8838fb2e858d1a79ed7d3f712647b10d1a6b164f7ddee716d4cccafdd9d7a492e0d56c0a50f4bca40829e0ff17c6677879e643617afa980ea32679e75714314bd28ce02a5dbe7c781d86e08221f4de4593aede8443a2d09fa65aec7eaf601c895f9fef6771f371ddfcb8b4bc482e6dce918a3999a813ff37ed63b00b00a959bde1019a399b6dca087f462d0cd016dc20bf9e848da76d26a45522589cfe9ee54e3622cf3166ac5c3359c4d63d2be71e4fc4741fdd9b524c9cf178cea8530e17ff46acf9dccd17c2cce3fcc0a9f9ad46c3b3c584db29930ecd74c946c2c68355a5b2ad92fb9de721b51400d8efcbeb862c567acc03c2cd5cdf2ac665efa63ea4db46f383bd76e0cdf909e09c7e3c48e0ca7057cc591eed9ac07457992c6adbfd86fe894021d325605597177499c45d812b7e664815f52724ff37bb3b46e9c6a0a0f8d55847d2385b0a21d7e536d0e56bc5f1001a4b7bcfdc5927aa83593953474d9e8f93d19a08fd2fd093954d9f33c4020e0ec0f38c43fb9c87c0d81a97752dfba251283e3a258ac419f68a2d0d6ae2e483a4414e96e68af65010ed6f2995b15b513ef0c994d21f051b46f6ab28ef69ac095b1561e8ee1b46776d039e39333c8589869a209e79ab69c04c0bb5d5bf4e49640ce9f8f3c28938cc57ad1f1d0a911eb605108fd749cccd7f19354c5bc1c1d2c7d1bad4b8d0a7805a21654b6066bde27ea17c7d0a54ff18250176e8c5d9d54633f8f9dc2fcefa14f856a6e7922e8c66a7b9563bd66f612fcc78dc8bf775ad44d656c63445082ad7bd35f684fe0670b1c65998acdd86b7118a395507de7e155a184d30390a6698988e2c3ff43a9ca9ce3d282ca489cdcad6018530f7d5f6e4bf4f0f793f2ba44cd7dd2508406c2adbf6952aaafa7de09e00617f0b2f8a785060cde63d2f0fb01b30ef89e21712401ce9246546f4cd45b3b87813ade958522158f67ee935b856f8b0279b359fa318526c7c48ca4758086a6d5a05c21e70e90c24fb8b634b9d87c78476c84be3745b377af07cce949a505ffa9f81098e7f076eb51267d5ec5b578e4684feccb127d0692557f705744e4db1c9ba4b56ea65fc3e6fd31fd1b72d1b5875ce32043ee5bbecc2da066158dcfaf21b6f347ef13f448f7a563cad6c07cdaa2164b3221d655b99f425ab297ea49dc9a46398e3bc25665f2a97ea73156938aa0bd4679ba2dd20ff3384ea4cd4aff40914c70ad917431ab739300b3e0ab3c5495eed14cc3c3e6d5740ad927870650331247fac893866cc75f6c68dd99e4fd78463c124fb26cf4d850df4b4df7ff805b1cc78473961e672bc657e932a2fb9d96399e4bc7d4b067be456d20f6685e5bea15b1de6485bdf0d7248ef6262e4c8077365f2f3d380bf0d12b6591533a382f48bfdbbde022d6eaa0e2b27871fa41eb2ed60f3c254f58586d96a9111ca7d358126f79b24c075b5bddef501d35e7b9cab52ee044ff1dd8757ee819e65e5a2ba6a0af82ba65fbbf2606b590f2313bd82748e44ff65c79df20b2e2c7e6b7f0796b9bf5b2550bd4130d33264809b08526e85bf6dfdb08eaabbaff81cf0702e117d5d938e0a1dd6f1bf69370e065dc08bf3a007b6ce75f82555e88677658094100e84a34617305520bf594dded166c221a189786b5c34a8470e4c85276f8b2742f19a586f7a492301b5cd59c6f433d6d8061d3029a349dae1e5033b9ea115030c5010f0caf49d69f3c795593889ba7b8cc1263afb7379a20a7911b4ec1df9135a0f2390c13ffe206cdf4ced9807052c5210e69f570165b3e34ec85c87f4111bd7988b9c75558dce0ac4913d8ba1532cc71ce8e149e68ac0751008115d1de84ac8f351569755fa8a42a88610f3e22301e25db7cdb24748ed2de7b81163073f917be0eefc736c7c092008f215281b0a5926b68d3d02fccbd417913edb0b2341fa734bc81da99340f3f3de7cb6f229dc773292022de183410f6c40018891f8280cae57f4f35cd1c1ac90bd2aad0c04812ef36dabeba6393cc39feaba6319077be7258041e70dd499a7d7e4bdfe0891f07b91108cd06fb948d0f5ea1cf96cc1b699a2b068223489244748445d3762c4e0dc08442b4c64de5a00158635e7202a157e115be70186a1ae06df71ba48d2777570991f42cb7189c8a67cc9624f4a3d16e00d307d49e03611b2a3e631f373a69e6f7429bb110acd7f38ac5cfe78f1b723b954191bc8fddabae95fe2a8273fc783f49f51fa042a572a1fbc3e78ab9a248e6aefb316e15f34e26e62f69318a4f5ebe4b74ba82bcf40962c7938dd725b406bc73d775f40bf205a213b2688b05c359d2414eccb44ab0dfaf84f2e5bb7ffd0efcc2978b37b3f137a35553ebda50fc957dbbb7a4513fe733e1aac722ec060a7e2d8baa091ebaf8eb4a498ffee60a3c0996595e0c1313e3341635fbdad76a51b3838dc08b8bf67f99d427835104a50ddf0f557781e67d936a5641e719757fbdb867fd08ea714ec0bee41d6952c68b38eb4e361669aea49cb4935ce252bbf86a2b3daf0d1d9be9c06d716e34ce27623a94757788a8a1a62cb4ff59e404548140ea958cdca727a98a1a16724f4fffd933b79853ebc373478a0ecf688ddcf290094186e9b40601479f7a39deb809b42a5da44a22c3393d7e39d1e5f4021cd1f0a2e562474164095a3d182b2ea8c1e655bc5563571913abe91031d51bef2d09868cd8033bb2a13f92626816c4a4b9c5d874c98d524bf03628b3a42e8617e470ad878d12cfd5544ff53a0b399d881e5ae84bf21321b9cfe26cb6052a20f2eec453e6ce866bf5d8dad7154052fc37ccdcd1702b478ed3533299f6f4956d01052868c34c5b2d0708e4c09120b207efa44f47cb271499fff889eb1514e50fd0a47066555bd4f9923d348581ce41026ff3afb16ad4e82ee98ccf43e2cf771bcc146bc6d13ed1c6d97f7e547d6915ed3f870a1b7fdd761971d48fa2224ff3673d27b2c6ca505de38f46340560b5e9d6451ea66778590c99b6e70c8c49128c5e5f9148662a19cf80c21beb8efdd7c3d68ace644de9254fcc38f4a1ff91f4c1363ca238a860a50164a17b4195c4dbebaf9628d3ece07184a54edb02e9c9d183728712f458a292509327de83b5531f34b54f10ef3af02f272f44b396441ca1406b0bc5014981fb4287d378c60180166dae6dc2865f88b77158844a95524cf7dbd6dd727cf53a918e886bbd369748331da5e532ad329607651e537613abadad4102c9fb57d638fa9ee108534ae6c62238aa504e85e89964393bef6612a6b1467c6595b84ffddd8081b3cb1b59093fefec0443421807e0128f3ada3676d018b8976a5df300856c9af944e241fc819f38ed31eb39cf8fd0d6448e4e5cffdc424d57f1dc12f61224bf40628a2aa5f022f1e2542a3adf934b723741ba3da54604db0502b42d440d462f144067e617ef8559c2f64d9fe5506a342d99cb145d6dc24bf2be1e9236b4a93b45dfd4d4d763ecb63b270db57f8b2cba6f7fdbf589fbfb82810d9995c47c4c9536ce977f53996f5cad0f99abd8a30e6cc81e07869a59861dd00e950dc4f3cb4f4fb60760b0ab4178d9b6b685ba15f2f204108787c19bc43f87c0c735c0636d2c31fa6448eeecdc50cd5e15c38895c4bbbff5738795ed737dba369c3f2597aaeb4849034312440a5e03d24aaab9461ff07e110c82817cceee5873c45952bf39e59852c8c6da9c180852dc915dae937579752de4a2c8bb2cca66a79150016429a66e1269fb4d46d4988ac8ab5433120c6ae71b578623a069812569c4ae6a3211acd4e67535a6c553a0a583d01bd1a06697003c5dcfbbcf0bf3467866eea3b5862a53eb88cf4c899dc331fbbb2dfffebb3da22dd5859b3e24ce14e9c8b1c47e8b9d62d9dfc3fec5e804c821bef36ebed5532992cbb3dd93d6b5b6bf46fcef0ce3181b551ae652f45ff794534b5b658c2ece16eac1b62566ca6273ad85e68786084d659d9545697cf0c6e7b3cd0e8cfb18edfa00766d198f7a1b77db8245f90ad2a920fd996ff8a75e2effbd353334eb717a562c90c316922570c7ed119e511408b567fcfda23a3b20e2234433c2a72dd393dd610be3d4c401114e8bd163bac3018bb84bd50e691db66f7b22c3c25adad1d91924493ccdd0099854192c5df47e073a4caff5e13d3ffab0758ed1423a28e06008eebb5ddf9c18d9649c60cae3151c6932d958bbd0d35ef022e6a153d90b0ede7b04c652a3b64cc70fb37b97ea041b229ccb06409fa44da2aa223606c8abe66d400ceb9910a4aa1a76a30824d0328342c5ce5f5c32e22579754b85045a181266f532f221b231ff49bd09609be8b17b040a6d25a9ff0dddd3bf906e4bd5910d77c836832f082e60a1d6f15c076583721de38f64cd227e79a36413dc0a27522ef80cc95a0baafafb964045dbf86e3bd6bdcb8fff1449d6722a9481a79b9f8c2d17b173c7cb3c3b6a5d27415f38b8ed522aabd741bd37bf5f184ad7c2859b9657208e7fddf5d524bfb1fb30ebcd3e45472ef5309ed08c1fe1644dbb1112eec3c17f9d14b0a1de022efff94945aaf0d81baaf1708ab4fd5788af6f2875f531662be116551b7955a6eff744a64e52f7b9b9cbb7ab94e122b313e45ec556ff162504fc1dbc7debffd83eda6e1729895139235b926b5571e6f44c74a2fc8c0979d6c638c794bef62868b47704715f6d43853425d8ce4e218e2013f0d10137b0268169fddff4e449235a3d0cca161be3aa94c36877c7aafeab1c8b3148549d2eeb3843f57259726c06dfdccccc8e1daf990b69eb167ff83a53d30d8a4553df54e2425f9c5858da2665e488dc8460afb163e3ac81badac64f877eac409d8e171eac7a4513f3679244a7abad50a38822bfb464a093ea210ea187f92bf56504e08ae0f5825d5f4e56d3665dd323931d4e67b5a09b5d302519d86762a20a680844ba126ca33dc056249ca9ea6965ca84dabd551f0831d12339e4e3e868d5cb44cf162b18ba5b69aff70152c8e2eb454ccc7a5f219c858b09125bc2b88baae7b5af53e3feb1af2a5aef3662b9ad4aa3c0eb398108097571b853a56926323474bba4449a4e28415789efc6dffeb10b6f726322978b8cf2d3e106c8d961c22364138c3224107be636648e23554ae86cebe1ca1a5fc0b5b19e502f7ece50fc1fd00e17e29f61c084f5f7f9152178e955a0e6008ae116f8bc600ad1f08ae4ee9cd794580ec4c373b2e258d72f871ce7955d99e03bcd170f90b18db34ef419e954b3739e03fad6b8da7e35c56e87fa26382293ab6b61b6c1bcd61bf32ca101e0172850027a1ac66df4769ef3089e68d168edc40697da6bb781211dab4ccd490b394d9e86413fc739509ec7a9aec14f8e0b53a0a5b73f41238b59b5031a82c6b82576bec771bf71ea5e5f3958bf8c883600da20a40c621a553d7d6dbfc76d8f0008ebe6c3713cb42a4b43b9f385fd118c3b03c1cbfc80e86f62f4d2982f1d00651bed95bb7a4896d46b599fe5eeb2cc7b4b8ef05f6a1f0cc886e5c8b7b17066c25888f03a9abbad74b6285e3e97a65bb1398a3537dbe4230ba40d9d7b8f188003557476072f77e22cd2b7ed7500776dea052dd206031edf865a8c4fc6b689baee4757bcfb55a8c6101501c9ba23877ce6ac943ee34f9d6a5e88b25272d4031f39e4a563a2f22cb4b50d48679a1a64b495799716544d6423f0638444524671243135ad3d3a836c850980c01a84de7c105c96b0c21e1a10cf08fe604d4ca590c6e56f5f9a76b3a4401612d6189f179905741bef35aff91aeb468aadd0056a649e71072aad5985fe1ed52565a8146762c83b7b76a73c0cc1b5b77f1bdf98cb46f173a98e54687f4ce93842a7224a1c03af6b80303b0ea0cfb1e924b9c4f27c42ce80f26cb0a4da10dbd9ec7fc530d335022a64b3cf4ac7dab942bb9a93510ba1cdd33c98f548e26ba541f60b62acafac325d7c1a4bf9c99c3358037c6eba7159f3b80f6473c3986ab7da9d63487ea07c65ce8c1aefb42eac098162f7b8ec6270101cc19aa6bbdd62ea4705297bdec62b4e2710a64c3591cf0753544a94994656b740f7386a38c133783bb0cc8f5e5e6d38e6b547ea35f03f9e6988d4d8384ff78bb68388c77adce02e5e221759eb037578cb94d7f4a14135835c5bf997eae1325c6c3aea8c0ca2af000b103116899b31a49cd2473cf7e0f47fe3d894b0c232db4881ff3eb2096a0de4f1b20285bebfbf957408cd51ad354951f2e20af0204a0f0c5c630672579b226dea86417dd5c4937bc344816a6ac636fdee3c30c9e763b4a548eaf29ce6985c786ddeada69c5c17ae18358037d2a949d8ab4142e0e860e647cc68013b20e03f61d9e31bb2f5646ba6bd02eaeda04fd9e23106df56e79ff6e2b6e4660025752400fabe8dbfb5f5caeea5582b3d6e88efd8dab2f4cd1c6a4ca6beb58a13ac3fd58a0fd31e7adaba5b83ea3b00962587c0fc7fc327da465b65637d41e7b6bce3388a6999f179a0fae51edc48eafc50c36ad0aa2cae15da05ce776f83022bafe2ceab57ef299bed5667dc0a8dbe93020ee452bd1ea419c6f6b52954c685cbcd1f06c31c64771bb5fd55d45f8ec69763f399c94028c046e1e25a8550ade8572953288b2aebd3404ff0d273598aaec3265207b01073067bfda1c8d9d84f5f966de66abecb27bfd60bf3b90c56737405422e2c694d4adb468cc38e981e8ed9ac6c4195b4ff77d990db52f565182985600e133ec43ddfb09044ea5d0533dc9e8730c230b2cf1ba85916628b78575e2f180cdb51f46d744b6d1118636ae31a39629b600c8818429c6fcce5b60696e4d5d35e060e881ef77f99da848f335060590ce3fa3977487de619fb255873fce4ba4ee346b1c7ce55998c41dc03ec9c023f1e050d3b71ba9d70259f8c10717616109e8968916452d8b824419d67eab438a91b06ffc1061eb2cdabf526dba8b0831eb59dd0a0c729468f09beacdbd55d77ed07143e9712064bf5822b59ec920a88e20b2f1c47232541f2cbca3df28f1a81c69d9e20abb474166554a78ce52867393a0192393692ea05b6e36ff17c3b9634993596b8fe4bef9ab038e81716aec315e30f02adf18a8fffb83a17951127638ec3f3ddc8b73fefe13854db579dfba7665a007cafad00dd5e9dad5feeffb9b0d8634ee0eeea9c9b1d9777f4043518ef96de9c6fe489dba3f1725fd6281bb4be6911b496f07d0535b75f486d8a31ecfc1945cb6194e8e8b139c34389d4a4f4f1e566c955edd65cc9d11e105d9866eca137932b516956f14e05b8d6b45c689420b97465dd50c6a4abf9e77f5b793fbaa8bfb10aaa8b44b10ba601a5bb138166dbce43d22f6ea498e4e76ab07161e0469bccc237b71034c64d8d6df68cae3681c0ca1d3bd7831cd2620b2c06bb6261466321040cdc56f250e646b09ab0de3ff06a694c40bd6d7da911744378e77d9c8765967a5d168dda0c6ba2e90b4495fb4d273c91c8ef9cc10e39c40b95f8b6ef78b5a91024f2b56c554801b48af46f9eb5d92bfee0f631c9ea7398d3f54236aac8f1ab9f236e676b7369ce11a7707c37c6501d6e58123abc570ae6e1320f8515dbdc5ffdc1c15e3269e5efe8fadc8bc92bd434a25acce09fbc8ef63a9c1996b15354e14e1031b77901bd953097e963ea4ceb324d71198469609966e83cc8e1ba245fe9863bc32e27caf7f10d6c962a9350efba9ed10344f5e417ac2efb529a4ea1dfc5239a4882945b853df1f1eaa46f81b49eb7556b1024b014935fdf1ea692d942177f686ed4c9940f57cd8c06451621a2da99a96e01bd0bf978cb20748b2553d99cc83f2a3af1214fc6fc64d7ee29fbfeb97441b4edf2c81b4798569ea8528c50caa27e1902121455583a86d3e33afcf1eb014ff5f59a3b96ea7d825658644c4f1bae9735351092c15929236241601c1a6bd3fa0f9ecea1d0362baf51505caecfb9f2ab451fe8a31ff33b7d6289fef919f7ba467df993f4382e893df742952eb37d94c64b49af978bb60b5cc80e2374cd5dfa8417853525c9367efdf8b04ec02438dbc148fb87a5a24b4f3bc2587f320d51072e92c626b5f0b66d6eb83bc2eb91d585a2a85dc9f15dcdd3d0cc208c09a71b331d07252da7829000dea6723988eabf866e814f0ffb500cef0abce916de2780de367272201e0240d4c7c77d6b148db2168154dce6df09861d1dccd96d068b13da0c531e4835a7457a707ec096be95001a63ac888d2defa0fe1267e529e55f52710aa81fbaf6a0c92f33b0b545d38d00fa12bab00edf736afb3d4273a39c2985b96fb796a6848aa59f414f01be7bded80dd48f9474a63a242bd7d7a437ef5c7058a9d2cd8c61d761e5126f5d1d04706c54ffe43a21f070169090b000f2f2dee3b7696efa7eef5e637e308e2481bd2757246e25b2e437fd2bb8cbd605d8ba062bb4af31f7943e4b65cd3c5a7cceef79ea92a0b0a674ff33b9221ac4d03de1f5f6480b930d6e1a23cfc1dd029768be00af085aa88c11411a74a2cfac985e915b063ff5ea5d83f53b481dbf1171ccc4f4d50910cecaace040baf41eefb2159765f2729e04c26287ee0109bdd3184496c6034b5db3d5b28f4fa117e6a0b4623c4f2a88185a7d1a793196c4e04e695a9f79fa298f739e05f1bef45bdabdacd270106e6bc79018b014c9a39000da46a818b9068e1effbe118a7e6b2d30d9bf04532fdec4c235a18c29c439f9939accae4686024976ee52d36ea52f658da9d329a095d6ffb48b2f2da3444d8480bb343ffc48740e5866e8812a913922935e9b94f815679211446cb6ad2172d33f00c26d831c2d94f784158db0e083fa5db84d4fd40b474c917a8cc39b4fc213754ef1e5e2aa8d36b645fa41bcc91a5c01f4a5b876a254e105f9032cbe532890b9cebad40bc8b00ba0c72651d37417224ddb5cfee79f1715830f4c8156bb61cb2e4d49a4f69cffd10bb48230525442b204ae49bc9a8f0c52df2ee82f7fb51fbe7eb226936bc693c04d15472247072f83fdb2a6b8899b1f39e3ae7610efa78bb3eb58750e0a1a59755ca8a78351e3f07037990891e54996e6d925a789e1e377e5ecc279e502d133ae89ff87802d6379268cebfce0feccfbf62d21773a9ecd7f457d82b4e465e6444fc8c49077a8b1eb94480773918da1c7572f23c3280038a2093214e1a4dd8d9d43e9bf50865c468a808358f268193f434a6c42832f5bf768582cf9518058d59a368c04887805114ceae02b68059fbc0dada23799f3a910880a00a68e4f6e305bd3e06d57dec3843bf9bf80ba15328f86eab7e89aadd51e1c4ac56eba8465e28cef707f9723f33d03489b3b2ca93a3c19fa59877b4e9838b66191e40f68acec33c54ef65de8681b5f53405b8042f6939203d781a301db83ea452022595bbbb19345d3494307f4da2e612062290bbb69560556f9f782f0f6defda2b82e49e763f2966d7ad606afd411cad40a588cba54118c299c815286bfc1c69a7df4f2f5bc0b8dda5dd8443a652b19d89c79656aa4a518f9c85bb87b3e0fc1fde3534059abac9262ec34ed0ff868fec8ad43c124cdd2b21ea99d68dfed41e07ee4ec8f7ab7437c100ac552cd93a7f4733e29f95a0ad7e22d0e6850356d103c5be373898ba25c98c4d8ce90fff4efd73e55c0cdaec2de478e223b1f4408d0a3de5ba9e28808cde8e3238f0421471b0e37d2328eb2588f288a78ad3075a95a6198095c7644b3d23b1a3710d9ff4385bd83bd899cd5205fd2fcc00995b5d9ebff8fedd898b0141ce374a003af2c7e5528fe9ba8221b4b60572bb92e07199161cd79d65aab2aab7230ae67233e9495f667c6d85abcf2f7f46a526a3ef1528e26004b17e6858efe389cb9ca59337ed4f598d474943dc80cd28bb8d8ec9388150832bfce9a646d5d20598d404569ea89fb096b170b04ed20b5044863555c76807007c2447128b46ca0136fda53728b6a61def8eaa52c42c8bf311d34a6dde42cc1ac5d977af692a36c590cd421a62f6064c2a0966223546f5ef63939bf84c452a10b4b4b3e0ae3333e95f295f3dacbc49e1601e7c846a8d2b1833dd8797b9a1c1bdc6908453c6c83bcec76c8101ccbfcd199e9228ce9305eeb41eef192603a0bc418a41c2cebae3f210d1edd0418436379523b62663a4191364e64af8230163f24f0cd3d2bfa7b5eadbb345c0bb091f016064be65c8811ea731b6276998802f517e800d03032bd9812f868699601b8b2c219b22146ac41197f0ca1ac92858e2105d44612f797491fd7fcd7ef0d76766e83e0f596e0af34318c6372c73f3df6746267630cb9cdd35957babab44851569d25597146f4b746aeaf01c55f25102ba8ff4d435337bb8549923bc0a0da08846dd09b8565d32d30ceb01512093a514b809af030280fa666713418d02ca0fa7d81c9db16f4d0bae985a248f7a9bbe9915f716b9e2ee33d21321022be666064a53b36d6affbb10b141097b1e277409950d7844fe3fcf0ba85546a775afaa10640da4ece8eb49507cc216f24f8c1ec305fcc5da882358eb26ec1173dc4839bc55085cef527c51a742180f5df53c0ec9ffb53eecc65e2a06938e1deb586600f96ad0476596d588d6754e0ef0727fa2a7719e4cbe5a2a1a287636527dcf742d88dedb0040606a07b9a1129894473f7a805cd8b4847dcd9166ca5dd450ebd13f1c622ddd1ec1a1362466e29ecb1598e1799ece1de918a20cb4cb44db683efba29b4a8ed65e57bde8eb76fe3f768cbdabeb06bc8914b13c7e0cb4b02f1ec16cf8298e8d02d3eaa5cda3d58599b5098a3407ee10a3e9818d8cf931cef87c64d04a5c06bb133757b7b932ac7a7444f8877154b202845ab31e2dc20e0fb64f4fc63fa248a15d94057fa456f91f86c13c84c8d0ff0005f4ad09a63a45efdba6d17b1079ce7b852510b75e1479558c6cda0a80035ecbfcde39c71843602bde5e31bb13a867d0ed28eb847225633c8b92255c8b96f5fbb8a7130aa353920a2b28b0a6d8a2eb3070118ef9d844d0881093715a48a9dea40fb92cf33fdef6845cc033ef0216e18ad5b34118c6941d6a9e441030eff6f19128eacc8fc448ff6d93b320983cda225f3fe35ad64d9ae2186d469efc0420a3c4e6687a906f63f42559544e4c1495ca72fcc8283d84e830112381b9f10a09756b05c02706c2552ba90e05b4c3ff68de9db5218a34de1ad3d1f9d6ea9cce0b9c82d3560416411d9b67d914b5d1ff6a166dd9aa7f3425d92fa140e2afcb545f14553f2d74964b9740af497820c76235847e3a73c9d4fd26d2161e54e3f9905c694c3cd8444007b20dd219effcbb6f837ea7d158a9dc65b6829a83ba904250d07b87f539a05dcca2a4f8719fc57816c938fb6e539ac91ff0a13925909c756490717674b78131afb3532918e155e989749d5227c590a5008e3414d859a3a2497cb0277a370ae1321e36c817eef8d97b80bd8958c39b4678f8ea797a8c84d28e30c322dabbd6ad707229c5941bbf25a6dfdb9b0c301bf744d252871db4dca1c2b102b7a22f532e3178b773bfb33f73132c94458f54148a0c69c13714e5baa7a81280267dc185c1e720033e4d4a9ad90fc329d8ea1b3e7ca0aa7bb49b6a0220d38615abaf79ef7dfa7abee5f4629218b7e4d2a21c32e8d0fbdf107e8c67804d32fa3b000caad0d6f9170ff56d430f676b27e545e86ac421e531df663d3aba6b0e1a1544d981cdaf1d36480c3954609aa5a53b435ec3b191be5bfe0722c977329923a7be39dfeef111d6f879b8a037ca3e24c260d95cc8670d4de972e1b920fe7162259f172075715b619a09c5e5db99f76fb5cb3e183399576bc8233b927221d412fcf2217a8172dbf455a5cd87fb4979e821a9f4f500baf08842de2229c7c1df816f6c06d3091b957715638ab5bbb92e76515edd2db6f264603d1ab6dc3820748ae989b01d44646c2522110327d350f78736d81802ce16c961b2d5c849d56510a7e5821b5431d4d72447a39268c130f60f8e60fd7a62b80bf99305187add5a8d55ee8b6d6470e284ae5bc10f5234d625cf17e7c9bb34fe1f7225d066489a042be48789ea0741bf1b83b2f88e3dd0933800b2712c0bcb33da40e91b769f6929dafc36a0538902112a22e0811bd7fe1d5c04ccf1d22b1f20dcf01e9ce40e8c8d003840311ccb6d06670ff41e0bbfa78cb87368ef7a3a3aa1e58f965470981e6876c29972f07df7bc66cc09e6d0ae6359b93e4388773c4dda9d1b231771253e4099104142e7a77db08fe5b03d5372c3b5768f4f8bd2647cfb54ece552066e02e5d7f7aa25136cd9e8eda51674168bfec7d4993e9176650c5d360fdb2861a098e3d048e77e8441b2ed9ae1b876cda202f040b6092b0e5a366071204cb1c8ed080840cd5d5eeccbda2c615c38c574314c7d4bcf34f8840479db9ad910ecc5bd375ff17c5cd1e74029f3dad0220f8054217d63e2cfa58e049b272b13861d7b7bb6a7e0a83d9b959e47b4cef13ca9f911cdca704c05f82aaab46514bff6cd6f09422e54ec158deb382f468aa7ba2d957a3dd8ea8e411ab9bf3ad12de3f3bd81e4aadb4df8f2c3f07ba888c1d4b3d921547c7b1abf8c741d0ce84942679eb6bfc6ecd0b2f1ba94fe594fd5629bca97cbdcd7658065ecc59af16abd0f7f10ea8eec336114daf56ebb2d56e17f02e9818e3ff8aa67db50840f12f80a5029834c314fe5a9f813860f0fa7bd5de3a295817decf3849e09bfe8b7c514f46fca3e2f315ebbf6c58bbce05ab8f01085e45ce9bf58aa3879f47800e9aa59f33b6969ff943c06b6c9ba8cd9bf3dc6b5f30c52cfbd9fe98f0267df2f051de88c9f5e5eeb35b8afa386e270c8d43130e5a3dae0d2ef8cad8c62f8a87c158efe582b112a9ee982341609fb64f72ac114e8047d98fe3718c33c400537267d1ad4363ffecb01b68b556112999dc6ada6e61cb962a57b92f4bdf2b99cd6b34468b19899b25df62052d952bbec23606f127d27caae6d75b565178e18565cca147d81ac72439e9ea8606126f8688ce729282f79523212947c33130866702782a885b3432b6fcecdce1304ae59f4ed17f325839bd30150c1def6054f70ec4a231c45b546a2c724d9eae997970b6e25efb9365c40876596fbc9fede20ab8daa0bff0ee3ebf8642b5c602308a66be37233e283e07b30cdef4c2da7993bd79756ea121299874cff7e3f03e306427981b471d186c732f92a3a3610b1bbc7119b8c3450e160ef5546fe312336e794db55e21afb347baa427f6577b1f120063ab077283898fb0a3fef9d7aa363826a5a9e5574581a66696f80f1ea97371e98c8ef0b1cff781bb34cc439cead7a604d815d58c7e192fdfb4ae2d575eb59e036eb3e6f1b52ca2e527edb0fbc0fdc5dcfb8299dba51cb1060f15171f60934ae2b4e21adad76d307d1720913dc667c5cf5cb74d3113554f3ee417a63298c03be181608554478d1bf54c433b9138408e705590d1a6e38275435519338d59a33f82f7dc06e48eace7f3b2e67895c9965248fd4b67b2c5661e435631d4908e475fd2fd186db8142b51a6e50ef4cdaaa39e6f1c286cc3df759e1ffabde4c086656ed28eac48bb369e602f7732e6140dc2d45f26639d7c6ceb992f6b973fbfaeb102210d3d4ca497ad7961ee57c09016ba64eed447b4fc34e2d749d582b555c8f257759cb6ec780b4ffde58392906138195aa9df5e3630d426bcf9fb62b07825bf4af0e05941395dc1a0659f4d7dc0e52af4c9b5a95a1eeaa78d8a265cfc276e44a93ed9d1a3f26f6d9aafc4d95a384ce17595e4d769bf222cce268a2efc16c937f817fc608ede02dae4a6ef96a6cee93fd635b7ec9f91cbc79d9a357c397b2a3a33b3077784f94d92ae0c70a5195d097a66b78509363dbe03b8068bae811017daed028b42e93acda18a1431ab0a2068cb53fefbf982b7ca7707f38d8c50a339143b2432f662e986c39c35c76a68daa04bd7fd0fc9b979d5f2dff4f90a6acb5aa35f4cfd45daa792737d91542d4b3189efc7c40f265d3684b729227097848fee941de69bea48698b2921087982ba267bc35fdcc0ff0faa9318055a02980eae037de7a10018422774a200342fc9e907a82af15b29a5f07757f6f8ab92379b511cb7a3f347829989fefe089bf33567f6cf600781bf86eb6767f33e0af5954ebaac7905d1c299fc7bf5dbfb480f0d0b75167406aab0d82028c73bdb4ad10a0164007fd5b1e759b99732b24ce628214087cbac125ef8c51ea43d7c1234677e4123f8ce079f854cc88696891baa71fcf5dac4c693000452b2e411bfd15d76a73083185e1c86d411ed692980dd0980dfa526877e98aa4b06ee1b07dfd1f99e438fca3b27b8c3b90132eeb3337cbdae6eabd09e293f772b6c140527dbc293a30b3896a32c9cb64faebf34c7cefdf0ede16ca334b4f719e397750810f1cdb54c4d5a2b0dff8ee0305ccc19e942deb6b06f2a35690215aeaacc2185d98359a8127a8f6cb321533fccc09d7a1b8c85799a631fc1c99b72615af1cd680f0fdbfa103ae3f4d25437acd851940c90a30834ae3a86deb524514e3f93eb31347861c2ac45e98ac573f1d15ddfb94d9ab66309c91bf4174163fb022c493b4616f2a7cd5b767a2e2a6f729250c75b6a1a3ae0b5afb918b537a1063b0458ae90d5c02ae7fcc43f86648548d19196e1d0843e6c25d23d1dafa73e4576608200f6431575553fab55e46539626e03ec51f6d909f39d0d2ebfdf63c520d154fc7d4dde1148563376c6c2032d5ec1cf58795bc474190f149439d9c4f5f9989a9facbaca9b802d51551946c42306ff5a7441d9cdc9806eaf7467631cd6ec0327fe9f0bd788e290bff63e84053c7c4a1ad3ecbf7b143ee60875e894f59a950ddd71bb43c69c94c776d9775149a60476add74995f9bba1a117c26568c9848d1be9079da8c002feaa72f1d176c84c8f16421a3f5c3ecd870d3d5728d17a7ac5307360c29507028497caa5dfa7810e04c4a12ac6fafc216c76a16fc9376ab41536a41d52b5c82f43511b6401ddce704abbd14b89b6bb7a7e140545ab2729336ae46786f7fcd8dfabde6e94d6baa9a951d559579d9e3f0289a4039048ff2b32c979c09551d8926e01aa79f99b96f3488c5c5aa5252fd6d5c875a5816e53e1b2645ccb8b127ac97a80addee6379ec52db74a7ed31e7d1a36b1191cb2ac24679d3282dad38f344d259314a4673c6743c50de2ae94a7c0c7a0e03310eef0d01170fff9af37c766673ab7e6b7be9fea17092f9b2c049f5ea0eecf54c65a2ec959ada6bb195e8f645651ca1f14bb373ac557e4ecf85f0c43c0f3d8f496a79d06ebb74edf6401303583552e6310929fc4e73545ce00789849d37726d9b8c81e2edfbc6f2a80a016fe1f85f113d565d9be5fc03f533fd07c0df5ffd0993e8b46105a1dd1b3946a767f9a52300aa84ea39ac573282c9055bc6f78f2cd41671c4681cd1c5746bc6e7ba482a3562a53285b9e47c37123ac11d45dcf5735547257d1d4237954136a9e5d91c8ce582ba8ef60c30d1b627abd1f0b5270b8a2ab46b363b6eafad7d3e6560f34148f0774dd22eae148c26964c371b2bfe7dc772fdce84fd381d6d2a1926cf6f3b51e2935a902a237d1aca45ac160b969aa949e39fa652a9e3721081245a85375755d037e895aaa6e95bdc1d8cd72c5f1ffcc32ea0a0899cc3786a84e2122e7f962a563e6b78fd3ee80dfb0d4137cbc53362d7c99768aff86c9d83271fb0aba2d5ce355c0974f6568c0a9ee63929610cce1cd86de9bdf60f6a7fe9cf60f1fb0e06a83dce94e251d4baa70b57e6713a1ecd0df808faf4f922894000dc1dfb9d6cb11929417955c7e4140e61eb008cbb035aa0bcaeeffea7a62a03abf743b0365f84e35c85790e345a04320156c1e3d5c538c093e4a31dc02affbc18f71ae216caf4bab0ee252d0512621344ce130ddaacdc0c68ece50cec3bb85804d9f77e0594a837239809af320c0fbcce4f83a64898b8b1303d30b89ed372b70e4d840b3d85bb1c2f169397b6b9f8c7a2c6acef29d50af337fd0e2b92996dcd8d980ffb3be1017786bb3a49bab0772dbe9690b40921467cf41c38f5f28b5235034d1b6cca2424354717ca1f0ec568d5e9a5bc74c43d1b746c218465c4f4f8736cc0e9db1a902321cd67575f9cd2bd9b128f3b87ff4c88311b723ba99dc378facf3f06efa60ffc58c8b2479d6e844c461584bb2b01375f448180e0aec84057ea068609bbb5a76ac43a9887885c9389c30b0f7c462c7ad783b16b8e629d6734be46c13acf7a5c40865904a51b8a7198686d309edce525e9130d2ffd0c67949c75271ec695c683580b2f4a16afd273285326d86544f275b55353895225c0cf4b8448b81ab55ee0f1c50076e11689be3e2adbfc6165bfe8bb8b95bc85eb3bc4b528af160750f98c65a724a4ea1c115d366bd33c75b28d2329668ca2bae8ba3466abc629500849f68473c615b335e7c08c626bef8dfe2701a32b37722acb58307430e48065b6d42b7b84a355475e2b98dc76526864ad21eddf0088d302608d182d0b6c07ed6ec92fd112cec0b6f8702b4382c41d9867702f39c9bb88e1b7cba0d23a259197463ec8a9d6f7c561f946d189ff8ac850e061330816961215f40da644dd69c6fdc9c6dd564eada8fe05c579980f095e42133ebe4e4e8299ae58d6b761a8446f516f0d16839e0e05193ced1f9daf482497a758a0f070b09c56559ec825845e7c9ebd943872f8e2afaaa09d7a3e6d7e0cde525de3a3fb9db8637da151db73b26b760d4d1e2e85cfeecac1c5fac7c1bc469bb778b7ecfcd0d10495b86973918895870d0f99f82dd8033a7f6f3de11802744793ea2f858bf192dd41be995fd99b02efca29cda5d3a44c007aef1a8101e0bc1d5f15bee6ec9e8914bb51757c932cac2ce3eb0834611e3d9dce04669b75db842e7098075bc60f7850ac1b82c8ea0bc1b23d08de41e02bd73f3fabfcf236f9d41890ce0370987c309ed99af942d2b77ec8fe4cdd9050f4f0fef5c2be6598936ead2f771a5a2264afdd1c68882a12dc426d8d36fd6a253014c00f23d985f304caa484058b5909acc4af2dfce6f447ba3ae1ee3c622825d93d884422bf519b75c10ef9c044ad2697cbf3f97ba3bd459dbb731be2e174a545615b6aa0eb7da239272b9ebed38e95c8b57bfc34c52bdfd76c620d2dcfbef688edcaa5161d5c18c80ea3e2d6ab172c540f6a681c731ddba0df23880fc115d5dd1659365a14b2e6bc6fb7af8864947997f628ea5a50ed633859745fc1e68893c33600c7e6513b53d4a8cf9ebe605fc6885bb6f61073b8f4773474f9860b80deaf7ab277e1ab593eabdf99851e8bb1a0dff381870f1de4afb407007ded5b74185d9e88cb23f68f8ca6023b9c332788b5ece021b942e266bc002503fb0943d73f5afef3446900336084d6a4460163b63c5a8463cb8e0a4b7cf902b0adb23e804c57871093534e4a60780523263b89c3cdb159a1f3efae994a369a683b031ca5f747e5888bcc85eb1a49523ec611908a3d148575bbf256f0eb9063dfa23239a08211c3ae0abef01ca0349177d0de1c6ff5b4cfdd227632ea60b9a65e1309d8a1b437450271b8d101ad39deaa967f526593d122e08fde813dac2d855e61242ef9ac52c5e3268fff0655aa408eab83bd17c325f710f7a61049a77c681e83eef5ccb0388ca39b8bb7a5ee0399f82669b668b75dc85224dc9683133c3c0484e5167e1b6eec07f19b88eef3574be1bedba7685c675c74ecc5fa8950365f0c52e3a12e336b87488fd933abe7701cc4420da9b4eb2b7d469067e0609660d886999087d25d08470d6ea7d794e2d384ad1c1e819238457b414f30cf0e8dd65fc220388861538795d3326af2c2fc132d04ec4af9ce1ab49082df07030b6cd76993eec87a48911106a9d10ef0ecf17aa4fff2585229bfd35a81ad765e6a426b3f799127c13c808a1454b5d6b90801faa2c4cd37ca48f3043dc6f5d785bbc1c4a079bbaee75d20d9e8ea7d77bc7018dcd4bd4e04457417a11e718c41e4bc7d090532de1374460c8575231ac8faf9405e78a30293bc7bbecac642744dd61e1a70801d3e5629d3638c26032c8bae533e76a1a1b5de4b0b0dab9c32ec98e3eda6f85688f857ae3fd5323f2200d2d9e6ebf7e122c28b73cbe34e66b9310a8fe954aaa333fd51031955477fd6f97d33a8d33c6a7c3aa24d10918827c539515a5c7d0efb79b3af1e7b3bb9c587d79220be84f0e18d94fc050c12b7e67ac4c9a3c68163b3b745531e9ea563a78e4c4db7fdf541222f18ad6ba0eef01b33eadcd768e20af9bf2fa03b4962aec5cbf28bacae063f577b9eb5af08d4df5384b549437a824a676ac7bd41d85b4596cc8cc364c0a03b504e155bc7dfe9f527c3e519318e93c163f7ef678435feb0db67e1e7b8ce88012a556abaa63c0545e8d23eef0dee1b258f9cb3623258f06518c117c0554c2a1820201326984a387994ce867c7e3307891afdd11516f6f28cfbcc2404dfe6a8b6c2cdeacbb2163229ded84a0bb65ceb9f62915c3e389dd88a3a50a1760a41e57c16e45a05a64189b2086a8f140715c2d0f06505b2653386d457273ba96311a0d8be0cc62e0fe3423d0a8bf90b09f9e20d91035b83d2f3cb4a6bdeac8317b3b54ceaab2ca0c22fcc81b6124f281ca8c36b7cfad80160f71fa650248f245c615396c8cf7f2e9da368db6d3305f69e3317d8391b9a9baca28f0b47638bb606ae96e127f1886b471faa5d0fa74cac441dd424cee227835797235e83877d289f5322b89522c1633ed7058bed7c5f5c6aedfca039d5ee5c3795809ded9077b2ac2a8feb47264c2e32ed6bad9f0df4e20da63250f85308434a0a0d695612672209dd8c817031398d55c460f7b638dde6dcca82b62ae1b79e83810f0d72d4307178d6594a6e1985ee44d96e2bb692e76a1b3b549fc6cb7845e845b969daa5f3a49f9304a1a8f5396fb388a1ba0fc04fb0bac8d0b976fc98d298a93367546c58e67f6e0c2941416a8abea77d75978c43a1bcb8fb74b651e5438111aa74a32ceff205d55a75f3b33d91b4cbbf66c45d35dcdc0909672398326277cb10468ddf638e55a739f87552076cbfee74e7cb11583b5d3427a8cfd3872662c781f756bf0bd8b5094abe0c81e25b7fe1c049481f857984b3df73b3ea28e025a88af92f1a08ddc7bfc9ce71eaeed8a7f29b61a6fbb7fcf9b93b1948261c74eb0c46db120f2981b9e440adc202d821d6d0e1bf3d968dda57b14a8fe3fdd723493612fce1918d36f3cec2b1b7ae8331fdc993cf150c429ee49f51df579cfc9d510466d58819f3ff7adf5a223a6c9f54e2e7083b41e051a6562f81ea38ebdd9cc2b8bcc7b44acc55e03d5c740973462177a5f38870cbf63b9013920da8053340ec46b41f387d95353a35df36aeae50d4ad9edd6297a193cc074431e13b484cfce4132d615a64e09ffa1a3abb3abcdf776543df355205958eab016c94523ae35bd7582ac4740a2d29b0d30c5b9528f7d07564d2ac073c490e8ee78db7543d2b0d19b1e54cbde9a82de40836f28a3bef2330efeacbec00fe8bfdcb27529c3015822f51f510f6b8ae2c488cf3f7e9ddd7596071a761398255e70c44fed99da7dd2ec13ae7a047c470627c275fbbd21daa9cbec01f77304b6010dcca61944cc67083c350b8782b460a2008217fd96b653f4d53660eb44865ca373ebba22d1fd48d78ab7588d9c1d8488a6a3d1116d812baf46de394538e4c6d9dcb7bef1077f32d006390fe03893700b6d02738b8b09103c54fa0d139691f2fde68fc7130c32f7e075053a66d02a30fb9cec2fd0cf3ad9e343a4120a3024e7acda157b4d143284d9999743e908bfe49598d850d3e05f03956562f06dfe7b7df4b9baed80c21a3e93f5164f68ff6c87a620294f3127b40fa04395b75928dbc93b0ad034ef3ca65589f812b97aa9c2f8536ea091ca12a54a5eddb31e61ba21e8ade5e81b2c6f40751095e50d183ff2c377f1ba0a0299ef46d659a5d5f1e1d92e54513ec99bd5870b1c04e52d0451cff858b9e106e910b6099d42918132a402d862dcd0e4e5bf1e0cccecfb16c5053bcebe3fbf9dd1a5402ba5b5c497a7e4b3d8525b1cbe32de466f0ea1c694097874e7d58e947ca9a33f6ca86a67c65df39570d5ccf024ea7cb30216eae8aad70f12d592147a0d769f9cab4a700dc8eaa74073b5de48ebc34e167c72015d5a4c8c6f3888768a961501d0124d24f1a797f4e57ae3a2fec72315f84033037453ac8cf0547f8276b0b70b64ceca2b1b0437f112f9859b1b122ed87e0d2601052b130af6607f5d21f813f80f1c5516b56c04f60010ba01f32bcd394db7ea078797c2589c4b6872729cff4b748678ac4cf164453731884730bb6f6753abbb3e7eb036954c47b3ba28be3133b1e93962a4605d845a21ef426d96aa94ec2674f1cb166e41dc012e2dcd359efa7367a73690b283c5f83cdfaa4c83c3eb9f2eb40998a021f0490084c024d62bef4036cd6b6655abf893617d7947db8691dd9f5c581057ce83aa7fd6bcb1d3c9057daad090d69d27ca0c7a821db580226d1b91fa5637449257aea0d9b7b884ecd6589b17d994db8c0ee3d99b54507b0b8f59195c2f923b1145a43105baf9bb098eb156da0d102973c11f8f97e86559abc37d45c7f2bc54c4fb5e5e1c5f74c63df7f931c0a4fb78610340a68725313e01a1a60f86a2d37d1b9ba1e4390d29c266d200e9e3c825c7f6fc88e3d0483b00e856a429965a1a5df671494a3d6582eda1605edb177e5127b55a6ec6d9ba873782667a3346b26215fe6d8e85148c750d4613ff5d2b038ee592f3362a628f870812e032810fb77494aaf16d5b8df28a61909c27ace13a401185b33c01f1eb1a82262ab34de0244cd03219f4dad4ccdd4613e947f01c1ffbc6904df9dc22fab2baa106570634c9a62d7bdc75efc8795e06d9e918cf850c18ac7fcb094df91ce680c05e8fea45d6184f4e45dd7e4c663c1f8ec1c2355f744d021992facee895b29d88e2ff8a255d72381f843b4f2fda23b01f8fb153bf2a186447af56b56f91f1dd78c43798eb86e5e289d91119cf8cf69ad2b1b6988a4e72503a1b29ac70925a4b1f68d6e83a4cef0977b9d0afbca59e2a2d37af6d0f1648edf3a78764595d657d6fcd1c0caa141d8a217492a23f805404f6ee6dfd1515cf0cb4b18c6bbe6bbfe381cfd2ead305c60378af46bc1f78c584795155bf06c20ea5472c4165642255668375f62f09f2f5f1c341f2c3352f3113d881c9ade0be5082f9424926607f58fe461ae25447ffccda1dab1c87b648116c5f886ab67a7a413fe01f489e2365a403e33e3d29d8226e6de1874a428be442043e50d49b0d9e7db979aa251c94f4e6d121c60ae8ec4401e129c1e3a4247f15dbe4327f015fc844bc1f9286b35f7677b772d7c36786d05e753fb36d0ca9550d85c6fbc265e7e1aacb1b383a0a3f2ff4a2d78a0e5cffe0af8f280ddc6f43c29042f869341eff7f07a04e1adf772258efda6a219c877196c8189284eba8c1a38ab5d62c19ca38df2a42b23c6661c77775aa87fbf1fd1c2c920622ff8d4c5d30354b9e93600fa5cfadd510cb69541cda75b7a82413d0adb1cfe80fe71780796a135f837bd7a3d7c43f4c749822ec91d7bc28fb9667bb73b9fee8ddad030b45bd446e4ed1c29f5e7d503fa70ed6e284b3836ff119aa41077daea94fecd0fb6c194028c2e29838979ae1246c35d0c56c222286759eb281281fcd59d65dff428ad3ec9a7febf5c52415965ca613b191d74c52d08893f368a3511192ee778087cc81594ff12ab74f8873ecce24a1a08e8389f21a3531f33045806bf07dd06f4c374321e307b9750df8485bd7d1650f74a54f0d88b66885a8cd1716c8cc2ad3d976945eda55d817183e38c46ff295f3ac816b2452027df3240d1047e779522cbddb09151f494d846877d83aa257edfa5113f09ad280eae1de4c746a1bb67576a4755fc95ad9cb5041794278982976cd5b3b9f13d09a9a212eb096b36a52c8fbdbcd0996c425238536f18ffc54734259b2ab508232c219f4b5fbf9022d5ed096f0f108f4a789ed0b9f8e3b967bd0de3a02e0bcdb9fd9de7450abfa0e93e0e774fac4ad18ec07cbe2b854cac8efdf7c9088f6b3194859365bf81c4b41ddbbec0e021de98d14d5ea0992226056f23d587c76b0804c7bafed177979c104c2d1709f3e418cc70cf00e8772bdbe7d5152d203d03848bd1c7e555b3167d7f403d9760cbf503377ed2845a29cd67016703625c41ee642cd9758f4d72abdddd337aa588ce4fb3e8fc68a381bd44e8f081728a1c11d0a5357eac7be92dccbc7498ee22ac43e0e062bd1648fbab41d464b4dc3a88bcad7863b8eedbca65d2f184edd10d97d6be8ce2ec52cf3d812fe4b77d7bb6ec46e814b4b0a4c037a4a344575ad0a5cacb0a2fcb28c4113f750da32e644071a45fc217bc9aefe97ed4228958aca7dbb293e5926c3b70c147af661cd83f775ed31d26bd13609321c2bcc613b4b36ba3ad531eff61e366532da727877db9a0b15b33c8910c113c5c11f8cb703b6e68d5714816108020fcc3ef82bebd48706ebb037ea8c5958db8fba401b69f803826d8e0ea41e611c5f04e299fb4e828e7cd42298d7380e95019be3888ec8f4882b20efe69f859886a3dafa4a83b57d2038c15a7965e167c778676d5442c905dca668138d062e02df4763f5eac6b54ecbed85790973b6bb368382b6ccd400c586b65d386df7f1bdf12b95fcd105bee51a1948fbe04eccb82c8d2c9f896e2c9a0a0a71037c13a7cd6545f51c261a427a5958141f73dd376c3e099f9fa28252b860de0597fef6d1e0870822801cc232fa8c04eec2c3777632243bea83c6f5205aa334ca1f83bbb789f9e6d3f967233c4cb5d1209b884db6e2daede9efa9cb76a82333599a40cf93f92bfd943e743ce5c270d5e1b3c3e9ce6271386ef315fefdd39fbbe4f1072783f2e6402e26e2f1cbf4a90796f542ce4ec67fc95825fba4d23397274814b0b41b4f9c99aa9e1a6114a51604900f4da8de6793a7cb30a18f32c653cc0fc72a85b935e89edff1dbffcdd902e074cc0ebf425cfb95045ea0c8b750e20bd0beac838a3ab237c123c514ab044ad9a3a1428c3c91fbdbf36d07cd5471e19573242265dd2f63860d9cc1480036c6c28ce36f85d784dbfa51236b6a46a9503fe2b17c616c9ebadb6c9ecb0c147677cfaf886fd7d56423bfb39bffe4daaac982719b70212219ffa6d28412c28626d79d7db7c83f48d488aeb8e7dfae757fbf714aa2f6293da2a50d0ec784f9e26c2f8aa091957f3489fc1666373f458070b818caa280f62fba634b1df244bbf3ced336ad01579bf8fc4a4bea05f429ea0657bf2ccbff662a1a09d903e47a6bd5d913003123ef2fcab4bcad425605813ce342a6e73b7fdfdafd9b19ebcf3681244ad71e0d3ff72b08fe7c1837198d0beaad262f3dc28a6c4010b1b5ef3bb40e0545f6369b1b1e978bee21435caeea8df98e50c73d69a5cd96615f01b81640f7f3c6732e89a8888bc5d88d4062ce0a3b98760755a1eeb94e1b89dab9edd7984dffa0cde6ea02b259604ec0834dc0faa6c2c570c721d79f8fb2e6908cd1e0d7a995a5175dedd1a4aa50312a6b418855255ae4f4c02598cceea5be4d32c679361a1dce93bf345bbb200c16b8c1f6ea6afcc8b4fbf3ea6181edbd3f82cc4426dfccb3eac8201c59db73297ab4bf0b5ccd0bc058a85877d805e808301b470c7db284221e509e369fa3ca11b98d7c07b16dc8c3f1edd31a0addda5f1fc6d0c443a9a7431be23ab80a483e20d4c0c1223fc0d5145fd9bb7a77014eaaaf6ab4503916cce878ac65fcd844a7eea426564ff6b3ad3033135d27a07da208ca9d234b99db7ff0db05325c92db21d4532e0a88e0e6433451f999cf32c2e906620b13943d9a66d74fbbe2d802edbd1524d05498c67cedc03be111c88265e9a8fbb76088bd35e86be3fa9a1991719e3016f7ad85eff7c72ec6941948cc5108c7f1702ab1e5253674e47e0d9325ae349262a7e93fce2e071f8dee8866a027ea36d4efd999cf7cf4a631e944c68dacc22bbedc5be5212746c25f0f20b4936ed47d114bd3e123290bab27155cfbadd12323de34feed390dcebf9f46d999b599d34597acba4d6875653819169c6fc85ac9cd963f44c2f8e13a72bed24a8aa56ed10bb7b026e90e1a0b66ed73b0d4ffbd0ccb52f188ede13ec4447f067bbd5fdd6a2716602ef174173e9c8498f2801525e20703beeb90ca579b7a3b9f43f15d5fc7895d6fad71ee09c5811cfc7a8f300617af5b20be63a2c67433aec463f4f84f43a99e4602fdd560bf46d5264978828fa6c664152d911ebcf9f5bebea599e341ec02b297ecc5a6a42073eccbe25f2950575273560b67855449783c6c694e89aed627ca1d4ca44853751796ece919c227c2d423738c2ddd310ce564c5bdac33e61cc4737423c3d5735945acbeeb3afacc49b29e0b720b9d298ffeba97243031ee9b3ffe8e2d2f520c729d59c6631713886407de9dcd0d71274036c6352fbf230a63d802d64dd27964afcfa6f460a76c7b7679c53050beb3e1068e3f67e4cd3fca48eae22cb2c9604c86310b8fa3e078c0d75f142b02b9db4c7f9c750e8a1d1eba0e0fb531e99b0b9f7ea0dae848ab9515a20af3c95d85fcc57349daee6437b0a607eba31cec5795750a38b098120467c35a777f7930ce0298229b040ac506decdacb0a8d5dad68a7fdfb8896902fe8780ebdd2e0790320004384ba1a5e3e9f00fa8a5329aa42ea0ab7d54e67720b58bafbfd4d3d4ce7a02726e2f1c33aae009534ac78f912b3417ded7b955b9f7705f518451a3175e6b14b0eb4f833fa12efdee16eaf5554873c7777f57ef4daa643477a7bf3ac0044a9cda9f958c77df7d4379b7dde9cfdff984ceaff0620c65a6f73e632c48d242c97fb01d71c489a4f488a54e43159192916083195cda90beecc901e29ded5e7af3c2ced7225dd601690263f91cd5abae3ae189ac88afac0220f09b7b74d9ccd8a59a46cfb1ab3ac94332909e809fc91bbd4753617225f0f91eb5877e9088228ca12100cfd26b2a59dc34b86b192c2b35f2ba955ddd6e370c43a4349a5e9efc0c4c7733c679f74abe13e3699c1ae2b56e8b3fa38793f49190f0a27ce1b4db08a81e9f739c8e6e41662c5ce28c0f99465a5163286f13c9b5307c735a6cc86dd7f029d7fab2c1654f4a77a0d6f095ccd9eca1517fe16a9dd43275d4fbb904fb4028e69a46c6c788e85c7d46f02a1e29d0c26bf1f9df99653a7df9d9dda4378c1d360b860ec870e5ca32c3b3e88fd835063c0a004e59aa9fc17e950360d7faae28970053edb87009c4a5020816ed84f2ba02435e100474782638f8536689c2147390ae8f7a32ef05665184a993a343321f034b8a915ce61ae1133a473d86c9cabf8557a496b8c10f58956d1d07156e513942d6edd58db9799e91415b38f573d732b36356f870f736bdcc4300b5daf4bf9656bb3cdde42b9613adcb788cfcddb7c6a58569ed0a0ff5d4de4316405fa64184ead4be3099b4ea88d1b29df6adbdf936d644f3c137c72e518020892e566b4e0a9d576b255a15d525d7b80ad39bd2065417fd9b7f74f8a4de9cad8d2a73e91f99b18b5f145ebec40ea416ddc99975998d1401fa9044db9289c5ff5764c9dc167b7f0ff19972bbd75646a6600fbec6987f6cfa15c8e8849f33aacae77405f30c09b76dcdd9d5128bf8447f0e73562f38701916ecaeae014ae12ce1056348940db7320e691a84bc0c8424f5f9a138b0b95adad3a7b7cb12b3540e1a8db8e340254606c9f614b19b8d3f94fcca7e54630112c96c967e793f961490600a8445459c3487b1ddb277963527c6eb5682a1fa8a44dbb4ba0e7ad568e149ab2d03dce35a466d58dc41955d8e9a22ed0a924e2c93ed238a2586b30ba0e3eddbedb8363da1b5303c0a4ae27f7dd23e422e9b5bf17a0d45e89aade87a6d0f045f34917115c8f52d900395c733bbecaa0af3fa8808689045bcde8fd2d3cd6c87d88c78bb3da5a44cca0bf9d3f52d13f2100fb35ec1def9d00fc8404ac0a3404c8f25dc460eb96a9e62e2019d2408c201e2069c0ba13487a2c9449d2a3ac2511a31ea98b1a19929b8b52295e7e0cf57f29db6c0f258f127ad9bc4dca586d7e962f2b27d72602f9967f54da59912bd9fe7a6305b3f2719de8ef6f511cdfcccfbd07d8e7a375819aec05fda594c911dae2d090cdbfdb5c308c969401b136e7af14ab434931f7eae2ed500beef449ae85f50fbc781198dfe1124e2f8e79a2b6a35a3c0f1704478b959d9186af171ca0470924dec87be1ae36a39b18f32088f9560a26e6ae321efbf00825abbe31b8ef215adf897ca6e459afe8de999f346822e457a7a7b74668e2fe2e376f927677d381d2c47bed2758264b84f4bb02b86809ca39e851f50fc052fcb521024b4245a77b1b626e37b0721961e52810825430da92aa143410bd0cf392a9dd13549e38901820a85c48f957155fc51c36182591e1c6cc9c1837eeab7f547b75212d70a6b7bc9e2e414f5f0dbf30757943a19f0aa0dc4d49482b600b8f2dd19ebd9675b98a7ed950b840daad48ae925209fb6656ac968fcc358be5d888e31cf896017ea9aebc8775caa39bdc5814539e8d234464fa8f8a2a018a813a666069f536e68696fe96d2acdd2169d02b3b5cd64a3610c30f896207d0b52dc6d3111ab2db0c0b5386d65ffc96830b7dce942b76507fe2c298dafb97927d7f3ac94d184d02ea024fd38fa2cb22236956ea57dd790ae97c187344ed8be84c469e00699bf6553e5292e91daad56b62d7caf6652c5cd7f30494afb09997d384da9b8b8fefffb5540ff065ff82e945b5552a2cece091ab101acdbf464fab9644d84e6f3b57ef7430ce3ee5d0f3d9340e192ee905cf982b5e4e6cac6d55fdf8435579e8d1d6936d745af8bb65a743c987622850669833f4fb875ce11848cab87e4646626b147a300325af7172a6370add612dfade92fb983cde4d16b5ec09b31a1096857db86bca02701b5cfe2d2168b9a4aabe5e1eb2df2dc5ed92f22e4243a978bd19ded6c2229324bcf7f8aad96205cdaf42d3cc87499a6a34d59de322be0929311199228afed4b611ebf1c255683b55bed8eee50b152e46eb1ad1092de2a2ba960eb389603798536d54f767716b2b5e3073039e5cd774d190bd9dc483d63f8a087ae9783259ea5fe2c45e63d6da6da3b4f27b5832edf2f5c6d9492382a60203182fb244e4c4233b3ddcc9773d962f2a431d41c22d117826437531c87c757e55b02dfbd67e2dfeb8948020cd47e7577a05d4a9fdd1c949e9fe8e2c4859a72a11b13aa6672981ee517a6e596eac0eaf4211a84ce8361e4404454db794f3f53c2762f4831bad728941c15b80e916351206c8749e29e23d8d9c8c47fdfb0243df562cd04f21b051e29abe6b0e44655418ac99015ecd47da549a12b02fdc8f8209d0b9d91d8f9d5fd36b2001430daabd73cb9f1636fea6b8aff2b715d3005619babb92c11ed7a11b29873e346fda4d008ce386d296932d40d074a749e7dafeb30dd176c20007233280e6d7c440845ab716830bb15a5adfc65c515bf62169297d62f2ac62bf5f6577b1366d5b9e5b4fed46b2f85fd3ca73458aed6a27647dbf394e424358d6f51bb1abd56d599b2f80befa52454a4b12a9126814095935c3dc9939db8894dc7b78c2117beafa83b1cdb3c97bb93f2b4e964cab0cfaa46cfce04638c06fce08b28e422e47e5a32a1d6782f10f4a66047a592ad6aeeac753f40362be3e95528af98925688a4bd12d1442ff3fdf8c0e45b435579954fd2a6f324ed1d36e56841c295bf6fa4acb28208913f7e0f55f20d4e1d3b7443497921bb7ac6b73cdd2efe5c72d2b0b4d3deb65fd6bbc65a36d4e6efe3b27fed6ad69f8194e4e84d30de1629dc8af9c92ed66f33fd8208e81d0d7d6d8bc8381fd2435c1a194ac6df720cda536140bced88056a5b112924fff4b3b53072348c673d43b64d3ed1098b30d384d322db6b07c296d541c1d17d53a0533dc133f4b4455d06fa4700cf1a77322b30fa7b36bbf065242d97ab81e0cfaf7746e4f341343e277319f93b1d82bc2ca9e39a55faeaca4162ef137e70e9f79f57ba0eddc3141c693a81cced38951d7499c91516da0aab8f391fe9d57d10fd2b2bcbbe9594c2e2fb22ed834a5ede1f16549590b380929cd39b04c55986a0738b83e3b821c03abe010291618c5aa528201d92aa66175508fdaaa4f347e70b0d623e7d2ca24ee881d36ff37f950b5576b09e173038b859f075948ab36712eb7df1fa15e124a82927e27ef127ca43c501c9553e05116d40a7d3bddec15eac7b6dab0795dcff7f8142f632c6f460ac5612d1e5d7ac6eabdafda0a45ac96cc1ba24fb160eb5cb0edca54b2dd31080caacfd045dbe2cdec95d663037ec150ed7a571df9be4e8baba19ee0ed37c77aa440be69f5732b7381113e65c77d273a0f1e73585f854a92a7a2b7cb25c43c4a9d76ad93cb46646b5d0a603023359c677d0b518683b24e5bf2b2b6ec5e9b1e40361f23136846381fc71183cfa02cbb6f93fad20824f73dbec7d3fd5fade517985eb7cb2b4675d17b9818951d0a09a7b03f06768cd2b5ef41d659672ea57a84ff42881d7922dfa495581bed35d5cde0321f5c843fde9e07774609167c3143281ed32c1a0aec23602e1e3a7cc610574a44b6b27fd0866eec649217dba43f56cbedbaf672640c4f3fcd56ecf4137ff47458edd73d08af40ef6f0f16c2af7f17f9f16ac69f80b34948aaba6ab3745f96ed6c4fd9580c599b31da1ca582dd9d7ac925bed4c40e096224172749b5550ec07e7f732c7b036498a09eb01eceb357cec90c4c00e41b57ef0338e4caf2e17fc0987ad3a1c614ba05d56a9d70da30306a92f4e1c436dd233f707e3e10f890eb454d982b7df1ea040bac432b76ca88350ac6432d7c0b49b351f9e58bc71700d9033d8f8a8ea43038808ac867c7880fe66b55f90c30e3590e6711703fffd511fd1a1d3bcf3a35a3e54cf8db8e7ab6900b1f8c0c8008d3b9f820c6dbbe412bfd1895332b4566e7e38e6d0b51d52aa67fdec5a268ebe08ceac5f9b6d3fee047717ed1a2baef2af9e2a6283236e3cb3f306546d6258501da62722c090d47d32422261216c39aad214b3976c5ebb22cd952207a1d5585711fdc4472d0c22ba0fb6f62a1b37ee2fe72b852c62ef0eb32505d0af77919e830f148ee44c55dd6c7debd963190e00e8d8cfe7504f776dc45bfedbc6988164b277803de1020496088376ee73c0bd0f92247829dfea53e24d89fcd3357374a3e81d58c430e4869cf444979029f485b69afd135d512d9aff49be2536fa915e29f2a9adda892d8e72939971df4dbff6d2f3b61d9b13c39f7e1dfddbb09c50e251f56897e372a950bc5c1eb455a1b15cda3c263b02b30de00cf78a20626748ccb59fc0cc136ce76e42acb605b7cad8720eb7cf6565fe5fdde6d464bbdf6ee4e6e522b936c45beae970d54726c540d43c3c8b3171a96d55c6bf3272a870e1440d49512765eb755b07650b2684034aa042837d9d91eedbf7aff6eca63f4c7591c1874a2efadfb98196d881880247f2e7af3304db4bd485f9501cebe14b858e123eb35bbad5232ec312e489833cd68eaa5acdd59ab71fa2668686ad69703a1ced4fa95c323ce1cf13e3b5b9fd8f48616bf6f98b8862c825de64f196daa311fb8d10055c977c6167898a2bd7ef1864a34284473c8b09be64b54c967cc24e3709370cd374e10e64ddcf8d0da6fba8e11eae0d5205b901d4965162bc23361a4c668fdc65e5945e42e409a706566171cba2202f3bc4cfd93f7beb0f20b5ad6587077e011059abb5e869d9e816c02c92125be149ac883f2c250abc3b10ebdc9d3df7701379351a754b7f94995a80111b6f1664bb1356229797f23940482f4591746185a9a07a8eea6de37c11fea4c9b3d35125f8395967a60ffb1829c9981e6ee513786bcdd96968741059c22f694d0af8b3886bd2d84024d764194cda2c12a061bf3f7829cbaea4d9af7ebe1e98e07869a4b2df9cf2c7c529c195b5cad648c8023b55f46040b9d273eb154b1d08956919b684f92caf0ef473a72d1f25a02fbbd3468568cdf423a1d1c96744cd56e6f25a37d937ca92927dc20d04e3a499547ea0ad0c04f53b78627afa550e1c8cc930cc61101a37a76b4d15f3c7e53e0062bbb84d5c9385ac98022176fc6a39e6f013e093d6d7f2ef486d4c06e2fd8099180ca7eddaf3a6548c148b2c3d81d4eea207eb54790d55315d345f6aa4bad7709c19d64fab69d9dd0c843b5c1690d934e40fcf682ae522f25db9275a6ee990996fc9fe2fa7967a0ae8570cfee5fcea715292bf300dd2325814f1966047d6ba91b0ed746ed8b0bfba1aa8fdd19874ea41bf27096f276e8f4fed0ca73ca38a476907359f66682c0d7e7b69b5d253f81ecac9f94b69283510d6b26d3f63ada7283407aa5375bf00bfcbeebc70b6c3706f9b5e0af04ee158eff984b4f52349e2ca90f862a21e32d5aef4d22bf131ffa15fdc30ba9ad00528b99ff56cc340d62fd12bc630ba7d62ed461004560edea4ffcf61789c832a8f2b2cd7fb2e956b009a1a29ac71cef4af9d67bb0fa84b846c59c10aba2562af97eded272e8c84176bce9ed52909f2dd870273cd09a3e55f7a8e96562ee8323a0ae3d2b55050d4cc57d8eab7a0570dfd0992f48bf52c92534e53e0b2c3749d1fff85be1d6cbafebaf1f1245a5c6f7ed90497c5262cb8c8de3f9aec434aa7b84e760ae1f8d5938d3e4be086c2e91d01bb00869f1aeb89f166948f2351c0823d842bd2dbfdb58481e4543bb482fd7192d27b279489abbeac6c278ecf53bc96071e183cedcac289356d1ce41b098a5dadc113d3c71232db49590b0c2e99cf6fc828d6c89efe5d737eee4098a93d5413b4db269602dca53dd8e2f2bbf2a983ad74f4a46f512b0bf7083ccaa500a8913f189e7343800bbba13fcc29cde4e27565554512877d5f1b59ea846a4c5c5e15eed8c074c738f97b7ed14bb1036dcfa7d1727ddf2f43f5773a1c4e8b385460d6c47b28bf6b8f8f0b8997e6ac59c1ffbdefedb2e1a2d1e01bc767d1348c6d97ebee2c06f118d312de3e26a61ed5ea8253f12932496f3d61140cd80e024cefa4c9ec285da70c4ec44f5cc2a3fed9f5cb49a06f5da0ba926024dab3d19e2d14f007fd1f83bb3feaa6c4d013314f88aac77a564e6b3d5b2237afe3f814be96e03e5a8422a162378d83b959f4a416fbd58b6a7100a94478ab17f9db043212feab2d09f9804dfe967199cac6d3020d396710b17097f7fdfe21550d52f69696ce42abf6cdb2067b4273289323425f428a8c4816f56a5e24845d9a84821e08c7703f7d2a6f67fd865943342b9ff5153031e07958a7e1e0c3653e733eb16ecbb8c5d4e842b91111b863104df02f0e7ecdd48496e87123cd5d2380d527c9743007a9b057a963e7ced7e4944ef2fb5c55ef2ced131951fe0fbce05e13ed63bbd535e490330a5568c44cb5fdede7aba0824c875b2b8034bdafd691e87dc1daecb3618ec1893029404e93f3a0f2ccb59a88082aeab3cfacb915b4ea7ec27cd4a1958bdc30d451e34b32d9499f24a953d225ddc2e7e4c7582e93c4b63c29020c71d32f2cd1030d53a0719198113b3d79ee83a39441b4c8abb915fec5ac03b1849c65ed3be19f9fcc7a6ac6652da46bb823eb9244bd1cdb36b3b7388626840af678216bb13ec590be2003a431016bcc4b71e58c72fd33cea8b0e9bf38da9faff82e7b0bbad6e4b38af66a3ac7586c63694599f04c98a6c22ec4d460adb0da709c84637387b0cf2df42b70544024f27525640e0d0b1ba9624875b4eb5e76afa33e586d7af6cf4c7daf33a9a8d248a4142b01806705dac3091dcb22a4d81663420620b3f6cf905999dbda83477c3269561e802d9cb98e95293899f0275762c26607ec73994495a9d81ade8b37d8f4585e2e76472d90b69470b6f726744ac33e8083c0b03be61232758bf8415fad9aa3189d461ce5d4445a9bfcc540559d8a292e9903c90cd274d54e2d402657f63180c74b67e0249d70dc2ee91f04ff1a36224532c39b56d8baf2e0bab5ba92ac16f2644a26c19200401bdedc0e1a3cf343d542f4cea4d19793cba767cdecea2b9a22ba4d1a24f0f1f294907ecfeaa7cd1d7dc579f46f1a5b9cb7171126dc9e73881829b05bf4e3ebd85a6adba934d68794f230a0b839064ea9be14c74e7e03f492836fa277f6dc08ec853ffb42ed8a2d666cd04b99065691ceaad29dbccda886e87c92b5d4369ba7efc5d18c3ae59446e4b13262ec19d08909bee3cb215686115a6f3ea4c2df0f220d723214c537871b050de60574a6c1c88c054ecb51ef7e1772d6a02d71226377fc0b9ae38d7b7c57d54e5431989c5f6585798a738a55ea9b12c2959eeff07fc4eced7e3c1fc8cda1e8a8835b11055839afdeb1b09d8f2a99c612c7b3f53014bf46bfc1aa92dc09bc33fb56036f78fe5c1b3256dd41f7c5d50dead28187379d1e14390c0d02e586e112fa97a21c95b05f4569921617d7c62ee5cf49c4702bb4590cc640a5cbbd3642079e0569e503a527c32c90a863bc5f2978db459b771b7f5d544c37afc12f4f90689c74afddbe2dc433783daed678633e3ae233281cc745d48de8559ca6cc512da16bd717239d63ae19c33744e41894481b4aa8c94293242ca2d11a70448f11ea40bb3ab8f2380b81659093c2cf623e3f36481272448647c8c4fad72dee46711c83ab8568e260490b83358d908e4de39aefc959101be78af276435e2a3e558c50ac64f336e15b103a4350608b25fe35895d0c9a26c28420a021934b6ac61451979947699a812648a530936742023f473b1452b8dd8ff332790268a38ba013de0db9215a74cc5de6b8e415d5c28570603ea681ba28ce164c5cf397a4dc96dc4b5a7a793157fc7dd533819d9ca09e7156e5a67d51b35492f7d58108e60ac55d6bd93df45d62c2e03cecf356449281ccd487f98e0c3f273dbef51beaaff60ce5fd2e025c84db677aabd6b88092aba94e070a493d282987c229475bd78af7a8b7273a7fa923c18b9d023831604a31de8f7ab692071df0fa5d08aaee53ba708a8e9414627473fe6165be60c5755403030bc1dfa5266ed60572762466f18d38f1e8cf80decf3e41dd27db27e21315e5970bbec3978e5d857e8ee1a9d7cf3bb7e6d5341ddd08169ff6c20710daa354e17353ba34f7f2e2d77e5ceffe2b554719b592d01e66f6650fba10a656a3b223e9e6d18f8eab6578f2488b8ebd6e9d87ecaac143fdee5a2c269b88b805efb70873355fe4f5efaf3668a3d674438f095dbd1ae020a2631fcabbbf5fc2e9cc0f2e655c87713ae47f7a9e626cb0e1b4c81860e5c04b0aa52e015d41ee016808373b55f993eee9b863dc66492de22b236ab2247cff53ef5c9d36301d2166394f7d37af719b44e7b3fc8e4868a2c1d1c3470b27257282f3268bdfda1dc330de1653e9a379dc5126bf44ceb41ce953e1eb01c8b7f89ebb57ee75cedddee26d5659814185145d296eca5091017625cb1e2622213d58435ddeec0714e1f26421b9ba64f9c0714d192f384dc968e9a2ca56e4e93b6a062654bed11bbc2b730138319a9f1691deadd9c16185d7490de5a4bbe3889b56293010b83c517de68384e8806163efe72435b8d4008aac7fa7862b0dcd3c40df682965c65a9e06bfbe6467da41d6bfb40d41be28e19b14b9397090313bda66ba658418fc6fa185298945f847e7a17592f0bed00c390187af88fab9b0766d9edc0e7c7d19ae6f66d8d69508d95a3efdb0ccea58964cf2cafb33cb1f009e7e6ea78e7e3ae04379e94c0658b97faa03f22a1d650ac3c5e0f7680e6800b8902d8c8ce7d3c11fcca86a1a97c6ad4437d5d47a93455543948922fc81009eac2bcdf72ea3b15f5814a13526368b278f91ca90195fadbd2ee2049f1feeab26858e06958f0dbfac18824564a3bbe4c3abaaf401a46aec41b76e58c60c3e600cffa413bff674cc9b083516172524bb5fb5ccb752057fbad082c7e6def6edcc15f7a47a251ec867ce17ede364ae58b1b7930583ea07e31d6a194dbb736ab5775dd2652389fd5872fdeadd359ee7a811ef4bb64d9f8d0c351d70ba3f3d506648f73321c776df910da9f5661f19f8ba2e57086281158debc1b9eee29dbfc3b14ce7c010f481750803e35260d81b49a2d96adc07e0741bdf0b8ca396a87bafb119e2af3cffba932d064e64863d1fc0e958b8fea7c3730dd038eea717ee5ecc597ceb2c959f317e1dc27f8f3bcc2e0b2f1b16fa3e689aea35cb3b977b309dcf0e6748a23c8f6c3fb85154db1f46b0872fedf1c5aaf352e9b1bad8f9cbcc3affb213d28be6fbeeb979a3d1c89743eaf3333e2509658d2296767517e3d0ba7e3fe67042c7ded0d494d956f55e7ce072545a2a6e8597da804a49316158466b1515ab40236e2bd85f74c26e43f533c4e8de1cdaeedfd623f9ffaa93c4406f8edeecf4d20c1462e0458a39e1b63d16a5ba195c9994660320d3375216f36d10bd8f2453714a7f001bb2ff7b704792533ee40f51e3c5a48e036d78a806892871f706dbf221f59746b9a3151833f000f620cced3034d4eb29f2198dd08efa2bae16ee0ebe69296be79a9f1c98a7cbf9726afd5ecdb6e066f9496d3b9a2288f1ee61ff84438dd802f05f4f46afda2aa6c8037af3ecca9e9bfeebead0c77dfeae27f8db14121bc95593f0e8593feef117274f00cebba17b1e86ab6bae365c3ed4d6199fc740a18524b48c4e3bb706e11c04356b4fe567a3631ee14f6fc6a3ed73ea141a7d4b467bd1335591586d5f68238768d6fe6268b5d7dd18eb0f3b095d037c60aef2f84e30c0e042fc5697c2a971e383a95e2d2d97fa12bc82288618b81095d50343bfdd5f5740293244ba71500cbf505cbed7713f93e5d0b07f23a2302a7694648876a834b3d8530a49046fcedb18d693bf496d3e19da421b51351cd91eeb1afe86f8245ca37a31a257ff6184512549a75528042c51814e5974ccd2a3b267cde7ac7b4f0d0c65c729cb4bf96ecfedcc31ed1fb8cd04107b3ddcc2295b9d5ce1f1580101b062fbee133e493831fda9b3f06c3e6c53e99c2ea7c161d9b2764941cac9601541061122ef3cc2d0d319307e8b4f18cbf02570452ef0cbcba31a77c4d050192bada4ad5ac34fa0408f40fa4df4a430170b7b56e7992eb1e4b03429b2333bfe9e08c0ddd1d60c60d68e36a2ebc0e73b3525a2a672062873f93129de3e43ff5ea6dd2bcc2dc7e7a5caa38fb23c447725e2739b345794873e1dc993534978b2887a2fdb15b4ce6a7bed5e66eeb79f0f98a8da570553e939eb2eebc2c6c6a5df4748655ec44b6d5758292a9be355e6a83913071ac56e0b692efd9b6656f486bf4dc0fa4da498024eb51ea71e5bb53a44200b4e8d26505e6010d676dd074509b3c286573fe89645fafdab6db54204a6ca8a1bb2f48ac2ec3ceee7277433e3cc867a18d0ffb8af38fbd3a4a676642745b3f9060e8f16f78e1f499b481605e0b14d44df8c0badb45f728077133feedbcc1bbbdd0907f2689e241df9398dabf6f385a6c7cfcbc79f7c5b7be4f0a6dd6b35a05af233985b16220fada23a14aa8c64b8e801e99517ec4cf162389cd5d3823868b75fa3fde14c167baaa5ec529842581ba4cea814c0f0b583e6b4c96bbead50b51287a3697b04db4ab14f93bb34c289caecac8f496f4bb479ae54ed35e603c5353ac5f65b5cb543884835116a1ac5f4a77eefecbfcd70d17ed6b932597d3dbecd6e5d290883ebc44f087878fc68d7220dc665e5d3cb5ddc11b26276464c8fae3b58f42285fe5f6a1b8752a728f27942a97805c721eb2820340e320f5cfa4478653daa24d67f35dba425d277a4bf6d8c68ddef73925e37c618142bbc2cac06dc61dc78689566ccfd73983759650897806f14d4b5742c29f837fac5482ecbb13302d862b6105a7419a75aece7aecb95d1f5245560389ceed649035a01ac866d3a1e7ee8e1d33825ea741f9f9e141bae52a4b27e592f622b365605d70e543cf4fc95755acb6cb2a7148df3d25e44c3e13ec731f249eca2244b65741d5f63a741f9f6249f763e9b912daf5f5c24d24630e8b52716bd3627ee0bcb4017d7b02d1e590b7804954dfbae16d5dd3763d4e6d6d538c1d396b507f14773391653b8aecf416c10920d92912cc66581e42ba5d163a3072705866613f88da2ec794c9e7cabbb96e6f9f610c2abef825e481a3818cf545a41c7ba11a3fb0d4488747626ab7b9a4dfb556f3301c9b8f797b4727c15fc6a4cf8b091c9509122dda0db5caedaecd7cce98953ebeefcbc7a5530d768cb2ffca13a6c1c7850a074bd8d30ac430672f632bcb4f5ceb3a75b5340dc1cd1fc294869e14cf0e7ebe2f5628f2bb23f3bdee5d7eabddfa1a4536ef4654452baa5a606cade9d2d4277f5cf2702c10965588e87a2a3544949a6422220e6c706034e646183d96caed658b743b7566ab3343f35615069c98d7da85dd2ce41afb325bd45fd06e6c4418b2e15e94832020ad65faefe74ece6d76a710692866d7b3d7e96d44b8fea75ecf4f48199cf5b1c5538478cb57331ca76191978d41ba7e2a8c9785afa5255ecb5afd6ca6221cd39c7397e0c013e5f3bba43d1ec28dee36c8ba70571f6e6ddbf6766a009c848a17a55a041c9cacca627717a4bbd2b1903acf366ff348ab4595d9968ce0d1117b2872b01c99d46c385f812f218449a59fef771922100d9fdf1d7ed0b358375ac49ec8c23f43fcffd7ebe79464fc9cb3c07849c333d9a54350b6c7e8bc86a3e691a51db29c6992402bda0ad37dcc58ffbd5c0aefaba6b262f59bc7255edca19bad1278e5afe2b120a8016f28bddb1f1690e2ad80a45e0e3dd27733b9124e91b9617be7ee9f453bd51ebf68dd222d85d708e4081138d2d3df5853f99d2d7c5cd754014bc0b783da14558e316c0b6dd444a7fc1c5252ae7b9f95f35bd35373fba55d4bdcef59df03cdf528d9d02d0ca1777be887610cbaafb9a0d09dd44d9a91f76b188ca1caf4d3970405439a63025f394ecf0d693c1005ab442e6c6c371536c4302ea1328a846234ba36e013f0dcd9613e16b47a6be628f6cb103c7f6a2d89c9680af6e0cccee4ff956488cc9ced957e64cbdfda113c22b4554daf414a108ec7195d74b46aa66400105f81e9e7c46eb272b23c4bb030890de817ea211ce56a417b3fe64814aaa0ccd67e6af6d9a52511f5f264b66b1d31009cd2c9a6c91d5fdce647cfb7fa876bd1703090f65df9b0146ad8b1e14644217abd3456dbbf8208c045ccb680aec62fa2b5c8533888aebd1785784ab81c56f30a46f912904720f45907493192dd680d82b3c2492ded9799c93b58ceac6da52de0c3255a3f271a3fba06bb08477b820da4d55197f2618fe80736a91a0432b3f8aecc7d3747eecfb7e983b6f8531e0a5fd8656432569151116def8c6dd376027b1d482aed1da537b36787a97f8227ea220c9a4685773b1f4437b0dc3169633c13d4c216fb24e63abc19327bc881070a5cfa46300507c1344fddf39312a0494845b8e09219dc648f059c0b41f4968868033e517ce1339ca28fbc85402edff0fbf99474c53ed0cb258d3edde53105f74765835426b53dc02c0bddb0d0dc4d7c937f87de487f51e0fbb934a6da3702e5aaaceb1ba7ab6c906e39d77419eb1196e3273e9830de6f5950966914c31318cc279394f80e19c230ac25e2380d124223c0e0e3f286595d7048c9a2452447076e61c08806350f2528c6d21ae6fbef9b66b3a96bc2cb4ea0b8f4fe3b638e9120145abba60ccad47a6b23cf29c48825396705257adea0efc9dcb6332f79b56e2b9f7e00e9f04c2d2ad092694e3de3fe50428ed4e45dfed4a426660dbc879454a90fb9601e91e6572a4a8e31438d0dc4352425dc9d5b7a035d5acbbca577cede1fb12458b52f475a7bf1fce6e039799ef91be61b912cc4ab3308e50bd7c744fac8bcf62c01c1f344b08b1ee039427fbd7b2fce0e295c14f25b98a9848f865efd752422e457e95562fa9266989ea605da29a6c97b14db6fa88dd6bc137d4cffbc7cfa0a43655bdfa10db888b31a9e122e0b86a3c5d168446cf0118ad1d249d58e65edbe392f93b5e4bb589bb363405462e030e650aa2f8ce28a363e611be8243f10e7cae5fb6ff6e9011df31596ed5f95d11d889132461d133c7f44fcbc2b5dc666d6381b4f4e83e1bfe323bae55b2534483715ef9639ad436fb15002da6bc323731ed14a364cc02c599790b5d42968560ab587d7b9b9c86284c3257cd3b19cbc9d7f86af0a41c90d79714cd275152785ba24f1a630d9783475f2e90952213972b19614b53f01ce6744aa2d61fc7d01cf194ce31dc0e8ed17cd12862ae0c92b32406c4e7165e817f47b08ff20bdc460f217e18a7c2ede4065e739a23f378b3f3a3fbb185193483d81a104813326aab50e767c576ec6ae3f8eb952f7e920c457c8851117eb3dcbfc0567c0bada4a0abad110e83b09f49fb09d88823c20f1f1ed59458e3d04258621b6526dcb883bba20698a0a9c7fb018e57283ddeef1939dcbf93a3ce7a2d785a6ac22083a515556f6aa535226c2a923fffc8b64936ef3be25bb34871453851e1ea75247e2a7ea31529af85fce0cd5b9e0825fca5661e0447073942263058bc7c7e96d8d0bceeda818f20fbf211a025078d8aff412848905ae74369ad800b9392fb9c16554af114b1ca55c11c47269a22eeb3ae9d4fa46ca2b9517ecff82027fef97c2c9bba866da973e528e3b52470d0d79873be95df8d1c3900cec225f1dcd06346d37df53fc2c24738ced1d773bc6151a330b1ef24cf603114a8a77d43586ad797dcb4b599be9031eba96eb8922a781f78ed1356a7703a62a081e223e9c89cf46fd49289d9e4777b2dc871863b43deff9275255f6f0fa8ff24479055a722f06110b6b6bc2726b979aeb1f7aaba53e4f98f5a5edf78ccc61f60da93d7837a828ba95721bb55d4391f108e4bea173571505668beb138088e6e5b15994f50df0a3aa3419e077447be8af219d2255d47b69fbbb8e94f72fdc2e22cb5bcabae74067fd828f023108e1dd9ff968f0e9ee5245d632903a2f0ddc369446af0d8f3ca0b13bc8d036f120f403a7f1e70efd6452f323287f73f18cf69d26e30f6e757090ad596ef70eee26dd66812b2d7139867e147193b17a8b2cc7934f005bfcd08341eb83179a21b53f05a69269c27d20a242870d1337de509dba7e5e8bde784a9da15d0a5641ac90534d318e182122372656404f62098ccac8d1d09ebac608ced20493484160309d292f603776e80b53b36a8d6799f0d8dac3c3e39b6342d0811d53c456a193e167dd44e4e8fe2f4e2a144918cf9880eedab43bb9a289d295ef4ad6194fa8de4a42faf9a812d1e44de0d8cddc8d2fe83a6af514c094a49a018e93a828c5443f99fceda745d72ec57147fcded8a1423bc8edd8b853fd10e28117988e214810be237f27157aff06652fd6403bc56375ac5e4fbf90a7ff6f3e812d21c1fe2f7ea7f7722e7758e1788b7416504c696f572b83c693f2ac2baf4c4d2c7c333f48398e92d153baf9963e4e440165f7653077c498ab088094077af6a04591403e7a89caf59c61cc3e1ee013afe880876eeaaa95a8f40abc1c8c0d72da1a73a83d6c83b50938be874a194be5a5e5bd018f0fa57545fe1e50cd55406146881da9b167b8cf65036445d35c0eca8db89811e5408b6d374bfaeab137188d4eefab22975e467da71592206f45932e49f60c29ca3571a0fa879f458331d50ed1ce165dd410a339d6fd690b6b52531a62ac0b4651089d38e4c6e4c9b81f046a30571cebd4412015b1140affd5dfe6d84e7a6cb5e7652b2942174af95566e4779170c23197e1690754fa386b5964fdb8c529692610517c4f59f224e46e7e4d71501b34c243f1114b2e90e91a7e2433141714c2298486dfd93fb3f260fb8dc67e97db7ca870002d31f3a32f6acc07099fa165af13bdc277a48b1921c20049141173a26040a18b016229d774e470cd1a73865d1db5ded876ea309ee45dda2b13a42f04d7a9b406f7b97868a25308d4f4696ea8100189eab03446eaa26d75e10e620c2267225a873ddd36aa3f4df0e770583a5b90c2443dd096fe73c99bd402962a4ad54cf1de80f95e157ed47ca2ba74f83a45fede0b6eef95016586c7f82617b8a169c986d5bab7836c91e5101ba3fa613e499408dcf82559669d76f9148a9f06fd20bf65b69c2891c1ef5d088d24a96444bec7b3f28efcfa183fe3bd231ff8cf258033c3f8d42ceab47fdb2a1669c034d1dbef74ff5044904ca3f3c1aa63ba4a9d83a1df17ee068a05ebd2e5fb9df09da2731ca790d30fe1139a56eac8546c7d75a834c5c3b3b16df3da8a26f411ca38a52f2ee6ae4283e4f278eca53acab520172c6992ab259fd7a8eae72a630f9f590b1558547c4aba2428ac76a0402d7f9806957f9fd1c63f21830030c8365fde668c9c3364b2862cfb018b86fd6e6a90cd919411a21aab840870fcf2a46e9662ebcd8793f929d78abbc8bf05239086fd290f0d042160f0feba17e878055f45a7455c4628ff90b771f471c5e19d78d4f6f486d6e1ac2a3ced8d72f3db2608a2da9d1ab076957c51c7b413dde4ba046e8616b2b9e1c395b8db4e92323b953c0701610644aa8187873e8dccfc4fdfa88fc824b02a8a8f02889132e2f8fb2cae88e5b62a411d826eda37c6da734e4f75f8c0c61495f773d3f4eb95420cc59086a59e9b9e8237ed73ec7bf56a607bb9e1b2e37f76da88c29d9e8235f1a22c2e731cf8cf09b9a9045ab6b3a088f39eac99ca0d2169c465d28f6fd6d7927ad3b56cecc575733938f3cca7dea7d51845aaa15ae168360faeaef0083afc7c1ca8e019c90a14559dfcb33546fb314e57b11f7855dd281d5a0d70e6dddc8c49100e5e5ae0e8a651536085f63ec47ac24e1f68057a51f70b02a42207a14758c5400b1b8686291150b1867d9677f42f300989011b4fadc7253b39161e1a7bb1a7b124d483f8bd626978e66aba479a52f9d54f3663f1959290b89af0764574e89df929359ac3e889bea13aa5da2012d8b69056707cf76da4603351cf1658566df6ba3c45c0622f7793d63753070049d18bf01f7b65d21c9544223c8a2b509bdf7ac984f8a6e2e481884927e951dda2b2c0e6069a6d814246d3fcaafff1f7601dcfdd10f53c53eba2a8c9f31e9285a3ca702c6ce7b1119144f611fcfb494d16c66e55b4e3b72835db908b47467636807d48f044383e4966c9f7f0c7fdb542e043406a7bb5e65224e60b2550fb2f95ddd158f49cd3c5c16bb4f7108b443207b75751c5acfdf824d447a1b0327b88fb668a2e3abfde757f86ef2f1d1c43c724ba50de85511c8b7a998461a0aa817ad8928ec8398d1a262b3e97db7faef8e1db39d6a44cee6080dd9935868dd3564078b9ad0d91e83875a969cfc0c258572ac6d520d221d00c5c5a1e0107f0aef092d394e8d98969565702d6434c1d16ebd931b3aa671eb5a10ab8c98472a666a87f686d62285a7810062d2c023219023470aadf32f0c33fddb7dc4da854e5eeffd2f7cb73a59d0240dedb88d9845cc5db80747beadde6b1472b03654b4e743641e2f651ff5202f1a4abfda07e1b786fbf1470ebce618858582b2ef368c6e834c405920e78a27fd880bd475b73cfd82a4842e19a787e1a23dc6a3f326c989c2bf64847b17996a6548b6f4d343f6b2255ad26cf938d3fc1fba7d67eabe034005cc52b33d7a4a44255fdf79999be8f366bfb16e917b9e022281496a15a6902b195dceaa7ae0bbcee7cf0ce007aaa1390cf6b532e6976aa6bdf0c4361a00c3ba9f756b129b07bd42ee8d5907444a4bc762b8751ecdc1240b623f87e1ed2e965180aa602e70198c5c7a7afba974e1533f358ae43fd446971289245d67a415ee505446d93e4b0956480caa027c9eeb533fad66c23f494a2704b807e42addb146e7278dc60c8ea6f4af93ed88a27d8033d99cdf7b38a5b78e645dd8502d5a89af4d771a8176428019ebfde1931d7df89a4747eff76e02fd224a81156dae76a9f86fecc26cec947b9e2302b971c6001909414609b251294aac6abc4be4b1fdc511e0df6f9350699dab515f0b6d02d8be8a993ccf0600649eb5de6c4adf9572dc56ccb72e28ff7cb304156617608e876a8d1f2d733aa84487e1b236a7b1f93e0255f39e420d42b843113c994c36dabf367175d60d20241d93b02567521053c050d14e7ff3c73b07564a4273cb4b6914d6f7e0e6608ab84a20df93c85264e477acecff1746a0f01a4fba2c99d08af1e234009cf8d741b08dde17df32f4204e37ab7274e69b7d8a2ebd4b693090ec77affdbb426294a0c155ed17389f3eb5c084772525e0ca25b427e774db02e87044b17208d8d0f22aa279eacb689ec677dce87ff2e770df25c49a4eadc0972083eab79f8bc0215829f595f55d7491852e77b63c21e08498185d1c2758047c128ed3f7e730371d2bd1acebdcca7dc3df29e7ad49804db6c554fcd46ad065f35691274c6b1225e4be6321fe59dcd0192433044e326d3c5eccebbed9a5b5f8e35ad6c17517ab84af8ae68e28898f09270a16f3baf5166c14409e2d35b36a3972106d4096e782b5546a35d9ca77c386b0c871d3231b29dccf55372c8e0fe12f1edb7f6c493118bb5835d3cb77fdde30bc9a3a17876fa03023e026d6533b350250ea37ae7c2c1834bcdaade597e49221dd248bcc61270dd9ba1e8402bf133bf043f8ba214376c97fd6cf71a9ff1f13b1db6feeea75cab8b426ed4a94951f0d6d43ca5dec8f5b9fe405b662eb0494df2a89b57f1fc6de43ab19bd9b45ce5ee8e7bcfadcd036a9772a07de3800b869eb4224effba03646a337caefbb9210b027e078c142d5df8f7ce7299013367de5bfd7392862f9331793b589c7467620fce32f167918a9b61dc9589314d33221555fb00cf07d0f8c11b61e1bfc1129f903ecc535217f4337e3c93a08264f9b9e71b9ed0f237c2f781f511efee4690aac23b80a030204bc333a69d78814a9f5fa6edc54ec8454699c4318046231ee13f24351aae5ca046124d1856c4a7401d3198f1c1eec7621351f1feb2e533944745b2a88d29790bc2b3b1593f6d0c8d72ddc0efa2108d6d0d0876438f03deaf4719b40be5278e5ab8c99ade9e31869a7474a8d2a24327dae7e59fbb4defa8e5408f3c6c4e9c2bff20562280f4a758304cb7b1edfdb6b07a9f5d697d09e32a4ac0167b6820490d7f0bac1fb94c38e1119b4ff3323ae825c3c225ce55ccff62b445af7d664b31046d8d2aab11e9e8544323d48674a6c62fd02f0628d3ac03ddddec77cbd48a1fe3afb7a776d66fd8534450df00ea48c1fe90bc103a07772342296499512ee5d9cbd181535eb2815dd1b377fb14fcd8d7481733ccaae1badf484c46ba2763e71434b36bc4c075b0730a20e63f0eb0d7ebf0324b0ef4ec7c5fb79f007faa68f4ce7ac3beda72d505eff455853cda2172b873a6d255f9df5fea9c66debaadfa11d92698603c8ea5f6635b81ff5b9595e7d5e7c7ce8814a8865bba9f9ae6e9e2719a378d48e4f9e166616e240aadfe7d9743a6d011000c39cb14a84dd4084d4f40f72628e272a7dbf0dc4d1340764e19f4283546f9bc458dff6bfba56d5f9376d9ad93d5639b1d1b52a916447656fd0cd738a29e1b80f388d130c256bd18b5b7668fb602020f57808490dccb55d4377766670e2498bcaf368cf74dc094e3de1c7f6fa1d29095ffb097674ec9861081f8e173ec20260bb45157564db699ff31724d124c6b36c27159859080d02e79801a551bf2f5971f02e95878a522e408f23bc6908ce9b95de474d07ab93c007df91906ed7e13a1c65689fe5469275ffc171666e729ab9e53697fc97ead62b78c8ae5d8a4b053bdae4824e7c2d3bb4ef1b9c42fe96a74d7469173d66a48647e4bf59a7a9f3c3676e5fa088e54b8dea7da8a27a68fc5724171607468461b88a13c0f8637b43ab4302e3d15d8edd8a2384b0e26b919ae17605c6bbf70d7187cc3bdc62cbdacbab9f3d56662b8466f6f65671b5f3c71d052532747b49c07745ac4aa645bc198c075fa0db7f424722c29a6b336ee702bbd826148810d8854f44450bffecc5d7666c88499558c13315673ad72c706cd90fa2aa5912ef65bd34443d60b06f90ad71b1fc248c143723bab3b9569ef49258ddf5027c1e0485355f4a4b53e6acdbdbc6542fd4444c55e66286d245c4b0a24f14f57d1c84afb10ae93eb4ce5c69ad7eb460b69c8ee40fe9f2f4d808b77dd20044c454a910b6d03423c6dbc9f73fa0f45380bd2b8349a58a70261f76ec601d5f1dbf17388572d85d203496241678bca0c22a70e5e14d3df5ce10c09d1dee665a9766cd61e9fab6d793971b40779faede74d930617dc5fae6fd2ef84fc9d23d9325a7866a19f6e3cce6fcdecf1d9e567c54bad3c7441129fc06bf69ae99e1128e6e4db67b13bd384e18e7a593425f9b479e963fb70f4162b80ca5ce30cba1c9b7247cf05ab40a760a5dff43fcb3543029e2fe7722633445834a875739ceeb886995193d74ba92089862083c764d9f8a1393d274b2bbda1d54c6d0cc1bf62f6923867045cc1d9e87a86c1881932ff7b3f727db94f709c251ba7e99f588726f9d91858284f7bee0444a1be23d2a769e868a37b9f3e051bdb94732e139a3b0a9aefe380aed2df2e6eeced75680c000a72153b89962f314ff7bcad4e43b3570f43354007c5c61f7aa3314115d3ca6cdde08138cac291f5b47be85ea3825ed203c11ba09a276b2844392a1f5ecfc9acb464688473b7efb0ffd77ce66fc4340036829534bc8159c502974dc037290e0b6a039bad3ac6a552e456fe2cd2d35a3d995c78f44f116bdba4e5882c203f41375a69dbc589d1bb444104e4015bcd07f4cc3b513adddd041e2e67b27e12bdb81e8eb6c959d3451d335df7be62c63e6007fe7233bc1e186d680ca716e70cd34be38e6d387df749d601cf527ed6e20351ea85de2114b14b5a3e2e7f2922a8cc417f6196d68d7b5683cdec1e2d464ac3e1fb620440c049874e18b3a1e424db4ce095df657dc7a429ba8baa5c8e042494832bbf99a71f66e7f71a2b452ccf18f8802d96256889afa3be0a5cdf86f684324775c03ca179eeb149d09885763ba76d39f0726ce82def8206d0405bdce71d22b01cde2bfacb9fea4b5563386f3100aeaf45bed484cd3d673caf8821f5fd1bda9e3dcdf264ef145e97427e6275a2d44fa6796133fcbfc58f70827af61579c49472dd7c67aff43c8c5da9594524991ed56f99712acb3e4e9db4bc5486d6db0ddecd4c67641d29bd4d6f3de8ac2bbc83895576145bbfcc719d5491668a4b4199992362a2f5ad40a6303db3aefd45636c546787fbdc2b004bb4194ac028c9ee64787ece02fee77ebea9c21f594a59104521791a098010d54c29b2d9fb51fa830496518e323c481ff21fd7e38c2726386b8d30bacb53bc9dabf68c4d5929d49bf944a5e4fb045b0bfbdcd37ec1fb210339536812ceb811576420db5f47e22a8bade0f5fb642bf028e0704400be6b084c48aeb6a5d7b5ae67b1bd9bef14dad876b03af43d30800bffe570aa25cf36abb8a12279a3bcc06ffb6309f792b0daea23fc28338721b2016a167192338802bc83acbcaab8fdb30720415bef4aa7cf434c8211352d0d3ce456ed1c5f91280c3af0d33a211caa7b771e4bb3d56c5190454d5e865f3e0a9ffc23e4a28d5ae60dbb18a0fba2b8d9d8261b97ef756db338b724c82d1d38fcfc0b970709bbc020be363a981d5559fd4b738066ac776ad6e0bda5c27a9f55c8b1190e6d09a361e8d9ae9a88a16f2f985ce05578994b2368a5fa7f48344ecfd70d76a5fa24c5ad17b3b5678645c2dda2b2030dda25a2282d371b7642ba79458a2e68fa5af646341597c7129ca18c96b14f3c780b605b42d2ff111ef03ecced8bef3bbab8f5941bf1511ee505b093e769ddc94c73beaeca385af1c4b963b8e5e38ad4eec1831ddd7998df7d37c8a363b14efbeba329e1d13087e0a94411ced838a1d1ec538c3aad924ec64a0e0faf1684c234dd6e7b67dcc71297f83935078033756324cc4ad4353a75bc30390dc995cda256af4eaa62594c38dc5d203069ed590041d565efbc48edde0977dddcfba03597ec336dd38c4c509b1d18db474a6e979883162c0cc01280901d19984f38be061a8a6679765a9c3554c062fd629007586ffd775a6930a247aba51a5ff2179c7b9dda51a2de086cd7b4d683ff5bb68396d53b9ddcaf0b36938e843a1bf0ce65c9c10ca4e307f5048436df054a96438ed7b4157dd7a8912d25d8459403b87e965ae35e7b13541c97712feeebf4b852f205f52ad54092e86ffa73c4fcc96670afedd014a8b571c3d1a27676f9d62432f7114fea5ca1ee86d8f0e36f7582c9ef5859b4bd81b539f04bee018294e40531777ff5bbbb1f10fad1d9f2882d1e9291d256c7b3014c4593edc2aefb461c95f70d304d6d44704ba532ccbfa9cffd54ea52816f2c218a8ad620885d3fe7454c1921426faa2467d02fd27b0f94e89051de149bf42d7e850f11452d4bf6b054853e4e69f16a7c93cb73d34fd0e495875e60600416de3f1f8bffc70796d26a6700a503d949817758a8088a1d191a63c53d0cf69b499f05fc19257f99ebe307c57ccec424cd844f780e25d843af9ce306df2bfe1b19622fc4be97418187da42acd302df3fb9166a8853374e2654a736f2b36c8226bccc49751d88db7151b1d2f19f4b65ee66912fa1942dddc81d4f2959bfa604e5f54560e320c2d8d24f2d39a2efef9b2d64e231f0723813712d447457bc957e15bf07fa62b2077212b6f69f65ab328c17060edc9dffe875a15ba522f571c6338e4c374bd6071053a0f406008a36408cc80e43a254b256f64fa422c1972bb7b0e97eb1c96a456bb35799527454bfc63590182e06a1fe8b8cb699aff273d9ba239bbfb2419ad84bceba352563a578ed99012557e6428af5fea6f5e2fc43a727800593167649ad835c52cff1bcf52200a21781d837053c1f0de842c57e89734fc15248faec61581b0d314145fc046b13559c9e4743c62d22549c7508f7203673f7e21ee4bb0a5944d924f25ea20fba22b85ad4ab2a4d5cacfc3a0231aa26324314b956d3fe8bf60ddfa2c191f451cfcc4f7dd7d7ae80428c097e0178cdc21c77b381354be0f7d74f7664b985c3238f6257037ebcb554ca664df5d47a42f67b3f23c2c709b3d4e35ccf32e1a606b509b338196f5346b3bb12f3a6b3cdd7c9ba6f220ce0e994977a26308da283cbe18bdd403f035a6d626e4a68f59395d9fd58f3d91fa6a7f77c2279fd98b16dc25500c47847f55fd823b31e50f69153a9152ba29e438d7fa096fa22b2fdee942144175c5154c3cdf3759b05ea74620833bc8fa8a64f48546d4ba616fc74504aa6378efffa5ecd73a79a28580f07da15e7e181ca3ff81fc112074f29743645ba17f42e4126c2654e05d591841afc5831d7ee62aa06ee136703ba90b9f6d327cf6b93bfa91eefd57b0316181649f87ec35c4aa0cc0064986f136e39933750b40257343754afde1064af0113c5fb1ff1c90b3c078649e64610151ee114e081b4d83404b2836e013d3c4feab0a73f891bf46155ec644a642ce13f667b07c30a8d4d6f4958ec9f23f0f7639100903fa31a52cb136d3508ebf2a1ba1b1beea1af6a2f301d1e67808c6d51eb50e8170de1161c63023f472045b3752062092ab4c793710ff5e78c6faa06ce3d9bbd41b36f877d710c81fbf87ed428b36df90b3a0e156948d7d1a42670bac68df13f5ee825a16b48120a6d87cca66cc95dbadef646956c2470dc3af630db921cb7ea0538906c52f29d99d7eb068a0f5159fcdf232895de1d1e92d2556ff498cbad4d3f96bf74b152de906a43cf049fd396579ed769e9bac554d8aa49334f4ba1208636178f52868f5e819fecd0a81808f740cbb762116828c551021c120120e14e8176455a2e7f85ec988487b64a1988633440b3c230e05b62e35ddf42bc53e64e94ea1b22886306489c0f19b126cd402a7ea5f2b92b7ffbcb6ed9bfa7b5d89157c732fb38577820277806dfab7cad31d8003cff1041757f0b6b2459dd5bc873d65d02d6bc82b7e21cb3b9260275e7145434c60a6449d6e0528dd772e4d66743e731c508d4f5aef9ba7df3cd47d7ecddc1e82178d4dff0b076f61d7ccdc3f4a7e6c6756646ce5b4282a0505a4e68cda207144ddd3735c9b7be5509cb1a36844f92ca4160e48e727ff737febf0a7ff07da8f8db9f0d7a7aeb5ddee4bbd435866f35e36c14590b0214a6c71fb8db60c838427b3b20f92b0bd66fe765fa49f8d65035d4f0c28ec4202b14eca3727e7a593541504c900c3c61bcdc112943ccf362896fc651bb58da035da0683f8335871d16c618126010f77384f00c139cdc20769c7c2ea8d1315ef756bce5b51e4b7e0634aa08449c9fb2fcb7a48fe2c305025fad31b758d4abee875e5cddfefd26d253833c582cf854b1cfe88ae3c44bb7bfe161d385158de45db5be0508f5864dbfc0599ad280d08e3f32cf80e90c61e7a2887c71325444ef4593bbfebec1f56a150ddbceb5d76497cc32f0825c39ebd675b521701a14287dd46c911da74b18bbd5f5282c8899c76550e112f28298a1a284ad99813fe1659cb940f45880111c08cb2c14e7307306664d34a6c41a112de91ab0fe0e8e08b94240a8301b50f0a9b855f429c01aa0e49339d916f76182197ce3d886a3bea4afbb4e9c406f43712e4fb751bc8780df5912f49094bf9b1640bfa72ff098102d5ef10b5164e6da58e625876d48689772e6b317240605bc4f5736090d7ff0208df299946e7022c6ece14af12de4088d537fa919cbd3c80fc20170ece76a9532e37dff2af0374e4d01bddd266fe578486be3abf7301d6e0575cf1e87a6873b5f73d8298df27a695f0d4b1ee20b492770f585da23c15e9296ee080b49d99060fa3f6acae22ba64d00f337e5be1526a71346cebd8779c13e17696342be86a3b3db9dafc67c67600bc0f4bb61607ddda7bf6f77267a3d0c8b48ebdc2437fd1bcbe22424b32f0b65bdd42741312dc149a12a3306631d86e6295a7fe8753730ed42f77175ad756a154147a3e9465c8ec1321ee8f3ba8c5653409b6c686bb512f4d19a9c873c6bf586eb7a3b217df7d1062a12fb6041dc0632fffbbeabc1270b4b84cde45182c6c31df6d275ee8d85a16979940cc8205bb982e681c33802a6b806d583921881bf02b476eeafec00d58b6229a6055fe7ecf10c3958023fe182c1a0c6a8907c68667670282dff8d171031704beaa006dd6659166f670ad29a56845d144e02df10abf1a972076af5473359bc976c1f2e054958200724dce53b871ae2db87542cf2950a5d19b046fd9f26c0954d4baa96b1b3f834fc1cacf780de63e5a8b305f9b42f68a5fe9780f0284b6e468e21b2ca145d708c9ab6adbc269a1c555d67300de5b40a2b833a5326c0a3ab59e0d41775f2e62ffc89448f8733d9a33b75658e7e401e053892167929d9b8efa8354d212e768c8baa8dc8fe71191088dbe4311144be884966b68eda321d329473d684461d9b50a039ed78dd16a0afc4e7fb79ebe678510800f5830b79a72e03f53624627ba68ede5713ec792e0e6db77281b0a2d36c172ef60ec11155227dd8187ab576b7c2bf0b9a434cb5d0d32c4c5980f7f044729de8cea7ed97599973d7093fc4054dddfce4805f76f33af6ee33b41c27c9ac88d62e9dc1190c6d685f99c817987fe564efda1388b23001febc595027073d145771f4ad36f084d4e9590ae4f0916023bb2876c2fd13eb105608464ddf78311051bb92a579af6b28f636efb541a6d20fa06fb5ef25dbadd4b32412004147445c84ebf0907925905d66c148956d75e0ca17c109a69d813c66cb05940a8555e67977e28e037062fb96d4687892af895f896cc5605c2f92f15d0664efc55e9f91988f4c2ad081b845bafb34c8b6e91312a6e95ca74f1ed7b3e0f15e6715bb8280ab3af404d7d725697e25cb815472733a8b7f56e553dfde8d6bee18cdbfe99ab738e209db8716e9b0b4c04a50c689a10dc2c037aa7b56deab44edb2d2f2891f4f5d27d007fecd0c722d061a9c5ef022616248a7e27376111a05f230b9564cbcaaaa50f953c23866eaeb72540e2239060dd5fdbace3aff16dc9eb5a848cc5eefdda0968a6fe1125d8f6815e8bbda37e34534c735faf063d3a04f86de20229542a3c5ec46334f5a58bb21779d4dc9d8cc120c7316acd87439c00c3f8ab088ddeaba98bbbbb0422aadcb6b216d2c8761bfcbc7f7c4b66694fab58752a7bc695cbaab80696ae6df911cc9f34c98175ba35d9c39d648e5a37690b4bf64d62855b49d1fac679c6969e8819a939f79703fdbaf0b15eef5ad2a86f66f42cd29c074e72c8a888b81b9468cebfdaca331a9b423cf7a45e5c2674ae6e31d52939859940ad39b36c149459904c8f518e28c85adc2b2a2c91e47afde619c0170a1ebf08ca4eef5c52c2c18c0e2aec326a92c9dc34b626be64dcaa74f239c3fba1c66bc1ea8be5639aab37743a14af61c2ae48ec6de4398a7ab1307f586970416a454bec023ebf22cf6a32cb90c4a293869109f7edc6f3eef1587d86bb7fee3d22fa66ac47407ccb5e2ad750f8423eb2fe3170960db85d2b09106b68c6b61b0537708203a192b7b0faae69154a1d6acafed17829b9520e827b313ec33cffaeb60e6ff52b3ddd80e8d7c10a0c92e9db16dade0cd8204a1dfcde29fd823b4b9c892eb113bc34900e8ec588c93e770764e445be1b939972312ed7c861438ec36b71eef12a154eae00ebb16a859a42d5a14d1202272cbef8d044127c8e7f4437d23ad89faedb6f3bc80db56af3da23783597a03fef9883533e5d7b9470463fc499e1e21608d631902d61853385ed316660d90e77231d155bb8cf7e14742791824af031169a9ea1748a400ff1b982e3ccb3af752a8e13cb8f11dce072106747c73a5caf5a34ff9616f1c32f929182a47f8530dca7fb9830231e7448e6cda5a0a78ee39380df60fb29cce80f5a4fd8ba2afffee7457e64ec78f6ad289d9e1c443fa3a05e3b852a25893071651eadb7688984e69f780cbaa6f4f95dd48f3de29528b3e23782d778c2d3bd448f17e62ae59f8759a6fef75a77d94d1fdf9409e05aa6676bf3b76eb931055051263ffcd9080c11859486bf3f106d728ad13137ffaab14529fede6b22ce715ccfadb2060931eef171bd217eee063cb80628a036ff7049e7106a364d6e7b58743610bf94857b7f55d6bb0e24c6c6096f4e051f5bce4dc54696ee4756b7d62af99d285d4c1355a85c6569a48403b4b4c637f19181eadb7f5f928328a972948914a66ce7bee9a7bb5469ebf21e631090275619a901e990fc0062b4a6e1cf5dbdda69c0031e9840d7b459c551906b6639855eb7afc4ed87ae9e94096a9e53f967a02339dee83ba18f4cb59bf53b7957e054d4f82400ce4d4f1ed7676871b7aaeae3e84fd1c140aa6e923907065147824cf7e07e6b5f5a3eaadf3d99c682380d83e72ffd2ea2e4c6c2a6f16b4e696ba2b30f811f8aa51affecda8b93f79eac2ed1f3cc6a929586853ebd55c50564fb58a5d6a83e1849c6abaeb230a6bd5fa30678be38028cf73f7e2db66a72c874c62017ec96f41581777221ae0f853e342afb0648710a22bd5f4f5bf11da12342bbe93c1815c11340847ddd0946d7c9753baeb2af5bf4eeb817f15413698f3be2c114edc95a175187a497a4d3e51ebb45eb52f9d991b1126981922485faab612c681fd177081668f124ae03e9a205bc36761217558c13f0c9d3f21253054c55b57b1beefd38902760ccf2901c6dda8aa595856479ffca16c4262c582f80eac084a86a98002ccb44a2f86dee3d6a7fff9542f1c3b5c6a3a58537ff43c19ad7885a64acf4e57a7c841c8118580047e5776baf3e348b55228d318ebb7d384340762a9d9025db65922961fcdf1b1524104411fd97bc1806dd076ac8f5e12499745284c058bc2fb5afbdeb3b93da3a3eda5e1a55608df625122783a25a10abb1d5480845ef7811bc9b4a7fa5562501616ebf9b196261aecf5567fc10f1b10eb116058728d13323d80b78e34fbd15251d003bdc959d0969d4b5bd7e19e0489a38f8cdb621efcad3cbce78b1bc02ef954a627edc33088f6ee5f75def8ae8623bf5e6cc792061e4ebf9bee4896c79340c1ba4ea08eb9536b8739187030830240c118be6a0e7947195109675cbbdc07cc9b64f988470d99f6e921e8b45afea12bde9bf3a9fa15ae0db09e18828327987c52275f03d9eb86b5f2c62e56fab710c5a0f23a6549f14b43bfadbee1d892b97a227cda6f15c6da545f3f682aadb3584d0b560051cabd10dbafe0ec3400f028043bf23a3ea92d14033bc83afc0ad028887ec22f89d603ab88fbb96f35e692c0522631ea026011fe1359ee8103a59db5d4f474a40a4de44a0637c00fcd2cbb2fe6cdab42da6f03236b9fafbe221088961dc525d2d7286fb0387474bd9e742b98955bf68edf59c0bc668418ebfa2c4e22c4fff32a776df2e1be6d777fa1a83edbe8c602d08f6d2592eeca0ae581be0f1492e2f409e62b4923bed32116b50382034b9bf3af2f02a9e5489d2eee48a560477a3f8dee9cf63883363e0fd1a7902d75af3b9f705c94b30670d7ba5d1813319ffd792277e2f37fe34381276684b85ba968b0b72e70b3c85ff2fe7f10950ed87ae27ada7c1084a5371fdbf555c63eea8e76b9b1fe2cff60d2e79189dc58c5e29c877625622f5c0da06160a7887fd5ce69caf527d2a25d74eac98581fbffd03621f25dbbc42ac955e657538fd90136bcb66cacbb9fe8606e7c17e7004bdefab8c0fcafc00381d23027afe03759dee3bdb4f6613036b834f418d2e30845d6ed27dc5d73bbea40e02d182e88513d18d64a07d9c2ff9380345256dcb7ba42fd25acdfbf815ff3b2609e107833c356b94148c64d9873cdbbea19b4551a48a33508f13636f03e2deccfe571c2beef066cd279303ff21f6883c30daa4d974fa437964142187eb43e1977280f9d3f681560b2938c676239895e21c5b2dd686a360802059657ffa0858aa2041cb6c39089130885200421290ddf19dbcc8a10308a0b663818ff5f8bbdb60c9bc4cf4093dd8bd419a52aec211395f617d91dfe9a4016a29767da3567ab48d9b285628000093d2f6a9e63fa7ab3a3298950c248d891f5f1cee62cf4161a3b98a067324c34f6974d5df97045742b5a2b5e9764bb23a9e0eb02ed9bc16b69d487dae6fc7485b2e2675aead03b4729c39437e838b8e618e7b955e153d924d501b055d5dd7f3ca47ba91a8156386ca32a4ee47a1940971878ab99d8daff67c6c4315b8fc65bd1688a99e48bd76b29b434b9023320eb8af69473073927bae8280682c26a80167e5867889708a901b6ea7cca575778cc74bcd699a434a99e6b744371cfd6c2278198dc9d2b2abac0c31282cf4dd0e6d418f0eb036c8957c0c8f744fb4a1a05d37d2c0a4fe140804e52c93389d457c25662160f16e2ba2e198856f30d6c03bcc11c806018186704b4824b1acb8daea09d1f90098d6d18c5cd547b70f59e0ed155f93177fbfb3fc635e73c688cb7e003ff6d07a67327329d0e80fba4d7375fae644076f450e64d0959846e70581b056c958a7b427ced3a7451bf30baa1a01b373a07eef012905914bab1fbe39993787256ddb142b629ed1477eecd05ac64f0377aa2b928873c42fb8ace8aa9be506dca0c0c4755afd59c5fe1fecf247b415203393476351b95479eed334b3c39c2f03976cf41095dcbbae20942deba3b28407ed3ab6e2cc31a2544c6528260217a7f06ae899827b619b707c4ef598cb5d0310afaf2759898b3c01623505bc213a526ec70c1f426569393879311519e5f118feda4dfdd8f76903dfdf27997248d09073e4aebd4dfb6a7100f430f865aaf18ff21b7fc58ff6cd8fb7ea0c0846c812e6b7737b9724f711ab182b9de5fd8e14cf38a75d7a891f25c0954c7ddcdf94ab86ffccdcd26080a4e309c3d969fcd74da4ced3905f2c797197ce8a0dab9eec620cece563536ec3dd22957ce1025456a799809ef79ea383a49a19728ab18ddd08cb9b130512556174a949bf1298af067799539fdea9d0f546b197a9bd27f23365b37feb35ca2a8225e3c5a02320b9f07e547955a1f2aeb3436bc65cd508876a8e445140928299d85c31ac6c89ea87a81579f11eec3cab1706f2a66fd4a5669ee6edef1bdfee5ba4a5ec1853e741e216aa4d55ba136cdc1cab5cb5b7db46e676bde116db03c70fed3fcdf862e369439e8eeb0d33be63d772ee1b190d2f25ff8a27724bba9ef9346f24f719742f0fd1a0135eade40d01f62c43eb5c172ffd49356a014b245bfea87c0955a4969df7ced7ce78fe0e9bbcd5edfa0ba072171ae51dd0a63599b7263c4f66c1d66dafd21c03b0b31ca7b243f5c0e12f6bfeb9dc72085f1b0b6a01272416a3f52868aee3c8718db1c97318819479d2f7385940be17488ddc01bd43615e777bdd878701a45d024544c8e70b89d51f728e57c7fe4de6f24e7e5715689a09f110f5662d05bac4c31c636935c0fbbca77e009b71a814f709e99a82eb9adb83247fd442d7fd24d2199b9a51e234c351cead3268e97ace61614e50c2102683fbce601f1e3ddf8730ca944a9092f765968c547ef1c44d2728de3ee43e1cc17d3b38b65199b7d9545dba2ec4f1ed7348fc19ab8c467825df9d855181d725a063a643b52835dd6ce1a091f9439b380df08ca9688d8edc14c63fdd03a35e849958cc8c84803c5c1f51a6216e0c6aca167488be6094df42e804cc692e352eca0f18c6a50c9b55b744cba44c1e9f018408e19c38738375607b32fd5a0130ef34c74fe725c0ad80ad7fcb281e92d5b09bab6db23a82ea4e1230704e2db5d4b4418b634b374dd06f777ff01e5ad4130cb87370bedfd6fca7ec52ff7169ed20ba21a5f6b147fff486b1f3cbe9c7f5396f3576532d45e59297a477816fb7bd3f8d4144a31a8221759d6a26a5fa6e5949b8aa0750bb9f7a320616550edc7ddea41a5eeeafd925c6ae2881d970f30f35a5825305573a956fd97339be4d0c4a1b1e39638482f865871f16937d700b41013b378120fce4fe617c39fa2db2b0a75c5c8ce3d910495709cbe51cda535b4f41534f77f6396fe0710c96401089c3bc53227aca3a63d7f400f0c5053aa8bcf7265b8049e6893265698563f26613b41d5e1fc7bfe8625827184cad5aada2cc6154bab88c3ac8b0bd12754a6f065adef68fe28e4f3aff7f0fe12c9c6c0bb499a32c0e8a88f2ad6b40e24cc7df5d2b21237079469b9d0103d358a1bba33b7834dabd8dfacbc264c424538efc6182150391a82b4e2867bd67711ca55f20642d53d05b17c6a6e50802f318b473cddbb7e399814283e47d66b4e0faf1fd403988b907d34ec129a9031df8bd993c29451df15dbd6e961518e7670d47e8aaa511127c66a7f311b8b712e2bb0d7577a50c5cb2e95c67f0a5a2ed0bb0e4cce70e0a9cd64c9e21309d310736103924a1dfacd61d31f710a956cb65f28fad998716916eb53c3c9c5462d6f35a20cef88b9ce4946422749569b7d386bfc8c4f7c0aed3c1acc7680a0da3403395afd706f227aa918d97359244e5629659165a8895544504f408d991f804b4500142d2854aca8d8ce9bc26d394318c985ed351050bc372f6bc5bd6498c9ba4cba0a57da89cb2b42d30ed381ceca310cb7cf3d4627132595cd0b73b755f4b4c86cc467e15db9269f7d5d30ab867d9a0fee4ae29e7a48d9334a766002381254b9f4a45eb2ea1e7cc73688c038309a572bc8042aba6474b32f2a4ae9067aaa1d272e2641b9a95f666be2df21ce0e020bae4815901c416484e96249a893cba4a96a8faac2a82433758a4235e5eb761d13d27b530d7213be73b8e10537c8a28b4b3577468f7677e2d3fc56572a07017053f3c7c5938d924892c2bd759e05ddc7bf1c725bab320266bd65d70ca58b1e16eba82735cf0ecb6c98b2ef19509b5ee651963f59077f19c89745c84f5ea31c2af54b6401013ca9acb2bfdd7333b39ed22e8fe884a69dfdacd5019f694ffedb94642c5312028b6a358e7a756ea203d8e728f8947c013d6fe750c868c75480457ebdcae2bb8601e2f93de43d50104b10f1f70c2ac8354962ce8cb5f3d8268272e9b16d39c8c9e47806bed778e1680a6d9588d8bd917354aa16d31a007774e787e0fa4eae7300d90fbd3992a8bd3aaa29c566ff46346d5ee8c503ea664a1a7804db8112a7de8fdd430804cc70807aee3d2b15f204431fe8a76f2fce6079efeb57c0a2b5ee404fbec0f8263eac7099ee6a5c10bc6fd6246579c6dde4b8070196a20f3c1b7f1073daadfce240aabcf8edb306ff372d37b8b2d4658f2493d0dde34bc90511d65e4df33c5f2d861675958adf4cdc31c05871a7022887e4997644bc7980c7c8a1d7979d77a4b55910eb10d56e5731b51cdd3d28db247371a9612bf9f78b54b0e0412a2b6068b3e31c9246e31d76a2af3e0e1c803f5dea0bf4f9867ff057b17ecf09ddee123ba2ebb0f293826080103c70f3f2166e897585364ee6b6358a04c08f26a814e1ef95af9d685468b63d43deae23844453c4b85c538afdaf24d48ed1b22843178e9a7e0fc8d1da219c04c96b9cdd84c5fbc38c6450cacec2971666236584b4bfecd0cceff9b59238651e1e9da84144372a12f654c6c31b5857590766d33d10e908351877d840784c70682a2cb7ac41822ce38fba29e6558d42600c0add8a418855a724e8c6579ca182a4a00d36d1afadde6b7791202d9ae6acad1aab81ac3f382d496fe99ef8d08a2b383da75cc88a570ac5478da8a05935d048576de3236ce2ddedda9df052cfb80bdfff1ab76cd7e8794fa48c2142b9c05d26c08e585b7a0d7d8c23536e7fa03ef05e3081606dc320e9f233b404175adb743222446d4cfc5bb2864de38a3ab71a4cc76ee9e8e772df288795d7be9b3bf418c7878363e6d188713a34eeb66355704bb5b67c99314d6c83959ca9a422cc97d4555dfc8c6b1c03fcc5c34f585226c449bf4840fba3ef87c69169ad46a68e1c7c7a8de611570d4026deef108bfad9de24d5d67aa2ebc68a178509dbaaac31a9caabf7d771fe0536f210f19bdeef754a299ea1b72d161b1972a64da1cb80e7d891d75e53b0525e0ed08aca313f1cc2b191cbec9109421b93dbb8009e4aa3387fded6c2d7d4c448e620af6956e254d704e286771c7c531f461dd6e04842ed583a99a32bb91f7c191cceb8c5044ee178f357b7dc6be44f45b05b449b0787db68316d034fa2d28238a3bed60a9114f69d5ab8cae70bea83d62df053027a3cf7c3979d2869e87bb76d673ce9a5d56b2746128504753f6233e638fdbfa1f9490e793e2433196715118818ce1da12aaaa3cf5d14671fe8dc7320b3a1955753cd6dc1c9c73725abf194e7a5b66aeefaf63fea61d594a2744953a9b0b73da65c360b23e5c74cedba9cec08cfa6505b367db62a375c240a4250aabf4f06c3872b8dba46f9a5a49ca54c4bb7b5a1831e5d0f76c99f392bad896a108939eca203552dcee43d95b5fd645bbdc5d768c98eee115c79136be2a58f051eb9d446c6dfb53f96b9cd4e452f60379f7c56f78eecbfa31689d9bad47d3758d349b9ffc7e43169d60ab8a04572f7c56da3798f8db6c897e3972c34a637d77699f9d390f679bbb2602d5e8a4963eeb291bd6656acb11068644fb7125ae516d03b40743c48879ce11c2556c2c17143b60b7a3f3cf84ae542fba7bf8d6b0027f9f99d8c06b483f925718e32eb806a4fcf01860ba40df985c52f4d4c631ab5d8b1671fb374350b4f22a70681769e664f31e564e0dbd333e35c9610c31eba5342774860d9ed1c0dde9011f031227016e8f7d3485be3b1c75ca56ceed79270635dc21ee154e56f1402f57c050f20366216513da83f1f173a3a40cfa3fc232342bf95294134217f774ff27387668d327632fb49e767483dff8469e5730980311b2b05b2439c1d7613c5614b074744ba780ad8b084de0c53fc54db8e3f747363809bb0135afb5aa6ff936e6654918f547f1540652c33ea232a5fe13be692ce713c7700175c31a8608e31c538479ec21ff77ea15b3ba982e6c947bd8af4f8d755cedddb7ecf8025616e0ee9b0e6596169691ca255aeffe3e1e4051425cc1da1eb1a04e4f6efdf828f062e7a02a884c72d5325ae66668a09dd02a19f479f3074eeea655533e722efd1499be29c89e8f126d7c9fa74d12f35ce76245d125a26737f7336e7e417b9c0fe977d971c534a5967bee3a1d96c6be3230ff110409bc7dc92916f79ea6813ab1594bd81d6e750c77f4d37e53f798e3a5bcf3137d1be985a5d9ab3cedf198f515a52b4247f0d1d3cf7521534d2a25bb701d40d2d2d789931379e93a19fc5e61a758b984b1d3e992ea31888cb54077b7b353ff0daa77cbf2d55217454a37aeeeeed9f26b2d0c61f923a1071d25ebbd53f85e97dd63df864e905503e07b08bebc5f86a7cf83b4cbe4a5ff3efee790facbd4ba22a1f71a7bab4819ee6d6d33561204f0aa85c985569525f2e5e41a17a7859ecd49575c2dee1c07a4ad0aa21221120962402d096d2a88f6951261c14719c267720a2d9f5583e85e196abd24bc180b07b49833335ee7968d12c30bd03fd8bc068bbc65209b1fcb441b72e4b6c6a61c1029179d321f2f7655f0ba9bf91ce340cc51831eff9c281a39bf71041d28c548c666c3e562683b8a336318598a344dd1048b5d3ab4879502db126c735807d3b34027872abe6f2b302f5a15fe1ea360ae9217da01428a81b4aa7577a73176fb8844e6346556ac2e40b2db1fc25d7885021b1bd3ecff7a3858c88b88621f0ab2669bea75eb462f42b92ec25aa561bfb601b70cfecf471d775fa1194b05a46b663e2a6d08a4676a771d43687714d46e8796b2585755110df7043c53fd1139e12b8189e08e0c70c8be1598ecb750b03fb1c10a30de0d2209a70a2ff6a7cb6e5e1fae57f7daca5e88ba0819c0069f8e809a61860908946ce560302430627950c2edec0c49303ea9af40280d4e943fcb8d3ec8405eb8e7ceb041319bf1ba45cf05491b88269fe1980939723b654ec05acc16daf7f8ec2352b437d373693a3b69fbb4497500c1631b9944dc69e98ea75df42f57a33ae911dd3501ee41794681c3009288503cfb41378577bb3910cdf16c626bd7296408661f9a1152d5c7818bed4777ffd1dfd41ea704d9c7084b8f13e845460365c869c05f9c334204ce5bd9c2992e330f249c8b330e340f1ba381cbb0d0ee8aeee2e98d5f0a1fc37cfc47acedc500ef086ead16d5a91691cbce96b8b0b6975ba29f9a1c4a9c33064a6c53b957943ce26bb91ae6332798f4869da56b548e8bab1b5915d5f8b7572bcef5726bff602d8e9f9af5fc96361cb24b0c11214175b3f6463b7ead415947acbc18981886ecd7980187388724e37020c4d6b4139ec51c0dd6eb99df7017fc4fc5262d287b4626a48e908bc48cdd74456f5365d2b864f4d90a0c0a16958cc4bd1c313b9340b5fa6f6c5181b1906136c2e9a827417ed52871ede7fbf9bbfea22ba24694350bb44351dfd8a80bc4e5be2821005ee611d17b02ed86fae8eba84c41c7ac72766c1ce92ad862528c6edf8885ad8fbc5fde4b457ab0cd553b52f5d73f0a156580d525aac8098fd9907125d483f116c54706f03768587a8f6e38cce5cb5b47101af41ff89dfe2f2a23660758d0224356af23bf6fad5b180501f9b10c9bc0260cc9ee572fbe8cde4b86cb78198f8e653bbbd58e4ef8a78cc73e1d8bc614abf50b09e0a33bb95f31090f305ea316956784ba25d3f19883af409b1fba0543fe76988775b6b5256248813684ed3da52aa0047b05f6fbe2edfcdfb9bb38c1cd893da47057ccf01551cc91f9d8ae7cecd8df3c06ca4ad3d583c74c6599748eb033a9148e7c577860077ff241b2a67d02aa61d520c22ac023489287f40aec7899c7f1b5e6ea1481f204261816b981d23fd39d25773808f348eb517c4b239d1c827a6ab052617dd3cae5642bde462f731e4372bfdf2050f05805a4427dfe6155382dc2ace347f5872982e2a26436660a53f60bc93f2c5f7e6c8492ac3781640df6e7537cf78174fb369aedcf168c167e05faf6ec1dc218666ed85960004a1089dc52dcdeec319c0c6c53ac4375376ddaf105fb2ab8fab612743973bc97e939dcd6c7dd11e61f9f71c873d4c85e10d7cbc45de1b732706b1ecbba1a8f9875d188373d5a12059cbb950edd14131a37849b363628993fb40c86fe87a400e87e48b0ae470ed21c89d82f68352f14d0746d6021120ce2e18718ac5d0effba7b8ee1ed1f54d530921f77d5e18648d30744caffbb121acd93158c95ff0efae9c6972a9495288080358771ed88e25e412ee932c4a5d79df5ed7e36ad1beab52d1307359df9a98b9436de47b7527d3d69ce1d6fdcbdcacce3b7ed1bcf0721c0d406dad01e99cc632a7f1f8fcb5a5b0b0ee032b9108472476ae6dc37a2e981579d9f3900e318cb32b1a4fcdb1c37c6aa44d9b8c19b46959124a7fa5e39dcbc5af300bfc14dda4bb95af30509c94e6b651cb4229a99aa49c36828a9157be02f3e38f5dcb41024d0c637a3453af5b47fd9bbf13b1219633c2f973261b65df4f0deba9ee51be0a3ea9ba87e4b25daa91c17ddf198dfb0b32146804354e2bcaf5005441141d66bfb248976ee0c78453f5b3eaf471b103b99ef7ce057d1a413a29edebbf8a8ffc4a51b2b5eb20da578782c4afeb5d78a510cb9a0afb5ef0dfda409ddeb488cac733e69aa56eccfedc3ce3bb6d36748539b4fff947b7408bb49c1433d1dd2e8cd0af65b62b26da175e61dbb1d9cdfdf9458863e8236ae83c0f805b3dc513fd7f033bb316a9345155dcee8d5a0203ca31c752d12452d8577bf94ba7a53cfc1f7d9bc054710e303f4e9c7a2fb5545e53153745097f2bb4d29fe72c1da8d8f647ad8f45baaeb5d353fd263eaa06d7503264e0a60329cacfb7c1c08c0022d376527e6f0f712d0ae84ebe7de2e92d41a9d184310e4f08a8b947bc34b6000eee0059c22d809e352b13f9beeccb76982b74c58ead7d9374a3265fe407565e039fe67a04e6c26096757b7da9d53d16446c52ec3516b69afa4b4bdcf2aefac7a3157013c24275d79e3308b140e4f367a344fbd8ec5b034e519066eaecfe59e16165e474d3d6e0fd47d27b4a3a48dc09c77f813914979ecc3fd051af6432bebd197ebfeb03506ac65f450814b29edbe1dfbd2ba16b2017546eb99b5cd2ff826734ca82dba424bc3a6e09002a20a0f103a43cde755564b384593c93dda6a62f81c4e73b325bdfca4bb7a85551efb356c6ec7bd8749bdb7aec45b19379ba8052032a371ab08a28e1204252314c2aea9219a1b4ea3d4d8cd4b7e6b9fb06f9cdf184c2c25df1f3a57e3dc14128fb957a0a6322f04e66839dc7151148432ed39019a927b5b3469a0326d755827f176a1ec2c3945b348a1a66d5ebccfc4d94f877e28bb79dafebbadaf11c97f01a789e3e4b4e429e258930c35a59a4d623fc24cb86b917db85b47afa083a3f2624b9afe6ae9919efc2563ef00d414519f2ec0623845b90feaea5ff210b9a2c7b089b017702b0d0053337ad0f593d7acea1599f6d65dfc6ced27ad4a7a3ddba489f794981570018e4e0cb467ab9e35063a27c78cf2ede44f325183cefa06704c39898a2e7991537b701282d04611356d31f464ce3556b7239a543f725b3453cf15c9a779ef95e3e279752c7f1037b3bb78af5e28282ac3876a771c4ce43c84203232c557898591444accdd3879557d977867261d5b888566b5f2d382c51359b68f1b6654976107ec41a408652a60d6449582ef729407349e7631ce9e534a4f584df3c6d987588383230289d94c94274c30fc346af9ad738e4b316470be94676d0efa5cc1daaad091af1b513e34d7eb4096135df75f5706dd5236343ba7c8b51fb145669d77484c81b16dc27f7fe9f1ef147c86eb9cb8653abd5e544657ed277285cd8193e7f4049aa36656c905319ec0937567a3fa8aa6471b4132fcd3cde65a15a963d0cb695a7a0de98bfdd67e6f8171a0c023947b7c99df3695cff0a8f34e2e44cea286c1a4ace8e9d1f61752f378a261373a12bb06a2397f9dbc957cce67d1cc495b591ebca0aa766bf06ac28055a860446089f71941d0cb7a2d9ed927d6a0f22dab08522fd5cc662ea2a82b11b8391ee5502c032920fc090a71e9aa6c59b04cf33b431fe1aa2fcb669fd6f9372dddaf387274fe232bf779c1d318e392823ee181161d9dd1fd63cb97aaae81b209c9efd45fff1791bf57652ccb41bf8deaceb7c83e7bda5e46923feb1db83f59ee5ed50bef110bb9b107f167484ca2910a87afe5342c3a164346f65044afbd38bc6f6d0ec312d8041df2b3baf550ff478c9833c5781b5e00bdd1bb548425a677936161aaa807134abbc04295fe2171f424b2fb65ac77ee0db03d1d2302cb6bc380b28cfb5046a0b35d19e02c31a842b6643d177df1ac11fde50fa11667f5e7dd2d92cea1e63511aad0402dfd8865f6e7408c0d9eb9b66b94cc13d18f07f4fbafa2f42da2b3c83b144b7dd7baff7a5714e11b9761d9ae4860a237f6cce3e1cea6bfc470f07768789e91331572f9cecd9cce972ac83e05992ab67d4316a3772d86a02e276315db7803b5a09ee5fdd1943f9acde0d66b5871fd1ef06ba074c046313b3fb9cfd9194d7f92424e7ec9664eb02fa6569258918efd602f4ff7400a7a08f4f0a62cbd7e0adeb29f678d7c76626cf1e1fefc5164dd3d437a9b5b4f9638d691f5b8f1c0687249a0b99bf70ce9df70cd18f1e0f430367e79ed035d970285c0938d55f976e8ec4d785f3af5414c75d1be4fd896727a145850a7465d8042c36578314e4d8bba7f362747a15f019cf911a6e7b4d00689594d5212eed5afbe67291d53c22343addce89993f95863d59c4f76201b0d497b4efd4ba9854879c0fc34680b2a0d30c002b4a7aeff33e053c4f7cb71ed0de4909aea5f688d6709cb502650aa43ae35a9db502647bb52a56d5962e7789b4343ed091f7e60a2d14d652e5db080a020e5ba05f3e41c6d30098ba78d2fe1fb6130c82c6294c15983562d76150c5f740f09b4aada894b0abf86fa09f9ae41c51200833d611d01b163d5a5461bb06be5bc4c7a890f8e34dfdce1499aa1e4c2ff792040f1727d5884d21b1e4905ac62459ac5429f5a9ed87c302cf08092220dd666988edd0312f12a4c674824ef4d5975b76a2c50873a8ac54bebc93daee9bd4851af647efc26f192b3850306d64814472b3b172b80a23691d7bce4fd0d3c31507ef807ffc2374203afb0712d14f65d5405558c7f9ef415dd50dcdaa2ecfaa432f06cf0f211ed04b53198a86d3b3fdd7f02f226a978070dafa3c9140c490b4226325382b80ae8149abae9600c22bbcc3305fb3f03aeba73cecb2d1f006bdeeba935234c83feccca97999bc21666f67f9544ba9a4b9c46f422030ae58f38289e18fd2ca59b92112c36932aa8c84ee9dd428b2fdf544a2223a3371ec113925b3d86c9a0400b727adb5d51796fb5e7c7d0ab31dbdeae952edd0fd40fb288af24194d67e75c98b2744bdf6ae81df6590c330d3a8f44a2a17862d430229834006a0d53754de7cf1824cb3524f7a2b67d15e4f47e1f262e8e2192b35fcb67bd8ccf1f185a1bebfaaf00324200b458e3960ebc58b0c922c418480e82d31f44a232d84ae4cb2627ee4475f9a20020d5315c3ef2948291fbafdd862417a258d45921d43f3a1f70dd7fdf7b1405bfc01d528465bbc54451b31022daa3c63eca03a5a9f8f8b0e0140df706a67ecac3876c5bde35d05825c4826adee88d0b6397c92f7d3b1b724e86a72806cd87079c5a1bcd700e9aa5939001a8e3c665b236961d33aeb99c0e7881be57b6cedf32fe64d8e3bd4fe5d9ebe4e9562c96e43227340ac54fc364fe546a9d7a2bbd49e462920d811f00cf51be01826e4fb09cdb56641f57da867742e20faa11209c9c46ce4121a66fb168261eb55e5ad6187f97cd9e346dc8a0223b86f6af5ddae59344c779c178460aeb9f96ad81cc95d8f772175f5dd6732bf45fa2d615e5c199af8ba09145f1662cf8ed38eead69d4ece88aa862ed5bad3786f6ca976b103e8c9da87e33166d58965a540eb6fd7053dfbf7e744bd7451401a0e41f21e4fbb0ae205e265ccb488f8e96b14ed99968a2b8b9dd4e74e89a61fe1ee0575e925bb659a8e90a9894f99695c836ecd132080cf7c050e5b7c1221a11da2dea570a9eb15981ca0c13dcc2d8648910af0da5331e8b9c0d9d566dc736c93dace10f64c214ecbb4a5a48bdd23c35885384fd475032bde30155855a98e1bc9608439602fe80181b43a7fddccaca1815b602a7822ef60519e83cdc8bc496ddd8412c97bd8352f818194b0ca94ad73c4dad07c45e5f50acc4f151a532843668a85a1f4cc48a1910b230760464529835b9ba7ed6a48a2f96e1910c31c94fd2b362549938634bebfa1432d52637639c9bd4f3af3cf9d7e6f0c6d7f1248f0a2b8b49f4170cc8fc8910e4eef8b7dc789a8ec646b59ab0506e2948c08e95d7dadbfa8c086ae667613154f2537d1077a5fc0b31085760f3b132c1fbb44c462cdd3134a69cdaf196372e0a5fe1a62c17f76439551617fd6a9030ffd64c79e1ea6417203eccaa9998e70156a32b45bb64270ea24b3408c9f11ffa1b922d6c39e90e4c4fd100abf8a697d9806e74c1d84a4a1f9f399ed0ad23e9eee489b0aeb102dce4e5d13574b74740b8d7c19ea485ebeff91779a099a0f2cf24ac0617aa2519cdef2d169ad684e2d2a1e84abc78ac2a6a0ff5a2775c5b0d99ffd35369bcc32cc9f4e8b0a236ea5b727fa77fa77ad5ddb37eceafed4ad4c31cdcf6e47b5f5e68d4414d5a6ff0cbef9f3b1f24056c3fe0949acdb0e30dbea7dc82eb6eccb1ed7aa80b43a7595fa4ff1ab728c84e9eaaccf4c1753c2a174ea10b2ac153802facd25e1a380cd4bacda513ee8d296f976a1d21df616ac351f6483143e9f99c380c852d458f2b6e3fcd5ab0dfc158a592e09fd2e989a4d6a12d364eb84c0e6c5c065c70cc32fbdb7869d28b621346e4c8881b1ee0c1dbd288ae12ebe4b6dcd2e71bbdd08d52754269cabf057f7f9fd5070d12fac69d01f76656be201ee52a039a659788913af435751b3a3a0ee79bb7da7d167289ff8f4b4322f472a35184a696363e47ac447fb4f1e9a8245249a0c0aea2777182e2d59fc10d79c1cd601a5064fdfe9bbb6f7a8a9df0e7888b596fa56eaa14895bf4c555c56c5961c83d339944ac438c18333f1deef75abc50a15b7fa18b25deb2ac5b6833c15c630727bb8d5106daa67790cab52bbaac7f89d17ed01fb82ab6af54813fc6b527b4bd8b302a7dd6647c621fa1748c6d462303294bfc1d8737c51a756927ec9ebd9677c65444cc31d76fff4350e3d7e7774ac83cb58cd0a6fa417c5447f69af51f55ee3cec2822f3422f85ebe241d10aa0fdd873a26709f44c8535e6474a7fbe78d17251eb3d6ca6a752a6bc5670ed6a81d5a0fc64ec680b077cb16df1ed24fb41b609be30930e942afd44148d835c5b716531924ba94a9332c90b8bd1c80b0ff029fbf546e353bbb24402556be72a7661ef4a490796057a7dc9a3641f6c251949652e295432851d9ed182d3da7cc275cdec8604479a36160f66da260109f90ed42059e1ebaf1ed42a2fe019fdcd40c321b43b7482cde68923623fdbe970c90235ecd73f6d1473af8f4390f98e35c522549ee38d58f96c01a24731bfd7e77ce6c5bc2f7f39b5437e474f1ed9b894f918f8a2e130442b4ce2a72ab1d0875261754cbfa8a4bf00cf314fe153fe42640895f6f16e062aa9e6dd5a4802c594183ad31c63f874a6fd91d105dba7efe7b6471bed155579bbca509d86f1ebe0d36ea804e5bf4d77dd86f47b95115355761cdc217d1e3f0cd7be8546d36eed797b75132d189ed6d9b4419a9d312c3ae71b377c9a524551fab15403407dfa7a39cc8e7574e6cce44d89560322a1999d6f143766c192e81c013fe238c6733806200b6e679d5d2407286eee741af86709b36922325ca2d7e0fca4baef8aa34ae6379e45fe96e98c9184b38d70beac97c0a4e4250aac4f3e529e5d2cafa7f439f1144540d87e2d558f637b966bf9c0bc70fc0da64a3f93b87039a8ff385cc8d206bf0fc775c8fe812de7b21544aa2a8024c2547121e6f337c66109f0b69a9909fb057429715d28a8f2e5ab15ea169edcde24ecd329d5ac1cf38b6f0e54425540c3879d401234bbb478397bf81916cfc5cb7dc341bef3f3d3f7d62f5f7c5e5b36133810bbe10b92c6914ced160716e8023d29c359eb8386143e9300645d8e3e3be1e83ba4a902b7a90219c8089b7b9655b0356ea630f4fcbb1e804a6581ff61f875457c252d57f60d2764fb555d86fcd68af2454bc3e363745448fbe34197ad07db3cacb816d3975d71d4c43d8ca3506741ae29eeb2651b6f8e0e777d2845dfc8fcf27fe88a9c26df10cdae66760d0fafba66353486683a8810104ab05a6ac893a5a1a93dcfae7c5a21ad2a3e67d8b321431e598cc0751611e3fd4e263a4bc2de66da8e0775e332b37837ab929df89b1a177f23d7069ba573b1a025e61066d6099f5c9db0b72384060785e3096b6b7ca892732e33852b1a9718135cf67a94b3e52d56ad168e0ca9d938e173701753ba4d4aebc4b7eabd99e564553826c6e36151a83f0087746335b9c6d90d8887cb989914a695b6d81a3cc6f3eb4ccc0a66349021a1f0b4925acf02a88138b249035014812b8ad1feea9e524f852eabd6988a0b893691571f49e6269edcfadbff60575c067e8483afa37e90e7c9270d2dd9fc422db789f8aa4efce95593b93b57cb6a3ace1a7fc2359b0543e68c1aef228f857e49850d02ff0f2bf6a1ea2d293b920a035a3ccf0ae492841073bc14c8a27c73e13ad3087dbca053c445188c1867deab9c6f9c13585d4ad8257b00e7bf60293ce51199663494bdaadfad93762a368392c8c95bcfa7fcc93e53620151b45ed74a4abbfcde1bb3a0c8ac4ecf45681a6b385d879fb2fcb7cd6933294f2be23dd1bb50b6321e247a550125ffc9a71cbf6c4790f67f00e935124e6e648be4167c9c971aaf0a2b501aae947eade2e21426a7740ec1df59975ba4e90992c29df48fc162a523e55aa412eb0b5cb9c9762c8146db14953242284742c3a82c5ad4a097eeb3a432b70fb6d1852ee82593e140eb0569d30c6e2549d78a683269c4cfab08514ffbfb6796d1bc2dfd95431e82996e5d6a25923792442e36a9f9a57784f8b3670b5c2260d2db67d97455dd74d76b056e2d095989ad5fb831f9fca07b3a5b8b106c71644cf4f6d2ac57c0de517035e04b71f5c5f8fa5ec644df4da8523bc9799f0d576f7a23d398d141fe9bf85d87c4df384e0cc69e48972d82bf7af4565060f976ad45d5727345403245ed245e0916cd60affb0284fb7da0e9fc95c5b536c8e6ac3eca6e137721997aa227f38b8d42962745af592810cce793be1dd382c0723c23ac21a0553fc33d4276bdd8f7c85c75140d93b6d07f83a4d458038aa1fe74446c33cd06f967a3de4563dc366ca51d293ee2c711ab9ce9dac2216d933c9fbe59622ffbb5617425d78e05a9483f125636d41541cb3e2a2480cd60fb1dd6281b437eb6668bb313a63f2d05a40eb669b9c66c18fe47f292fb4f8284b95fb9d5b6842ea7a4522ac98d19604fee19b0e996dc9359bbd7768ba7d8486859a22a66cacfdb7923957a1e9d4702e1a43df169a24041626ed019cbdfe25e6c5ed9c3bc5b26f30c08e39c805fe6ce95095b580b9ad45cf996391f2a57a9bdb126daa44a0d76029e0075aef2de815fa8f3e943c6962c407c7c42217df24f9ee79d309be20e2ce7f6c68ae6771b6265c5e15993f45d289432381655cd66ad9456ced95e9fcad073d88c3505b3d9789fdd89331d935c5640accfa25af7bd7b04f55c3a6d8bbf8d01b349b1a25e301e708baba89a2adbc6781e432aa74ee7e66c85681dcec1f3c0113875c069c1d0bf62e0a3b87624db3d0d6e764c203189dd3bc4d8576d8b6a48319b05d2a3aa0da9d14ab2f4b6a4ce3e39eee754ec3a2236ea573a445a2b46f5fccdea3d82ba25b8f03816e34f6fe5d51b14e8807a799f2e58baa7200e5596f50c33b6e360fcdf0c57d9e0219ce46e09202f4ef26b69bb21257dbc7038ab2af71d684dc54dece85026f1e3f3c78836595217b1ce10d80a585113a248068c63777883551837ede29880b60718d7b63fc495ef8e6f3ce49be13a81948b9c030a71eb8b567d9340d48223f1d6b858f0b5d272e9cb14289316ccd374014d0b858188ee486f66cb489b337ff61e86d0c6a1204b72343e96e5dff66e34a64a828bc97ccbd5aa12358e620bb4ec02fc49f1b843f57de780a8e180b6e8b3cdd2c8cfe4fc9f13875e5ebbe8ca0d6495da8ed312f525a4b99cb57f5636266a42919eb46355d9ce83935d054f27107877915755eda126904f132adfef4cd4495c66daf2a74fb1406264907d6820eb40923653d4ef8986bfc90a4909545b08039d4eb83754f647ad0afc2a2bc4d1457243e3fc4aae8f5abf0d6ab22e14e4cb5b76365e636f20c1adb332319be5151eb2ab5d1b89f2425f79d473e5b20037a57c0e1a427c6bdf39e418dc02b3f1e3c61c8ed0dc6239fac3786a38d09b306d56519aa02c39d0181876c5798fee60e286a17000ac5e5853b532505166d5111b585c5cc618bc6c9ea2d96f1967a8790b7ad1f3e9c61da49d0da8e7d1d3279135ddcfeb1deb3e4a7bbd2d4ee806c37e80890a786137535a449b5331c65916cb76d02c41245bc6664f50406afa3711c912e7ddcf7d5a75da03f1625d59a7a5b64bb30a0ce2fe422140ef64e4c91421a3c466a3ea41ef32133d26915bf0f8c6d6ca7a5fd39ff3845e3a44c5b8b120655e4803f1b5048e2643d9caf1dcce3aa131225903f9b1c7d27f34d59c3fc3aa970c8dfb67958a23f50fe46072909d99fb0fb6e6ee82a3694698219e549fd8bd8f19e668fb071a438b55cc954e57b31467f6f9c555e3290c8c28fc6b222dd77c542dd1317b20281f19e01a4f99ff9bb61bd022ebae9b1a7c79bde9d12f604d2b6fa8ce5aa032caf52c6af00a99ba39f3b607b1bb3ff5e878b001c7e43a2c3cd04df7711457c0349b234ece751ca6e4ed794b06bcf944d8eafc198d575ed6f139bce88b34174b46812fa2dc7f7482838cd85dcebf04f37489dcaf6a81865ca101115bc21af5ac11602211941f77c7e899fa23aba108cda8c22848162e5ab2fbf8cf7c7e4bf8d26032d2ca7bf04b4a891a749d6c5c2230b2f2d641feaa41e2ee7782e9875d54e3b38873c81e52249328b5c2a3c7106f96db14ef3a481390e318033db29e19863b055016bb92e994f9e14af0a30defe513261fad6e5da21a161775f781caf9beeea3856b7496fc6af25b3a719962443dda1531648a613ff6cbb76564d513bdcaaecd8c402148f3ef3f9bcfe511ed5d3a472e296f04a417973e3074585639503bcc45734dde6ddb6fb8eee308491d1412c9486fb50fb3f4f5487ecb5710d61f0e02750754eac7cc9ee7c116f4655a4bd2c92b6b0435f57b28e89a9e5f6dac9c2e0a5a580548500d23c2f959cf01a141de0d902832dfd517b1b53763146e7716ddc41da4156b370ce4f5a8e4e6364d8184ea3b76b0645bb82caf7613e4c8ba7430717ec7397cf7852b823758d74ea42f4a95d89af020ffd9bd37a3c80f724060c6035bdc167416a5a0d378322d355dbba257baba06c7d19482d2f8cf4276774103b3f737cc2ffb34b4f064569a711d2cb72cf0730ef82f1975209511eef271ddd42673fbf28d095511036e8db444245a7085b2099dafe732e865fcc781a8a4154c1b2d978f2946e612fd19d677a612c7e1c7ae74ad5eb18146abd647d4833b2e7c7dc86be47f73ffd1753072e90f3d6c21f075d1205415290ce5e66fd07015e76b27c30b5fbaa18c194c5c7db5c630d08c597ebf3de1ae12c6f0930ac98809a68d398abd5a85adb08c657d2df1e9bed25702f480a0647d9e19828999af50b1b5ba99cf4a1fda18fd2bee9e75088744f25957aad61faeef12de5e35bd5fadcb8875b07c55819922b20e7273cde5ccf7fe514b147b0432629021e3b00e3354def20e995ecdf97b1127f08fedd91d9d1ab961892870cf884fe3381fa792721e7a66b7437b499c87cf1d6f8942623e94c289b1ff99757460c0a1a9f944e1d4472ae0fa840362f059df2c5836684056e278bd243d6e382d3993c0e84825b355da05787fdb1f7f57944d37a5843edebd89a277940f6be4b7ce262b98d7ae6bd72d33e8533285f02b4004a0316ade865c4f84ddfc7e01f16d66ee61cd5515613b745a06b128f92907e9e76c04d9e4f7ded530f987f7675b5d322e783c6c39edd9190f573f909479a9e9b70ddd06d4aa80801ee99b8da3ff92ff5dd055209f92b81799324e45ca0a36662459fd0134eaadc10880a6dfd0ffe191b8765fa9ed271f3b70d731bd32cd69d44fcfc0d293056adbf28454ebf654e79303b0d6643c1f94c076a5609e21d8e84ecdc459ce0d03aa022f1bc165c2bff8f739e743452aaa52305860ec514e2a04a702b78396185dcc6fb60626de74a56af9f5fd8d053e142b974308ba5e10305f991776fa679b347ee95cb5ef9df2787c9c432453c02fd7a8d03b3245f052c373a9381b20adea08ca58f80ef49e8d448c6e5352ea50274a0cae220a0f9ca00f6a07bf5e96387a2dc100f4bb465eb1ba70f04a26534de1932fed45f30985bb1ec452da4e0c8069c3443f358104f5830f7406d78e31cb2d0268d1963e40ee47fdec476b9e3ca43835dd0f03f1b28053a52a28218b8d879b11ec1e623d7267df4bde9d7377bd45ba65333eab83d226a7c86ca20b0e34045a4991deb7e7187c8638dae4c616b125bb3573cc46aed725a49c1f107bc46c038cdc6ce05c954d1ca73384a81f1a63b91e107ed66d0f55e6d4182b2b445c5053bc0660ec1202f6143f97f810b977e2aa8f096576f1543657228055554e66c2ddaaeb2f5c4f9378eba67479f779c4ddbf84e6c20228fbc97628ea2f7910b64095d4d88331b0e04c1abb00613ab40c2b8312a9e8a3d74cc17ea2c014cfbe5a35cef793781c743e6387015b986aa9e8592ebd3eb45b793a583a1076076b2a603295e9f649add735451ad51acbcb3a6aabee2b4cb9e130f51319a8f19ec8cfebcbd7d72d770753b8e8fadbf8651ddc996c59fdf8dc05174076ec5b8da3838b5436c717de3831c559f55e04d1bf51fa12dfecc22fcc576241b48439048d47f036ceee2b9ef36f2a11e56a79d7290463e6ea0ae44aade5771d779826834b59b79529486dd7c15f9a7f8dc515149b5c1596af61bb810433b8abcee53683059acc12caaaabd894fcfd06de53409c496eb23f9f9f575e4a0f55f23425f23d916732ca936257ff3d907063ab911fe13663b096aa93326965bd4dd0e4ebdf7f7912f79c211abac6a18a827f9e85ae1d39024f46e270aa9a039c01c46c57cc4a712066ef5232e8280e10cf6d75681b225e3731ae51956825e2f1deab2182d0133b6b730eff08972f855633542221725275f0b31d619090559dac6f61677f351a6d34e7af495eb3667cfddb55fe5b88cc7c63d499f1ce253934f214c64bb418e1b145c487e1f86592c652d2d1c5e11e868c15e14096a92162e82dcdafc6f06949554fdc4b60b08cf7f666f72887a7abf8405727239a9619aaf57834dcce68828b14043bdad16c580023c10d75b78100bd743c57df5313abc7ba9e750c81e89da851d5e2610204a667520a368fa2becec0470c8eeab0b568ecd35c22c68a2feaefbe491252b6db62405a93f622006f9bce3729e45963131a5c9732385499848d48c14bf449c8ee43e168d9d0f9a345b75e09922e5d3a71ee773efbcbfde0700b308f66cafc2def039bca13a9786a0c2afbeac5124ac72340dd23e9f898c1eab655ff5b6ed4868990672e49d0713c490b11a8dbf119dcbe4fe6dd6a858677abe7cd68db8e2e95c2bcf2ddbdc8ab888c4ef7fc8cebb099b1605f96e49ac9d063d3ae8dd75f63ffdebcdbf38c36760d545f7f2502128614cbc959ed2cb08f70a8a1ad0d99618da904577127e36eb2fa951f8984528562a5e55f4018573220b0e212c320d45554e615637d05729b7d3d3d7e0430e20b686a509697849c39b3df2b933e7ee72affd29cb1d316840df2fb85d58c61dab7df40205b9fa10ca14600f14db5faaa66861602f0ae76d36da625ec77cfa9e546de9c101cac1869f217fae2c5ac023760dc3063c7a07e62f23856cddd39ff914f5e54940aa994087249d1c57a4d19ecfb10e891bcf680b9fc403edf9918f6fbc0739484262c2b8777d4097d06bf11c76888123a8c36baabd40e51e855ccaf39000ab297e30ecccc1f898cfedcb7b1cdd703e5b61d6a7fd4a678446aa496006159df0d2b93963af33c7b5bdf6d32898a43da448ab24ccdc6758f50cad21bbc1641e1082de9b80792e035381b03fef08a4bc194ced3eba00e03e83d5d5133a3845fa0017150f15955e1754c5712a4af9cda6e0326e3116e900e9bc543daf1650d564ead12bf905f52208327bc068cc1caa8da4bc9359bfe44d49f333abf3500c931521ffc020fc83362efcf75a0c946bfc4204b5baa17a021e6e37a90d19b7de043223b0defb64ad3df39ff2ca2924b87264d5cccc4247b6271ab3aaf45ca976dfa8474065f3003381c3fa303ab4899cec8f60f04af1e53b1832bbf871cb96f3720d2622deaa92ad2ebb927ef8412ef8e120a0f9a350012d72b3abd402b2b5bab8e8957749c488fbba79d9bd24e1a2359b2ad6954e0827616345cf4d22ee9bffb13585e7d0bfda0b3ced0a294a582d3b1f36002d46c58887a4070891e246d8a53e077367b16a4e28688949db2744b359b2ccd00ee6c18cd8a8c9c616609bb4d50227adab2de190cb064dc21e6b8f20605630361a9d1173e3d82c838fd9ce3b9dd69ab9403beb51ab57c54433874abc8ea30b04c6d4e27eb5baa7e8354adba0fb871bb50f1f902a8ca4e3d474714287792e6ee47f0749987f3864ad2467ad231f6b3b4d9ba7516807374b07b108e1ace6c1cb611305b43917a278db472dc88df381bddcc4725736a9ec7ee0a49d8b8baecdd7b6ccd766aa5d991a7e56dee2a3b90ade5c271d2ec57d58555b05aa6b0095fdb35d2fd22e2031571c89768d954662223b0f8f97c3b54162753c8a5663e818e67117c2574a928ebd063cb7f610d531d2b27f1818bc4082fa437f49aa19998349392a7bd313d2bce928da9bacb6b645b589cb592a72909ba7c9191f729939ad1a71b12a2583463db17b74c25132ff93116fef05e1f104d8d7cfdbad57b50f3c85bfa11b21e1a3dfc2b359c6f71aac9c533b4ff128af5066570391e9ed855859dfe530046a70257abed20192b9765ab4952e4dc5f1b6efd8d7e36fea3481b9ed62bdc3b7143eb0d5a3b529cef96344b9a09c5ff888d07936aceb1df199cd98bc4c215846e6b42dac5d2e8af172bbf75316f1d531a289eab89862a62cc07eb680a6db1d6e4e810aaa52aa071c66bf516ae5a6118aa6726a2599d0f628e0a9524d4aa51d33f5554ae8939f8329819c8cca18ab63f9863797138d5645f1f97985043bca387064b4a2d038a02148c3401632d5965e7ec802a76ac15e64a713fd0bbe53c216f6965c85403b23192183eae728e5e080c5983a8115d3681a695f000cfc1331d6f88e1e8bedbfb81c7311c2dedec36e06973aef5e03324c98ee09a3df25d52fa6d45536df148db835ff15d96bd88f49404fa3ed20522d9dc037b4db6c0948e0b643460df7f993b6392bea74e6d27906a58c72f739dc0ec7f433411722572fb06f827c9ef70c36b7d05115ae4038554e8ae4cde0d793c179fd97aa2d3d96417c737f638bb4c5afe4da1f974a85b6fbe33ccff83272adce1d8cc8992a1fa76cac956723686ab13b7376683f4939be331250ec98426efbd878fcccd83c21ea4c4585942648831f7a036a13ce59548f49f4b5e89cdf4a23e762a4fafb8551eb671448aee888ad98a9e2aa29b7960c29c952bb75af8ee3588004f4699ed158ad2c631fe584ad1361cca6b478fa8cdb4ebd51226cba99db8762a31966a37250fc019dfc2533544ce9ab0d0b81a3c2f9dca19852b37d21863c6fe391062b8a0a8cd1a92dccf99af6eb67a570bf43b580e4493cb748aa0bf7fa2b4dd52451c9b1ce2501e3bebce5a6ad7cabefd4d2d44f0aee1fa44d3c24950624f0061c61b891b0a43066b254e341867cbd5b9611c7ab84249c9975cbe76db1bd0850b149bdc8b4cbff68f8244d51bea5de5ccbc1aafc74eb45e6ca48682f097db8cfea385929a5ca87598bc81e4c05f090fc4e584538aab085b183d2b8d17df7fe2942486c0b8cf50c1eca2796b78f7c08560483d52946ed1e5f9af72c9564be754a399b118931e2f85a3dc5823b47f960a4e85d7c92ca48a572c7b09704fc66826a01b8b7b14d585a7e69a06eda4c9cbfc0da4d2c6d252cf3673ca8d808d596f5d5723dc1e5ffa691db3b54863f7a65ab08b73c66ffe7767b4063165abd16113bcc92e26b330a584325eb67728923aa9796d7dcc81fd2ee1e1db2e95d1a30bc8bc77c7d500d84ee894a5e028bc79f24cfa9a1d37c1954f8d73950edc57b777ea535cc691d38379f7c727163b49a7e92031dfd1447fb5886f0384869505764c9444237bd6f95d9431d24c08f1708da09834105b6cab40240d4d79fb307464702146b9fd27d2a7aface6aff379780f43de500f0098cf9c3bd64587536890cf602c8d1871785068a30eea6b96e57fcc50c5825518708e4a5aa0bf9b185b54da9fd7554aca470175af65a4a37afcfe15207eaf28245c26b1374a26ee90bfd18c2b52a538bb1974e1cf03ddff5be23782d0c45b398ac477bb06d3125ee36997cedf9f110c07e7ebf760cedbc1948dd7e7a1b94b9e8afb178b14945aaeee32b385cf7b977ade7e76dbc6c5c240eb4bb7f84e2d8bc7f442fde012aab9e420617e7698698c4e7a7e4a805ea971490e8b750dd3bc4efc7fec2c76dfe4aba92ccd7e0685bd99e007cc70ef47be311f9ae0f8dafd9cb658876ebc3438aeb490c2f9c560a75fd507bd2b76ed1459862bb9f0078f10cb17892c9f3fa451cc379f89398bf2f634f5f12190dc04722213328fbef9158dba267c9b6adf3ca87fc243a67a89d17d3ff8b06bcb741e855feea201f1f3280ee16814207bb4372affa68c638fa5e00aa44329ea4f557a9d6b2d6d16ccc25acd3fe237ffe3afd690003894090def00251249e1a95468ca3b8fafee88dbaf48dca404cc5e0e73b86453f00789843b951a0997f2bd53b7df6ddd9c65266d07e232f4439147240b4fe15e7423ce35facd5c5339ee8c45affed23c53f4f47639e22a5592eb3e1c7fd46829354db8502cc15ed1175f3b620109fd7281dbd48797fd2e12a9fccea07bf58415fec1390d6e09121e14bb89e6db1ee11c5f0eb82d590bf354ea9e071e1e56a4e45a7339d332c23da8a27caeba926a34255e52c5920aee2ce9b1e6bf78c8d1bedcae0d4d9149ec09b00b45866ae89277d313369b7ea82f22ec1f3bb0173bade65b3898fbff52b84286df033836cdae8554c4d713beebc5184672719ccd155c1c1c59938a15f3c7c527cfb356570e731fac1ce5ea345c7532e33a0657b8dafa6cb148e0e53e06ce04229771b3e3ae9740ffcf55208abf4287b616564343b7a70fa7c4e6f3da73019d899d79bc74e37a1eb0eed077e933879a770951979425e206024bed25f9939862ff271a76998c735d9f57931489ac5abedba1a602a3dacde4cfc5b4891ab63860a9c22760ea06afe38c091d44f037eff2e2d3f8975b349c03b1ac0a493abe8aac3b279f4227f153031518b68b073539475e62630614c398fd2c25a5aeed6d9e1473f4dcbc67427526cf23238c869d353e97c3cfdc62e27cd01bd0ece9d46efdd380941a0580956a27c2ab644082eb229a30bb63838b9c1081dbe1dc3de304ead2f0d83c2e179070e8eec24da34865dec5a257f84970e87076adcbe583c8f8445e00dec0c39223034b11e366eb51f3c397ebf1ad6a5b2acaa11d1a2763aee20149e3e7395b8cd6426bd4f7068db3b919a918c47af61aa793428f97ea5da15f2221c5ea7ea1231ab34390fede2eb8356583e2507aab3cfd88a0000e31a2c28b196f59a46f4849f085deecb0abd0f247138ff6c2346822618ebdf71274071db32ec9a4047622b0d69c23db149f05131d3e1708963453fbf155c362ad9771e996d8c831d97625cf4f925a794ef11318ee7c91647cfdd5ec8d5b5f3baea6c4f33f3d64f4f4e7a8025e0e4094b967d4027f41b27a1c48044421fbefed0f56c25d3dcc40ecb7be7bd0a41d46a280037da84bcdeb8954b791f146f6da7f55538e2dcdd1af5e689a00966a04cd5d70b8e9f51aa1177d566a3696361a5c85f1ec22b27a0bcec4dd31bcd506e4095523dc6fa3c9048b71dab10402cee6804d7945e002690d4ac827b363e1afd9349d7f3d82c7a2d0669eab027c0161fe6bae45ff644c713cffccf02bfca2d77d6f595a2ff802ee2303e6adabd5e71fc65717f518a204a4bd4ae3e01884e4c61301039c468314bacd05ef354a611aed015d801142e9a7d97d7380b70007aba83f1502fdb0e61a62de2a9826d5d11a1bf997a055aef2893c7235d58f5a8d7b6d444cfb17c7cc1f750d57e3f1b21bbdb343df7b47f0c5f81f374c78e705d0d110b1a6a2c54124357d7123b0c254cf491b572176d854543e079ca54e08f96ffba7497f8c77b389b5a129edfc94a84ebcec879cefc7f5af08397d8013e6b098a5d25c48d0ceeebc601142dd1be7cc3d200b550c155465a1d3ee7948c2ad4d6477badee7c26bfa842555ab2397b9b36d5c28c7cbf55dfd985c6bbed03d468820e83d903e47626b1b4fdc18629723cf76c7cc601f54e30db9d24d509329c17e90f7c937737d07e529550894318b3bb9720fdada150d4a1ca863e719ec4abef5ec28fa9de70d2763c4bc06591be6eb14e2aeca5cb914a83735fa30b911edf50be154f015109e84d46cead3222065d9783aef253cb72b2abcccc102567dc90be002c0e29c7083aaad3c3480e6c554448f74e384bb340c0e85bd037784f62d664b4bf1a99a02989624491ee867bf373ff46244e757432fde87fecbf9fd212561f0c801c8ee9e3fab054e2f9d91a19acfefbc6533b23f7dbc9034b4709a7de0dbf5b6123c0874fc825f05e6d3fbfda406bce55d15e7d7f16303c11d8ed890e97b140d8b8eb653b516f94ca64c876e7734bd0bfa6cd966dbd369987abcb51b1da6ca91ae22658dbee5ab052aa8eaded9bdd1b2ab6da7df49c4b271ca9b159e4d54bf61a15203cc4394151b5bcb9c8e3fb2f369ae32a458e68acd200fbf61fa53a279957016b31f23f29d132fb9b09008e59bd14969070dfb68113354a47a89220b1238c631963fb491a69a6fe38dec128f77f2d2ea40fd0ca0ffa83816ee2dccdb8f7df8aeecf3980579d21ba113e07ed3bb3054f2c1a16aeb54f1db0e530d34bd973b877789b09049569f59ad78e649d461976bfa66cd9f1853d24e18f5474a4c5c4608e846b97c72bed1ef5cffcec08d590cac05707bd85ffaa029e316dc1e3552ac97f2d1fe8aec221c4c3c2f255b5be399301abd1cfb8282c8bc4f4afc424bb6cd3e1c150936a2e25136dd48d8389227cfcc20dcad851a958bce8b0a822238037a025ed90f892bbdf936aac0f0e93486db216238f844e7b2c48faf17d7c11ff183eedab725cc699ea8dd69af58c02316433a04b1c9f7bc312cc75e117f0d4ebd816d541ca8af27108e6753d0b09d886b75006447fd1de3f5b26b1439a0ecd8ef57c6b2b2eb4857e4d2c9ccd216dc2968694509a8beb0ffe0524911cba0e00c06042fff6ff153fc7b95553d58d64e72fdcd33cbce7a1d2dd6aaa669717a13cff8c821ad59d15ac8894d1b4218a3158780393e4f92ebd1fe9e14d808baa19783019bb45a9fc3aee0355413739ed8d3b11ffe1f3641603446251750be2879f5eb6d94a494cc5c3020a8b3ef73b1c154ddb966709b19d97c6f42af6cb7dc150191c0ba4df4db704ed6d2c00dc738168204ab873be6262764028bf44e6ddae0edcb1d813c6e8f7785631c9f9ed1e9821116e92670e3df48111d9fa731bbcff9fa00e8dbd8ce62ddd80dda99cbfa58291f1df4eadea7f976440056b619e1aa1dafb3df43acb5187df8af09d2124af4fe009d30c4d045f800c7d1a3fb4cce28797804f04a33ab25dc0a6ccc46cb0164388ef3d56d184fd41181fa773288860fab73c8ff642136250edbc71760780667db388d6a4501ea8bed880cf4c3ee040bb824fa580810af434e476b0a333b3468c18c1ab7228a94f6418b73f59454842d77f4aedafc13a113dc9d72333d98eae4ae25e6349c4a1319d48f76ce5a1e9023ef82ad15feac27c5570413d5d974ae59d1f276e6abc5863c5d65cb265f5d9d666b724cca081137c2591cec746c20f130da4fbf5b51dc2a95036d19fec21f84b93d61a15368b130284902c9ac1d61dfc2012eadade9cea63ae540aea628f43b9befca75bf08ab8072ed0ca9fe8d95ce895ad2d35d7128188e564b741ab6a0ed37293c25c23071eee52e211aa3e8cafbbf1e6dc8876665d6667342500b7789f15a5e2d2e22607ebb65407901f1c4bd9dde8edfdf39bcc32ebe285f343c1e6e47f7ce223cbcab629f9ec4d4b0f7f7ea13904c4e37b78b03cf082f9cd1ce1afe072cff45833003ba329f4ed5601a5eff65e2cbd179aa65ee6a214a693654ff1b2a6b68132954556d1408006f67f05699d06cef2feed17d4e389c25cc38d7043787919ab22ea6c106a31a3a714e341afbbb1114f281d74ee20bd1182b075ae061d1d249e23159fb3355edb5877780f608d4f0046f8c4854651555c23b5c0625fa6489dc4636e9ba5d57f4445d08bb5364e30fe0fa89976447f4f3f3940a3107cdc7b1aa5bd3539d0e031110c216e316b686028f653a8b2578adbc822255c5858efef7b7988a8ff2fa3754df3fc99294bcaa80532b6ab32733af00b011615bf8d411c968ecb881311a3be15cd2679fbe9bb6c92612564f048bb3a28204a56a8a7e8bbe2f0647f42de27d13b66270207c0d686a6a4d101624db92b64b7c08f83b3aa33dac5a0a459d175bb352e236d95a1bb2ba6b78d5f8c9d0eac5162ed66d21b7a8552b8b0ee59a86b7c6c8e508a13d15eb952ff3370a90271b181aa12da8d4be06b6e680b370d6c9b58bd7c335215ea7e1057247589b8f122f72063ce7df09ed5c93e956c0bb302ff5ed2d5f8f396c9aa1282763f7bfc6a8071d558ac2f809589a9538d83c77c1d4be1cbd4d69b2e987fdbfe43200406d50c292d79ae83240649b57627da926f6d108704fdf852cab85590cd5d9c3a2d47ac8801d1711dbd40bba8659bf83b8012d19add22c5df3db3b39afcf077083975faada7046761fa5535ec136d23f82d66e409062f92bb807f5c45ec12441993f48f238946612045beaf0b4550df9771e448bf825884e002770651edc8d014ce4153e29315964e613b94adb3f02af7a4d017ccd80aa19b726b1161fb2cda26e2a5246828fa054375696e4b5054844a8effbb1a75f1b01b7d168e67ad26fd99e2a9436af1b2c130ff3d482be061201056fbb2154332dc44daabeab9ffe1f15893dcbf80716f08c710e4d0a012e6a64db2515c36a1d34761df1441f7082df31be3e0cb30cb307a81a94f1d5e9712dae2a1a5df422ec8232d912d503c25436fae70c90ffc240970deaadd97841cf124ea62a6c49dddc67d42b28d4d6c56cad6acb1878cd8850345dbdb1bb28d57a036152248196575aa5cb9f9915341ed95de74e4a6d7a91ea64423cf4d79fe6e85c23aaf929fb0108d45b9f6fb70ae94dd7a9abdd36e5aa4e0c93f3cdfe9f1077e98c7a34da49d61d4a6515af280cb43247421cef451c3345ead81982d50920d7b7f83152f76151e3bca097c075bcb4da1f9fb94f48a60c61ba126346e2cfa41e2d3a567c4ed1f7ebb12513c0491920d5415ff39fd74812977aefb9f48197ffbf60af0d65693f10c1630637800d9681453d61fe98520f432a548219040dbf438ec315d315bf337ef23e5491cf4c8edcc85b649565e177d9865566299850359243cb3815c760b04ed24260912dc86857cdef9fe7f7af54b5c1e14f9017dd395e84ecb9b5897fe60cf26ab80dd71135d3a8f9c96fe2a8d5e545a11746672ce6f097351b9bcf466b30d83d66b836df2065e0e26cfe71f418b065dfa802092757dfb6e53df2e4323a6bf219ff8409465c2be823fe00480649a82753b6e2d4d727bbbf34e94a1d6e2e5962b9e20daf6e6653d2de6548b05cf6adfc7e8ba9343ad38c9ed6a29914390af977f760bbfc1bca000a224dca5a8a6e5fb6974b89a51b246288f81df9bee7dda7a808071da733a49593089182abff1b9ad72c251bcc9d308076ac9ec8fd9c08d580ab075958917f933ede44d4e7e707071129502f323a222d5ecf7c4047ce897b897891c7605e747f82ac9328b412403f6d552aa787379f6188d28955850bd1c9d18f73ba87d3d06d7def4695cae92389d2815ae66c74ad4fb3b8189e14d8d77d3d2d9a099d780fbe8d7b7c55d9f6d3c28e9fdc5eacaad6334f65ded9208cc6f26bd7ee15dcda8f1df2b97064672af53236dfcc3146ac715f89551cbe6303a199b0b7d7fd4a823ca8324c5cbd79df7ac58c9fe59f799569535564ba2a696cb28cbff11b6fb6fc8aa723975447b181a3c2d4bcf0f4dd157ab703b0d0e2598479678655bd00bf19be48235a4e7845526dcc3b0e179fb08c59a188064f4160ee6ef48818865818d909c3fb6b5c3c91acc1a3cde7e95c31072c3823a7528271adcb2796a46e883c9c16987e6588bff66f5fb822caed5b8e8ff71560c97cb1b186b38f98e140424ef1f76be54a7f4ed73e7c87d2d22b4bfd17e74b4d55ae366df16c6831804bd5637afd50e22f4e69a2a37c654adfafedbdffcda8d232ed30af3bc03df118bb7485c68e5c7929de72d06bc0b470b9638838cf11d1ca6374351074933008275977a20a109ef0145ffeaf88c60ee9324250bb3e84703a57b11386ccf9ce981e4d0e0c571b2a9f84fd992ac7f451fd6e3bf272f72a8ad7523125e548ff11acaa40650e46bf5b80204f7f39450d2dd3454e53598f9e03eb98a7868040cfed8bab0d747014acb5579c150204193f0c27791a543d502bc8aafb1bfe25663edd2f075e57b0d74f3cfa47330294f28edfcf2a0347b61d520770a0e375f06e97ae760c45a7aa9ee28725fef1bc2751ecda3601f53728cce5a550ea1d6855984c744fd6a94c12479de30cfb11b608c4012e9246ed43a59bae2c68736fe74f5506fc5b68e43eda6b5b270f078086cb8d9190fcb235a5dfed8e33c143517a09a37bf5ea211b79f7738586f79c7d23718f87fdc93179b66942426c09f92a312d2cd401f0c0daf4ca5784b52a2ab633db5c73e64d09c84be988705a87c48053cf918c99556ff0e9adbc7b549cab578e73b80d44d54c2659331bf86dd571b5eeb80c5f3b5589d87ebb3ec3c0ad1319f2f80baa54079e24acd535e6949f36ce9aa9421666da7ac290195f44fb272cfcb875975c8ed7da4c0ac66abac5f71225e0e0a56a13795e869e4780386fc32201c958d94db2a05a95e6c48beab06ad31f10d255dff198df42ec897a48c276084df579d7c9750aa3f982fea9ec022d97514f38720fcfcecc0b7e6efd180bafacc613bd65b5a6d5bbe8a60374130e905e4182ec639ae25c71c0771afdaef24015465efe49a22709fc62a32b3132df833f3bde82575e6c8fbbc05d930a0ef4ae69c836599e87c6ecb8439cfcead5ff9004a6c911aabaa3948106377851a1a37e6802c2270111c362babe4b669c9d9ce254b87278855534dc3a52eae2ac63f0df4eb9d554159f91186ca72946cf42ec76e8f00a2a2f85032910db536253e090926bc2ee74405000eb978aea929b86819f78210485bc288e01e4a5d6814f66b6b4ba3677aa1820dc0e133452bbf761a58be682ffb5e7e27bc60a9551dde74396ea5e77f0f0a62094cc3d318c8b66865dde78cee16a6c60047186186e5ffe91ed2bc00f34b35377aa58c5880fafcf3d8b5af5179bf09cb6cb8ff0ffdec257e7c0f12e31e9cd1cb4437064f5238ca41fda5d0d62a31da4fec64d75bba019756e095b448888abaf8b732914f749f88751a7ae5c4ed8f771b3450ded99cc34d6453a72f9fa1b4529a9d48f068228ecc88779ea43e40aec67c76b2b45727f4b03e0c78bd9261d2881fdcf496049d234e3ba3a6b034b4421f183964a6e69b6af44d59714c42bfac6e5c302996767375ecca53f23db4e3aafb8a200c90d91d2dc28f1c4f1e360bc59d6a49747bd863d26fc2bc5806d8b837d2ded823877273fd35c07054c82639014f1c94444126e809692e0f13e6637ef71cf62edf01247533c819db016f96129fba966eb96bd733ddaf27b9915e1e7dd4f26b1b8be19b7d9b65bc549f5fb8270408fb40980098f4aa73eac46c80d5c10d6c6985cd7f29ff83a7753ae10e49d9c81b80539e0fefa82527ccc644d6005d1e749d570d46c59857f3a529a724ad9924a23f29f1fd6d03e12e16a2871176e45212c6d151e65511ba0bfe09ebed3e688d7502198863fac487480915bc50fccf9776ad75c9e9256462d039f4fe134248e0535f4a496a01d3ca23ed0f6c3e1703a93636cb57831b44c75d81354295cc2e01f6e493cdb4e5163cd371e0ad7201e6db8ed0edccda203c89f72b276011fc494e280b8ef6f447bdbc0d88a234929cd6576a825e6dd2b4ff2bb6dd5817e728fc0a8369cc0cf86cf46fd5886667fa71d342132ecf36b4666f06ffe43e6481a98c159fd5e134d42a6e10f9f3749f53c9cce2156baa3f18c3b89a53378ebbd015dd37df0212a7824b32743480172ceac46bb6264b94de82d2e949c3d456b1f42960bfac275a9fece03f485767cf36a791e422b07ed38ab0d3397fad40d5dc7adbb96e9fc2ed608539c52eab1112c282da812a023719ea1aa30379ff9887b357adef79e35b4dadb1f9ae89bf665a8ad5a7b4d506a1d7dc34c24377b858cc3212c26c91e8a8d0a3817397e32ef052f8e8f4b5a03a3df50c2fa58903036423f8342126437c909276485c9ba91d7f0337e179c0fa9564549cec3a6bcfbe1319bda1ea161e1e62578f2782fcd37f03a0157564d8bf1bf8e7dd4e44a4c0adb11c1e46c5b3db1024d7d2f07df25a8824c262737c9dce7d4e43abaa13252bd6c8c8afd2ebf0943ef6f93c088dd984304b08ca03f15635d02eabd051480bb1a0e86eef558f9f6fe073f73d98407f2bb7e28076a2314178df8dd43a2a88e70855f8b5c4404574f8c0767773f711d2056c2bcc5b7f2d3c70c604bb307a26b7b01b457d0ad98a0109ddba84574ebce56354c7a77ab242e5bdde605544470a86f9be9bfbb1bdf132a92ee068ef91c5b268be9ef2f191073de0a59741bd07f6b0dd24071a93da5d5eb9229d5ec0c8fb29a5710a29abcd6c7d9782d18627f86d280810a0d47efec99c40664f230267b7a6561c4889810dd9be3a055b959af59d1d41f65f5e57a906a8b19b79a70eae268da8652da466ef8fbfbff20e6db96e2b1914c1f8cf783a9e4dfac93b4d144fd555f4ce8543a47d2e7d72a15796d480ffb541d8423c809b8f137e4dd7374c1153474af07c2cc1fc58aefc8ec09e9fb7912f7e3c78af40dac97fa784c1d1ccbc2317e48091745ed31c34332ca55df84cc9d70be240c5903b4a5fe871594e26d563a6853829b10e198309acff20b518abe44f3c3998956adc26e4c6374b47c1e9585623f303bba0e23c7eae9be7f35c7985c86fe2a39a008e841274c7cf6de6c0d96e9539b5eed9ecff6f891b7af49c79e5d19f33203a5abcee6777a77b3cce4b626fd11bccf47e5c314bceab6a590bb0cb22362113ebd69c015d17bc5fc3b8e62d93ee50e4d4d784cd3fd9b6e17a6269001c33c875679d48b511ced4b8b065d588a32c9d9c1b25c31551c0c4124cb57ee6ed505d6a4a839b30e4b3d73ff1c0c0ad4e503c17655a42439d0e002baa8c2d15b8b69582b2160c89d0e63c07b6747f7e5fe34d6150f8aada5a4f61e2a61b590f208e231ae6c974d7d4deed7f86e4f777af0319fb13c68174a54a26b288bc9a7978f05b9fb3b13d7f0306d93a97af42090dbff279f0acf62a8116ee71c58a82cfa358e3b78f8555ecee5499a8b2a5775e333e47e158c8bdc5d1df3894690efb1c3ddc5f9901f0a76822ea6de352b3efeb7173f30301da3c42ffc57df61cc8a7b800a1dbebf5deee0f6b262ff4aba34311a5206bd33e008a39b9671dd49a6b781593cd8d4a1127966282fc2fab6cf3f1a5a8981b10fef1c3e8ad05f03918fc43efb243797fd00d63571b77bfb67f3153c7691994425c0b9d1c939b7344e24027106e512db847e62bdbb4b4163aedcd34e87c8ad100d289654ec63315f7be1ff26173de0fd755c124a838d24a9c0909d079cbd0e7c2660f9294c64f2669ec6305b15e868840c84001c9e2b9dbe247a411b67b409f9dca6f9820f5c0920cd8c4be833bb6b441817392bbcbb0c7d56e6d75bc304e62ec27b7770d4192a8094c5fee663b6cd85b144e8c5fd131b0a86819f46d5b572315718477109ac33b503dd63235e62749fe796c7066d8d7af29d56b6ec864d6d5de885b0c7aed0cea3d9afea5f245fa8c223f3ba59c78693f5fe9de38fe16a5c99061e6914e6b90f4f3b8ad4dd5dd3f13dbe842b46557b22beb0ae7cd4f189b8a55223eedc6a38db0cc8a6ef4d00d5db6b45dddcef56cdba2e751704412e0899bfbc7d85587e40b347485c428f8e1ce0b95a0bb15be7ab20976700d5ea5b45d370e1f50868f3eb9364840c73194e8729238fec35fd79cfd8ed496bfa231a0d20cb71836aec0e589d620847d04c944af65746de3e4b546bebc74d1ec6936ac9a683fbc2a4b4941a09dde03835c93aa4cccd71aff17ba123c69f918df70a250373e3d0cb591b20aa2f9638fb47e3fb1dc25d75e6fb798e520c1a90e475e8597f048084161e6ac1335af9fb604d32dfe2f926eed128c7190d1f8a93ac9151b4681e1c3623b16025c9bac22e019a886ff6dca9de638bd70468148164961436845155dda0a549c90931accc945ee9783ce546d8a376d1197bb65470df64922d19e9457f82772c59ca82cf469372ac9383171cc829c7862517b3220115d6ba8bce45b0de91255351a17c95959c60684f762909fd4dcdce5c94347ea22c65bbe33850720e493d9026a6201848dcd2163235ffcf0447ffe48f023785d6d6e2eab1ffc778ea5d6caf5e8c38ee49c4386a5fa0e640da2776ea79896a35e1a0d677f0c354e73f21ede3e507e0f42174b0d36f222f2c3ff6466e4b703028296838c98eafc4f1d83e4b7e2d2c694a164024f540d34c6ec85d782d4f42b317ceae06a17e52b46808773a2aae7ab214d7f131d3d167caa6fd557f9930108e6f2cb5ab991e9cfeaceec876ff2c564fd68c14e2d3f013e4f274de09794baa9daf614968fe182a885ad16c6dead921c4c60259141b3604e18de597ad3956a3ca2f296ed82f324e6d2ea9c46cd468ca363acd3e9f193fe04edd3aa07a867ecfbfe654b1b18916081f09370a0f55b6201b856a9e673e1c3e685ff975e288d12df8f86b36c2bf7231d1b06577313f5d4b3c6ea3d4055c0fd78c6bfbae1943b1198b939e271b9c332b1a28b1ba28003a47687a0097ab4ec41a7ca4b1e4ce183b550d6bb840fb9175d978e5aea3ad9b83e453c25363f934add445182372142bce933d292843c224d335a86ae91656c1edec402c124f693bc8eefec388564b3a71dba765cd560049211de625a743052412ca881d0873468eed288e9d3dc344afe834f3646405e62270ec4a4947952a9c70d229996b658b31d893cb663ef063c5620cb624063729061a722054fd18afae1899f30f09cc14c8d346d136c116ae2ea8667772739a868d1fbfbabac117ca5aeb2dd3a095134b5cf596585ed3216294faad35a91d25f617a184a96e2bb077b939527a00141acd6e11308e59d40ce765bab02480893b9ac20c2c248416fba95e87a05bb8851e3415f36d00a5753e4e84d8a1448300ec70c9c0c1eb76525a289c41d6e3f62bd1dff12987ccd7e50088c8f66d52609356573551de020568acc5a2145b8b94ba3cc86a828af571170c8a1363eb6d0f358786af7c58df1f6d5c31ec618730433d40f9f159334742f09f47447cb97c0b9be8d764e986d9efe2924e1e5de5a6d311d1b5f345046a5ee34cea817dca63fef195a54a07c6f47deb9bcdeee1942731c3e47f61504f00bbd65b47ecf92b57a2f6c886031259049fe4ce04cd5fea0e116b7d8494dfcd6ed812545455a8c8b9d05255107fb7c5c90604a7a9544e8111995384c7a5c14599249c8bbc5d4d771f735aa60e9a98d8edefc055aa795267c0623991d0868add33ee29b9429fac7b51e2cdbb351c7c1dd3b40afc12c2e791cc3ae48e907770d0fbdc548ba48e534a241f72b78b6370c4214f6becc58253010e67ef8719c741342246c52cd39c9aaf9258788c14f799a6d1db504cac91777d305e45d8c8b306b3675b1afaefd7e8fe57d104d70e4f312da438bc8263bf5de9ac1916588bdb98baaff1eeb57f1cb9d2ceaf2c48d8331980f103e0df4035a328e429b2442c69b454a1e0fff89e0182728f23af788434b6abc5a5cd696f6aef849ed2475f769f669a1760c8448e5305ed2b0448f240399f7aca4ea18f84cd1e2ba143b5aa98528ed27cf6eba28a4fe50ed0a9f11e173b5eb78b8e5e3a27f9f6bf93b3fc9668f181ca1e5cc847d0d8d2f1eedcefc0e5c029636b461a0b4ef832b73b50de62f3d3e04eaf80e6f1557cf31534d983065ba673b6bbbdb4a20bfce0705b8b7123df49d313437b3acecfe4479ad8b5cabe26472b7ba75c854c4263d00d14f2d2ef048f71285628733336e485a0799f4699d6772ed00afb30df343bbb75bbf7b71add8238a1fbd3c7b542b38aaf3882224963310d6bd5f697b68cb356d31298d768b47fbc01a9282f22356ca990d6d0524e943a4dd62e1fec7671660abb40dcb92bba380b8b45a529f761b1ac4a7e3df21aec69f9306c05be21e996dbc862bbc922d20a55f507e4cda65189699d0a862467c62ea8fa0843316002bc19c097c89677550340b318285a0ce533f4d790323fe05f787816615424d85def58d4266350a32024be3a4dace8c1426ddda56a0cbd33a5eee469751d788d9ccb778b4f1d25bd9d8a57198e5245daa5960fcee2f1d6c470d0f566de13ba7b6ae26e86d29fe73f8b73a77dbe392e742a897efba916d083aeb5281122a7abda526f7176bbde8941b9884111c39ebf5f1c5986ef8c06f103ba4483758498ee2d1983cb7bf487f44d5e3456f9f749902bbc3e5fdd334d8761fdd3613ee3239fb4bd9a52e19f45730aaf36ba307b4b116fdbf5ae9a02dee4efc4627694daf945739c0b2fb6af1ae6327607dea5d143a8d59856eb8b5594b24ee5d77e3fbebd2671b5d111589eabcaaccbb8320af4ca8937dfc677e4573723638a6517c46c866c8da857ef99e469ce13f6aeb36afd7aba63bfcf7667e6367d9df97cd28a91a549d78b75c7aadfab523e14173cb0fc6eecf093794c53fcefca15eb268f4a822f58d2fac66a57f6caaa5b99fb075e6c298dd1dd30b283f7d782b2a13ecdf8a32da7f68ebfe35f39756eeb2811204728d6e685573e3979fdc595db317460a3346bf8da1584f5dc52b4ea9ba717be3c5ea64c3873cbcbf217a4d99606a9f418530d0cc3511b310f69312a548dd5bb01ab330708a6519b093cdefecdb17b0aed63db8675e6b0dad6d53e73ca475a2598ff88ada020abc121de6aa30af91c2220ade09405bef4f7e5317298e456d25f712ce7b4ffcd359b99b6456e4d7858fd64f26ed8295a599b940cbc4507858d971a6c11213b1ccffa1d2ecb29a6a5fd38d1e8383d0d35742b9772ffe480c64886358436eb7c56c7d471c44eb1f6e4f78c2776ef825b9f4669ed130f38000735b20df56fdf627f4ec183f9f70447ed5556d34585235b98741503244c9c2c865c0d0ffa387aa7bad198e327899478437bb791a209409e532f291055f046b2173f4f2e442e9e8bae2ede07810d3d037b4f327285ba0df2e2d4f2aace3c8bffb7a7db2799fe59d9aad708db35a28e3aa5769eda8c9126cadc38129a36174c91158d01670d099728f09897f71c15325a1f51ee2b7df5a6ddb599f6be4a396f96a1eb13bcec9d88b54bd1d355a8e247c02153f9cc77c9d2c46a950303dd3aef75340a2a7e3a8ec99710abaf724f9aeabc3e5f50c8b615b97e2e8be6b82685bdda5f0386b6bccd5cd426c8e9393d36924b39dadedf74b46706964acef48f4a24e20235fb9169742afa7088397b02fd98d3d5f18a44eaa661c0d6d146771720ed69a76954ae1f311b993fe8a24b8bea7df222c98fde91188c4100f8e618ba88a891fde6588b74a325cd8c19dad6de72317ea6326fc05a5726b0ed1406dcaaa1000e7706dd5bf1b5ddced9cc45a4c5768bc199cdac59aba630fa91bcf425ec095bf278bf5ed22bdab3cdaf48dfd1a1709712fd4dcd8ed365e76e37d52ab3977db0d747965720677c0d48ac54bc04da0be4b2f61d6bfba046b2942d8efed8516adf392dd2770bc6431769f9fea66db7db1edf20c1c1bc95c3829b7367e79d945f7448f415a04a4072c123329208d1e3fb8259907cec782b48ba1291420b36dc3ab3c9c10f1d1c8e924bdce3a9c23d9b4370f11c06799aca39b05db0896b3c8b340cc10b3f46ef93d5ea265307ebbb1a25dd60ed5770c21311a4b9819bee610b9902c548dacbafcf79ef6ac8142a2821370142f427810d8713a7c8e413c3f88581b33dccc5fa6903d89467aa70985f9fe4151d970ffa73c1ce6b2e6b7e8962f6660678c90d676c58bbdd87ba47580870cba29ae32e41383abec833c68dff018b9aa0e6e160536756a42a8cbefce2b6a07026e80aaff42529eda036a8eaad4404a529fb27efdd43aa693c5211c18d78a97ba206d323c6b555e4b967e4b3b396c19700d7fca49bac12625a04c4973d3f4a666aec9e24b4f50c7718abc30fc2a238d77e42b0c1ee6a94c2edf6ba1661138135d5ffe072b3e97ebb88a23690f2801bd6147d5dc5bc79f930238c1b0592c3860a6b3e113479aeb781b26425daecdcd2658447908d358ae6fc97af6e56114aa03a64950d83adf7d4f96ddf17d66e12d0f56c00e3b8a7446f58d00263a65445eb9c0fe896a364eb6705ac850667d509db61c8bf05f5e98d1656d8daba381e6a064e18d2d052c12f9183f0b8c6ebad6950270b8556e71c131da72c5bb82182da94a3e341a03636bedcd6fa5fe18afaa5a056d3be53e966053a3c6b573146a318021d50875fcbc564304e1c083f18821e300a4dd2cc6d191250200dcfa93791648cfeca7932174b3d7ad42f9ba45175ee41f78364b2dadc3607b59582dd0dd18b2a28f2864d047c873169c7df1af16a66cbf0bab6e462b73f610264122384a05cee20fe2ddbcfe398e5b79cf1c781c954ef196e97d95b19bc45d5346b18ec8848fc3500593e563f6e68045b7f2bea5fe24b6ae7e05343c2305cbdc1ba3768271d7fc4b932e85aed753b8cfc6f6502d5e373cc46b6a6bda66bc4aa167a058ca32a0c88ea68e8780bb0477b1a9aa646f320bd1f529cf2640ead219af85eef44fcc48a1f15cf4fec4b52cdd00dfc5cf8db5495ff743eca31cc474f8be7eaafc1777f3dc8608272f759397663f4c1af6b7232e3d8b1821dcf79d67600b856baad5ccd330dbebd1ac1415290030f3af97b58a9fc421b161c2c7a72c8f7b95f836869b0ede218529773e0366eb2dc97153c4a4c6fa29e09e6f1652a2425a606b3bd4b618967ed8e2322486710d301bf25684a6d1ec19c550a92bb716053ead73b8c61c44dd1e624fefe2c272224f5185710f351dd3612c06a52120986b31c18333f63f3dc52b0ca7c9ca1a9a6fd5fd70cb496817572453ef1e5d38822548ed4f5417f494121eb54a21e42f38345676afa4ae06ee811f63eaa60b47b2c1f5e15d16f91a2608a0bb6352241bbdfe8993b0914b20e67ae5267a64975af6ec8b63e997fa95d648dcd5d55530c306b6c365e530a7fd85d905cc20eb3636a35f4eebc75ba8a9e40636ac614ceb14271d37518f23cee2105abc43a4f284a5ec6745bca66964f5d66dc6e5cf9b1f03fc6522423f980d0a88af351f3e17b9fcd4b78a4ff9397431d30438651b3ebd270f7878e70c1b9148a31aa22fd123ffda87511b25e512ad5edc0e1fe7969b5825a7eee17af0ed998ba36e5717e3e723c722c0b9490676aea45cb960761a51fa4d72d3142e3688cc40f0bf46ae1163c588c53119b03d5158a20e5b370390b9d33404c3e5cb62db02d073d61203de4ad680169de11963b31e48952a5884b2d11afd598b836907cc3771ab5ec5b6999f8c4bcc0c94727d97580e26f35824d235c9d28af2ac40db30bf1bb98b80a068a646139e92bccb74d9d8160eb1f5e316160155045b283825aa4add11e5f42719e96b8603bf0c7fa0aec02ba0d16a87860179fab1ce9562e37d7b33dd57d9b545c7b53a278fa0166541b7d72704ff0fc1f02de218739ec71c3e9b7e28ba9768fbe691c0ecec39c8a5f9ac1fc4416ae021485130a756b1c6b6b4698c09ed2a6973428a3d0f17200677dbce055dcd0c3a5fe4f726ec7e8a58f597ba5ee03e33af4e637c4c87610563fb90112090170cc7bb1b488c5534d576d8894160b17ad94c3ac9508e448a0b86f45f6396aecd99a0aba24fdc3219b33217fbae508af142245606c9b1789840a9f1540e44cad7cc825902f6302f3e5c1a0d43f21bfb4b4edd4b9288c22d7dddeefce905eaaceb0f717ba762dd541ac9d2a236b4db5401162d73f32deb659f3f9c325c55f1dd8602f1285b3e0ed333e4a677fefd9ba82e4b427bc9dfc82613de63bd766e6a031ad9ca0d5c70b9078a300e278cb333547d554facf56008aa1f84b468d220eb7f30cefa00672f80074986eb61f50e74eeeaef5951b857fcfc10fc499f513e97a8434ce93508ee6f40f772e8ed03d51ba967e8795403b631d5da1cefaab14ac4a0f0a308dfc57dad8a1bb9680b305ccc0d675b0c4a521bfc4083b086eb77a2378ab99b487876fd8265ee1bb20d45fcd677a1b013b856946d69c5142c80b7508ff13ac8989c150d9d6f26a412825643b152a50a94672e38177380d6430fb48a346da2e54f26b238347b66924e07ee9fcfdbad47679228cc53446bfcf82e0f4ab1ea0bfb18c58c32c2f56c70e00f1ee4f0a4c7112f665d2f73e5cf2e9e77150d03055e11ff264cc83ce873999e1133e34355da700dfc17fce88bf6df50cf26c7a948b13d936d6b80e100770fa0af447aac354d6782621bb7fa059004a1abe3ac63d5d0e4d99c3adc60802690b450a93281ac9909eba38980e17b80926782ffd499ecf48010dd158f89b7b568841bf77fa1fc1549905a426307eb78905ee24a575b4e322bcac75009df530d89f50e8cf0e9ef925f4cf257f4eeaf60ba80647649f4badc77d16bd53e478065bc910b06caf16782916412308170d2d2386c373eaf3ccaa60755fce7f9a4fc6dcf3e0e54e977834f8e148d2100e4887d82253149f39e439ede5170f34982d40c01f83a7088e8e45623fad37d7310b9c3aa53859215bc2d0d69cd934d793ec4b09c1f9dd751d628c44fd51e71f60e7a95bd33e91b4441e469d36a0e5cfda56cb49c573d165ae1c5ba3c5301874542fb2bfefabe5774f70ea3665b29b6c8c3ddcc5f46a385885ba1517249ad0cc3198d9ba4d54e5e04ca5745ea27f96f20307f17c34dcf8a87d84fed25a3233e91176144f71e5230a8670ab64c298f42c02955b8cdba3cb8c52d9e16dbd8fde060a781638c2197dfb4676b6b732cda7939b834fc1513c87527c2e6f494fca80045b4c23dd91069b82671b93afe3d9e6d58b86ab3c2ee5159200d634a7f72fa27cb5269350f47cd43561b473003b7d894c39dbb9cef978252ce5ea388193bfa560fb6071666c0e9cc8a332d7a11a8f83b93f4285425658e260ec385dc8661534bb883ca67a641aa38df610699c5488ad9ad342133157caac0091693843e96d4c7121c0efff285aee04bc49f21b8ace2f6bb4a3c89a642dc4802e53cd91b64bef8894f7b29476d7139cae547d5c342ee84b5a63a7e7b7561872d68070f642dcd3b926a2e6df09533c5860016e55a64b6c6f7454a676e50da93e8d036f8438d424ea9ced5c6f8a897e6cf03fb50196480ac80b6d54cc8d1213632af0fe4e26345b50688e7bebffa66fa0fadd9956ef9b8e54c6ab8dc288da6648f80381a18baa91f4abb340d7cef75b942d4328a6d13100caac5e374ec35c953b74121eb49a6f0e53941eb425c599ef8f04ef683ac4d5151bde943f503b76d480a1c951c760a0aa09b59e894aa63983ea79ff412f02ead88886b1979ef456ddd3ae5899e4b39c981139b879cf5b23cbc63a71de595c4635e58580386fe22f701fb82a490eaf520b778a2d6e5ce951006a91cb1b2a1bd8d7af1068523980950df748bc1ba6f266c2b2240659b60a832755ff9f981e55a92fc5777272bf08249f9ebd23e5bef84a78a2387b751b71ace012da3c66e30c8d316ac49b301aa7a76a1637334ffc0dbd086bf3b8149bfc24e02eb5b4d3ef2e74e21163ff01b1733d3e212687960de1af342ede6cde305ec0d7512c3999dd32af21aac32a6dda962517929c9503ab53976257723db2e151e536a8eb8000de1ec0225e40b6d08998c8947783d9c743e185b5b310e175e1e539cfddeb27fac1f126c31239c5906d337a7971670a9986779c35ee44eae1c60396d4fc15b330b22b55890742f29c8b1d993971296af770449d1be72deca938e0544512423e87e08c75fc01e91118a32a32d89782a66d8e1f19b5c30d858059b142e269fe22642d3b6f5dc870318fb72c1beb07c11541307fe1e935918d385638ed4dde44bdb38fa3f3ec5c1c75849ed92c1669651a75d20250b32be1283a1a41d7151148dce48e73a62ffcb66a3441e256e3f219d1fc7c80f731c72ab58070b7a42627edf0b7ba00755e3a2b9a029da2ff182fb5551958e929aca4734b0d722614897c88f2df05f0e6924bf4565964f98fd626ae813d2b06fe4678416109935d5e9341ecee2f4c4d353164898f79e3bb74a75c58177603cc743e76dfc302d89d8c6fb7319e9b8fc5090a870e9c44ed63dd4c3eb0e3e993594dd55cdbfaa07d352c6b45cae3c49966aa9510e9fca0f0f6bde606108674d397038541e08d2f8ea41f0f565aa66765392ea759568eea8ac45c090b80e200116d1f3d9ca5b158bbc084da4b83ec56944ba843415fa1e1234c3a73bf77136040c14ec1b113485f66c59734f663dcaa236d5c1ca9753c50e470a67838e45acb989c3037e822ade2005741c2bfe936ca0b36e1f36a8860ca1a6b0074b9f074e9b43ab960282748250fd4ccf5c50c2d38892bccd2634bc5b53cc5494d9f06210759b71435a9e34a559681e7dbbd37bc8dee3dcf02f170c1c8b3b108119942d9da88831fdccf74114fe0c9ec0fdce8708acd0ba1d3fcb52050ebdd02dd5a49733661b88999a34a221d40e11e2595999d99c383c2de8d9205fac66dee31ef0a047a55c21c9372d370687833160fc25dc4062e02cc795a195251d0db63ac4585702cdc9c033c9cc52ff8b88c994c37e8cfa8e3b36b5402475262684aa67540707c9f72ce2646a0f506cd420d5bbbccbd38522a28d51434584b7ec110c52b730b2806b75657a253b7ff7af8afabea8202b78ba250aef54849a39acc2950f882e2188bc46506011ea8a59547eca5d00352e64e80d34c97c72b5dd784d4d039ced532cc60fad3dafd3594036bfa56d5c6e4135a29efb50b92bf489a5d2747f6d0f37b0e1fedfe4a698caa2db2201ce2973800b66b292b0d752912bb0677d6f87a7a28b0becd03b702d6aedeb7f678d52441a9fd8904a6e4ca67a6c0cd5d48ad9f348ba7021f3748043e185d63a71644240f2bee1c0ef8aef6e41bf147b17f626372c95903e9075ad4953b9235e94b5be7861f131ba4c37844bf8dd0da69c7bd990e60cbc57e57ea0e28fc30bc7a22f955918c2e7bcd1fee6c10f99b5b1ed7a57778702479e36fc55ee82861a15de2ca9312a6cec0ee7bf9fa37dfa5c7eb4c018c8c1f3755b4c92bbd75bf2b63f2f064ddafe3e82b2549f37f9468f1cece0dad82ae6ade94a0f2a8b1051cd286161e9816907213389a8bea3dd6308aca422f73ed8d49de88abfa8501af741b7fd98f86c64612fe90bc32312a11aa8e5d99627bf4fda9c6bf81098127574fdfd1d2b91a441214740e1a474d9bf42e119fae682c9dd876ac2fbd7bfdd9404c5109131aa9aa9f16f094d6c717eecb30731e2f9b0b3e9860ab89a4d845deb1611f81f0afbaa1d208b56136645c6f21792a10059e3ba09cae8519f5fea5093c74a26e0bf35cdefedf1b058c5c7f21ccec86ff706c45d1c33ab658dd2efa1ce4685f7146ab7a119f051f466bcf1801c876f6bc0aa7bdadddd539b540e02116e84d0c3b8ec9d9d50bdfbba8ff2b3ad386e2ca3ae0a206f06fe52c03c00a48b05b243b618cd370ba462740e8f67cb30dbb59b9b24987ffa41f1d770ec97c984ba16306c33280fa175b9e4911a3baa04b98e70383278e24703cf6a536cbb661911e7cd492cb3a4c8c54aebafc3e37d5f9f0cbe44ce463632c8d24e7e9ab8d0fbae403b3ada39f8fa28f0dbf08cc99c1f074d16e9f824ee0cf09683f59d9fe469c65e2c35e856dc3d19458d902802095faca08f3accb90a5b7d59a86d342234ae175ca2a9f943ff1f8a14fb0dc1c4b8ff33afc28d21e79e004f6bfd9772cdc6db3515e9b4816b9a1b64a193c1c352269e0c4e95695641b741cfe5c17343e109bcddb29001986dfac855da7841701b53170a428b5f243c3606eb454d057b35c0be857da6d10a6c59b7b6f5f1117495d88549659f10044ba95d58505ff33b0f2589456ad51ac1f126ba99a23d609ad56ff79f0820febf69ebf499308ecdd84f5279bb94eb5de69e8272799d4401ba855b21bc606501b30752d4bc4d575395b5b2aea49e5c6cbaa20c1e3ba1c03afb41149c0a98b0d03b0fae8003ff426842eacab4c838647c5be5255876268e3b1f2a33b49ed3d9f46d9bc5941a0d7a9586220bddf74f44e03eaf426f90d1e25d884e5b39e18c80335536b57b8645c11a5a0513fc2919004bb5cc05bff11792a14c2f86740de8810320540d5466c1980d67664841d75d6b86513868c7e922c5e12751b584a5f0d9284a1863f8cc3c8faebff25a0898fcfa10afde737cc9dd3efef8ffc6091ac4f783da028236a9efd3158b04fa526db64c1c1ec9b7b23393a734846c7b6cb399b795a70de95702ae9657092805e5381d05e43ce1d7ae93f8aebcf7cc77163a1138b3c4e509fa7934f965b3960e50f463e38c41e8559a3bff7c53f413be25ee03a4115f76b85d63557c945d0733f079ccaf0bce8b5bbac392e6ce0bf468e56044304042be57552a4143be3a3cefaca8667c12ea389082f93006baf0e3d6ab21edb73b49991f4f9aa2732cd967498858a62a8e34695111f5d105cc929429c43e5a84ed548f02c9e313362105ddfb894452f98ceea344d353ba25d21d9377563ee71ab2ed134d494bd4cd84e6d09de2a9ed3f5b69ff84f4a5413089034200788287dca166a9e71b44d5f575d4be2df7b154007c5647d43429f1f73296f8f6e8803975f96678b70c9b5a23c16415a8625ee623deede8e4767f787b7ff7e03d8878e53ce33995f21bff272f1e4c9e0731b09c15adb3a426f9ee911667c5cbd824f5211b3a19808362686405b39d2e4c6abb3e7b5fb0866fb17dd2ac1960349793bd5ab8873cf0b74149eb1f1bbdd7376e4493ebe41f8b64914175c4d76cb1ed1d12de06bfe3b03d1b1287976534af548696fb1b05882481bf53b750cd857f2d0ef64debb66df58fe7fb4383e1ddbee9de4cdf5f4fde9c3bc734e4096613e9a031b53e9781a19a98c0f9896f94d1604ff51e415a48db2aaceeb991964e7f1360c6944ead46c0d5aaa2200b2520aba7c4d57371ef8f395812ef606b9a116c8681e58852bfb918cc81a2a651d8aaf1beac3fbc0f3fe3aae58dfb7a9f529bd03abdb9268401f2d925256609532a7a0de047056e00e487b3643af2b4a447d211b84ce998682f36a9a5b7be32331e5b7285068c157581be9e91643c2cab39b63a28ab045302c81c960cdc0bf4fb46e06646fff82ec230bd401cbe359e2bee3fa3dca438b2df0f08cb1ca8e8808aeec5d416726debf04cb926f2dcf1dfcd1bf5c5a4fd1e448dd735512a83ddfab51dcd75a0518059b185ea3bde11e1e76ea78abd554bcecb8817dc1c9d312f16f6024a06baba6926925f4b1521d56f12ce9a45e26448f7d89933126fa166ae553edfc79cb3c9654afc9b532f8b7715981a39f09b8de6670f1722817d0dea59da135f9e2653d52a4e319f941fcb243985bf30d702cee0f3075a3dba76db778e6be8605250b92c4800a3cdbb93858c9b1015ea9174fcd002faac853ae3a49f9ffb8031ea4d5fe53c301bbf9953892d5856f8caa4a4ceefb415e8ad1df7e3a157558d8b5f249f54f58fa0ae0794bc3a8051164f673b17b1e787868f3f091c3c35b393d23757c341382dbc8d65a7c10720834c20f02af29ed5c9d5194b3914350fe27fe00e4d39a14e81fa21ed508cc21f6071dbbff77d232414231c7202d98df84d17c403e247d139c8ecdb20f33f01610f7dca07e8a569406132a2f205fb532696bb36a60d78284621ae5246b6abccc03313021d947d500966583096698f016ae9f379432fc8ba55291def096e75db5a00f98a796e99e22f54d50a11a1a06d68faf9959af6215dc2c2b96bc8829b20b99d983c1bf5799a37cdb58943611af72ea1e9aac18333f9efb9b32a3cebff990fe2cb4f1caf20e02b650663c24c990479c2f4168234dadcdd6098d4296672780f760aee93ff6c6abfc88f0bb7a3d07bbbdf69022150031e6f2db6f1495cf49a93367ab685580ded59a64eee406d17a970d4e8df683d92150c9fad7f09d400dfafe6982b579ae2329de483887daa427e4ac799886e6735c071a820c71eb0986da89cf219e5a9d3b295a58aa99bae801a11c5055415cae9ff76f6160a22d403c53864f784227dcde0c7be51bb81d27f67dc276d63462817dd16722450b28f3c5455e8cdb331269cfd874ba7a9dedfbb5771e32b71fa14bbd7959b1f766056a1a10f130b7b4be5ddb3b91ec12548d0d7bcea250193c66161dbe0000a888b7f1ac960d36e6ca7566c024d1b4fdd80d857b0f7f76bdce0df1d8ff0ecf820dfab25720b0cfe4eb42e5246153c22d3dc761ed71603b9bce1544152e02fed704e94858ac24ba846c908b91b6f7f8e3ed8c1513f1495156cfb9b0d8d3c1fac122ab79bd685eb6e4aefee190633984c2cda7203e80b51f7dba68d54b8ca1ee75e32cf6d4702aefb31eb1bebbcdfd12b31dd7557637b1f09c375bdb99699010fc651f048dbd72b464e051adb2524111b6a7bdb364a8993fdb22fdc5ea8af912716fc49a55b69e9bbfbc9691f9c1009a5959dc1b96c128f28894a2b7472f45a4356494d0f0384c015ed6d8389d99a54dfac827c92b5e30e4fb9adbc9b6e7a8e3b6be92a21c8016f3013a09e6e6a2a8dca2c547933cdadf976e82e7236e49c2b9610035a693ddfeb3b2cdadf768d11665a68817f611fed0415155c4415c272bdce070e6e403f6294129a3ff0ddd6efc0c4824800267055029d9333a8d6e333fe170da00a2624fa41636b172134f1075c40e8ef48e75ddf0c53c41aae3e3d058435700ff7d1d6606f0b418a1bb2dd986ce844ae77d26bfbdaf91b7fecf02ed0128f568b75cefd1f598a15ed1b4398c04df8862933f4d5d933db4204b9b6e3559549d3f7b8569fad85969dbd036681b8fe52584be5ac93d6bbd7687af2231fb94a51c5f6d57cdba74a72d5f38415fc808783df8d8ad16e745ed9f96de9eaacce480771c19dc93959bf24c3990c7b5619f9b689e2f5b3be4a36cf9906a339505843259b4a0b16a53a7592ee30505b3187dac09c191f296af1bd50bda1ca00610b8f0c42e7cf62713a3b37875af827853f3966dc22c27cf466848b08110a78c89dea633c917428c47364c803debcca81c605c62c2d12c9aea263f97a6c1a9d3519a631090496f23b7560f435e89396cf84b40f6560e2df4326398fc170f90a17297afbb2294176d701dcaccbd98f98221ef66003f18b2300f1c6327dcb3fb21a003894c87ba6be78060143f4c7ba474dcc3cbc82e2bb6976e6f62d90ddf46df885f4b6b029f19f8b4f243628705be49d917fb45c935d9c400725c1956e6788d5f0a8fc1f074fa17bee7a1dfc4a7784b00f78fcf83fd79cde9429d56b1a299a4a55507260508b49581be27083d5fe2b0040170270f465d0016bf533c6a237da36a699a2cc8b31a8d00d903603047dc1cee79c6db7a4ba56069e895a64349c26b2fd03a86c1984b7da53d90c067136b82ecba111c5056ee2bbd12933ff20d7ad537964e83fccd36a44d9655d17fc1df2a2a1bd3549bc0f388e47e049a76d30cb2bd8f96b89ebfb1295be22c3eebecde886148e66393edf5d0353086b484e0aaa98d558245e79ebbc5e083088d9b4a2022a70e632fbf1d7eaf2b23940390ca5868a473af12dcfc76c0ddfbaf6dc0c4188daac846bc9c366310813780e85e82085a580f170407cd604b11ed32db08970c53ab7c78139d6b2b1f0900acbfb215996dc5a58720e74534d365baa52022df93ae5a3ee6cbd922c0d89926cfe7a4c9b239d87b14a297423ff82962c4ed87e32b41fef1ffd7c0dcb97d4a7cadb60123b671019518f46eb3c079119283759e4654205c856d4c2116df08f1116b60e6794ae816078ec04500a84068376bb6181121159238a99ffc6261ebfcc1ec984025780980a28f331d963e3ca3c0053d5236e4b404a532be1cef48508a3b61a6ae2e1aa936b8d6ee322588311f6dff537a0561f5399ba210d3dc150a1176f0b53bc07aadb5e765b7471cc307355a7a5ce4b771981a1193dbad0eb5f1236d49d2645b010b14242c12c546b647e2e952f39a6c00614d6abdb0526df691ff63cfdaddf701221c1fd8de64c42faf0981acdc3a2df51170f5099a9b551cd6729df1648b5fab0687e7f613f4b3c29ac98f14243b571bb8777253cc0c24501384f373c9d230bf9541252df0d9cdb59d45c64e7834f3ef0a289d386de3ea3d283758e20abb6ae8e7d7b01e4710b945511deb55395718cd126f27e11306f8e4ee9b2ad377c37514eee903091abed9dc72619689c63c46b70807ea25316e211062b139e843f06b263c1631607a5b1de9035c0b03962a263dfbfda0d8d3d3a1999ef5bbd26ed9dfe60a79fa7f847ef942df02f70c015952ca293daf25115a49942290c365d0cf07e25e1e891f7eabd06c0a25d1b2e6a79c1539b909563e3d81dcd0d316b34cd74bf29f5f900ecd955f9f419ffd928eb2eb6c562f317705e4aa3b174619bcdf6227577a7fd29a94f906a31a9e3db45462c51cbc1f9beacfd1886f9a058b5a57249a9f892b775411e6be57168ebe3780bf6b66b74d5349c61966bbbc2ccc258860ac8bff2755288b62debf8ae316248fc172566a472af2033914c0ce3590a42132d05ec25b8f852a8e3c4af0c5654fd2f31a43fe11e21c857786088cb79e50489ca3b1c40adeaa38bb471de18eec406fb76e6cc0d6e0595189a3292671c3ad0e83d3f486c0a27eea12edab83e036708f9f21123fe0224910d761a8701068a30c3fc02f5dc7511990c7144d645c785ba91d892091d7db0474da6daba1225f6930f3f6b5362b3707b744ecc1ceea2223052ed85d63d81ef79cc771599c9d90ede65eac19d1e8b63969549d2fd2fab6c6a4e1426396821e68a417544a50688ab5d40ef1188c4ec9352e36c4303ac7cb550d28582af0b5ab2018a7db35f21b58cc59260686d7764c33d0e9e4241b216ec1c62dbcf4353cc3918e802ea95c918db6fcf3b5f96c1fcdd07edf2b2811b79562c17aa6b6c6986ce2fdbfccecb64e9f8ed5806a86f8f8028a0fbe07e0ea9c9deb6dac03404db80f20e17d1af3be71ce80f2f853dce68d51bb2076a8157f3dc98cb5671c5e79f82a14fdfcff1faaf4a2e418d50cea9c99ed9b5bfe9790a0ff799af9e4627a20e24d2f3f216f154288a8a6f695c0333c8b2b6d50138e24710e8abff83e160249a9d4cead578a01d45a35caf94bb82353cd28f401d90183d7450262a1ff292b0e47d7fd76320abfe005f1445afab04586727915c91b442577544823c9a9ae21c238a323a4b046a66233e45467d65f9254f8e6e5d617be5fc5085b9044bc7f491fe8404f42d7e47656ef10fc54526f3e0072da2a154ad922b62a959d45e4b351849700bc00ad671b3e5d32b362c1537d63ea73ef548022f13da5eafd4391b4551410fc997ce1e7362095f0d9cfb8f92483cf4160de4082746239f25735dbd9712b2ad26e095891790ddcf89e5d8b40e5ae2ba509951acef15dc7ecb06a471ef0f68daf05c4619e594427c7d7665b0a00c09c2dca1460406445be3ed3c7bef9c9ad90f500571d2b0e5d2ecbef1624b907d496d368b30552d91de96e82dc166bda934f4e5bed7ec807205f1a073f313b86f2d1609f41d0a3b39078a93d60e8e849a5ff90c9e832b55f8f1cf2b75f4883156fe88993e96e7e5974e4fe71de2e35069219f340bdc398f213510308a09f9b629b94763d85f665e4042077c1b861c66f3710a46b1c5dde48868b0213f5b979dcdfe7fe4212f3b7eeea75713660c8cc1e95b952972d54dcbee0d4e9f04bde3c2029cb0e07e3af37eebce4615d2911b7a9241b653bb01feafac2905cc03a92f82bb020953ee263918cf23e9131f17ad03d56d9dbf6931a6eadb07b5d14c655a31fa032bff8fa8ebb6029bdc6ad8de1c7d77fe64fdd0aa3dade15eaaafbac55fffbcdeef754c0288e08cd045e2465b7e93738c5c39a7b72150c2a491505e38632516c13b44373084d7d831fb0226f0a2dd8ff38ed3d34174fffda850bc5fe1da97ad5c81fb02cc48e05c24628dea0089da43c3ca0e92ee610174a1eafe8cfd6253f816666767edd2281a0717c2866d046030dea6ef3d70beeea034be7aeac76991910238d4fe28ba16165bf6ab1a325f4fd651129dbc0ea379f7496b2aa7fe1ed2c1e32adcd4d9c4edcc0d3337d08b776ab866cad05965bd8efc95c290c90c1cd461410499a5e722683cebedc0031bcfeddc2fe0532df09c20b4112b15f6a773fda841e8132d369c15bc2a11da1b60b30c0bf5bf0a462c197bad02447b2998e8e6939db96ec804e8d4bbd7d47b0a48dc8c13c73c1c67cfefcad89687a4d034bf4f3d541c9e794991d80b91def87f85f3aac0b8e0e733b7bdc221fc7a5fead1d2555dc51fc53369adf07a0bed8b708de0de5b97e98add6fcded6eed904717d6d4a6381e74a7f8ea4033580e708397b36ec4f29bfd349754231157a555b3d03687c1f12a1899561afd4e26373482bad09ff3094aadf4efad99d5914e1aeae0357a1afc8cf8aec4da29007cfde578b8fb27c911148cb9a12f787cc8fa8d9531c67cb21f4f32f95e3063375e0c694f128ae34da3f855eda64224643e2a87618ea9c2f4675cb70d432ab3ac15bde220452fb44b6a914a1cbad4831819ee078821f84981a478b07f7a360d5f4d195a8b7224b26f236140932eaf8becb7ac4ceb933e0875f5df7a302daa30821db328ceaf29c17e4f7b0e1e0d0fded2d86a710c6769c462a4ab8383549f4e38260d4bd3909bfa4a193eb659c13e949da484ee59c85ca8d104334ca9d2238250e86762c03b0e736b5c0d6a6bcf30d38b9371a7fd498418eb86fcdd27602c287cbeeccb1167b7ec7002d22e36a2b16a67cf77e08d84e8b7be1a6cccfd677248df7be23221b8f79e3553f371d6361c0f20cbdab407765ae65f85a817e464fba999e75e83456940ee4317652a99067bc751e214eac2a19b7beaebae9562ce58a21d9eb0606633e002545fbf2c77903b84803d822e6844a3bfe77227e4f3f91b8637b42dfdb0fc490412017e4c164d8582beec03fb480d7ef47c3b4d5bba851a3c9fffe8d7220739fc7d64bb82c9b28a05758e3bcdf07e3908f1a092aa2279e335817a53f0d4f48b26933781859f9ebe800ac9c154cc0bfc17fb4e3de3444cb06a42da29e60421bc2cd94cc8456d49808ab125b93ca28724d4b09f0fc6d9399d040a43df19f0ba4da880a8e9e925f2d0e453502198dedd56b0c8911eff3bb4a205dc15d176ba298d777b24a9f52ff33446e6011eee30987a10254580f4380f7babc9ed373d71cd7db950699a96f0b466630bd5cd9692400c24d6d7a530d0700a7b54c7a8378fdd2d538e76b0e979cc84ac19164697fddec6d381c9471d5566a541d876cc55f29e1ceb56a5f5982befdf4e8a8f6b9e7a4f214f64bfc3f44dad12452cfa5a970e6bd7794111c853a4ce959ff094f7dba16e43af3932b4dde2e5284e3142d541e4f246caf63cd00be86a96b14dc40e48594e1bb09ae10a016113c572afaeb32e9e87f5d769d6cb8d984c24488b17538d25d7c58b237e41c989b2ed5095d073fdcf7ea0636445411c891e24d6490920d8f23fd4bf9dc6ecd132b1ecde6b6b375fa0c488d4a50ab61046b02e08c6a8b3d3e648b8548ff2e1c290edd8b24b0055918f78d19746444394e771fb01ea1f5cf55edbf575aa3f71bdaf9f88bf1d090082f38e5ad5839bb46315f6a8ff9202797955181143f98b4a89f3ebf6063221374bf23e2097f0bbdf9ea15c669a2c9731a5762a619bda90228f6bda3431dfd698827ee28e9e26cf89f50e3f92be86bd3d4ef13a8543a951d8733022e73f37933c1e66cbbe04986cedaeb3ed8944b06beeeab02d62a448eb2cd903886ece797fae3f71302c8a7d762b7fc78fdf8534747c03cc55cc8b17e2d6fc3eff35bd4e3c52d4a745d37d7a6955289db014beaf59305b98052cdee252d1d82e3b860e14eaa5c4b98b92b0a5ece12cebed2c8aaccc28582e0de4c3c0b65d9128179b59eee9464c4dcd88438f31ef222cf396e95dadc42d928a104f7a676a71c4babb46538aef1cd5219bb10d40fbcd1749ebea3a90036bb3c831b408d4da9b2d6f9d4fc59b31f79f710464ccd7ae27e851ba2c4a44e98fe0ce84a88643247c38a7098ba1ff73afb6be216dd2c8b9d1113a6da2b27b3b2035ee9e42fb287f0f7bccb24e1d2e24d1a2cc07a6ae5136b84bc224d23879e46bf1a399ad4e9e5e4330ee961a6c9e2a71346adaf5cc212915d8b3fa7e02600fa7ac2169af3a1436fc18981c0b5f59506881df9eaaacae9f4ca7cd62b0ef82810af1d07e0309f41579001e2281c5f37288365d058f3076e98e524c9946fc8611b9087db7e6e626588e62f95b7aaee75312be4275bca1b51465398104df8d9647ee4ffbe35cdc773ca9d2cbf706ca0addbb48793bb0270bc5f0e47d119930ef9418962380682b1005b8d123e32d8966f9b31bfadc62efb9351fe9c85cb72f25d425440249dc2e3e7ee1edf700e8f7201aecb99bfc21424e495b67e3fa9086483232f05e62c8870a413ea3d77be83d73b9701974993fffe6d04373ab8379df71bc427f9682761f24a5a1eb1674dbf510dc6ad4a4dd1d1be5e79ad316d1a8afb1c7fa81ed14cfad73c1afd4f6741e848dbbe9b96e55062fd19b040ab5055f952e3195707045632c47dd2e907c314221dfe45d3fb105df743774f6b9ba247159a465c3f3b19eaa0a8a1e2cb26ce0c3aabe60c2c21ed0f759cf47fa331e7c0b30600aea001cacb52c7bcc0786a6cf56699609ea3f280cb18250d1f8706db832afe8e3607a97086ce2333f153cf52c226a03960b47aa4beba5a310d8373ed56d20502f902425163015dcf8e59d54c409c515ff99c35f5e586971f954834ad56cf553390793e52333d786fc788f7d800e196164be5dd20cf05c9ae86a64afb2d8c63a88f3e23ce11be8426bfe89ba9007790f9914bc04a94e9793158614a91c501128f98a060c5a438f6894bcc347f4eae39d4a58d69f5ec8e115ee55a253a75933e53e3416ac904b28f71729276c0bd945db8f59dcd77283e5dd2c2939317976b887f5cbfca5257e0063d53160dc97312527b3742e30569c912b2018287979a98b2fd2af25f9fa98c58f33c80db205fefcca340594bfaaf105977b8952c4402475fde845c47c529857bba30b5e7c6ac54405fda3983c104a2c27a6fcfea99259dbee7e1a7b7db7fa2b8265f7e7c0f9ce19c40fe629178505c94676458a5116a78c1c77b8d9fed508f68c6cae3661dc8ad39c708b26b8fc450f7e32b47c16eedd5c9bcc1609b55425fc069faabe8be6834a222e08ce2837af92d8c041f5ded8305b87ec7203c20acff05bcfa8f833c1c269bbc9b74558550ee58080b95df5a85283ecba2d0ea5e8ad0c3ca9cfdc4e66ae6118b49280ee06f4ac253b427be9905bba02a35fce04f4b8f45a661c88d63cf87a6df4d761becb7790457e9c5cecdf3a4394e4efff426bf28a16379677faa9016391822e23fc248d4b7c06469691d449699af133e8fb02038e4562896277e94f2e3f1c48afa40e14fd2bfbcfe522aaf397f139b5f3b9904ceb6cd423acbc7a9e04f82cd36bb5abc923c91001201f73f8184baecdc0f52bd48cf892da21733b14f3bb11d5284cc3a2a62fe426c656a871ef4efad1c1b9c1a5bde6d38816aa4d47ea063c1e6a4c376cb300ba53f97994b1ff5096694347c2813d22e1d37e9f4b7800c80077bdf70506a9e3f9a06c47449d92bb3abb5c6667ea6c851dc6203919a08edeb4f680d7f2d2431d485c148b23f7cc325763b952b239e60ed06e91a0f3ec29f7b9a8ae0467b8d4d653771e17415dd9f8e9b66e4462140803b7f9b3c070a854f83e9255d22a4efb9aef8f8ba16ddca0b681ae9ba8046441eb171527d3e3196900ba1972d196e0d4d81bdafbe8b9a688139f2d78b9892a716ee31b544bdac18523b0f016221100fd111985f091de3224324b1c8277b03ec60bd79f30e63238b3d058e3483a3810bdafc6f28946e1abfad1bee4a5a09f2c6b096a9c129278e2401c6dea30850689b6f84cf8a42cf6c9179a831fc88f292f85e88ee45219d06047a69136f0684f4939f6fb3be1c6897a72407880343aa89c4dfed2cdbf001f31a30bb372d06ac57a2e060221661a09991ebb5aa623bf22d87f8b7150e4bc31e065a9a3761df41a7ac4f70f428b05c01bfddf30b0af7d8d49d396bdb7426f33b24b86bea18f40df48bc49192960ee5d2674139be7765a78e680224feb5d92ef503b7e8cbc57603aac8b2d5833a3c1738f65554aa0f1e1d08b0cd44fc101ff9d129fd1890cb88857d79a635361deb9cbf8f3b67749a5394dedd69a36fa88c7e9a06fdc95ef94f4a125b7aea480deee12a2ae1c643969f178580a1dc81aab8c574b42fb842ea0f3f0ccaacae5e74fe70f00baf775f50823fd2e5bcaa3e8f428b8171977d51211e9a6ef8079</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">Welcome to my blog, enter password to read.</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>FFmpeg</category>
      </categories>
      <tags>
        <tag>FFmpeg</tag>
      </tags>
  </entry>
  <entry>
    <title>netopper2 note</title>
    <url>/2020/09/22/Netconf/sysrepo-netconf-node/</url>
    <content><![CDATA[<h1 id="Netopper2-安装"><a href="#Netopper2-安装" class="headerlink" title="Netopper2 安装"></a>Netopper2 安装</h1><ul>
<li>环境 centos</li>
</ul>
<h2 id="1-基础软件安装"><a href="#1-基础软件安装" class="headerlink" title="1. 基础软件安装"></a>1. 基础软件安装</h2><span id="more"></span>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum -y update</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum -y upgrade</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum -y groupinstall <span class="string">&#x27;Development Tools&#x27;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum -y install pcre-devel</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum -y install cmake</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum -y install doxygen</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum -y install valgrind</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum -y install zlib-devel</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum -y install openssl-devel</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum -y install dnssec-trigger</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum -y install autoconf libtool</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum -y install libev-devel</span></span><br></pre></td></tr></table></figure>

<h2 id="2-Netopeer2-Requirements"><a href="#2-Netopeer2-Requirements" class="headerlink" title="2. Netopeer2 Requirements"></a>2. Netopeer2 Requirements</h2><ul>
<li><a href="https://github.com/CESNET/libyang">libyang</a></li>
<li><a href="https://github.com/CESNET/libnetconf2">libnetconf2</a></li>
<li><a href="https://github.com/sysrepo/sysrepo">sysrepo</a></li>
</ul>
<h3 id="2-1-安装-libyang"><a href="#2-1-安装-libyang" class="headerlink" title="2.1 安装 libyang"></a>2.1 安装 libyang</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/CESNET/libyang.git</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> libyang; <span class="built_in">mkdir</span> build; <span class="built_in">cd</span> build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake ..</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make <span class="built_in">test</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">make install</span></span><br></pre></td></tr></table></figure>

<p><strong>Documentation：</strong></p>
<p>可以使用 Doxygen 工具直接从源代码生成库文档:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make doc</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">google-chrome ../doc/html/index.html</span></span><br></pre></td></tr></table></figure>

<p><strong>更改扩展插件目录：</strong></p>
<p>至于 YANG 扩展，libyang 允许加载扩展插件。默认情况下，存储插件的目录是 LIBDIR&#x2F;libyang。要更改它，使用下面的 cmake 选项，该选项的值指定所需的目录:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake -DPLUGINS_DIR:PATH=`<span class="built_in">pwd</span>`<span class="string">&quot;/src/extensions/&quot;</span> ..</span></span><br></pre></td></tr></table></figure>

<p>目录路径也可以通过环境变量文件改变运行时，例如:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">LIBYANG_EXTENSIONS_PLUGINS_DIR=`<span class="built_in">pwd</span>`/my/relative/path yanglint</span></span><br></pre></td></tr></table></figure>

<p><strong>yanglint：</strong></p>
<p>Libyang 项目包括一个名为 yanglint (1)的功能丰富的工具，用于验证和转换模式和 YANG 模型数据。源代码位于&#x2F;tools&#x2F;lint，可用于探索应用程序如何使用 libyang 库。Yanglint (1)二进制文件及其手册页与库本身一起安装。</p>
<p>There is also <a href="https://github.com/CESNET/libyang/blob/master/tools/lint/examples/README.md">README</a> describing some examples of using <code>yanglint</code>.</p>
<p>还有自述文件，描述了使用阳光棉的一些例子。</p>
<p>Libyang 通过插件机制支持 YANG 扩展。一些插件(针对 NACM 或 Metadata)可以开箱即用，并与 libyang 一起安装。但是，如果没有安装 libyang，而是从构建目录中使用 yanglint (1) ，那么这些插件就不可用。有两种选择:</p>
<ol>
<li>安装 libyang</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">make install</span></span><br></pre></td></tr></table></figure>

<ol>
<li>设置环境变量 <code>LIBYANG_EXTENSIONS_PLUGINS_DIR</code> 包含路径到构建的扩展插件(从构建目录 <code>./src/extensions</code> )</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">LIBYANG_EXTENSIONS_PLUGINS_DIR=<span class="string">&quot;`pwd`/src/extensions&quot;</span> ./yanglint</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-安装-libnetconf2"><a href="#2-2-安装-libnetconf2" class="headerlink" title="2.2 安装 libnetconf2"></a>2.2 安装 libnetconf2</h3><p>依赖：</p>
<ul>
<li><a href="https://github.com/CESNET/libyang">libyang</a></li>
<li><a href="https://git.libssh.org/projects/libssh.git">libssh</a></li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> http://git.libssh.org/projects/libssh.git</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> libssh; <span class="built_in">mkdir</span> build; <span class="built_in">cd</span> build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake ..</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">make install</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">wget https://git.libssh.org/projects/libssh.git/snapshot/libssh-0.7.5.tar.gz</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tar -xzf libssh-0.7.5.tar.gz</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> libssh-0.7.5/build &amp;&amp; <span class="built_in">cd</span> libssh-0.7.5/build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake -DCMAKE_INSTALL_PREFIX:PATH=/usr/local .. &amp;&amp; make &amp;&amp; sudo make install</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> ../..</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> git://git.cryptomilk.org/projects/cmocka.git</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> cmocka</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout tags/cmocka-1.0.1</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> build; <span class="built_in">cd</span> build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake ..</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">make install</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/CESNET/libnetconf2.git</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> build; <span class="built_in">cd</span> build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake ..</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">install</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make doc</span> </span><br></pre></td></tr></table></figure>

<h3 id="2-3-安装-sysrepo"><a href="#2-3-安装-sysrepo" class="headerlink" title="2.3 安装 sysrepo"></a>2.3 安装 sysrepo</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/sysrepo/sysrepo.git</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> build; <span class="built_in">cd</span> build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake -DCMAKE_BUILD_TYPE=Debug ..</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">make install</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make doc</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">google-chrome ../doc/html/index.html</span></span><br></pre></td></tr></table></figure>

<h2 id="3-netopper2-安装"><a href="#3-netopper2-安装" class="headerlink" title="3. netopper2 安装"></a>3. netopper2 安装</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/CESNET/Netopeer2.git</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> Netopeer2</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">export</span> LD_LIBRARY_PATH=/usr/local/lib64:/usr/local/lib</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake ..</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo make install</span></span><br></pre></td></tr></table></figure>

<h1 id="libyang-简介"><a href="#libyang-简介" class="headerlink" title="libyang 简介"></a>libyang 简介</h1><blockquote>
<p><a href="https://netopeer.liberouter.org/doc/libyang/master/index.html">libyang doc</a></p>
</blockquote>
<h2 id="1-About"><a href="#1-About" class="headerlink" title="1. About"></a>1. About</h2><p>libyang is a library implementing processing of the YANG schemas and data modeled by the YANG language. The library is implemented in C for GNU&#x2F;Linux and provides C API.</p>
<p>Libyang 是一个用 YANG 语言实现 YANG 模式和数据处理的库。该库是用 c 语言为 GNU&#x2F;Linux 实现的，并提供了 c API。</p>
<h2 id="2-Main-Features"><a href="#2-Main-Features" class="headerlink" title="2. Main Features"></a>2. Main Features</h2><ul>
<li>YANG 格式模式的解析(和验证)。</li>
<li>YIN 格式模式的解析(和验证)。</li>
<li>解析、验证和打印 XML 格式的实例数据。</li>
<li>解析、验证和打印 JSON 格式的实例数据 (RFC 7951)。</li>
<li>操作实例数据。</li>
<li>支持实例数据中的默认值 (RFC 6243)。</li>
<li>支持 YANG 扩展和用户类型。</li>
<li>支持 YANG 元数据 (RFC 7952)。</li>
<li>yanglint - 特征丰富的 YANG 工具</li>
</ul>
<p>当前的实现包括 YANG 1.0 (RFC 6020) 和 YANG 1.1 (RFC 7950)。</p>
<h2 id="3-Extra-side-effect-Features"><a href="#3-Extra-side-effect-Features" class="headerlink" title="3. Extra (side-effect) Features"></a>3. Extra (side-effect) Features</h2><ul>
<li>XML 解析器。</li>
<li>优化字符串存储 (字典)。</li>
</ul>
<h1 id="libnetconf2-简介"><a href="#libnetconf2-简介" class="headerlink" title="libnetconf2 简介"></a>libnetconf2 简介</h1><h2 id="1-About-1"><a href="#1-About-1" class="headerlink" title="1. About"></a>1. About</h2><p>libnetconf2 is a NETCONF library in C handling NETCONF authentication and all NETCONF RPC communication both server and client-side. Note that NETCONF datastore implementation is not a part of this library. The library supports both NETCONF 1.0 (<a href="https://tools.ietf.org/html/rfc4741">RFC 4741</a>) as well as NETCONF 1.1 (<a href="https://tools.ietf.org/html/rfc6241">RFC 6241</a>).</p>
<p>libnetconf2 是一个 C 语言的 NETCONF 库，处理 NETCONF 认证和所有 NETCONF RPC 通信服务器和客户端。注意，NETCONF 数据存储实现不是这个库的一部分。这个库同时支持 NETCONF 1.0 (RFC 4741) 和 NETCONF 1.1 (RFC 6241)。</p>
<h2 id="2-Main-Features-1"><a href="#2-Main-Features-1" class="headerlink" title="2. Main Features"></a>2. Main Features</h2><ul>
<li>使用 libssh 创建 SSH (RFC 4742、RFC 6242)，或使用 OpenSSL、经过身份验证的 NETCONF 会话创建 TLS (RFC 7589)。</li>
<li>使用预先建立的传输协议创建 NETCONF 会话(例如，使用这种机制可以通过 sshd(8) 进行隧道通信)。</li>
<li>创建 NETCONF 呼叫家庭会话(RFC 8071)。</li>
<li>创建、发送、接收和回复 RPC (RFC 4741，RFC 6241)。</li>
<li>创建、发送和接收 NETCONF 事件通知(RFC 5277)</li>
</ul>
<h1 id="libyang-学习总结"><a href="#libyang-学习总结" class="headerlink" title="libyang 学习总结"></a>libyang 学习总结</h1><h2 id="YANG-模型"><a href="#YANG-模型" class="headerlink" title="YANG 模型"></a>YANG 模型</h2><p><code>YANG</code>是最初设计用于为<code>NETCONF</code>协议建模的语言。 <code>YANG</code>模块定义了可用于基于<code>NETCONF</code>的操作（包括配置，状态数据，<code>RPC</code>和通知）的数据层次结构。这允许在<code>NETCONF</code>客户端和服务器之间发送的所有数据的完整描述。虽然不在本规范的范围之内，但是也可以使用除<code>NETCONF</code>以外的协议。</p>
<p><code>YANG</code>将数据的分层组织模型化为一个树，其中每个节点都有一个名称，或者一个值或一组子节点。<code>YANG</code>提供了对节点的清晰简洁的描述，以及这些节点之间的交互。</p>
<p><code>YANG</code>将数据模型组织成模块和子模块。模块可以从其他外部模块导入定义，并可以包含子模块的定义。可以增加层次结构，允许一个模块将数据节点添加到另一个模块中定义的层次结构中。这种增加可以是有条件的，只有在满足某些条件的情况下才会出现新的节点。</p>
<p>一个<strong>模块</strong>包含三种类型的语句：</p>
<ul>
<li><p>模块头(<code>module header</code>)语句，</p>
</li>
<li><p>“修订”(<code>revision</code>)语句</p>
</li>
<li><p>定义(<code>definition</code>)语句。</p>
<p>  模块头部语句<strong>描述模块并提供关于模块本身的信息</strong>，“修订”语句提供<strong>关于模块历史的信息</strong>，定义语句是<strong>定义数据模型的模块的主体</strong>。</p>
</li>
</ul>
<p>**数据模型(<code>data model</code>)**：</p>
<ul>
<li>数据模型描述如何表示和访问数据。</li>
</ul>
<p>**数据节点(<code>data node</code>)**：</p>
<ul>
<li>模式树中可以在数据树中实例化的节点。<code>container</code>，<code>leaf</code>，<code>leaf-list</code>，<code>list</code>，<code>anydata</code>和<code>anyxml</code>之一。</li>
</ul>
<p>**数据树(<code>data tree</code>)**：</p>
<ul>
<li>用<code>YANG</code>建模的任何数据的实例化树，例如配置数据，状态数据，组合配置和状态数据，<code>RPC</code>或操作输入，<code>RPC</code>或操作输出或通知。</li>
</ul>
<p>**叶节点(<code>leaf</code>)**：</p>
<ul>
<li>数据树中至多存在一个实例的数据节点。叶子有一个值，但没有子节点。</li>
</ul>
<p>**叶列表(<code>leaf-list</code>)**：</p>
<ul>
<li>与叶节点类似，但定义了一组唯一可识别的节点，而不是单个节点。每个节点都有一个值，但没有子节点。</li>
</ul>
<p>**<code>RPC</code>操作(<code>RPC operation</code>)**：</p>
<ul>
<li>特定的远程过程调用。</li>
</ul>
<p>**模式节点(<code>schema node</code>)**：</p>
<ul>
<li>模式树中的节点。 <code>action</code>，<code>container</code>，<code>leaf</code>，<code>leaf-list</code>，<code>list</code>，<code>choice</code>，<code>case</code>，<code>rpc</code>，<code>input</code>，<code>output</code>，<code>notification</code>，<code>anydata</code>和<code>anyxml</code>中的一个。</li>
</ul>
<p>**模式树(<code>schema tree</code>)**：</p>
<ul>
<li>模块中指定的定义层次结构。</li>
</ul>
<h3 id="Data-Model"><a href="#Data-Model" class="headerlink" title="Data Model"></a>Data Model</h3><p>叶节点（Leaf Nodes）</p>
<p>“<code>leaf</code>”语句用于在模式树中定义叶节点。 它需要一个参数，它是一个标识符，后面是一个包含详细叶子信息的子状态块。一个<code>leaf node</code>包含且只包含一个<code>value</code>，可以是数字或是字符串，具体是什么，看关键字”type”后面跟什么。<code>leaf node</code>下面不能挂子节点。如：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">YANG Example:</span></span><br><span class="line">    <span class="string">leaf</span> <span class="string">host-name</span> &#123;</span><br><span class="line">    	<span class="string">type</span> <span class="string">string;</span></span><br><span class="line">    	<span class="string">description</span> <span class="string">&quot;Hostname for this system&quot;</span><span class="string">;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="string">-----------------------</span></span><br><span class="line"><span class="attr">NETCONF XML Example:</span></span><br><span class="line">	<span class="string">&lt;host-name&gt;my.example.com&lt;/host-name&gt;</span></span><br></pre></td></tr></table></figure>

<p>叶列表节点（Leaf-List Nodes）</p>
<p>可以认为Leaf-List Nodes表示的是一个“数组”，“数组”中的元素的值的type必须保持一致，可以有一系列同类型的值，而且不能重复。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">YANG Example:</span></span><br><span class="line">	<span class="string">leaf-list</span> <span class="string">domain-search</span> &#123;</span><br><span class="line">		<span class="string">type</span> <span class="string">string;</span></span><br><span class="line">		<span class="string">description</span> <span class="string">&quot;List of domain names to search&quot;</span><span class="string">;</span></span><br><span class="line">	&#125;</span><br><span class="line"><span class="string">-----------------------</span></span><br><span class="line"><span class="attr">NETCONF XML Example:</span></span><br><span class="line">    <span class="string">&lt;domain-search&gt;high.example.com&lt;/domain-search&gt;</span></span><br><span class="line">    <span class="string">&lt;domain-search&gt;low.example.com&lt;/domain-search&gt;</span></span><br><span class="line">    <span class="string">&lt;domain-search&gt;everywhere.example.com&lt;/domain-search&gt;</span></span><br></pre></td></tr></table></figure>

<p>容器节点（Container Nodes）</p>
<p>一个容器用于分组子树中的相关节点。 一个容器只有子节点，没有值。 容器可以包含任何类型的任何数量的子节点（叶子，列表，容器，叶子列表，动作和通知）。只能装东西，本身不具有意义。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">YANG Example:</span></span><br><span class="line">    <span class="string">container</span> <span class="string">system</span> &#123;</span><br><span class="line">        <span class="string">container</span> <span class="string">login</span> &#123;</span><br><span class="line">            <span class="string">leaf</span> <span class="string">message</span> &#123;</span><br><span class="line">            	<span class="string">type</span> <span class="string">string;</span></span><br><span class="line">            	<span class="string">description</span></span><br><span class="line">            		<span class="string">&quot;Message given at start of login session&quot;</span><span class="string">;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="string">-----------------------</span></span><br><span class="line"><span class="attr">NETCONF XML Example:</span></span><br><span class="line">    <span class="string">&lt;system&gt;</span></span><br><span class="line">        <span class="string">&lt;login&gt;</span></span><br><span class="line">        	<span class="string">&lt;message&gt;Good</span> <span class="string">morning&lt;/message&gt;</span></span><br><span class="line">        <span class="string">&lt;/login&gt;</span></span><br><span class="line">    <span class="string">&lt;/system&gt;</span></span><br></pre></td></tr></table></figure>

<p>列表节点（List Nodes)</p>
<p>列表定义了一系列列表条目。每个条目就像一个容器，如果它定义了任何关键的叶子（指明一个叶子为 <code>key</code>），它就被其关键叶子的值唯一标识。列表可以定义多个关键叶子，并且可以包含任何类型的任何数量的子节点（包括树叶，列表，容器等）。实例化的时候，<code>key</code>的值(也就是”name”的值)是必须不同的，其它的值(full-name&#x2F;class)没有这个要求。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">YANG Example:</span></span><br><span class="line">    <span class="string">list</span> <span class="string">user</span> &#123;</span><br><span class="line">        <span class="string">key</span> <span class="string">&quot;name&quot;</span><span class="string">;</span></span><br><span class="line">        <span class="string">leaf</span> <span class="string">name</span> &#123;</span><br><span class="line">        	<span class="string">type</span> <span class="string">string;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="string">leaf</span> <span class="string">full-name</span> &#123;</span><br><span class="line">        	<span class="string">type</span> <span class="string">string;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="string">leaf</span> <span class="string">class</span> &#123;</span><br><span class="line">        	<span class="string">type</span> <span class="string">string;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="string">-----------------------</span></span><br><span class="line"><span class="attr">NETCONF XML Example:</span></span><br><span class="line">    <span class="string">&lt;user&gt;</span></span><br><span class="line">        <span class="string">&lt;name&gt;glocks&lt;/name&gt;</span></span><br><span class="line">        <span class="string">&lt;full-name&gt;Goldie</span> <span class="string">Locks&lt;/full-name&gt;</span></span><br><span class="line">        <span class="string">&lt;class&gt;intruder&lt;/class&gt;</span></span><br><span class="line">    <span class="string">&lt;/user&gt;</span></span><br><span class="line">    <span class="string">&lt;user&gt;</span></span><br><span class="line">        <span class="string">&lt;name&gt;snowey&lt;/name&gt;</span></span><br><span class="line">        <span class="string">&lt;full-name&gt;Snow</span> <span class="string">White&lt;/full-name&gt;</span></span><br><span class="line">        <span class="string">&lt;class&gt;free-loader&lt;/class&gt;</span></span><br><span class="line">    <span class="string">&lt;/user&gt;</span></span><br><span class="line">    <span class="string">&lt;user&gt;</span></span><br><span class="line">        <span class="string">&lt;name&gt;rzell&lt;/name&gt;</span></span><br><span class="line">        <span class="string">&lt;full-name&gt;Rapun</span> <span class="string">Zell&lt;/full-name&gt;</span></span><br><span class="line">        <span class="string">&lt;class&gt;tower&lt;/class&gt;</span></span><br><span class="line">    <span class="string">&lt;/user&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Libyang"><a href="#Libyang" class="headerlink" title="Libyang"></a>Libyang</h2><p><code>libyang</code>是一个实现<code>YANG</code>模式处理的<code>library</code>和由<code>YANG</code>语言建模的数据</p>
<p><strong>主要特点</strong>：</p>
<ol>
<li>以 <code>YANG</code> 格式解析（和验证） <code>schema</code></li>
<li>以 <code>YIN</code> 格式解析（和验证） <code>schema</code></li>
<li>以 <code>XML</code> 格式解析，验证和打印实例数据</li>
<li>以 <code>JSON</code> 格式解析，验证和打印实例数据</li>
<li>使用实例数据进行操作</li>
<li>支持示例数据中的默认值</li>
<li>支持 <code>YANG</code> 扩展和实例类型</li>
<li>支持 <code>YANG</code> 元数据</li>
<li><code>XML</code> 解析器</li>
<li>优化的字符串存储（字典）</li>
</ol>
<p><strong>过程：先创建一个context，解析yang文件生成schema tree（schema tree 相当于类型定义，指定生成的数据类型），然后根据文件读入，生成对应的data tree（相当于实例化的数据）</strong></p>
<h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><h4 id="context（上下文）"><a href="#context（上下文）" class="headerlink" title="context（上下文）"></a>context（上下文）</h4><p>上下文概念允许调用者在具有不同 <code>YANG</code> 模式集的环境中工作，具体工作流程（代码过程）见下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ly_ctx_new</span>()                                    <span class="comment">//创建新的上下文</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">/**************设置搜索路径****************/</span></span><br><span class="line"><span class="built_in">ly_ctx_set_searchdir</span>()                          <span class="comment">//设置搜索路径</span></span><br><span class="line"><span class="built_in">ly_ctx_unset_searchdirs</span>()                       <span class="comment">//不设置搜索路径</span></span><br><span class="line"><span class="built_in">ly_ctx_set_disable_searchdir_cwd</span>()              <span class="comment">//设置不在当前工作路径搜索</span></span><br><span class="line"><span class="built_in">ly_ctx_set_disable_searchdir</span>()                  <span class="comment">//避免在所有上下文的搜索目录搜索</span></span><br><span class="line"><span class="built_in">ly_ctx_set_module_imp_clb</span>()                     <span class="comment">//设置自定义模块搜索回调</span></span><br><span class="line"><span class="comment">/**************设置搜索路径****************/</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">/**************解析器函数******************/</span></span><br><span class="line"><span class="comment">//使用解析器函数 lys_parse_*（） 将 schema / tree 加入到 context 中</span></span><br><span class="line"><span class="comment">//schema的函数都有lys_的前缀，实例数据的函数有lyd_的前缀。发生于在数据解析时，schema在context中并未找到或者schema只是被导入但并未实现</span></span><br><span class="line">    </span><br><span class="line"><span class="built_in">ly_ctx_load_module</span>()                            <span class="comment">//在ctx搜索路径中找到model并将其加载到其中 </span></span><br><span class="line"><span class="built_in">ly_ctx_set_module_data_clb</span>()                    <span class="comment">//设置回调函数</span></span><br><span class="line"><span class="comment">/**************解析器函数******************/</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//imported的函数可以变成implemented，但是implemented的函数不能变回imported</span></span><br><span class="line"><span class="built_in">lys_set_implemented</span>()                           <span class="comment">//将imported函数变为implemented</span></span><br><span class="line"><span class="built_in">lys_set_allimplemented</span>()                        <span class="comment">//将所有imported函数变为implemented</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**************module********************/</span></span><br><span class="line"><span class="built_in">ly_ctx_get_module</span>()                             <span class="comment">//获得确切的model</span></span><br><span class="line"><span class="built_in">ly_ctx_get_submodule</span>()                          <span class="comment">//获得确切的submodel</span></span><br><span class="line"><span class="built_in">ly_ctx_get_module_iter</span>()                        <span class="comment">//对context中所有model进行某操作的迭代</span></span><br><span class="line"><span class="built_in">ly_ctx_info</span>()                                   <span class="comment">//获取有关context中模式的复杂信息</span></span><br><span class="line"><span class="built_in">ly_ctx_find_path</span>()                              <span class="comment">//获取上下文中模块中定义的特定节点</span></span><br><span class="line"><span class="built_in">ly_ctx_get_node</span>()                               <span class="comment">//获取上下文中模块中定义的特定节点</span></span><br><span class="line"><span class="built_in">ly_ctx_remove_module</span>()                          <span class="comment">//删除context保存的模块</span></span><br><span class="line"><span class="built_in">ly_ctx_disable</span>()                                <span class="comment">//禁用某模块</span></span><br><span class="line"><span class="built_in">ly_ctx_clean</span>()                                  <span class="comment">//清除所有已加载model的context</span></span><br><span class="line"><span class="built_in">ly_ctx_destroy</span>()                                <span class="comment">//删除上下文</span></span><br><span class="line"><span class="comment">/**************module********************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*********context dictionary*************/</span></span><br><span class="line"><span class="built_in">lydict_insert</span>()                                 <span class="comment">//将字符串插入字典</span></span><br><span class="line"><span class="built_in">lydict_remove</span>()                                 <span class="comment">//将字符串从字典中删除</span></span><br><span class="line"><span class="comment">/*********context dictionary*************/</span></span><br></pre></td></tr></table></figure>

<p>对于<code>context</code>，第一次请求<code>module</code>的最新版本时，将正确搜索并加载该<code>module</code>。但是，当第二次请求此<code>module</code>（没有修订）时，将返回先前找到的<code>module</code>。这样做的好处是不会反复搜索<code>module</code>，但缺点是如果稍后可以使用<code>module</code>的后续版本，则此<code>context</code>不会使用它。</p>
<p><code>context</code> 在内部保存所有<code>model</code>及其 <code>submodel</code></p>
<p><code>context</code> 包括更有效地存储字符串的字典。大多数字符串在 <code>schema</code> 和 <code>data tree</code> 经常重复。因此，<code>libyang</code> 不会在每次出现时分配这些字符串，而是将它们存储为字典中的记录。</p>
<h4 id="schema（架构）"><a href="#schema（架构）" class="headerlink" title="schema（架构）"></a>schema（架构）</h4><p><code>schema</code>是 <code>YANG</code> 数据模型在 <code>libyang</code> 中的内部表示，每个 <code>schema</code> 都与其 <code>context</code> 连接，并使用解析器函数加载，因此无法以编程方式创建（更改） <code>schema</code> 。在 <code>libyang</code> 中，<code>schema</code> 仅用于访问数据模型定义模式树节点能够保存调用者应用程序使用的私有对象（通过指向结构，函数，变量等的指针）</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">lys_set_private</span>()                <span class="comment">//将私有对象分配给特定节点</span></span><br></pre></td></tr></table></figure>

<p><code>schema</code> 解析器允许从特定格式读取 <code>schema</code>。<code>libyang</code> 支持以下架构格式：<code>YANG</code>，<code>YIN</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//以lys_features_为前缀的函数组用于访问和操作模式的功能。</span></span><br><span class="line"><span class="built_in">lys_features_list</span>()              <span class="comment">//提供特定schema及其子schema中定义的所有功能的列表，或者提供有关所有功能状态的信息</span></span><br><span class="line"><span class="built_in">lys_features_state</span>()             <span class="comment">//获取一个特定特征的状态</span></span><br><span class="line"><span class="built_in">lys_features_</span>(dis)<span class="built_in">enable</span>()       <span class="comment">//启用/禁用特定功能</span></span><br></pre></td></tr></table></figure>

<h4 id="plugins（插件）"><a href="#plugins（插件）" class="headerlink" title="plugins（插件）"></a>plugins（插件）</h4><p><code>plugins</code> 形式支持扩展和用户类型。无论何时创建上下文，都会从 <code>plugins</code> 目录 <code>LIBDIR/libyang/</code> 加载它们。扩展 <code>plugins</code> 目录路径（默认 <code>LIBDIR/libyang/extensions/</code>）可以通过<code>LIBYANG_EXTENSIONS_PLUGINS_DIR</code> 环境变量更改，类似地通过用户类型目录（默认<code>LIBDIR/libyang/user_types/</code>）更改 <code>LIBYANG_USER_TYPES_PLUGINS_DIR</code>。请注意，不会删除不可用的<code>plugins</code>，只会加载任何新 <code>plugins</code>。另请注意，新 <code>plugins</code> 的可用性不会影响上下文中的当前 <code>schema</code>，它们仅应用于新解析的 <code>schema</code>。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">扩展 plugins 目录路径</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">LIBYANG_EXTENSIONS_PLUGINS_DIR=LIBDIR/libyang/extensions/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">用户类型目录</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">LIBYANG_USER_TYPES_PLUGINS_DIR=LIBDIR/libyang/user_types/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ly_load_plugins</span>()                <span class="comment">//手动刷新plugins列表</span></span><br><span class="line"><span class="built_in">ly_clean_plugins</span>()               <span class="comment">//清空plugins列表</span></span><br></pre></td></tr></table></figure>

<h4 id="Printing-Schemas（打印模式）"><a href="#Printing-Schemas（打印模式）" class="headerlink" title="Printing Schemas（打印模式）"></a>Printing Schemas（打印模式）</h4><p><code>schema printing</code> 允许以特定格式序列化模式 <code>schema</code> 的内部表示 ，包括：<code>YING</code>，<code>YANG</code>，<code>Tree</code></p>
<p>每个节点的模块的简单树结构被打印为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;status&gt; &lt;flags&gt; &lt;name&gt; &lt;opts&gt; &lt;type&gt; &lt;if-features&gt;</span><br><span class="line">&lt;status&gt;</span><br><span class="line">	+ 对于当前</span><br><span class="line">	x 不推荐使用</span><br><span class="line">	o 过时的</span><br><span class="line">&lt;flags&gt;</span><br><span class="line">	rw 用于配置数据</span><br><span class="line">    ro 用于状态数据</span><br><span class="line">    -x 对于RPC</span><br><span class="line">    -n 通知</span><br><span class="line">&lt;name&gt;</span><br><span class="line">    (&lt;name&gt;) 表示该节点是一个选择节点</span><br><span class="line">    :(&lt;name&gt;) 表示节点是案例节点</span><br><span class="line">    如果节点从另一个模块扩充到树中，则使用模块名称打印&lt;module-name&gt;:&lt;name&gt;</span><br><span class="line">&lt;opts&gt;</span><br><span class="line">    ? 对于可选的叶子或选择</span><br><span class="line">    ! 对于存在容器</span><br><span class="line">    * 对于叶子列表或列表</span><br><span class="line">    [&lt;keys&gt;] 对于列表的键</span><br><span class="line">&lt;type&gt;</span><br><span class="line">    如果定义了默认值，则将其打印在尖括号内 &lt;default-value&gt;</span><br><span class="line">    如果类型是leafref，则类型打印为 - &gt; TARGET`</span><br><span class="line">&lt;if-features&gt;</span><br><span class="line">	是此节点所依赖的功能列表，打印在大括号和问号内 &#123;...&#125;?</span><br></pre></td></tr></table></figure>

<h4 id="数据实例"><a href="#数据实例" class="headerlink" title="数据实例"></a>数据实例</h4><p><code>data tree</code> 中的所有 <code>data</code> 节点都和他们的 <code>schema</code> 节点相连</p>
<p>与 <code>schema</code> 解析器相反，如果根据 libyang 上下文中的 <code>schema</code>，这样的空数据树是有效的，则 <code>data</code> 解析器也接受空输入数据。</p>
<p>在创建&#x2F;插入节点时，该操作中的所有对象必须属于同一个上下文</p>
<p>创建数据：</p>
<ol>
<li><p>根据节点名称或其父节点逐个添加节点</p>
 <figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">lyd_new</span>()</span><br><span class="line"><span class="built_in">lyd_new_leaf</span>()</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用简单的 <code>XPath</code> 寻址</p>
 <figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">lyd_new_path</span>()</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="sysrepo-简介"><a href="#sysrepo-简介" class="headerlink" title="sysrepo 简介"></a>sysrepo 简介</h1><h2 id="1-sysrepo-引言"><a href="#1-sysrepo-引言" class="headerlink" title="1. sysrepo 引言"></a>1. sysrepo 引言</h2><p>Sysrepo 是一个基于 yang 的 Unix&#x2F;Linux 系统数据存储。使用 YANG 建模配置的应用程序可以使用 Sysrepo 进行管理。</p>
<p>申请使用 Sysrepo 的方法主要有两种。直接方法包括在需要配置数据时从应用程序本身调用 Sysrepo 函数，或者执行特定的回调以对配置更改做出反应。还可以实现一个独立的守护进程，将 Sysrepo 调用转换为应用程序特定的操作。对于现有的应用程序，这种间接方法通常比较容易使用，因为这样就不需要修改它们自己来利用 Sysrepo 数据存储，而代价是需要一个额外的中间进程(守护进程)。如果有几个这样的守护进程，它们可以作为插件编写，然后由一个进程管理。</p>
<img data-src="/2020/09/22/Netconf/sysrepo-netconf-node/sr_apps.png" class="" title="Sysrepo application approaches">

<p>Sysrepo 是用于 Unix&#x2F;Linux 应用程序的基于 yang 的配置和操作状态数据存储。</p>
<p>Sysrepo是一个基于YANG模型的配置和操作数据库，为应用程序提供一致的操作数据的接口，解决了配置读写困难的问题。应用程序使用YANG模型来建模，这样就可以利用YANG模型完成数据合法性的检查，保证的风格的一致，不需要应用程序直接操作配置文件了。</p>
<p>目前，应用程序可以使用 sysrepo Client Library 的 c 语言 API 访问数据存储中的配置，但是对其他编程语言的支持也计划在以后使用(因为 sysrepo 使用 Google 协议缓冲作为数据存储和客户端库之间的接口，为任何支持 GPB 的编程语言编写本地客户端库是可能的)。</p>
<p>Sysrepo 可以很容易地与管理代理(如 NETCONF 或 RESTCONF 服务器)集成，使用应用程序用于访问其配置的相同的客户端库 API。到目前为止，sysrepo 已经与 Netopeer 2 NETCONF 服务器集成。这意味着使用 sysrepo 存储其配置的应用程序可以自动受益于通过 NETCONF 进行控制的能力。</p>
<img data-src="/2020/09/22/Netconf/sysrepo-netconf-node/high_level_architecture.png" class="" title="high_level_architecture">

<p>SYSREPO数据库它提供了以下特性:</p>
<ul>
<li>模型配置文件和状态数据的集中存储</li>
<li>应用程序可以通过XPATH访问配置</li>
<li>支持启动、运行和临时数据存储</li>
<li>支持事务，符合ACID</li>
<li>根据YANG模型，进行数据一致性和约束的检查</li>
<li>没有单一故障点，应用程序不需要运行任何其他进程来访问其配置</li>
</ul>
<p>sysrepo 实际只是保存配置，并调用回调函数这两件事。</p>
<h2 id="2-命令行工具"><a href="#2-命令行工具" class="headerlink" title="2. 命令行工具"></a>2. 命令行工具</h2><p>有一些二进制文件是严格可选的，因为它们只使用Sysrepo API。但是，它们对于一些常见任务可能很有用，通过包含它们，每个用户不必从头开始编写它们。</p>
<h3 id="2-1-sysrepo-plugind"><a href="#2-1-sysrepo-plugind" class="headerlink" title="2.1 sysrepo-plugind"></a>2.1 sysrepo-plugind</h3><p>这个应用程序是一个简单的守护进程，它将所有可用的 Sysrepo 插件分组到一个单独的进程中。这个守护进程从插件路径目录加载插件，并支持一些选项， <code>--verbosity</code> 和 <code>--debug</code>，以避免进入守护进程模式，并保持将所有消息打印到 stderr。</p>
<p>Plugin 是一个共享对象，它必须公开两个函数: <code>sr_plugin_init_cb()</code> 和 <code>sr_plugin_cleanup_cb()</code>，这两个函数分别在 sysrepo-plugind 的开始和结束时被调用。初始化函数必须执行所有运行时任务，因为守护进程不会调用其他函数。它通常包括创建各种订阅，然后自己处理事件。清理通常会停止这些订阅。</p>
<p>插件路径，这是存储插件的唯一途径。默认路径可以在编译过程中修改(<code>PLUGINS_PATH</code> 选项) ，但是如果设置了 <code>$SRPD_PLUGINS_PATH</code> 环境变量，则总是会覆盖这个默认路径。</p>
<h3 id="2-2-sysrepoctl"><a href="#2-2-sysrepoctl" class="headerlink" title="2.2 sysrepoctl"></a>2.2 sysrepoctl</h3><p>它是一个实用工具，可以更改模式(模块)。具体来说，它可以列出、安装、卸载或更新它们。此外，还可以更改模块的特性、重播支持和权限。重要的是要记住哪些操作是立即执行的，哪些操作是延期的(模式中的详细信息)。</p>
<p><strong>-l，–list</strong></p>
<p>所有当前安装的模块都列在一个简明的表格中，其中包含有关它们的基本信息。还有关于任何准备好的更改的信息。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --list</span></span><br></pre></td></tr></table></figure>

<p><strong>-i，–install &lt;path&gt;</strong></p>
<p>YANG 模块的安装只需要指定它们的路径(YANG 或者 YIN 格式)。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --install ~/Documents/modules/ietf-interfaces.yang</span></span><br></pre></td></tr></table></figure>

<p><strong>-u，–uninstall &lt;module&gt;</strong></p>
<p>要删除 YANG 模块，必须指定它的名称(而不是文件名)。所有可以移除的已安装模块都是通过 <code>--list</code> 打印的。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --uninstall ietf-interfaces</span></span><br></pre></td></tr></table></figure>

<p><strong>-c，–change &lt;module&gt;</strong></p>
<p>已安装的模块可以通过多种方式进行更改，可以选择性地组合成一个命令。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --change ietf-interfaces --(<span class="built_in">disable</span>|<span class="built_in">enable</span>)-feature</span></span><br></pre></td></tr></table></figure>

<p>然后，它们的重播支持(存储接收到的通知)可以被打开或关闭。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --change ietf-interfaces --replay on</span></span><br></pre></td></tr></table></figure>

<p>最后，可以调整文件系统权限。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --change ietf-interfaces --owner netconf --group netconf --permissions 660</span></span><br></pre></td></tr></table></figure>

<p><strong>-U，–update &lt;path&gt;</strong></p>
<p>已安装的 YANG 模块可以更新为更新的版本。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --update ~/Documents/modules/ietf-netconf@2013-09-29.yang</span></span><br></pre></td></tr></table></figure>

<p><strong>-C，–connection-count</strong></p>
<p>获取当前连接的客户端的数量。可用于检查是否可以立即应用某些架构更改(如果没有连接)。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --connection-count</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-sysrepocfg"><a href="#2-3-sysrepocfg" class="headerlink" title="2.3 sysrepocfg"></a>2.3 sysrepocfg</h3><p>这个二进制文件允许以多种方式处理配置，比如导入、导出、编辑和替换(从文件或数据存储中复制)。还可以发送 <code>rpc/action</code> 或通知。</p>
<p>所有操作都在 <code>--datastore</code> (默认运行、启动或操作)上执行，或者只在特定的 <code>--module</code> 上执行，并以支持的 <code>--format</code> (默认 xml、 json 或 lyb)处理数据。</p>
<p><strong>-I， –import[&#x3D;&lt;file-path&gt;]</strong></p>
<p>为了导入配置，通常会提供一个文件。它的格式将根据扩展自动检测。如果不适用(或者从 STDIN 读取数据) ，可以手动确定。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --import=~/Documents/data/running.xml</span></span><br></pre></td></tr></table></figure>

<p>还可以导入模块的启动配置。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --import=~/Documents/data/ietf-interfaces_startup.json --datastore startup --module ietf-interfaces</span></span><br></pre></td></tr></table></figure>

<p><strong>-X，–export[&#x3D;&lt;file-path&gt;]</strong></p>
<p>可以将导出的配置打印到文件中，也可以直接打印到 STDOUT。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --<span class="built_in">export</span> --datastore operational</span></span><br></pre></td></tr></table></figure>

<p>此外，只能检索配置的特定部分</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --<span class="built_in">export</span>=ietf-interfaces_running.lyb --format lyb --module ietf-interfaces</span></span><br></pre></td></tr></table></figure>

<p>或者 XPath 选择。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --<span class="built_in">export</span> --xpath /ietf-interfaces:interfaces/interface[name=<span class="string">&#x27;eth0&#x27;</span>]</span></span><br></pre></td></tr></table></figure>

<p><strong>-E，–edit[&#x3D;&lt;file-path&gt;&#x2F;&lt;editor&gt;]</strong></p>
<p>可以在文件中或使用任意文本编辑器提供要合并的数据(作为编辑应用)。另外，在更改运行的数据时，可以锁定数据存储。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --edit=candidate.xml --datastore candidate</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --edit=vim --lock</span></span><br></pre></td></tr></table></figure>

<p><strong>-R，–rpc[&#x3D;&lt;file-path&gt;&#x2F;&lt;editor&gt;]</strong></p>
<p>也可以从文件或使用编辑器发送 RPC 或操作。任何输出都打印到 STDOUT。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --rpc=vim</span></span><br></pre></td></tr></table></figure>

<p><strong>-N，–notification[&#x3D;&lt;file-path&gt;&#x2F;&lt;editor&gt;]</strong></p>
<p>以类似的方式执行发送通知。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --notification=notif.xml</span></span><br></pre></td></tr></table></figure>

<p><strong>-C，–copy-from &lt;file-path&gt;&#x2F;&lt;source-datastore&gt;</strong></p>
<p>此操作可以用文件或其他数据存储的内容替换模块或数据存储数据。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --copy-from=ietf-interfaces_startup.xml --module ietf-interfaces --datastore startup</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --copy-from=candidate</span></span><br></pre></td></tr></table></figure>

<p>第二个命令实际上是 NETCONF <code>&lt;commit&gt;</code> ，因为它将候选数据存储复制到默认运行的数据存储中。</p>
<h2 id="3-插件示例"><a href="#3-插件示例" class="headerlink" title="3. 插件示例"></a>3. 插件示例</h2><p>这部分教你如何编写一个简单的 YANG 模块，然后让 Sysrepo 以插件或独立守护程序的形式处理数据。在继续之前，最好至少对 Sysrepo 有一个基本的了解。</p>
<h3 id="3-1-简单的-YANG-模块"><a href="#3-1-简单的-YANG-模块" class="headerlink" title="3.1 简单的 YANG 模块"></a>3.1 简单的 YANG 模块</h3><p>对于任何你想用 Sysrepo 管理的设备，你都需要一个设备的 YANG 模块。该语言非常丰富，几乎可以对任何系统进行描述。例如，一个烤箱将完全由 Sysrepo 管理。将介绍 YANG 的所有基本部分，即配置数据、状态数据、 rpc 和通知。</p>
<p>为了简化事情，我们的烤箱是一个便宜的型号，只有一个开关和滑块来设置温度。但是，它可以提供内部实际温度的信息，并且当内部温度达到设定温度时通知厨师。此外，生的食物可以预先准备好，如果有提示，烤箱可以自动将食物放入或取出。这样我们就得到了 YANG 模型:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">module oven &#123;</span><br><span class="line">    namespace &quot;urn:sysrepo:oven&quot;;</span><br><span class="line">    prefix ov;</span><br><span class="line">    revision 2018-01-19 &#123;</span><br><span class="line">        description &quot;Initial revision.&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    typedef oven-temperature &#123;</span><br><span class="line">        description &quot;Temperature range that is accepted by the oven.&quot;;</span><br><span class="line">        type uint8 &#123;</span><br><span class="line">            range &quot;0..250&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    container oven &#123;</span><br><span class="line">        description &quot;Configuration container of the oven.&quot;;</span><br><span class="line">        leaf turned-on &#123;</span><br><span class="line">            description &quot;Main switch determining whether the oven is on or off.&quot;;</span><br><span class="line">            type boolean;</span><br><span class="line">            default false;</span><br><span class="line">        &#125;</span><br><span class="line">        leaf temperature &#123;</span><br><span class="line">            description &quot;Slider for configuring the desired temperature.&quot;;</span><br><span class="line">            type oven-temperature;</span><br><span class="line">            default 0;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    container oven-state &#123;</span><br><span class="line">        description &quot;State data container of the oven.&quot;;</span><br><span class="line">        config false;</span><br><span class="line">        leaf temperature &#123;</span><br><span class="line">            description &quot;Actual temperature inside the oven.&quot;;</span><br><span class="line">            type oven-temperature;</span><br><span class="line">        &#125;</span><br><span class="line">        leaf food-inside &#123;</span><br><span class="line">            description &quot;Informs whether the food is inside the oven or not.&quot;;</span><br><span class="line">            type boolean;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    rpc insert-food &#123;</span><br><span class="line">        description &quot;Operation to order the oven to put the prepared food inside.&quot;;</span><br><span class="line">        input &#123;</span><br><span class="line">            leaf time &#123;</span><br><span class="line">                description &quot;Parameter determining when to perform the operation.&quot;;</span><br><span class="line">                type enumeration &#123;</span><br><span class="line">                    enum now &#123;</span><br><span class="line">                        description &quot;Put the food in the oven immediately.&quot;;</span><br><span class="line">                    &#125;</span><br><span class="line">                    enum on-oven-ready &#123;</span><br><span class="line">                        description</span><br><span class="line">                            &quot;Put the food in once the temperature inside</span><br><span class="line">                             the oven is at least the configured one. If it</span><br><span class="line">                             is already, the behaviour is similar to &#x27;now&#x27;.&quot;;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    rpc remove-food &#123;</span><br><span class="line">        description &quot;Operation to order the oven to take the food out.&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    notification oven-ready &#123;</span><br><span class="line">        description</span><br><span class="line">            &quot;Event of the configured temperature matching the actual</span><br><span class="line">             temperature inside the oven. If the configured temperature</span><br><span class="line">             is lower than the actual one, no notification is generated</span><br><span class="line">             when the oven cools down to the configured temperature.&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-烤箱插件"><a href="#3-2-烤箱插件" class="headerlink" title="3.2 烤箱插件"></a>3.2 烤箱插件</h3><p>这里将一步一步地解释如何写一个合适的插件，将管理烤箱。所有代码片段都取自实际的实现。<a href="https://netopeer.liberouter.org/doc/sysrepo/master/group__plugin__api.html">插件 API</a></p>
<p><strong>初始化</strong></p>
<p>在初始化函数中，通常必须初始化设备并创建对任何相关 YANG 节点的订阅。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">food_inside = <span class="number">0</span>;</span><br><span class="line">insert_food_on_ready = <span class="number">0</span>;</span><br><span class="line">oven_temperature = <span class="number">25</span>;</span><br></pre></td></tr></table></figure>

<p>首先，肯定要通知烤箱其配置参数的任何变化，这样最容易订阅整个模块。设置标志 <a href="https://netopeer.liberouter.org/doc/sysrepo/master/group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14ac5b782dfbbfe74c8ff2b1642a8bb0afe">SR_SUBSCR_ENABLED</a>，以便在 sysrepo-plugind 启动时，独立于烤箱(设备)的状态，将当前存储的配置应用于设备并保持一致性。另一个标志 <a href="https://netopeer.liberouter.org/doc/sysrepo/master/group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a0530a7715e162ee90e298ce504239444">SR_SUBSCR_DONE_ONLY</a> 被使用，因此不会调用回调来验证任何挂起的更改。对于我们的示例，只要基于 YANG 限制的值有效，它就总是正确的。</p>
<p>还可以订阅任意的配置数据子树，但这个示例不需要这样做。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">rc = sr_module_change_subscribe(session, <span class="string">&quot;oven&quot;</span>, oven_config_change_cb, <span class="literal">NULL</span>, <span class="number">0</span>,</span><br><span class="line">        SR_SUBSCR_ENABLED | SR_SUBSCR_DONE_ONLY, &amp;subscription);</span><br></pre></td></tr></table></figure>

<p>然后，由于在 oven 模型中还有状态数据，将执行标记该插件为它们的(独占)提供者的订阅。当 Sysrepo 需要状态数据子树时，通常在客户机请求它们时调用它。</p>
<p>值得注意的是，使用了相同的订阅对象，因此必须指定标志 <a href="https://netopeer.liberouter.org/doc/sysrepo/master/group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a08c075b76b8299ea4b4ed0fbbcb5b9ae">SR_SUBSCR_CTX_REUSE</a>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">rc = sr_dp_get_items_subscribe(session, <span class="string">&quot;/oven:oven-state&quot;</span>, oven_state_cb, <span class="literal">NULL</span>, SR_SUBSCR_CTX_REUSE, &amp;subscription);</span><br></pre></td></tr></table></figure>

<p>最后，该插件还可以处理任何 RPC 调用，这些调用也需要副本。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">rc = sr_rpc_subscribe(session, <span class="string">&quot;/oven:insert-food&quot;</span>, oven_insert_food_cb, <span class="literal">NULL</span>, SR_SUBSCR_CTX_REUSE, &amp;subscription);</span><br><span class="line"></span><br><span class="line">rc = sr_rpc_subscribe(session, <span class="string">&quot;/oven:remove-food&quot;</span>, oven_remove_food_cb, <span class="literal">NULL</span>, SR_SUBSCR_CTX_REUSE, &amp;subscription);</span><br></pre></td></tr></table></figure>

<p>Sysrepo 为插件提供了能够以统一方式打印消息的宏，因此建议使用它们。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">SRP_LOG_DBGMSG(<span class="string">&quot;OVEN: Oven plugin initialized successfully.&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>一般格式为 <code>SRP_LOG_(level)(MSG)</code> 。消息的严重性是由 DBG、 VRB、 WRN 或 ERR 之一编写的，而不是(级别)。在示例中，由于没有指定其他变量参数，因此使用了后缀 MSG。如果有，则省略此后缀。参数与 <code>printf ()</code>函数使用的参数相同。</p>
<h3 id="3-3-清除"><a href="#3-3-清除" class="headerlink" title="3.3 清除"></a>3.3 清除</h3><p>至于清理，所执行的任务差别很大，并且取决于设备。但是，总是需要适当地终止 init 函数中的订阅，这是本示例中所需的惟一工作。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">sr_unsubscribe(subscription);</span><br></pre></td></tr></table></figure>

<p>为了简化代码，subscription 被定义为一个全局变量，但是也可以使用 private_data，例如，也可以使用应用程序需要的任何附加数据来存储它。之前分配的所有其他回调都可以在需要时使用相同的机制传递附加数据。</p>
<h3 id="3-4-配置数据"><a href="#3-4-配置数据" class="headerlink" title="3.4 配置数据"></a>3.4 配置数据</h3><p>在示例中，它用 <code>oven_config_change_cb()</code> 订阅模块更改。这里看到的代码是实际代码的简化，但是更好地理解回调应该做什么。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span></span><br><span class="line"><span class="title function_">oven_config_change_cb</span><span class="params">(<span class="type">sr_session_ctx_t</span> *session, <span class="type">const</span> <span class="type">char</span> *module_name, <span class="type">sr_notif_event_t</span> event, <span class="type">void</span> *private_ctx)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> rc;</span><br><span class="line">    <span class="type">sr_val_t</span> *val;</span><br><span class="line">    rc = sr_get_item(session, <span class="string">&quot;/oven:oven/temperature&quot;</span>, &amp;val);</span><br><span class="line">    <span class="keyword">if</span> (rc != SR_ERR_OK) &#123;</span><br><span class="line">        <span class="keyword">goto</span> sr_error;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//apply the temperature to the device</span></span><br><span class="line">    sr_free_val(val);</span><br><span class="line">    rc = sr_get_item(session, <span class="string">&quot;/oven:oven/turned-on&quot;</span>, &amp;val);</span><br><span class="line">    <span class="keyword">if</span> (rc != SR_ERR_OK) &#123;</span><br><span class="line">        <span class="keyword">goto</span> sr_error;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//apply the switch state to the device</span></span><br><span class="line">    sr_free_val(val);</span><br><span class="line">    <span class="keyword">return</span> SR_ERR_OK;</span><br><span class="line">sr_error:</span><br><span class="line">    SRP_LOG_ERR(<span class="string">&quot;OVEN: Oven config change callback failed: %s.&quot;</span>, sr_strerror(rc));</span><br><span class="line">    <span class="keyword">return</span> rc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>首先，可以观察到，事件变量被忽略。在我们的示例中，无论处理哪个事件，我们都执行相同的操作，由于订阅标志，它将不会是除 <a href="https://netopeer.liberouter.org/doc/sysrepo/master/group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa52e97346d4bf27ab64ad9233627ccf39">SR_EV_DONE</a> 之外的任何事件。</p>
<p>然后，读取并应用所有相关的数据节点。这种方法是最简单的方法，不能总是使用，但在这种情况下可以使用，因为可以重新应用更改而不会产生任何效果。更详细的机制(返回更改)是使用 <a href="https://netopeer.liberouter.org/doc/sysrepo/master/group__change__subs__api.html#ga613064e7a7431a30eff2b99b87af5348">sr_get_changes_iter()</a> 和提供的会话，从而只获得特定的更改值。</p>
<h3 id="3-5-状态数据"><a href="#3-5-状态数据" class="headerlink" title="3.5 状态数据"></a>3.5 状态数据</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span></span><br><span class="line"><span class="title function_">oven_state_cb</span><span class="params">(<span class="type">sr_session_ctx_t</span> *session, <span class="type">const</span> <span class="type">char</span> *module_name, <span class="type">const</span> <span class="type">char</span> *path, <span class="keyword">struct</span> lyd_node **parent, <span class="type">void</span> *private_data)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> str[<span class="number">32</span>];</span><br><span class="line">    <span class="built_in">sprintf</span>(str, <span class="string">&quot;%u&quot;</span>, oven_temperature);</span><br><span class="line">    lyd_new_path(*parent, <span class="literal">NULL</span>, <span class="string">&quot;/oven:oven-state/temperature&quot;</span>, str, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    lyd_new_path(*parent, <span class="literal">NULL</span>, <span class="string">&quot;/oven:oven-state/food-inside&quot;</span>, food_inside ? <span class="string">&quot;true&quot;</span> : <span class="string">&quot;false&quot;</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> SR_ERR_OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>状态数据回调是自我解释的。由于订阅只针对一个有两片叶子的容器，因此路径只能有一个值。创建相应的子元素。</p>
<h3 id="3-6-RPC-订阅"><a href="#3-6-RPC-订阅" class="headerlink" title="3.6 RPC 订阅"></a>3.6 RPC 订阅</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">int</span></span><br><span class="line"><span class="title function_">oven_insert_food_cb</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *path, <span class="type">const</span> <span class="type">sr_val_t</span> *input, <span class="type">const</span> <span class="type">size_t</span> input_cnt, <span class="type">sr_val_t</span> **output, <span class="type">size_t</span> *output_cnt, <span class="type">void</span> *private_data)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (food_inside) &#123;</span><br><span class="line">        SRP_LOG_ERRMSG(<span class="string">&quot;OVEN: Food already in the oven.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> SR_ERR_OPERATION_FAILED;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">strcmp</span>(input[<span class="number">0</span>].data.enum_val, <span class="string">&quot;on-oven-ready&quot;</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (insert_food_on_ready) &#123;</span><br><span class="line">            SRP_LOG_ERRMSG(<span class="string">&quot;OVEN: Food already waiting for the oven to be ready.&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> SR_ERR_OPERATION_FAILED;</span><br><span class="line">        &#125;</span><br><span class="line">        insert_food_on_ready = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> SR_ERR_OK;</span><br><span class="line">    &#125;</span><br><span class="line">    insert_food_on_ready = <span class="number">0</span>;</span><br><span class="line">    food_inside = <span class="number">1</span>;</span><br><span class="line">    SRP_LOG_DBGMSG(<span class="string">&quot;OVEN: Food put into the oven.&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> SR_ERR_OK;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span></span><br><span class="line"><span class="title function_">oven_remove_food_cb</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *path, <span class="type">const</span> <span class="type">sr_val_t</span> *input, <span class="type">const</span> <span class="type">size_t</span> input_cnt, <span class="type">sr_val_t</span> **output, <span class="type">size_t</span> *output_cnt, <span class="type">void</span> *private_ctx)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!food_inside) &#123;</span><br><span class="line">        SRP_LOG_ERRMSG(<span class="string">&quot;OVEN: Food not in the oven.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> SR_ERR_OPERATION_FAILED;</span><br><span class="line">    &#125;</span><br><span class="line">    food_inside = <span class="number">0</span>;</span><br><span class="line">    SRP_LOG_DBGMSG(<span class="string">&quot;OVEN: Food taken out of the oven.&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> SR_ERR_OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>RPC 回调应该执行相应的 RPC。移除食物只能做到这一点。但是插入食物有一些定义的输入参数，所以它们需要被处理。同样，如果存在某些输出参数，则需要创建并返回这些参数，但这不是我们的情况。</p>
<h3 id="3-7-Notifications"><a href="#3-7-Notifications" class="headerlink" title="3.7 Notifications"></a>3.7 Notifications</h3><p>通知的提供者不需要订阅任何东西，只需在发生通知时生成任何通知即可。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">rc = sr_event_notif_send(sess, <span class="string">&quot;/oven:oven-ready&quot;</span>, <span class="literal">NULL</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p>从这个例子中可以看出，这是相当简单的。此外，如果有通知的任何子节点，则需要创建它们，然后将其传递给函数。</p>
<h3 id="3-8-尝试一下"><a href="#3-8-尝试一下" class="headerlink" title="3.8 尝试一下"></a>3.8 尝试一下</h3><p>模型和完整的插件源可以在 <code>sysrepo/examples/plugin</code> 中找到。生成 Sysrepo 后，烤箱共享库存储在示例中，但不会自动安装。在安装和实际运行插件之前，最好仔细阅读源代码。它只是一个很小的文档化的文件，所以它不应该花费很长时间，而且人们应该了解实现的烤箱功能。此外，上面章节中所涉及的大多数信息只是对所有这些机制的基本和详细描述。</p>
<p>在考虑这个特定的插件之前，必须正确构建和安装 Sysrepo。完成之后，您必须首先安装模型，然后安装插件。为了安装模型，可以使用 sysrepoctl。然后，您必须将共享库放入 liboven。进入插件路径。</p>
<p>之后，您应该准备启动 <code>sysrepo-plugind</code>，它将加载插件。如果您启用了调试消息，您应该会看到烤箱插件已成功初始化。</p>
<p>现在您可以自由地使用烤箱配置、rpc和通知了。它应该像YANG模型中描述的那样工作，以及人们期望烤箱如何工作。下面是一个用例：</p>
<ol>
<li><p>作为第一步，使用 notif 订阅示例订阅烤箱通知</p>
 <figure class="highlight c"><table><tr><td class="code"><pre><span class="line">notif_subscribe_example oven</span><br></pre></td></tr></table></figure>
</li>
<li><p>准备好待烤箱温度达到一定温度后放入的食物，稍后再进行配置。烤箱默认是关闭的。在NETCONF术语中，执行插入-食物 RPC。您可以使用 sysrepocfg 实现这一点</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --rpc=vim</span></span><br></pre></td></tr></table></figure>

<p> 和输入：</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert-food</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:sysrepo:oven&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">time</span>&gt;</span>on-oven-ready<span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert-food</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> 作为 RPC 内容。您应该会看到一些信息 sysrepo-plugind 输出。</p>
</li>
<li><p>现在你要打开烤箱，期待当它达到设定的温度时得到通知。同时，食物应该在那个时候插入。所以,你执行</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --edit=vim --datastore running</span></span><br></pre></td></tr></table></figure>

<p> 与内容</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">oven</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:sysrepo:oven&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">turned-on</span>&gt;</span>true<span class="tag">&lt;/<span class="name">turned-on</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">temperature</span>&gt;</span>200<span class="tag">&lt;/<span class="name">temperature</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">oven</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在~4秒后，你应该收到通知。您还可以验证是否一切正常</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --<span class="built_in">export</span> --xpath /oven:*</span></span><br></pre></td></tr></table></figure>

<p> 食物应该放在烤箱里。</p>
</li>
<li><p>一旦你认为食物烤得恰到好处，就用另一个RPC移走它</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --rpc=vim</span></span><br></pre></td></tr></table></figure>

<p> 和</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">remove-food</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:sysrepo:oven&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-9-Oven-Daemon"><a href="#3-9-Oven-Daemon" class="headerlink" title="3.9 Oven Daemon"></a>3.9 Oven Daemon</h3><p>如果您希望您的设备有一个独立的守护进程，它将作为独立的进程运行，而不使用 sysrepo-plugind，那么您不需要开发插件。拥有一个独立的守护进程实际上只有上一句中提到的几个区别。</p>
<p>至于代码本身，不需要特定的函数，因为代码将编译为可执行二进制文件而不是共享库。但是，如果要将插件转换为应用程序，没有什么可以阻止重用整个代码。</p>
<p>所需要的只是一个 <code>main()</code> 函数，该函数将在开始处调用 <code>sr_plugin_init_cb()</code> 并在终止之前调用<code>sr_plugin_cleanup_cb()</code>。 此外，这些功能需要 Sysrepo 会话。 要创建一个，我们首先需要一个连接。 因此，使用 <code>sr_connect()</code> 创建连接，如果成功，则使用 <code>sr_session_start()</code> 创建会话。 现在，可以通过调用清除函数并释放会话和连接来调用 init 函数并在守护程序终止时正确地进行清理。 此外，在编译此类应用程序之前，必须更改打印宏，因为将不再有处理打印消息的主守护程序。 完成这些更改后，烤箱守护程序应已准备就绪。</p>
<h1 id="B4860-环境编译-libyang"><a href="#B4860-环境编译-libyang" class="headerlink" title="B4860 环境编译 libyang"></a>B4860 环境编译 libyang</h1><p>下载：<a href="https://github.com/CESNET/libyang/releases">libyang release</a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tar -zxvf libyang-1.0.184.tar.gz</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> libyang-1.0.184</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> build; <span class="built_in">cd</span> build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake -DCMAKE_INSTALL_PREFIX:PATH=`<span class="built_in">pwd</span>`/4860lib -DCMAKE_BUILD_TYPE:String=<span class="string">&quot;Release&quot;</span> ..</span></span><br><span class="line"><span class="meta prompt_">$ </span></span><br></pre></td></tr></table></figure>

<p>更改扩展插件目录</p>
<p>对于 YANG 扩展，libyang 允许加载扩展插件。 默认情况下，存储插件的目录是 <code>libdir/libyang</code>。 要更改它，使用env环境更改</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">LIBYANG_EXTENSIONS_PLUGINS_DIR=`<span class="built_in">pwd</span>`/my/relative/path yanglint</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">LIBYANG_USER_TYPES_PLUGINS_DIR=`<span class="built_in">pwd</span>`/my/relative/path yanglint</span></span><br></pre></td></tr></table></figure>





<h1 id="netopeer2-sysrepo研究总结"><a href="#netopeer2-sysrepo研究总结" class="headerlink" title="netopeer2 + sysrepo研究总结"></a>netopeer2 + sysrepo研究总结</h1><blockquote>
<p><a href="https://blog.csdn.net/xuguozheng110/article/details/104043039">netopeer2 + sysrepo研究总结</a></p>
</blockquote>
<h2 id="sysrepo是干什么的"><a href="#sysrepo是干什么的" class="headerlink" title="sysrepo是干什么的"></a>sysrepo是干什么的</h2><p>sysrepo是一个数据库。可以用来保存可读可写的配置，例如 IP,netmask。你可以坐在家里，给远端的设备的sysrepo下修改配置命令。另外远端设备还有一些只读的状态，也可以读回来，例如温度。</p>
<h2 id="sysrepo的订阅功能"><a href="#sysrepo的订阅功能" class="headerlink" title="sysrepo的订阅功能"></a>sysrepo的订阅功能</h2><p>订阅实际上就是回调函数。</p>
<p>例如我们的程序告诉sysrepo，我们要订阅 &#x2F;net&#x2F;eth0&#x2F;ip 这个 xml 地址，当有人发消息给 sysrepo，写这个路径时，sysrepo就会告诉我们这个 xml 发生变化了，我们就执行实际的操作。</p>
<h2 id="sysrepo的修改配置"><a href="#sysrepo的修改配置" class="headerlink" title="sysrepo的修改配置"></a>sysrepo的修改配置</h2><p>修改配置用写xml路径的方法, 例如写xml路径&#x2F;net&#x2F;eth0&#x2F;ip，那么sysrepo就会把修改的信息写到此路径中，保存到sysrepo的数据库中。</p>
<p>但是sysrepo并没有去做修改ip的实际工作，这个实际工作是怎么完成的呢？sysrepo提供了一个回调函数，我们只要把这个回调函数写好就行。当写xml路径时，sysrepo就会调用回调函数，完成实际的工作。sysrepo实际只是保存配置，并调用回调函数这两件事。</p>
<p>完成一个修改配置的操作，共需要3个程序，一个是发命令的程序，一个收命令的sysrepo，另外我们自己还要写个程序，接收sysrepo发过来的修改配置的路径，我们自己的程序发现是要修改ip的路径，那么就改ip了。</p>
<h2 id="sysrepo返回状态"><a href="#sysrepo返回状态" class="headerlink" title="sysrepo返回状态"></a>sysrepo返回状态</h2><p>和 2 类似，我们的程序收到读某个路径的消息，就把数据写到指定路径中就可以</p>
<h2 id="如何下载安装"><a href="#如何下载安装" class="headerlink" title="如何下载安装"></a>如何下载安装</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/sysrepo/sysrepo.git</span></span><br></pre></td></tr></table></figure>

<p>Sysrepo&#x2F;Netopeer2 tools and programs:</p>
<ul>
<li>sysrepoctl</li>
<li>sysrepocfg</li>
<li>sysrepod</li>
<li>sysrepo-plugind</li>
<li>netopeer2-cli</li>
<li>netopeer2-server</li>
</ul>
<img data-src="/2020/09/22/Netconf/sysrepo-netconf-node/syarepo-install.png" class="" title="syarepo-install">

<h2 id="基于YANG模型的数据库sysrepo介绍"><a href="#基于YANG模型的数据库sysrepo介绍" class="headerlink" title="基于YANG模型的数据库sysrepo介绍"></a>基于YANG模型的数据库sysrepo介绍</h2><p>多数linux的应用程序需要有配置，配置文件的保存和读写通常的实现方式是通过操作文件来完成的。各应用程序都自定配置文件的格式，格式风格存在诸多差异。</p>
<p>Sysrepo是一个基于YANG模型的配置和操作数据库，为应用程序提供一致的操作数据的接口，解决了配置读写困难的问题。应用程序使用YANG模型来建模，这样就可以利用YANG模型完成数据合法性的检查，保证的风格的一致，不需要应用程序直接操作配置文件了。</p>
<img data-src="/2020/09/22/Netconf/sysrepo-netconf-node/high_level_architecture.png" class="" title="high_level_architecture">

<p>SYSREPO数据库它提供了以下特性:</p>
<ul>
<li>模型配置文件和状态数据的集中存储</li>
<li>应用程序可以通过XPATH访问配置</li>
<li>支持启动、运行和临时数据存储</li>
<li>支持事务，符合ACID</li>
<li>根据YANG模型，进行数据一致性和约束的检查</li>
<li>没有单一故障点，应用程序不需要运行任何其他进程来访问其配置</li>
</ul>
<h1 id="Sysrepo-常用操作"><a href="#Sysrepo-常用操作" class="headerlink" title="Sysrepo 常用操作"></a>Sysrepo 常用操作</h1><p>sysrepo 提供两个独立的，非常实用的程序。方便开发者便捷地使用 sysrepo 来开发与调试自己的应用。</p>
<h2 id="sysrepoctl"><a href="#sysrepoctl" class="headerlink" title="sysrepoctl"></a>sysrepoctl</h2><p>sysrepoctl，它用于列出，安装，卸载或更新 sysrepo 模块，也能用于修改一个 sysrepo 模块的特性，权限等。开发过程中经常使用的命令如下</p>
<ol>
<li>列出全部已经安装在 sysrepo 中的 Yang 模块，并包含模块的基本信息</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl -l, --list</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>安装指定Yang模型</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl -i， --install</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --install /root/ietf-interfaces.yang  <span class="comment"># 以默认权限安装ietf-interfaces模型</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --install /root/ietf-interfaces.yang --owner=admin:admin --permissions=644   <span class="comment"># 为特定admin用户安装可访问权限为644的ietf-interfaces.yang模型</span></span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>卸载已安装的 Yang 模型</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl -u, --uninstall</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --uninstall ietf-interfaces</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>修改 Yang 模型，常用的是设置模型支持的特性</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl -c, --chang</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --change ietf-interfaces --(<span class="built_in">disable</span>|<span class="built_in">enable</span>)-feature if-mib</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>更新 Yang 模型，如果已安装的 Yang 模型有更新，可以执行该命令</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl -U, --update</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --update /root/ietf-netconf@2013-09-29.yang</span></span><br></pre></td></tr></table></figure>

<h2 id="sysrepocfg"><a href="#sysrepocfg" class="headerlink" title="sysrepocfg"></a>sysrepocfg</h2><p>sysrepocfg 是用于 importing，exporting，exporting，replacing 配置到指定的数据库中。命令默认是操作running 库，也支持多种数据格式：json, xml, lyb，除非通过 <code>–format</code> 特定指出，默认的采用 xml 格式。常用的命令如下:</p>
<ol>
<li>导入一个配置</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg -I, --import[=]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --import=/root/ietf-interfaces.xml   <span class="comment"># 将ietf-interfaces配置导入默认running下的ietf-interfaces模块</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --import=/root/ietf-interfaces_startup.json --datastore startup --module ietf-interfaces  <span class="comment"># 将json格式的ietf-interfaces配置导入startup的ietf-interfaces模块</span></span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>导出一个配置</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg -X, --<span class="built_in">export</span>[=]</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --<span class="built_in">export</span>=ietf-interfaces_running.xml --format xml --module ietf-interfaces 	<span class="comment"># 将running库ietf-interfaces 的配置xml的格式导出，并以ietf-interfaces_running.xml名字命令配置文件</span></span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>编辑或修改配置文件，应用到指定的数据库</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg -E, --edit[=/]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --edit=candidate.xml --datastore candidate   <span class="comment"># 如果是修改running库，需要加相应的锁</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --edit=vim --lock</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>发一个RPC请求，RPC返回的结果直接输出于终端</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg -R, --rpc[=/]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --rpc=vim</span></span><br></pre></td></tr></table></figure>

<p>更多sysrepocfg的使用，请参考sysrepocfg -h。</p>
<h1 id="o-hub-netconf-相关开发"><a href="#o-hub-netconf-相关开发" class="headerlink" title="o-hub netconf 相关开发"></a>o-hub netconf 相关开发</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> /tmp/o-ran-software-management.so /usr/lib/sysrepo/plugins/</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepo-plugind -d -v 4</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer2-server -d -v 3</span></span><br></pre></td></tr></table></figure>

<p>o-hub software download xml fotmat:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">/* sftp://<span class="tag">&lt;<span class="name">username</span>&gt;</span>@<span class="tag">&lt;<span class="name">host</span>&gt;</span>[:<span class="tag">&lt;<span class="name">port</span>&gt;</span>]/path */ </span><br><span class="line"><span class="tag">&lt;<span class="name">software-download</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:o-ran:software-management:1.0&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">remote-file-path</span>&gt;</span>sftp://sftp-admin@192.168.2.76:sysupgrade-BaiHub_1.0.4.bin<span class="tag">&lt;/<span class="name">remote-file-path</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">password</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">software-download</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>o-hub software install xml fotmat：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">software-install</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:o-ran:software-management:1.0&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">slot-name</span>&gt;</span>system_slot<span class="tag">&lt;/<span class="name">slot-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">file-names</span>&gt;</span>test_file<span class="tag">&lt;/<span class="name">file-names</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">software-install</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>o-hub software activate xml fotmat：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">software-activate</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:o-ran:software-management:1.0&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">slot-name</span>&gt;</span>system_slot<span class="tag">&lt;/<span class="name">slot-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">software-activate</span>&gt;</span></span><br></pre></td></tr></table></figure>











<h1 id="B4860-4G-HUB-级连口-T14-测量问题查看方式"><a href="#B4860-4G-HUB-级连口-T14-测量问题查看方式" class="headerlink" title="B4860 4G HUB 级连口 T14 测量问题查看方式"></a>B4860 4G HUB 级连口 T14 测量问题查看方式</h1><h3 id="1-首先查看级联口是否存在链路闪断或者异常"><a href="#1-首先查看级联口是否存在链路闪断或者异常" class="headerlink" title="1) 首先查看级联口是否存在链路闪断或者异常"></a>1) 首先查看级联口是否存在链路闪断或者异常</h3> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mpi_read 0x2 0x1000 0x20  <span class="comment"># 读2次</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">主要看 1002的 bit7~4，如果是4 ，表示是稳定的</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mpi_read 0x2 0x1070 0x20  <span class="comment"># 读2次</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">主要看1078 107a 107c 107e  4个寄存器是否有变化，没变化表示cpri状态ok的</span></span><br></pre></td></tr></table></figure>

<h3 id="2-若-1-状态ok，则开始读取-T14-的值"><a href="#2-若-1-状态ok，则开始读取-T14-的值" class="headerlink" title="2) 若 1) 状态ok，则开始读取 T14 的值"></a>2) 若 1) 状态ok，则开始读取 T14 的值</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mpi_read 0x2 0x1040 0x20  <span class="comment"># 读2次</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看 1040 和 1042 ，这两个值就是 T14 测量的值</span></span><br></pre></td></tr></table></figure>

<h3 id="3-若-1-状态不-ok，则开始读取上联口的-CPRI-状态"><a href="#3-若-1-状态不-ok，则开始读取上联口的-CPRI-状态" class="headerlink" title="3) 若 1) 状态不 ok，则开始读取上联口的 CPRI 状态"></a>3) 若 1) 状态不 ok，则开始读取上联口的 CPRI 状态</h3> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mpi_read 0x2 0x0000 0x20   <span class="comment"># 读2次</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">主要看 1002的 bit7~4，如果是4 ，表示是稳定的</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mpi_read 0x2 0x0070 0x20   <span class="comment"># 读2次</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">主要看1078 107a 107c 107e  4个寄存器是否有变化，没变化表示cpri状态ok的</span></span><br></pre></td></tr></table></figure>

<h3 id="4-若3-读取看到状态不正常，则需要去查看上联口的光纤连接情况。若-3-看到正常，则需要检测级联端口的连接情况以及下一级-rhub-的情况"><a href="#4-若3-读取看到状态不正常，则需要去查看上联口的光纤连接情况。若-3-看到正常，则需要检测级联端口的连接情况以及下一级-rhub-的情况" class="headerlink" title="4) 若3) 读取看到状态不正常，则需要去查看上联口的光纤连接情况。若 3) 看到正常，则需要检测级联端口的连接情况以及下一级 rhub 的情况"></a>4) 若3) 读取看到状态不正常，则需要去查看上联口的光纤连接情况。若 3) 看到正常，则需要检测级联端口的连接情况以及下一级 rhub 的情况</h3><h1 id="B4860-BU-TO-RU-时延计算"><a href="#B4860-BU-TO-RU-时延计算" class="headerlink" title="B4860 BU TO RU 时延计算"></a>B4860 BU TO RU 时延计算</h1><p>参数说明：</p>
<ul>
<li>HUB上联口 Toffset &#x3D; 2 * Cycle ，HUB 级联口 Toffset &#x3D; 3 * Cycle，  HUB下联口 Toffset &#x3D; 53 * Cycle</li>
<li>RU Toffset &#x3D; 6 * Cycle</li>
<li>Cycle &#x3D; 8.013ns</li>
</ul>
<p><strong>一级HUB BU 到 RU 时延值：</strong></p>
<p>环境：BU –&gt; HUB –&gt; RU</p>
<p>1） BU –&gt; HUB  T12</p>
<p><a href="https://www.codecogs.com/eqnedit.php?latex=T12=\left&space;(&space;T14&space;-&space;Toffset&space;*&space;Cycle&space;\right&space;)&space;/&space;2" target="_blank"><img data-src="https://latex.codecogs.com/gif.latex?T12=\left&space;(&space;T14&space;-&space;Toffset&space;*&space;Cycle&space;\right&space;)&space;/&space;2" title="T12=\left ( T14 - Toffset * Cycle \right ) / 2" /></a></p>
<ul>
<li>T14 BBU侧测量值，单位ns</li>
<li>Toffset &#x3D; 2* Cycle （hub上联口 Toffset）</li>
</ul>
<p>2） TBdelayDL –&gt; HUB上联口到对应 RU接HUB下联口的时延值，单位Cycle</p>
<p>3）HUB –&gt; RU  T12_1</p>
<p><a href="https://www.codecogs.com/eqnedit.php?latex={T12}'=&space;\left&space;(&space;{T14}'&space;-&space;Toffset&space;\right&space;)&space;/&space;2&space;*&space;Cycle" target="_blank"><img data-src="https://latex.codecogs.com/gif.latex?{T12}'=&space;\left&space;(&space;{T14}'&space;-&space;Toffset&space;\right&space;)&space;/&space;2&space;*&space;Cycle" title="{T12}'= \left ( {T14}' - Toffset \right ) / 2 * Cycle" /></a></p>
<ul>
<li>T14_1 RU 接 HUB 下联口的 T14 测量值，HUB侧测量值，单位Cycle</li>
<li>Toffset &#x3D; 6 * Cycle （RU Toffset）</li>
</ul>
<p>4） T2a  RU 上报，单位Cycle</p>
<p>下行 BU 到 RU 时延值：</p>
<p><a href="https://www.codecogs.com/eqnedit.php?latex=BBU->RU&space;DL_{Delay}&space;=&space;T12&space;&plus;&space;TBdelayDL&space;&plus;&space;{T12}'&space;&plus;&space;T2a" target="_blank"><img data-src="https://latex.codecogs.com/gif.latex?BBU->RU&space;DL_{Delay}&space;=&space;T12&space;&plus;&space;TBdelayDL&space;&plus;&space;{T12}'&space;&plus;&space;T2a" title="BBU->RU DL_{Delay} = T12 + TBdelayDL + {T12}' + T2a" /></a></p>
<p><strong>二级HUB BU 到 RU 时延值：</strong></p>
<p>环境：BU –&gt; HUB –&gt; HUB –&gt; RU</p>
<p>1） BU –&gt; HUB  T12</p>
<p><a href="https://www.codecogs.com/eqnedit.php?latex=T12=\left&space;(&space;T14&space;-&space;Toffset&space;*&space;Cycle&space;\right&space;)&space;/&space;2" target="_blank"><img data-src="https://latex.codecogs.com/gif.latex?T12=\left&space;(&space;T14&space;-&space;Toffset&space;*&space;Cycle&space;\right&space;)&space;/&space;2" title="T12=\left ( T14 - Toffset * Cycle \right ) / 2" /></a></p>
<ul>
<li>T14  BBU侧测量值，单位ns</li>
<li>Toffset &#x3D; 2 * Cycle （HUB上联口 Toffset）</li>
</ul>
<p>2） TBdelayDL –&gt; 一级HUB 上联口到 一级HUB 级联口时延值，单位Cycle</p>
<p>3） HUB –&gt; HUB  T12_1</p>
<p><a href="https://www.codecogs.com/eqnedit.php?latex={T12}'=&space;\left&space;(&space;{T14}'&space;-&space;Toffset&space;\right&space;)&space;/&space;2&space;*&space;Cycle" target="_blank"><img data-src="https://latex.codecogs.com/gif.latex?{T12}'=&space;\left&space;(&space;{T14}'&space;-&space;Toffset&space;\right&space;)&space;/&space;2&space;*&space;Cycle" title="{T12}'= \left ( {T14}' - Toffset \right ) / 2 * Cycle" /></a></p>
<ul>
<li>T14_1  一级HUB 级联口 到 二级 HUB 上联口 T14，单位Cycle</li>
<li>Toffset &#x3D; 2 * Cycle （二级HUB上联口 Toffset）</li>
</ul>
<p>4）TBdelayDL_1 –&gt; 二级HUB上联口到对应 RU接 二级HUB下联口的时延值，单位Cycle</p>
<p>5）HUB –&gt; RU  T12_2</p>
<p><a href="https://www.codecogs.com/eqnedit.php?latex={T12}''&space;=&space;\left&space;(&space;{T14}''&space;-&space;Toffset&space;\right&space;)&space;/&space;2&space;*&space;Cycle" target="_blank"><img data-src="https://latex.codecogs.com/gif.latex?{T12}''&space;=&space;\left&space;(&space;{T14}''&space;-&space;Toffset&space;\right&space;)&space;/&space;2&space;*&space;Cycle" title="{T12}'' = \left ( {T14}'' - Toffset \right ) / 2 * Cycle" /></a></p>
<ul>
<li>T14_2  RU 接 二级HUB 下联口的 T14 测量值，二级HUB侧测量值，单位Cycle</li>
<li>Toffset &#x3D; 6 * Cycle （RU Toffset）</li>
</ul>
<p>6） T2a  RU 上报，单位Cycle</p>
<p>下行 BU 到 RU时延值：</p>
<p><a href="https://www.codecogs.com/eqnedit.php?latex=BBU&space;->&space;RU&space;DL_{Delay}&space;=&space;T12&space;&plus;&space;TBdelayDL&space;&plus;&space;{T12}'&space;&plus;&space;{TBdelayDL}'&space;&plus;&space;{T12}''&space;&plus;&space;T2a" target="_blank"><img data-src="https://latex.codecogs.com/gif.latex?BBU&space;->&space;RU&space;DL_{Delay}&space;=&space;T12&space;&plus;&space;TBdelayDL&space;&plus;&space;{T12}'&space;&plus;&space;{TBdelayDL}'&space;&plus;&space;{T12}''&space;&plus;&space;T2a" title="BBU -> RU DL_{Delay} = T12 + TBdelayDL + {T12}' + {TBdelayDL}' + {T12}'' + T2a" /></a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">snmptrap -v1 -c public 192.168.2.124 .1.3.6.1.4.1.1 192.168.2.125 6 10 100 1.3.6.1.9.9.44.1.2.1 i 12</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">命令 版本 -c 共同体 TrapServerIP Enterprise-OID AgentIP 陷阱类型 oid 时间 被发送参数的OID  数据类型 值</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">i  整形 u  无符号型    c  COUNTER32    s  字符串   x  16进制字符串   d  10进制字符串  n  空对象 o  对象ID  t  计时器  a  IP地址 b  比特</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Generic Type包括7种, 分别是:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">0  coldStart  1  warmStart  2  linkDown  3  linkUp 4  authenticationFailure          5  egpNeighborLoss        6  enterpriseSpecific</span></span><br></pre></td></tr></table></figure>









<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><blockquote>
<p><a href="https://github.com/CESNET/libyang">libyang – GitHub</a></p>
<p><a href="https://github.com/CESNET/netopeer2">netopeer2 – GitHub</a></p>
<p><a href="https://github.com/sysrepo/sysrepo">sysrepo – GitHub</a></p>
</blockquote>
<blockquote>
<p><a href="https://netopeer.liberouter.org/doc/libyang/master/index.html">libyang – Doc</a></p>
<p><a href="https://netopeer.liberouter.org/doc/libnetconf2/devel/index.html">libnetconf2 – Doc</a></p>
<p><a href="https://netopeer.liberouter.org/doc/sysrepo/master/index.html">sysrepo – Doc</a></p>
<p><a href="https://www.runoob.com/xpath/xpath-tutorial.html">XPath 教程 – RUNOOB.COM</a></p>
<p><a href="https://www.yiibai.com/xpath">XPath教程 – 易百教程</a></p>
</blockquote>
<blockquote>
<p><a href="https://blog.csdn.net/xuguozheng110/article/details/104043039">netopeer2 + sysrepo研究总结</a></p>
<p><a href="https://blog.csdn.net/qq_27923047/article/details/108069409">sysrepo简单使用</a></p>
<p><a href="https://blog.csdn.net/m0_47413019/article/details/105867406">第三章 sysrepo-plugind源码分析</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Netconf</category>
      </categories>
      <tags>
        <tag>Netconf</tag>
      </tags>
  </entry>
  <entry>
    <title>netconf note</title>
    <url>/2020/09/21/Netconf/netconf-note/</url>
    <content><![CDATA[<h1 id="Netconf-学习笔记"><a href="#Netconf-学习笔记" class="headerlink" title="Netconf 学习笔记"></a>Netconf 学习笔记</h1><h2 id="1-Netconf简介"><a href="#1-Netconf简介" class="headerlink" title="1. Netconf简介"></a>1. Netconf简介</h2><p>随着SDN的大热，一个诞生了十年之久的协议焕发了第二春，它就是NETCONF协议。如果你在两年前去搜索NETCONF协议，基本得到的信息都是“这个协议是一个网管协议，主要目的是弥补SNMP协议的不足，希望可以取代SNMP协议”。SNMP有哪些不足，而NETCONF是否真的能够弥补，这都不是重点，重点是NETCONF诞生至今SNMP依旧活的好好的。所以如果我们还是把NETCONF当做一个网管协议的话，估计它会在冷板凳上一直坐下去，而如果我们换一个角度去看待NETCONF协议，你会发现也许它是最适合SDN的一个协议。</p>
<span id="more"></span>

<p>NETCONF的自动化配置系统采用Client&#x2F;Server架构，而netopeer即实现了netconf的C&#x2F;S框架的开源项目。</p>
<p>Netopeer是基于开源项目libnetconf库完成的，已实现client和server端的代码。主要涉及的组件为netopeer-cli和netopeer-server；其中netopeer-cli为一个CLI程序，允许通过该程序连接到netconfserver，和操纵它的配置数据；netopeer-server为一个netconf服务器端的守护进程，允许与netconf client建立连接，接收配置数据等操作。除了这两个重要的模块，netopeer项目还包含了libnetconf transAPI模块举例，位于项目源码transAPI&#x2F;路径下，例如cfgsystem模块，实现的是一个ietf-system数据模型。</p>
<h2 id="2-Netconf架构"><a href="#2-Netconf架构" class="headerlink" title="2. Netconf架构"></a>2. Netconf架构</h2><p>NETCONF是一个基于XML的交换机配置接口，用于替代CLI、SNMP等配置交换机。</p>
<blockquote>
<p>本质上来说,NETCONF就是利用XML-RPC的通讯机制实现配置客户端和配置服务端之间的通信，实现对网络设备的配置和管理。</p>
</blockquote>
<p>NETCONF分为四个层：安全传输层、消息层、操作层、内容层。</p>
<img data-src="/2020/09/21/Netconf/netconf-note/netconf-layer-model-1.png" class="" title="NETCONF Layering Model And Examplel">

<ul>
<li><p><strong>安全传输层</strong>：用于跟交换机安全通信，NETCONF并未规定具体使用哪种传输层协议，所以可以使用SSH、TLS、HTTP等各种协议</p>
</li>
<li><p><strong>消息层</strong>：提供一种传输无关的消息封装格式，用于RPC通信</p>
</li>
<li><p><strong>操作层</strong>：定义了一系列的RPC调用方法，并可以通过Capabilities来扩展</p>
</li>
<li><p><strong>内容层</strong>：定义RPC调用的数据内容</p>
</li>
</ul>
<p>NETCONF关键技术实现：</p>
<blockquote>
<p>关键的环节包括：安全认证、建立加密传输通道、rpc-xml消息收发、rpc-xml文件解析、rpc-reply消息的生成。</p>
</blockquote>
<h2 id="3-Netconf环境搭建"><a href="#3-Netconf环境搭建" class="headerlink" title="3. Netconf环境搭建"></a>3. Netconf环境搭建</h2><p>基于centos7搭建环境：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum install libtool</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum install libxml2-devel</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum install libxslt-devel</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum install libcurl-devel</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum install python-setuptools</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum install pkg-config</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum install readline-devel</span></span><br></pre></td></tr></table></figure>

<h3 id="pyang-编译安装"><a href="#pyang-编译安装" class="headerlink" title="pyang 编译安装"></a>pyang 编译安装</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/mbj4668/pyang.git</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> pyang</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">python setup.py install</span></span><br></pre></td></tr></table></figure>

<h3 id="libssh-0-6-4-编译安装"><a href="#libssh-0-6-4-编译安装" class="headerlink" title="libssh (&gt;&#x3D;0.6.4) 编译安装"></a>libssh (&gt;&#x3D;0.6.4) 编译安装</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo yum install libssh-devel</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://git.libssh.org/projects/libssh.git libssh</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> libssh</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake ..</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo make install</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> ..</span></span><br></pre></td></tr></table></figure>

<h3 id="libnetconf-编译安装"><a href="#libnetconf-编译安装" class="headerlink" title="libnetconf 编译安装"></a>libnetconf 编译安装</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/CESNET/libnetconf.git</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> libnetconf</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo make install</span></span><br></pre></td></tr></table></figure>

<h3 id="netopeeran编译安装"><a href="#netopeeran编译安装" class="headerlink" title="netopeeran编译安装"></a>netopeeran编译安装</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/CESNET/netopeer.git</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编译安装netopeer-server</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> netopeer/server</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo make install</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编译安装netopeer-cli</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> netopeer/cli</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo make install</span></span><br></pre></td></tr></table></figure>

<h3 id="netopeer-启动与验证"><a href="#netopeer-启动与验证" class="headerlink" title="netopeer 启动与验证"></a>netopeer 启动与验证</h3><p>启动netopeer server</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer-server -d</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">默认监听端口x.x.x.x:830，连接的用户名密码为系统用户</span></span><br></pre></td></tr></table></figure>

<p>验证 netopeer-cli 与 netopeer-server 连接</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer-cli</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">connect localhost</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">get-config startup</span></span><br></pre></td></tr></table></figure>

<p>其它操作</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">a) 配置netopeer server模块</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer-configurator</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">b) 检查默认启动的模块</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer-manager list</span></span><br></pre></td></tr></table></figure>

<h2 id="4-Netconf案例使用"><a href="#4-Netconf案例使用" class="headerlink" title="4. Netconf案例使用"></a>4. Netconf案例使用</h2><h3 id="工具lnctool"><a href="#工具lnctool" class="headerlink" title="工具lnctool"></a>工具lnctool</h3><p>假设经过第一步后成功编译出libnetconf和netopeer，这样我们就可以直接运行netopeer。netconf默认监听端口是830端口。</p>
<p>众所周知，netconf协议支持自定义rpc，因此此步骤需要做的是如何在现有netconf中增加自己的yang模型以及执行自己的rpc？？</p>
<p>这里就需要用到这个工 <code>lnctool</code>。这个工具是用python实现的，里面代码也比较简单，比如说调用其他应用程序（pyang）或者直接写文件。</p>
<img data-src="/2020/09/21/Netconf/netconf-note/lnctool%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.png" class="" title="lnctool工具使用">

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">lnctool --model ./turing-machine.yang transapi --paths ./path</span></span><br></pre></td></tr></table></figure>

<p>另外一个重点是就是实现源文件中相关接口—rpc函数。当经过以上两个步骤之后，就可以进行编译，默认编译出动态库.so文件。</p>
<p>当我们把rpc函数实现之后，就可以通过另外一个工具，netopeer-manager安装自定义模型，使用命令行如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer-manager add --name [module name]  --model  [model path]  --transapi  [model share library]  --datastore [module datastore file]</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer-manager add --name turing-machine --model /usr/local/etc/netopeer/turing-machine/turing-machine.yin --transapi /usr/local/lib/turing-machine.so --datastore /usr/local/etc/netopeer/turing-machine/datastore.xml</span></span><br></pre></td></tr></table></figure>

<h3 id="turing-machine-demo"><a href="#turing-machine-demo" class="headerlink" title="turing-machine demo"></a>turing-machine demo</h3><h4 id="1-编译-turing-machine"><a href="#1-编译-turing-machine" class="headerlink" title="1. 编译 turing-machine"></a>1. 编译 turing-machine</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">autoreconf --force --install</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br></pre></td></tr></table></figure>

<h4 id="2-检查-xml"><a href="#2-检查-xml" class="headerlink" title="2. 检查 xml"></a>2. 检查 xml</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> /usr/local/etc/netopeer/cfgnetopeer/datastore.xml</span> </span><br><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;datastores xmlns=&quot;urn:cesnet:tmc:datastores:file&quot;&gt;</span><br><span class="line">  &lt;running lock=&quot;&quot;&gt;</span><br><span class="line">    &lt;netopeer xmlns=&quot;urn:cesnet:tmc:netopeer:1.0&quot;&gt;</span><br><span class="line">      &lt;modules&gt;</span><br><span class="line">        &lt;module&gt;</span><br><span class="line">          &lt;name&gt;turing-machine&lt;/name&gt;</span><br><span class="line">          &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">      &lt;/modules&gt;</span><br><span class="line">    &lt;/netopeer&gt;</span><br><span class="line">  &lt;/running&gt;</span><br><span class="line">  &lt;startup lock=&quot;&quot;&gt;</span><br><span class="line">    &lt;netopeer xmlns=&quot;urn:cesnet:tmc:netopeer:1.0&quot;&gt;</span><br><span class="line">      &lt;modules&gt;</span><br><span class="line">        &lt;module&gt;</span><br><span class="line">          &lt;name&gt;turing-machine&lt;/name&gt;</span><br><span class="line">          &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">      &lt;/modules&gt;</span><br><span class="line">    &lt;/netopeer&gt;</span><br><span class="line">  &lt;/startup&gt;</span><br><span class="line">  &lt;candidate lock=&quot;&quot; modified=&quot;false&quot; locktime=&quot;&quot;&gt;</span><br><span class="line">    &lt;netopeer xmlns=&quot;urn:cesnet:tmc:netopeer:1.0&quot;&gt;</span><br><span class="line">      &lt;modules&gt;</span><br><span class="line">        &lt;module&gt;</span><br><span class="line">          &lt;name&gt;turing-machine&lt;/name&gt;</span><br><span class="line">          &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">        &lt;/module&gt;</span><br><span class="line">      &lt;/modules&gt;</span><br><span class="line">    &lt;/netopeer&gt;</span><br><span class="line">  &lt;/candidate&gt;</span><br><span class="line">&lt;/datastores&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> /usr/local/etc/netopeer/cfgnetopeer/datastore-server.xml</span> </span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;datastores xmlns=&quot;urn:cesnet:tmc:datastores:file&quot;&gt;</span><br><span class="line">  &lt;running lock=&quot;&quot;/&gt;</span><br><span class="line">  &lt;startup lock=&quot;&quot;/&gt;</span><br><span class="line">  &lt;candidate modified=&quot;false&quot; lock=&quot;&quot; locktime=&quot;&quot;/&gt;</span><br><span class="line">&lt;/datastores&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-安装模块"><a href="#3-安装模块" class="headerlink" title="3. 安装模块"></a>3. 安装模块</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">su root</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> turing-machine.yin /usr/local/etc/netopeer/turing-machine/</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> .libs/turing-machine.so /usr/local/lib</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> turing-machine.la /usr/local/lib</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer-manager add --name turing-machine --model /usr/local/etc/netopeer/turing-machine/turing-machine.yin --transapi /usr/local/lib/turing-machine.so --datastore /usr/local/etc/netopeer/turing-machine/datastore.xml</span></span><br></pre></td></tr></table></figure>

<h4 id="4-netopeer-manager-list"><a href="#4-netopeer-manager-list" class="headerlink" title="4. netopeer-manager list"></a>4. netopeer-manager list</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer-manager list</span></span><br><span class="line">Reading the configuration from /usr/local/etc/netopeer/modules.conf.d/</span><br><span class="line">List of startup Netopeer modules:</span><br><span class="line">turing-machine (enabled)</span><br></pre></td></tr></table></figure>

<h4 id="5-启动-netopeer-server"><a href="#5-启动-netopeer-server" class="headerlink" title="5. 启动 netopeer-server"></a>5. 启动 netopeer-server</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer-server -v 3</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h4 id="6-启动-netopeer-cli"><a href="#6-启动-netopeer-cli" class="headerlink" title="6. 启动 netopeer-cli"></a>6. 启动 netopeer-cli</h4><p>使用命令:</p>
<ul>
<li>connect 192.168.205.98 </li>
<li>get </li>
<li>lock candidate </li>
<li>edit-config candidate</li>
<li>commit </li>
<li>unlock candidate </li>
<li>get-config running Get-config </li>
<li>edit-config candidate</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer-cli</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">connect 192.168.205.98</span></span><br><span class="line">The authenticity of the host &#x27;192.168.205.98&#x27; cannot be established.</span><br><span class="line">ssh-rsa key fingerprint is 9f:c8:f9:13:7d:04:b8:18:e9:4d:4e:9c:cb:63:84:17:0b:d9:ad:6a.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class="line">root@192.168.205.98 password: </span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">get</span></span><br><span class="line">......</span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">lock candidate</span></span><br><span class="line">  Result OK</span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">debug</span></span><br><span class="line">Verbose level set to DEBUG</span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">edit-config --defop=merge --config=/root/turing.xml candidate</span></span><br><span class="line">libnetconf DEBUG: 4984-D  1-26 14:34:38 Writing message (session 1): </span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;3&quot;&gt;</span><br><span class="line">  &lt;edit-config&gt;</span><br><span class="line">    &lt;target&gt;</span><br><span class="line">      &lt;candidate/&gt;</span><br><span class="line">    &lt;/target&gt;</span><br><span class="line">    &lt;default-operation&gt;merge&lt;/default-operation&gt;</span><br><span class="line">    &lt;config&gt;</span><br><span class="line">      &lt;turing-machine xmlns=&quot;http://example.net/turing-machine&quot; xmlns:xc=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot;&gt;</span><br><span class="line">        &lt;transition-function xc:operation=&quot;merge&quot;&gt;</span><br><span class="line">          &lt;delta&gt;</span><br><span class="line">            &lt;label&gt;0&lt;/label&gt;</span><br><span class="line">            &lt;input&gt;</span><br><span class="line">              &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">              &lt;symbol&gt;0&lt;/symbol&gt;</span><br><span class="line">            &lt;/input&gt;</span><br><span class="line">            &lt;output&gt;</span><br><span class="line">              &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">              &lt;symbol&gt;1&lt;/symbol&gt;</span><br><span class="line">            &lt;/output&gt;</span><br><span class="line">          &lt;/delta&gt;</span><br><span class="line">        &lt;/transition-function&gt;</span><br><span class="line">      &lt;/turing-machine&gt;</span><br><span class="line">    &lt;/config&gt;</span><br><span class="line">  &lt;/edit-config&gt;</span><br><span class="line">&lt;/rpc&gt;</span><br><span class="line"></span><br><span class="line">libnetconf DEBUG: 4984-D  1-26 14:34:38 11--Received message (session 1): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc-reply xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;3&quot;&gt;</span><br><span class="line">  &lt;ok/&gt;</span><br><span class="line">&lt;/rpc-reply&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  Result OK</span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">commit</span></span><br><span class="line">libnetconf DEBUG: 4984-D  1-26 14:35: 9 Writing message (session 1): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;4&quot;&gt;</span><br><span class="line">  &lt;commit/&gt;</span><br><span class="line">&lt;/rpc&gt;</span><br><span class="line"></span><br><span class="line">libnetconf DEBUG: 4984-D  1-26 14:35: 9 11--Received message (session 1): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc-reply xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;4&quot;&gt;</span><br><span class="line">  &lt;ok/&gt;</span><br><span class="line">&lt;/rpc-reply&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  Result OK</span><br></pre></td></tr></table></figure>

<h4 id="7-check-datastore-xml"><a href="#7-check-datastore-xml" class="headerlink" title="7. check datastore.xml"></a>7. check datastore.xml</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> /usr/local/etc/netopeer/turing-machine/datastore.xml</span> </span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;datastores xmlns=&quot;urn:cesnet:tmc:datastores:file&quot;&gt;</span><br><span class="line">  &lt;running lock=&quot;&quot;&gt;</span><br><span class="line">    &lt;turing-machine xmlns=&quot;http://example.net/turing-machine&quot;&gt;</span><br><span class="line">      &lt;transition-function&gt;</span><br><span class="line">        &lt;delta&gt;</span><br><span class="line">          &lt;label&gt;0&lt;/label&gt;</span><br><span class="line">          &lt;input&gt;</span><br><span class="line">            &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">            &lt;symbol&gt;0&lt;/symbol&gt;</span><br><span class="line">          &lt;/input&gt;</span><br><span class="line">          &lt;output&gt;</span><br><span class="line">            &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">            &lt;symbol&gt;1&lt;/symbol&gt;</span><br><span class="line">          &lt;/output&gt;</span><br><span class="line">        &lt;/delta&gt;</span><br><span class="line">      &lt;/transition-function&gt;</span><br><span class="line">    &lt;/turing-machine&gt;</span><br><span class="line">  &lt;/running&gt;</span><br><span class="line">  &lt;startup lock=&quot;&quot;/&gt;</span><br><span class="line">  &lt;candidate modified=&quot;true&quot; lock=&quot;1&quot; locktime=&quot;2018-01-26T06:33:55Z&quot;&gt;</span><br><span class="line">    &lt;turing-machine xmlns=&quot;http://example.net/turing-machine&quot;&gt;</span><br><span class="line">      &lt;transition-function&gt;</span><br><span class="line">        &lt;delta&gt;</span><br><span class="line">          &lt;label&gt;0&lt;/label&gt;</span><br><span class="line">          &lt;input&gt;</span><br><span class="line">            &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">            &lt;symbol&gt;0&lt;/symbol&gt;</span><br><span class="line">          &lt;/input&gt;</span><br><span class="line">          &lt;output&gt;</span><br><span class="line">            &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">            &lt;symbol&gt;1&lt;/symbol&gt;</span><br><span class="line">          &lt;/output&gt;</span><br><span class="line">        &lt;/delta&gt;</span><br><span class="line">      &lt;/transition-function&gt;</span><br><span class="line">    &lt;/turing-machine&gt;</span><br><span class="line">  &lt;/candidate&gt;</span><br><span class="line">&lt;/datastores&gt;</span><br></pre></td></tr></table></figure>

<p>OK, unlock candidate:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">unlock candidate</span></span><br><span class="line">libnetconf DEBUG: 4984-D  1-26 14:38: 4 Writing message (session 1): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;5&quot;&gt;</span><br><span class="line">  &lt;unlock&gt;</span><br><span class="line">    &lt;target&gt;</span><br><span class="line">      &lt;candidate/&gt;</span><br><span class="line">    &lt;/target&gt;</span><br><span class="line">  &lt;/unlock&gt;</span><br><span class="line">&lt;/rpc&gt;</span><br><span class="line"></span><br><span class="line">libnetconf DEBUG: 4984-D  1-26 14:38: 4 11--Received message (session 1): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc-reply xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;5&quot;&gt;</span><br><span class="line">  &lt;ok/&gt;</span><br><span class="line">&lt;/rpc-reply&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  Result OK</span><br><span class="line"><span class="meta prompt_">netconf&gt; </span></span><br></pre></td></tr></table></figure>

<p>unlock is successfully</p>
<p>server’s output:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">netopeer-server[4981]: 4981-D  1-26 14:38: 4 11--Received message (session 1): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;5&quot;&gt;</span><br><span class="line">  &lt;unlock&gt;</span><br><span class="line">    &lt;target&gt;</span><br><span class="line">      &lt;candidate/&gt;</span><br><span class="line">    &lt;/target&gt;</span><br><span class="line">  &lt;/unlock&gt;</span><br><span class="line">&lt;/rpc&gt;</span><br><span class="line">netopeer-server[4981]: 4981-V  1-26 14:38: 4 Created dummy session 0 for user &#x27;root&#x27; (UID 0) - recovery session</span><br><span class="line">netopeer-server[4981]: 4981-V  1-26 14:38: 4 Created dummy session 0 for user &#x27;root&#x27; (UID 0) - recovery session</span><br><span class="line">netopeer-server[4981]: 4981-D  1-26 14:38: 4 Adding new event (0)</span><br><span class="line">netopeer-server[4981]: 4981-V  1-26 14:38: 4 Created dummy session 0 for user &#x27;root&#x27; (UID 0) - recovery session</span><br><span class="line">netopeer-server[4981]: 4981-D  1-26 14:38: 4 Writing message (session 1): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc-reply xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;5&quot;&gt;</span><br><span class="line">  &lt;ok/&gt;</span><br><span class="line">&lt;/rpc-reply&gt;</span><br></pre></td></tr></table></figure>

<h3 id="turing-machine-demo-get操作案例"><a href="#turing-machine-demo-get操作案例" class="headerlink" title="turing-machine demo get操作案例"></a>turing-machine demo get操作案例</h3><p>running datestore 内容：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">netconf&gt; get-config running</span><br><span class="line"></span><br><span class="line">  Result:</span><br><span class="line"><span class="tag">&lt;<span class="name">turing-machine</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://example.net/turing-machine&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transition-function</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">delta</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>0<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>0<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">output</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>1<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">delta</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>1<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>1<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">output</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>0<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">delta</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>end<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">symbol</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">output</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">state</span>&gt;</span>1<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition-function</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">turing-machine</span>&gt;</span><span class="tag">&lt;<span class="name">netopeer</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:cesnet:tmc:netopeer:1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>turing-machine<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">netopeer</span>&gt;</span></span><br><span class="line">netconf&gt;</span><br></pre></td></tr></table></figure>

<p>准备get xml文件：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- turing-machine-get-test.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">turing-machine</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://example.net/turing-machine&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">transition-function</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">delta</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span>&gt;</span>0<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">transition-function</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">turing-machine</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>netopeer-cli 命令：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">netconf&gt; get --filter=/turing-machine-get-test.xml</span><br><span class="line"></span><br><span class="line">  Result:</span><br><span class="line"><span class="tag">&lt;<span class="name">turing-machine</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://example.net/turing-machine&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transition-function</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">delta</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>0<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>0<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">output</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>1<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition-function</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">turing-machine</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>netopeer-server log：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">netopeer-server[127219]: Received message (session 4): <span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">rpc</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot;</span> <span class="attr">message-id</span>=<span class="string">&quot;34&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">get</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span> <span class="attr">type</span>=<span class="string">&quot;subtree&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">turing-machine</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://example.net/turing-machine&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transition-function</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">delta</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>0<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">transition-function</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">turing-machine</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">get</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">rpc</span>&gt;</span></span><br><span class="line">netopeer-server[127219]: Merging the node turing-machine (src/datastore/edit_config.c:2325)</span><br><span class="line">netopeer-server[127219]: Deleting the node turing-machine (src/datastore/edit_config.c:1003)</span><br><span class="line">netopeer-server[127219]: Writing message (session 4): <span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">rpc-reply</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot;</span> <span class="attr">message-id</span>=<span class="string">&quot;34&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">turing-machine</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://example.net/turing-machine&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">transition-function</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">delta</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span>0<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>0<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">output</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>1<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">transition-function</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">turing-machine</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">rpc-reply</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="配置netopeer服务器模块"><a href="#配置netopeer服务器模块" class="headerlink" title="配置netopeer服务器模块"></a>配置netopeer服务器模块</h3><p>要查找要添加YANG模块的默认位置，请运行</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo /usr/bin/netopeer-configurator</span></span><br></pre></td></tr></table></figure>

<p>你可以在[Netopeer]一栏找到以下信息</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[Netopeer]     Using modules installed in path: /usr/local/etc/netopeer/modules.conf.d</span><br></pre></td></tr></table></figure>

<p>默认情况下，所有模块的XML实例数据(Netopeer调用这个数据存储，不幸的是，使用与NETCONF的运行&#x2F;候选&#x2F;启动数据存储相同的术语)存储在 <code>/usr/local/etc/Netopeer/modules.conf.d</code>中</p>
<p>当您使用 <code>netopier -manager</code> 添加模块时，<code>—datastore</code> 选项应该指向 <code>/usr/local/etc/netopeer/modules.conf.d</code></p>
<p>使用 <code>netopier -manager</code> 的例子:</p>
<p>首先检查哪些模块是默认启用的:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer-manager list</span></span><br><span class="line">List of startup Netopeer modules:No module installed.</span><br></pre></td></tr></table></figure>

<p>没有安装模块。让我们添加一些模块。要添加模型，首先使用PyangNETCONFc转换 <code>.yang</code> 文件 <code>yin文件</code>。Netopeer内部使用 YIN 格式。例如，让我们添加 toaster 数据存储，这样您就可以使用NETCONFc来配置它。</p>
<p>Download toaster.yang from<a href="http://www.seguesoft.com/get-standard-yang-modules"> http://seguesoft.com/get-standard-yang-modules</a>. Then you can do:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pyang -f yin /home/bob/YANG_modules/toaster.yang -o /home/bob/YANG_modules/toaster.yin</span></span><br></pre></td></tr></table></figure>

<p>Then add toaster.yin’s datastore into Netopeer as follows</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer-manager add --name toaster --model /home/bob/YANG_modules/toaster.yin --datastore /usr/local/etc/netopeer/modules.conf.d/toaster.xml</span></span><br></pre></td></tr></table></figure>

<p>对于命令引用类型</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer-manager add --<span class="built_in">help</span></span>     </span><br><span class="line">To actually implement a model, see http://github.com/CESNET/netopeer/tree/master/transAPI/cfgsystem</span><br></pre></td></tr></table></figure>

<h3 id="操作过程："><a href="#操作过程：" class="headerlink" title="操作过程："></a>操作过程：</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">xml 生成</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pyang -f sample-xml-skeleton turing-machine.yang -o turing-machine.xml</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">生成 rpc 接口代码</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">lnctool --model ./turing-machine.yang transapi --paths ./path</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">netconf <span class="built_in">log</span> 接口</span> </span><br><span class="line">nc_verb_verbose(&quot;Miaow: Turing machine transapi_init...&quot;);</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编译 rpc 模块代码，并安装模块</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">autoreconf --force --install</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo make install</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看已安装的模块</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">netopeer-manager list</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">man netopeer-manager</span></span><br></pre></td></tr></table></figure>

<p>启动服务测试：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo /usr/local/bin/netopeer-server -v 3</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo /usr/local/bin/netopeer-cli</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash"><span class="built_in">help</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> Available commands:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> <span class="built_in">help</span>            Display this text</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> connect         Connect to a NETCONF server</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> listen          Listen <span class="keyword">for</span> a NETCONF Call Home</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> disconnect      Disconnect from a NETCONF server</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> commit          NETCONF &lt;commit&gt; operation</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> copy-config     NETCONF &lt;copy-config&gt; operation</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> delete-config   NETCONF &lt;delete-config&gt; operation</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> discard-changes NETCONF &lt;discard-changes&gt; operation</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> edit-config     NETCONF &lt;edit-config&gt; operation</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> get             NETCONF &lt;get&gt; operation</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> get-config      NETCONF &lt;get-config&gt; operation</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> get-schema      NETCONF &lt;get-schema&gt; operation</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> kill-session    NETCONF &lt;kill-session&gt; operation</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> lock            NETCONF &lt;lock&gt; operation</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> unlock          NETCONF &lt;unlock&gt; operation</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> validate        NETCONF &lt;validate&gt; operation</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> <span class="built_in">test</span>            Run a specified <span class="built_in">test</span> <span class="keyword">case</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> subscribe       NETCONF Event Notifications &lt;create-subscription&gt; operation</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> time            Enable/disable measuring time of <span class="built_in">command</span> execution</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> knownhosts      Manage known hosts <span class="keyword">in</span> the <span class="string">&quot;~/.ssh/known_hosts&quot;</span> file</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> status          Print information about the current NETCONF session</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> user-rpc        Send your own content <span class="keyword">in</span> an RPC envelope (<span class="keyword">for</span> DEBUG purposes)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> verbose         Enable/disable verbose messages</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> quit            Quit the program</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> auth            Manage SSH authentication options</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> capability      Add/remove capability to/from the list of supported capabilities</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> editor          Manage the editor to be used <span class="keyword">for</span> manual XML pasting/writing</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">connect 127.0.0.1</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">get -h</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">get [--<span class="built_in">help</span>] [--defaults report-all|report-all-tagged|trim|explicit] [--filter [file]] [--out file]</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">get --filter=/root/turing.xml</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">get-config -h</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">get-config [--<span class="built_in">help</span>] [--defaults report-all|report-all-tagged|trim|explicit] [--filter [file]] [--out file] running|startup|candidate</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">get-config --filter=/root/turing.xml candidate</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">edit-config -h</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">edit-config [--<span class="built_in">help</span>] [--defop &lt;merge|replace|none&gt;] [--error &lt;stop|<span class="built_in">continue</span>|rollback&gt;] [--<span class="built_in">test</span> &lt;<span class="built_in">set</span>|test-only|test-then-set&gt;] [--config &lt;file&gt; | --url &lt;url&gt;] running|startup|candidate</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">If neither --config nor --url is specified, user is prompted to <span class="built_in">set</span> edit data manually.</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">lock candidate</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">debug</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">edit-config --defop=merge --config=/root/turing.xml candidate</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">commit</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">unlock candidate</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">netconf&gt; user-rpc --file=/root/rpc-run.xml</span></span><br></pre></td></tr></table></figure>

<h2 id="5-turing-machine-操作层示例"><a href="#5-turing-machine-操作层示例" class="headerlink" title="5. turing-machine 操作层示例"></a>5. turing-machine 操作层示例</h2><p>安装好 turing-machine 之后，可以对模块做一些操作，以下为实际的操作过程以及对应的xml编写示例。</p>
<p><code>&lt;edit-config&gt;</code> 详解：</p>
<p><strong>描述：</strong></p>
<p>操作将全部或部分指定配置加载到指定的目标配置数据存储。此操作允许以多种方式表示新配置，例如使用本地文件，远程文件或内联。如果目标配置数据存储不存在，它将被创建。</p>
<p>如果一个<code>NETCONF</code>节点(<code>peer</code>)支持：<code>url</code>能力（<a href="https://tools.ietf.org/html/rfc6241#section-8.8">8.8节</a>），那么<code>元素可以出现而不是</code>参数。</p>
<p>设备分析源和目标配置并执行所请求的更改。目标配置不一定被替换，就像&#96;&#96;消息一样。而是根据源数据和请求的操作来更改目标配置。</p>
<p>如果<code>操作包含应用于基础数据模型中相同概念节点的多个子操作，则操作的结果是未定义的</code>（即，不在NETCONF协议的范围之内）。</p>
<p><strong>属性：</strong></p>
<ul>
<li><code>operation</code>：<code>子树中的元素可以包含一个“`operation`”属性，它属于[3.1](https://tools.ietf.org/html/rfc6241#section-3.1)节定义的`NETCONF`名称空间。该属性标识配置中的要执行该操作的点，并可以在整个</code>子树中的多个元素上出现。如果未指定“<code>operation</code>”属性，则配置将合并到配置数据存储中。 “<code>operation</code>”属性具有以下值之一：<ul>
<li><code>merge</code>：由包含此属性的元素标识的配置数据与由&#96;&#96;参数标识的配置数据存储中对应级别的配置合并。这是默认行为。</li>
<li><code>replace</code>：由包含此属性的元素标识的配置数据将替换由<code>参数标识的配置数据存储区中的任何相关配置。如果配置数据存储中不存在此类配置数据，则会创建它。与替换整个目标配置的</code>操作不同，只有实际存在于&#96;&#96;参数中的配置受到影响。</li>
<li><code>create</code>：当且仅当配置数据存在于配置数据存储中时，才将包含此属性的元素标识的配置数据添加到配置中。如果配置数据存在，则返回一个<code>值为“`data-exists`”的</code>元素。</li>
<li><code>delete</code>：当且仅当配置数据当前存在于配置数据存储中时，才从配置中删除由包含此属性的元素标识的配置数据。如果配置数据不存在，则返回一个<code>值为“`data-missing`”的</code>元素。</li>
<li><code>remove</code>：如果配置数据当前存在于配置数据存储中，则从配置中删除由包含此属性的元素标识的配置数据。如果配置数据不存在，服务器会自动忽略“<code>remove</code>”操作。</li>
</ul>
</li>
</ul>
<p><strong>参数：</strong></p>
<ul>
<li><code>target</code>：正在编辑的配置数据存储的名称，例如<code>或</code>。</li>
<li><code>default-operation</code>：选择此<code>请求的默认操作（如“`operation`”属性中所述）。 </code>参数的默认值是<code>“merge</code>”。参数是可选的，但是如果提供，它具有以下值之一：<ul>
<li><code>merge</code>：参数中的配置数据与目标数据存储中相应级别的配置合并。这是默认行为。</li>
<li><code>replace</code>：参数中的配置数据完全替换了目标数据存储中的配置。这对加载以前保存的配置数据很有用。</li>
<li><code>none</code>：目标数据存储不受<code>参数中的配置影响，除非和直到传入的配置数据使用“`operation`”属性请求不同的操作。如果</code>参数中的配置包含目标数据存储中没有相应级别的数据，则返回<code>，并带有</code>缺少数据的值。使用“<code>none</code>”允许像“<code>delete</code>”这样的操作避免无意中创建要删除的元素的父层次结构。</li>
</ul>
</li>
<li><code>test-option</code>：只有当设备公布支持<code>:validate:1.1</code>能力时才能指定<code>元素（[8.6节](https://tools.ietf.org/html/rfc6241#section-8.6)）。</code>元素具有以下值之一：<ul>
<li><code>test-then-set</code>：在尝试设置之前执行验证测试。 如果发生验证错误，请不要执行&#96;&#96;操作。 这是默认的测试选项。</li>
<li><code>set</code>：先执行一个没有验证测试的设置。</li>
<li><code>test-only</code>：仅执行验证测试，而不尝试设置。</li>
</ul>
</li>
<li><code>error-option</code>：元素具有以下值之一：<ul>
<li><code>stop-on-error</code>：停止第一个错误的&#96;&#96;操作。这是默认的错误选项。</li>
<li><code>continue-on-error</code>：继续处理错误的配置数据;记录错误，如果发生任何错误，则产生否定响应。</li>
<li><code>rollback-on-error</code>：如果发生错误情况，从而生成错误严重性<code>元素，则服务器将停止处理</code>操作，并在指定的开始时将指定的配置恢复到完整状态这个&#96;&#96;操作。该选项要求服务器支持<a href="https://tools.ietf.org/html/rfc6241#section-8.5">8.5节</a>中描述的错误回滚功能。</li>
</ul>
</li>
<li><code>config</code>：配置数据的层次结构，由设备的一个数据模型定义。内容必须放置在适当的命名空间中，以允许设备检测适当的数据模型，并且内容必须遵循该数据模型的约束，如其能力定义所定义。能力在<a href="https://tools.ietf.org/html/rfc6241#section-8">第8节</a>讨论。</li>
</ul>
<h3 id="创建实例"><a href="#创建实例" class="headerlink" title="创建实例"></a>创建实例</h3><p><code>turing.xml</code> 内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">turing-machine</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://example.net/turing-machine&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">transition-function</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delta</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>0<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>0<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">output</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>1<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delta</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>1<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>1<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">output</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>0<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delta</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>end<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">symbol</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">output</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">state</span>&gt;</span>1<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">transition-function</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">turing-machine</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>为 turing-machine 创建实例：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">edit-config --defop=merge --config=/root/turing.xml candidate</span></span><br><span class="line">libnetconf DEBUG: Writing message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;8&quot;&gt;</span><br><span class="line">  &lt;edit-config&gt;</span><br><span class="line">    &lt;target&gt;</span><br><span class="line">      &lt;candidate/&gt;</span><br><span class="line">    &lt;/target&gt;</span><br><span class="line">    &lt;default-operation&gt;merge&lt;/default-operation&gt;</span><br><span class="line">    &lt;config&gt;</span><br><span class="line">      &lt;turing-machine xmlns=&quot;http://example.net/turing-machine&quot;&gt;</span><br><span class="line">        &lt;transition-function&gt;</span><br><span class="line">          &lt;delta&gt;</span><br><span class="line">            &lt;label&gt;0&lt;/label&gt;</span><br><span class="line">            &lt;input&gt;</span><br><span class="line">              &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">              &lt;symbol&gt;0&lt;/symbol&gt;</span><br><span class="line">            &lt;/input&gt;</span><br><span class="line">            &lt;output&gt;</span><br><span class="line">              &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">              &lt;symbol&gt;1&lt;/symbol&gt;</span><br><span class="line">            &lt;/output&gt;</span><br><span class="line">          &lt;/delta&gt;</span><br><span class="line">          &lt;delta&gt;</span><br><span class="line">            &lt;label&gt;1&lt;/label&gt;</span><br><span class="line">            &lt;input&gt;</span><br><span class="line">              &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">              &lt;symbol&gt;1&lt;/symbol&gt;</span><br><span class="line">            &lt;/input&gt;</span><br><span class="line">            &lt;output&gt;</span><br><span class="line">              &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">              &lt;symbol&gt;0&lt;/symbol&gt;</span><br><span class="line">            &lt;/output&gt;</span><br><span class="line">          &lt;/delta&gt;</span><br><span class="line">          &lt;delta&gt;</span><br><span class="line">            &lt;label&gt;end&lt;/label&gt;</span><br><span class="line">            &lt;input&gt;</span><br><span class="line">              &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">              &lt;symbol/&gt;</span><br><span class="line">            &lt;/input&gt;</span><br><span class="line">            &lt;output&gt;</span><br><span class="line">              &lt;state&gt;1&lt;/state&gt;</span><br><span class="line">            &lt;/output&gt;</span><br><span class="line">          &lt;/delta&gt;</span><br><span class="line">        &lt;/transition-function&gt;</span><br><span class="line">      &lt;/turing-machine&gt;</span><br><span class="line">    &lt;/config&gt;</span><br><span class="line">  &lt;/edit-config&gt;</span><br><span class="line">&lt;/rpc&gt;</span><br><span class="line"></span><br><span class="line">libnetconf DEBUG: Received message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc-reply xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;8&quot;&gt;</span><br><span class="line">  &lt;ok/&gt;</span><br><span class="line">&lt;/rpc-reply&gt;</span><br></pre></td></tr></table></figure>

<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><p><code>delete-delta.xml</code> 内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">turing-machine</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://example.net/turing-machine&quot;</span> <span class="attr">xmlns:xc</span>=<span class="string">&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transition-function</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">delta</span> <span class="attr">xc:operation</span>=<span class="string">&quot;remove&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>1<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition-function</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">turing-machine</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>删除 delta 中的一项：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">edit-config --defop=none --config=/root/delete-delta.xml candidate</span></span><br><span class="line">libnetconf DEBUG: Writing message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;13&quot;&gt;</span><br><span class="line">  &lt;edit-config&gt;</span><br><span class="line">    &lt;target&gt;</span><br><span class="line">      &lt;candidate/&gt;</span><br><span class="line">    &lt;/target&gt;</span><br><span class="line">    &lt;default-operation&gt;none&lt;/default-operation&gt;</span><br><span class="line">    &lt;config&gt;</span><br><span class="line">      &lt;turing-machine xmlns=&quot;http://example.net/turing-machine&quot; xmlns:xc=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot;&gt;</span><br><span class="line">        &lt;transition-function&gt;</span><br><span class="line">          &lt;delta xc:operation=&quot;remove&quot;&gt;</span><br><span class="line">            &lt;label&gt;1&lt;/label&gt;</span><br><span class="line">          &lt;/delta&gt;</span><br><span class="line">        &lt;/transition-function&gt;</span><br><span class="line">      &lt;/turing-machine&gt;</span><br><span class="line">    &lt;/config&gt;</span><br><span class="line">  &lt;/edit-config&gt;</span><br><span class="line">&lt;/rpc&gt;</span><br><span class="line"></span><br><span class="line">libnetconf DEBUG: Received message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc-reply xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;13&quot;&gt;</span><br><span class="line">  &lt;ok/&gt;</span><br><span class="line">&lt;/rpc-reply&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">get-config candidate</span></span><br><span class="line">libnetconf DEBUG: Writing message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;14&quot;&gt;</span><br><span class="line">  &lt;get-config&gt;</span><br><span class="line">    &lt;source&gt;</span><br><span class="line">      &lt;candidate/&gt;</span><br><span class="line">    &lt;/source&gt;</span><br><span class="line">  &lt;/get-config&gt;</span><br><span class="line">&lt;/rpc&gt;</span><br><span class="line"></span><br><span class="line">libnetconf DEBUG: Received message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc-reply xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;14&quot;&gt;</span><br><span class="line">  &lt;data&gt;</span><br><span class="line">    &lt;turing-machine xmlns=&quot;http://example.net/turing-machine&quot;&gt;</span><br><span class="line">      &lt;transition-function&gt;</span><br><span class="line">        &lt;delta&gt;</span><br><span class="line">          &lt;label&gt;0&lt;/label&gt;</span><br><span class="line">          &lt;input&gt;</span><br><span class="line">            &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">            &lt;symbol&gt;0&lt;/symbol&gt;</span><br><span class="line">          &lt;/input&gt;</span><br><span class="line">          &lt;output&gt;</span><br><span class="line">            &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">            &lt;symbol&gt;1&lt;/symbol&gt;</span><br><span class="line">          &lt;/output&gt;</span><br><span class="line">        &lt;/delta&gt;</span><br><span class="line">        &lt;delta&gt;</span><br><span class="line">          &lt;label&gt;end&lt;/label&gt;</span><br><span class="line">          &lt;input&gt;</span><br><span class="line">            &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">            &lt;symbol/&gt;</span><br><span class="line">          &lt;/input&gt;</span><br><span class="line">          &lt;output&gt;</span><br><span class="line">            &lt;state&gt;1&lt;/state&gt;</span><br><span class="line">          &lt;/output&gt;</span><br><span class="line">        &lt;/delta&gt;</span><br><span class="line">      &lt;/transition-function&gt;</span><br><span class="line">    &lt;/turing-machine&gt;</span><br><span class="line">  &lt;/data&gt;</span><br><span class="line">&lt;/rpc-reply&gt;</span><br></pre></td></tr></table></figure>

<h3 id="创建数据"><a href="#创建数据" class="headerlink" title="创建数据"></a>创建数据</h3><p><code>create-delta.xml</code> 内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">turing-machine</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://example.net/turing-machine&quot;</span> <span class="attr">xmlns:xc</span>=<span class="string">&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">transition-function</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delta</span> <span class="attr">xc:operation</span>=<span class="string">&quot;create&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>3<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>1<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">output</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">state</span>&gt;</span>1<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>1<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">transition-function</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">turing-machine</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>创建 delta 数据：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">edit-config --defop=none --config=/root/create-delta.xml candidate</span></span><br></pre></td></tr></table></figure>

<h3 id="合并和替换数据"><a href="#合并和替换数据" class="headerlink" title="合并和替换数据"></a>合并和替换数据</h3><p><code>merge-delta.xml</code> 内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">turing-machine</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://example.net/turing-machine&quot;</span> <span class="attr">xmlns:xc</span>=<span class="string">&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">transition-function</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delta</span> <span class="attr">xc:operation</span>=<span class="string">&quot;merge&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>0<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">state</span>&gt;</span>1<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>1<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">output</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">state</span>&gt;</span>1<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>1<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">transition-function</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">turing-machine</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>replace-delta.xml</code> 内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">turing-machine</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://example.net/turing-machine&quot;</span> <span class="attr">xmlns:xc</span>=<span class="string">&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">transition-function</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delta</span> <span class="attr">xc:operation</span>=<span class="string">&quot;replace&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span>&gt;</span>3<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>0<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">output</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">state</span>&gt;</span>0<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">symbol</span>&gt;</span>0<span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">transition-function</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">turing-machine</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>合并和替换 delta：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">edit-config --defop=none --config=/root/merge-delta.xml candidate</span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">edit-config --defop=none --config=/root/replace-delta.xml candidate</span></span><br></pre></td></tr></table></figure>

<h3 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h3><p><code>get-turing.xml</code> 内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">turing-machine</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://example.net/turing-machine&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">turing-machine</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>get-delta-0.xml</code> 内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">turing-machine</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://example.net/turing-machine&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">transition-function</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">delta</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span>&gt;</span>0<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">delta</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">transition-function</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">turing-machine</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>获取特定数据：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">get --filter=/root/get-turing.xml</span></span><br><span class="line">libnetconf DEBUG: Writing message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;17&quot;&gt;</span><br><span class="line">  &lt;get&gt;</span><br><span class="line">    &lt;filter type=&quot;subtree&quot;&gt;</span><br><span class="line">      &lt;turing-machine xmlns=&quot;http://example.net/turing-machine&quot;&gt;</span><br><span class="line">&lt;/turing-machine&gt;</span><br><span class="line">    &lt;/filter&gt;</span><br><span class="line">  &lt;/get&gt;</span><br><span class="line">&lt;/rpc&gt;</span><br><span class="line"></span><br><span class="line">libnetconf DEBUG: Received message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc-reply xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;17&quot;&gt;</span><br><span class="line">  &lt;data&gt;</span><br><span class="line">    &lt;turing-machine xmlns=&quot;http://example.net/turing-machine&quot;&gt;</span><br><span class="line">      &lt;transition-function&gt;</span><br><span class="line">        &lt;delta&gt;</span><br><span class="line">          &lt;label&gt;0&lt;/label&gt;</span><br><span class="line">          &lt;input&gt;</span><br><span class="line">            &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">            &lt;symbol&gt;0&lt;/symbol&gt;</span><br><span class="line">          &lt;/input&gt;</span><br><span class="line">          &lt;output&gt;</span><br><span class="line">            &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">            &lt;symbol&gt;1&lt;/symbol&gt;</span><br><span class="line">          &lt;/output&gt;</span><br><span class="line">        &lt;/delta&gt;</span><br><span class="line">        &lt;delta&gt;</span><br><span class="line">          &lt;label&gt;1&lt;/label&gt;</span><br><span class="line">          &lt;input&gt;</span><br><span class="line">            &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">            &lt;symbol&gt;1&lt;/symbol&gt;</span><br><span class="line">          &lt;/input&gt;</span><br><span class="line">          &lt;output&gt;</span><br><span class="line">            &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">            &lt;symbol&gt;0&lt;/symbol&gt;</span><br><span class="line">          &lt;/output&gt;</span><br><span class="line">        &lt;/delta&gt;</span><br><span class="line">        &lt;delta&gt;</span><br><span class="line">          &lt;label&gt;end&lt;/label&gt;</span><br><span class="line">          &lt;input&gt;</span><br><span class="line">            &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">            &lt;symbol/&gt;</span><br><span class="line">          &lt;/input&gt;</span><br><span class="line">          &lt;output&gt;</span><br><span class="line">            &lt;state&gt;1&lt;/state&gt;</span><br><span class="line">          &lt;/output&gt;</span><br><span class="line">        &lt;/delta&gt;</span><br><span class="line">      &lt;/transition-function&gt;</span><br><span class="line">      &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">      &lt;head-position&gt;0&lt;/head-position&gt;</span><br><span class="line">      &lt;tape&gt;</span><br><span class="line">        &lt;cell&gt;</span><br><span class="line">          &lt;coord&gt;0&lt;/coord&gt;</span><br><span class="line">          &lt;symbol&gt;0&lt;/symbol&gt;</span><br><span class="line">        &lt;/cell&gt;</span><br><span class="line">      &lt;/tape&gt;</span><br><span class="line">    &lt;/turing-machine&gt;</span><br><span class="line">  &lt;/data&gt;</span><br><span class="line">&lt;/rpc-reply&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">get --filter=/root/get-delta-0.xml</span></span><br><span class="line">libnetconf DEBUG: Writing message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;18&quot;&gt;</span><br><span class="line">  &lt;get&gt;</span><br><span class="line">    &lt;filter type=&quot;subtree&quot;&gt;</span><br><span class="line">      &lt;turing-machine xmlns=&quot;http://example.net/turing-machine&quot;&gt;</span><br><span class="line">        &lt;transition-function&gt;</span><br><span class="line">          &lt;delta&gt;</span><br><span class="line">            &lt;label&gt;0&lt;/label&gt;</span><br><span class="line">          &lt;/delta&gt;</span><br><span class="line">        &lt;/transition-function&gt;</span><br><span class="line">      &lt;/turing-machine&gt;</span><br><span class="line">    &lt;/filter&gt;</span><br><span class="line">  &lt;/get&gt;</span><br><span class="line">&lt;/rpc&gt;</span><br><span class="line"></span><br><span class="line">libnetconf DEBUG: Received message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc-reply xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;18&quot;&gt;</span><br><span class="line">  &lt;data&gt;</span><br><span class="line">    &lt;turing-machine xmlns=&quot;http://example.net/turing-machine&quot;&gt;</span><br><span class="line">      &lt;transition-function&gt;</span><br><span class="line">        &lt;delta&gt;</span><br><span class="line">          &lt;label&gt;0&lt;/label&gt;</span><br><span class="line">          &lt;input&gt;</span><br><span class="line">            &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">            &lt;symbol&gt;0&lt;/symbol&gt;</span><br><span class="line">          &lt;/input&gt;</span><br><span class="line">          &lt;output&gt;</span><br><span class="line">            &lt;state&gt;0&lt;/state&gt;</span><br><span class="line">            &lt;symbol&gt;1&lt;/symbol&gt;</span><br><span class="line">          &lt;/output&gt;</span><br><span class="line">        &lt;/delta&gt;</span><br><span class="line">      &lt;/transition-function&gt;</span><br><span class="line">    &lt;/turing-machine&gt;</span><br><span class="line">  &lt;/data&gt;</span><br><span class="line">&lt;/rpc-reply&gt;</span><br></pre></td></tr></table></figure>

<h3 id="自定义-rpc-方法调用"><a href="#自定义-rpc-方法调用" class="headerlink" title="自定义 rpc 方法调用"></a>自定义 rpc 方法调用</h3><p><code>rpc-initialize.xml </code> 内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">initialize</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://example.net/turing-machine&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tape-content</span>&gt;</span>0<span class="tag">&lt;/<span class="name">tape-content</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">initialize</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>执行 rpc-initialize ：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">user-rpc --file=/root/rpc-initialize.xml</span></span><br><span class="line">libnetconf DEBUG: Writing message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;19&quot;&gt;</span><br><span class="line">  &lt;initialize xmlns=&quot;http://example.net/turing-machine&quot;&gt;</span><br><span class="line">    &lt;tape-content&gt;0&lt;/tape-content&gt;</span><br><span class="line">  &lt;/initialize&gt;</span><br><span class="line">&lt;/rpc&gt;</span><br><span class="line"></span><br><span class="line">libnetconf DEBUG: Received message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc-reply xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;19&quot;&gt;</span><br><span class="line">  &lt;ok/&gt;</span><br><span class="line">&lt;/rpc-reply&gt;</span><br></pre></td></tr></table></figure>

<p>server 响应内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">netopeer-server[14444]: Received message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;20&quot;&gt;</span><br><span class="line">  &lt;initialize xmlns=&quot;http://example.net/turing-machine&quot;&gt;</span><br><span class="line">    &lt;tape-content&gt;0&lt;/tape-content&gt;</span><br><span class="line">  &lt;/initialize&gt;</span><br><span class="line">&lt;/rpc&gt;</span><br><span class="line">netopeer-server[14444]: Calling initialize RPC function</span><br><span class="line">netopeer-server[14444]: Miaow: Turing machine rpc_initialize...</span><br><span class="line">netopeer-server[14444]: Miaow: Turing machine get_rpc_node...</span><br><span class="line">netopeer-server[14444]: Writing message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc-reply xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;20&quot;&gt;</span><br><span class="line">  &lt;ok/&gt;</span><br><span class="line">&lt;/rpc-reply&gt;</span><br></pre></td></tr></table></figure>

<p><code>rpc-run.xml</code> 内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">run</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://example.net/turing-machine&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">run</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>执行 rpc-run ：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">netconf&gt; </span><span class="language-bash">user-rpc --file=/root/rpc-run.xml</span></span><br><span class="line">libnetconf DEBUG: Writing message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;21&quot;&gt;</span><br><span class="line">  &lt;run xmlns=&quot;http://example.net/turing-machine&quot;&gt;</span><br><span class="line">&lt;/run&gt;</span><br><span class="line">&lt;/rpc&gt;</span><br><span class="line"></span><br><span class="line">libnetconf DEBUG: Received message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc-reply xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;21&quot;&gt;</span><br><span class="line">  &lt;ok/&gt;</span><br><span class="line">&lt;/rpc-reply&gt;</span><br></pre></td></tr></table></figure>

<p>server 响应内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">netopeer-server[14444]: Received message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;21&quot;&gt;</span><br><span class="line">  &lt;run xmlns=&quot;http://example.net/turing-machine&quot;&gt;</span><br><span class="line">&lt;/run&gt;</span><br><span class="line">&lt;/rpc&gt;</span><br><span class="line">netopeer-server[14444]: Calling run RPC function</span><br><span class="line">netopeer-server[14444]: Miaow: Turing machine rpc_run...</span><br><span class="line">netopeer-server[14444]: Writing message (session 7): &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;rpc-reply xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;21&quot;&gt;</span><br><span class="line">  &lt;ok/&gt;</span><br><span class="line">&lt;/rpc-reply&gt;</span><br><span class="line">netopeer-server[14444]: Adding new event (0)</span><br></pre></td></tr></table></figure>

<h3 id="notification-测试"><a href="#notification-测试" class="headerlink" title="notification 测试"></a>notification 测试</h3><p>TODO</p>
<h2 id="6-Netconf总结"><a href="#6-Netconf总结" class="headerlink" title="6. Netconf总结"></a>6. Netconf总结</h2><p>Netconf2</p>
<p>TODO</p>
<h1 id="Netconf-2-使用介绍"><a href="#Netconf-2-使用介绍" class="headerlink" title="Netconf 2 使用介绍"></a>Netconf 2 使用介绍</h1><h2 id="pyang-工具使用"><a href="#pyang-工具使用" class="headerlink" title="pyang 工具使用"></a>pyang 工具使用</h2><h3 id="yang建模语言及pyang背景简介"><a href="#yang建模语言及pyang背景简介" class="headerlink" title="yang建模语言及pyang背景简介"></a>yang建模语言及pyang背景简介</h3><blockquote>
<p>YANG（RFC 7950）是NETCONF（RFC 6241）的数据建模语言，由IETF NETMOD WG开发。</p>
<p>pyang是一个YANG验证器，转换器和代码生成器，用python编写。 它可用于验证YANG模块的正确性，将YANG模块转换为其他格式，以及从模块生成代码。</p>
</blockquote>
<p>sdn、nfv盛行的今天，yang建模语言变得越来越重要，它定义于netconf协议，但是却超越了netconf协议本身，在网络世界迸发自己的活力。</p>
<p>如今最大的开源sdn控制器-opendaylight以yang作为建模语言进行核心模型存储，netconf以及restconf纷纷依靠yang模型定义接口,定义南向模型、北向模型。最具sdn气息的openflow也有个伴侣协议of-config使用yang建模，借助netconf通道下发相关配置。</p>
<p>yang很重要，但是用好yang可以选择的工具却并不多，pyang就是其中很重要的一个，这是一个由python代码编写的yang语法验证器、转换器以及代码生成器，一些开源软件使用它构建模型校验语法，比如开源netconf agent netopeer，我们作为用户也可以使用它进行语法校验，生成tree、yin等其它格式模型、数据。它是一个命令行，是一个学习好yang之路的一个好用的工具。</p>
<h3 id="pyang工具特性"><a href="#pyang工具特性" class="headerlink" title="pyang工具特性"></a>pyang工具特性</h3><ul>
<li>Validate YANG modules.  校验yang模型；</li>
<li>Convert YANG modules to YIN, and YIN to YANG.  yang和yin模型相互转换</li>
<li>Translate YANG data models to DSDL schemas, which can be used for validating various XML instance documents. See <a href="https://github.com/mbj4668/pyang/wiki/InstanceValidation">InstanceValidation</a>.  yang模型与dsdl结构模型转化</li>
<li>Translate YANG data models to XSD.  yang与xsd转化；</li>
<li>Generate UML diagrams from YANG models. See <a href="https://github.com/mbj4668/pyang/wiki/UMLOutput">UMLOutput</a> for an example.  生成yang模型uml；</li>
<li>Generate compact tree representation of YANG models for quick visualization. See <a href="https://github.com/mbj4668/pyang/wiki/TreeOutput">TreeOutput</a> for an example.  生成tree来呈现yang的快速视图；</li>
<li>Generate a skeleton XML instance document from the data model.  生成xml骨架实例；</li>
<li>Schema-aware translation of instance documents encoded in XML to JSON and vice-versa. See <a href="https://github.com/mbj4668/pyang/wiki/XmlJson">XmlJson</a>.  xml、json实例转换</li>
<li>Plugin framework for simple development of other outputs, such as code generation.  其他开发输出的框架插件，例如代码生成；</li>
</ul>
<h3 id="pyang-命令行简介"><a href="#pyang-命令行简介" class="headerlink" title="pyang 命令行简介"></a>pyang 命令行简介</h3><p>pyang命令行的使用，提供了丰富的文档说明通过pyang –help或者man pyang都能看到非常详细的信息：</p>
<img data-src="/2020/09/21/Netconf/netconf-note/pyangCommad.png" class="" title="pyang 命令行简介">

<p>普通用户模式转换主要关注如下几个即可：</p>
<ul>
<li>-f  输出格式，这里支持的格式包括tree、yang、yin等，用户可以根据需求灵活选择；</li>
<li>-o 输出文件名；</li>
<li>-p 输出路径；</li>
</ul>
<h3 id="pyang-的yin、yang-模型转化"><a href="#pyang-的yin、yang-模型转化" class="headerlink" title="pyang 的yin、yang 模型转化"></a>pyang 的yin、yang 模型转化</h3><p>pyang的格式 yin和yang转换很简单，按照下面命令完成即可：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pyang -f yin -o ietf-yang-types.yin ietf-yang-types.yang</span></span><br></pre></td></tr></table></figure>

<h3 id="pyang-生成-tree-文件"><a href="#pyang-生成-tree-文件" class="headerlink" title="pyang 生成 tree 文件"></a>pyang 生成 tree 文件</h3><p>tree 文件是 yang 独有的一个文件，主要功能就是为 yang 生成一个快速化的浏览视图.</p>
<p>如下所示为一个批量处理 yang 文件生成 tree 文件的命令行：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pyang -f tree yangdir/*.yang -o ouputdir/output.tree</span></span><br></pre></td></tr></table></figure>

<h3 id="yang-语法校验"><a href="#yang-语法校验" class="headerlink" title="yang 语法校验"></a>yang 语法校验</h3><p>因为没有仔细理解功能，这里只是将功能简单尝试了以下，后续有机会再系统的梳理一下这个功能，此处只给出简单的说明：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pyang  --ietf  test.yang</span></span><br></pre></td></tr></table></figure>

<h3 id="pyang-小结"><a href="#pyang-小结" class="headerlink" title="pyang 小结"></a>pyang 小结</h3><p>总的来说pyang是我们使用yang的一个必不可少的命令行、工具和插件，这里给出的一只是笔者平时的一些使用经验，它还有许多强大的功能在这里没有一一详述。</p>
<h2 id="yang-explorer-一个开源的杨浏览器和-RPC-Builder"><a href="#yang-explorer-一个开源的杨浏览器和-RPC-Builder" class="headerlink" title="yang-explorer, 一个开源的杨浏览器和 RPC Builder"></a>yang-explorer, 一个开源的杨浏览器和 RPC Builder</h2><blockquote>
<p><a href="https://www.kutu66.com/GitHub/article_130134">yang-explorer, 一个开源的杨浏览器和 RPC Builder</a></p>
</blockquote>
<blockquote>
<p>An open-source Yang Browser and RPC Builder Application</p>
</blockquote>
<ul>
<li><p>源代码名称:<strong>yang-explorer</strong></p>
</li>
<li><p>源代码网址:<a href="http://www.github.com/CiscoDevNet/yang-explorer">http://www.github.com/CiscoDevNet/yang-explorer</a></p>
</li>
<li><p><a href="http://www.github.com/CiscoDevNet/yang-explorer/wiki">yang-explorer源代码文档</a></p>
</li>
<li><p><a href="http://www.github.com/CiscoDevNet/yang-explorer/releases">yang-explorer源代码下载</a></p>
</li>
</ul>
<p>Git URL:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git://www.github.com/CiscoDevNet/yang-explorer.git</span></span><br></pre></td></tr></table></figure>

<p>Git Clone代码到本地:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> http://www.github.com/CiscoDevNet/yang-explorer</span></span><br></pre></td></tr></table></figure>

<p>Subversion代码到本地:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">svn co --depth empty http://www.github.com/CiscoDevNet/yang-explorer</span></span><br><span class="line">Checked out revision 1.</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> repo</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">svn up trunk</span></span><br></pre></td></tr></table></figure>

<h3 id="描述开源Yang浏览器和-RPC-Builder应用Yang数据模型实验"><a href="#描述开源Yang浏览器和-RPC-Builder应用Yang数据模型实验" class="headerlink" title="描述开源Yang浏览器和 RPC Builder应用Yang数据模型实验"></a>描述开源Yang浏览器和 RPC Builder应用Yang数据模型实验</h3><p><strong>功能</strong></p>
<ul>
<li>从用户界面或者 命令行 上传&#x2F;编译yang模型</li>
<li>生成 NetConf RPC</li>
<li>生成 python 示例代码 <strong>[new]</strong></li>
<li>搜索 yang <strong>[new]</strong></li>
<li>针对真正的netconf服务器执行 RPC</li>
<li>将创建的rpc保存到收藏集以便以后使用</li>
<li>建立模型的依赖关系图</li>
<li>浏览数据模型树并检查杨属性</li>
</ul>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul>
<li>MAC，Linux ( Windows 上不支持)</li>
<li>python 2.7</li>
<li>pip软件包管理器( <a href="https://pip.pypa.io/en/stable/installing/">https://pip.pypa.io/en/stable/installing/</a> )</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">If already installed, make sure that pip/setuptools are upto date (commands may vary)</span><br><span class="line">pip install --upgrade pip</span><br><span class="line">Ubuntu: sudo pip install --upgrade setuptools</span><br></pre></td></tr></table></figure>

<ul>
<li>virtualenv ( 推荐)</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Ubuntu: sudo apt-get install python-virtualenv</span><br><span class="line">Fedora: sudo dnf install python-virtualenv</span><br><span class="line">MAC: sudo pip install virtualenv</span><br></pre></td></tr></table></figure>

<ul>
<li>graphviz ( <a href="http://www.graphviz.org/Download.php">http://www.graphviz.org/Download.php</a> )</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Ubuntu: sudo apt-get install graphviz</span><br><span class="line">Fedora: sudo dnf install graphviz</span><br><span class="line">MAC: brew install graphviz</span><br></pre></td></tr></table></figure>

<ul>
<li>带有最新 Flash 插件的浏览器( 通过 Google Chrome 测试)</li>
</ul>
<p>Download 和 安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/CiscoDevNet/yang-explorer.git</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> yang-explorer</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">bash setup.sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Note: sudo may be required <span class="keyword">if</span> you <span class="keyword">do</span> not use virtualenv.</span></span><br></pre></td></tr></table></figure>

<p>有关更多信息，请参见第 7节疑难解答：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">If you get installation error for missing python.h or xmlversion.h try installing</span><br><span class="line">dependency packages:</span><br><span class="line">Ubuntu: sudo apt-get install libxml2-dev libxslt1-dev python-dev zlib1g-dev</span><br><span class="line">Fedora: sudo dnf install libxml2-devel libxslt-devel python-devel zlib-devel</span><br></pre></td></tr></table></figure>

<p>更新 exising 安装</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span>&lt;install-root&gt;/yang-explorer</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git stash (<span class="keyword">if</span> you have <span class="built_in">local</span> changes)</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git pull origin</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git stash apply (<span class="keyword">if</span> you have <span class="built_in">local</span> changes)</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">bash setup.sh</span></span><br></pre></td></tr></table></figure>

<p>备份数据</p>
<p>可以从数据目录备份YangExplorer数据，并且可以移植到新服务器上。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> -r &lt;install-root&gt;/yang-explorer/server/data &lt;backup-location&gt;/data</span></span><br></pre></td></tr></table></figure>

<p>从备份位置还原</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span>&lt;install-root&gt;/yang-explorer/server</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">move current data to tmp location <span class="built_in">mv</span> data data_old</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">replace data from backup location <span class="built_in">cp</span> -r &lt;backup-location&gt;/data data</span></span><br></pre></td></tr></table></figure>

<p>运行 YangExplorer, localhost Start 服务器：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span>&lt;install-root&gt;/yang-explorer</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">[sudo]./start.sh &amp;</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Note: sudo may be required <span class="keyword">if</span> you did not use virtualenv during installation.</span></span><br></pre></td></tr></table></figure>

<p>Start 资源管理器：</p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line">http://localhost:8088/static/YangExplorer.html</span><br></pre></td></tr></table></figure>

<p>运行 ip 地址( 共享服务器)  Start 服务器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Determine &lt;ip-address&gt; using if-config<span class="comment"># Add ip-address/port in YangExplorer.html after following line:cd&lt;install-root&gt;/yang-explorer/server/static</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">vi YangExplorer.html</span></span><br><span class="line"> var flashvars = &#123;&#125;; </span><br><span class="line">+ flashvars.host = &#x27;&lt;ip-address&gt;&#x27;;+ flashvars.port = &#x27;8088&#x27;; </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">save &amp; quit<span class="comment"># Update ip-address in startup scriptcd&lt;install-root&gt;/yang-explorer</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">vi start.sh</span></span><br><span class="line"> (update HOST variable with &lt;ip-address&gt;)</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">save &amp; quit. /start.sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Note: sudo may be required <span class="keyword">if</span> you did not use virtualenv during installation.</span></span><br></pre></td></tr></table></figure>

<p>Start 资源管理器：</p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line">http://&lt;ip-address&gt;:8088/static/YangExplorer.html</span><br></pre></td></tr></table></figure>





<h2 id="virtual-python-env"><a href="#virtual-python-env" class="headerlink" title="virtual python env"></a>virtual python env</h2><blockquote>
<p><a href="https://www.readwithu.com/Article/advanced/Mac%E4%B8%AD%E4%BD%BF%E7%94%A8virtualenv%E5%92%8Cvirtualenvwrapper.html">创建 virtual python env</a></p>
<p><a href="https://segmentfault.com/a/1190000014935970">python环境神器virtualenvwrapper安装与使用</a></p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><h3 id="模块下载地址"><a href="#模块下载地址" class="headerlink" title="模块下载地址"></a>模块下载地址</h3><ul>
<li><strong>[<a href="https://rawgit.com/CESNET/libnetconf/master/doc/doxygen/html/index.html"> Libnetconf文档网站 ]</a></strong></li>
<li><strong>[<a href="https://github.com/CESNET/Netopeer"> Netopeer项目 ]</a></strong></li>
<li><strong>[<a href="https://github.com/CESNET/libnetconf"> Libnetconf项目 ]</a></strong></li>
<li><strong>[<a href="https://github.com/mbj4668/pyang"> Pyang项目 ]</a></strong></li>
<li><strong>[<a href="https://git.libssh.org/projects/libssh.git"> Libssh项目 ]</a></strong></li>
</ul>
<h3 id="模块编译安装"><a href="#模块编译安装" class="headerlink" title="模块编译安装"></a>模块编译安装</h3><blockquote>
<p><a href="https://blog.csdn.net/rocson001/article/details/54575899">NETCONF协议netopeer软件安装与环境搭建</a></p>
<p><a href="http://www.seguesoft.com/index.php/how-to-set-up-netopeer-server-to-use-with-netconfc">Set up Netopeer Server to use with NETCONFc</a></p>
<p><a href="https://blog.csdn.net/baiqishijkh/article/details/74006878">NETCONF协议之netopeer软件安装</a></p>
</blockquote>
<h3 id="netconf学习资料"><a href="#netconf学习资料" class="headerlink" title="netconf学习资料"></a>netconf学习资料</h3><blockquote>
<p><a href="https://www.cnblogs.com/ssyfj/p/11651450.html">软件定义网络基础—NETCONF协议</a></p>
<p><a href="https://www.sdnlab.com/17786.html">Netconf配置及其RPC和Notification下发流程解析</a></p>
<p><a href="https://blog.csdn.net/CSND_PAN/article/details/79541868">NETCONF协议详解</a></p>
<p><a href="https://blog.csdn.net/haopeng123321/article/details/54934542">NETCONF模块设计介绍</a></p>
<p><a href="https://blog.csdn.net/mylifeyouwill/article/details/81539547">netopeer工具的使用</a></p>
<p><a href="https://blog.csdn.net/xinquanv1/article/details/88133803">【开源推介02-pyang】-你离yang模型只差一个pyang工具</a></p>
</blockquote>
<h3 id="netconf相关问题解决"><a href="#netconf相关问题解决" class="headerlink" title="netconf相关问题解决"></a>netconf相关问题解决</h3><blockquote>
<p><a href="https://github.com/CESNET/netopeer/issues/166">An error occurred after executing the ‘commit‘’ command</a></p>
<p><a href="https://github.com/CESNET/netopeer/issues/138">cannot execute lock&#x2F;unlock from netopeer-cli</a></p>
<p><a href="https://wiki.opendaylight.org/view/YANG_Tools:Yang1.1_Draft">YANG Tools:Yang1.1 Draft Yang Tools: Yang1.1 Draft</a></p>
<p><a href="https://github.com/CESNET/Netopeer2/issues/333">edit-config with delete&#x3D;”operation” not working</a></p>
</blockquote>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><blockquote>
<p><a href="https://tonydeng.github.io/rfc6241-zh/">关于RFC6241中文翻译</a></p>
<p><a href="https://www.bookstack.cn/read/rfc7950-zh/README.md">YANG 1.1 数据建模语言</a></p>
<p><a href="https://tonydeng.github.io/sdn-handbook/">网络基础</a></p>
<p><a href="https://tools.ietf.org/id/draft-ietf-netconf-netconf-event-notifications-05.html">NETCONF Support for Event Notifications</a></p>
<p><a href="https://tools.ietf.org/id/draft-ietf-netconf-subscribed-notifications-09.html">Custom Subscription to Event Streams</a></p>
<p><a href="https://wenku.baidu.com/view/6b812dbabe23482fb5da4c3f.html">YANG模型介绍及语法</a></p>
<p><a href="https://www.sdnlab.com/14932.html">SDN实战团分享（七）：YANG模型与OpenDaylight南北向接口</a></p>
<p><a href="http://rennesong.com/2019/07/13/yang-model-tuto/">深入浅出理解 YANG 模型</a></p>
<p><a href="https://www.cisco.com/c/zh_cn/support/docs/storage-networking/management/200933-YANG-NETCONF-Configuration-Validation.html">配置NETCONF&#x2F;YANG并且验证Cisco IOS XE 16.x平台的示例</a></p>
<p><a href="https://blog.csdn.net/csnd_pan/article/details/79542917">Yang解析</a></p>
<p><a href="https://support.huawei.com/enterprise/zh/doc/EDOC1000074862?section=j006">CloudEngine 7800&amp;6800&amp;5800 V100R003C00 配置指南-网络管理与监控配置</a></p>
<p><a href="https://support.huawei.com/enterprise/zh/doc/EDOC1100058323/d06526ed">NE20E-S2 V800R010C10SPC500 配置指南 - 系统管理 01</a></p>
<p><a href="https://kurisu.love/index.php/archives/155/">NETCONF 学习 – python</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Netconf</category>
      </categories>
      <tags>
        <tag>Netconf</tag>
      </tags>
  </entry>
  <entry>
    <title>sysrepo note</title>
    <url>/2020/09/23/Netconf/sysrepo-note/</url>
    <content><![CDATA[<h1 id="sysrepo"><a href="#sysrepo" class="headerlink" title="sysrepo"></a>sysrepo</h1><blockquote>
<p>sysrepo - 1.4.2 笔记</p>
</blockquote>
<h2 id="1-sysrepo-概述"><a href="#1-sysrepo-概述" class="headerlink" title="1. sysrepo 概述"></a>1. sysrepo 概述</h2><p><code>Sysrepo</code> 是 <code>Linux/Unix</code> 系统下一个基于 <code>YANG</code> 模型的配置和操作数据库，为应用程序提供统一的操作数据的接口。应用程序使用 <code>YANG</code> 模型来建模，通过利用 <code>YANG</code> 模型完成数据合法性的检查，保证的风格的一致，不需要应用程序直接操作配置文件的一种数据管理方式。</p>
<span id="more"></span>

<h3 id="1-1-基本特性与原则"><a href="#1-1-基本特性与原则" class="headerlink" title="1.1 基本特性与原则"></a>1.1 基本特性与原则</h3><ul>
<li><code>sysrepo</code> 只是一个库，不是一个独立的进程</li>
<li>全部的数据始终由 <code>Yang</code> 模型区分，这就可能造成许多严重的后果，例如，允许同时使用不同的模型进行工作，这将可 导致数据访问时异常。</li>
<li>在所有有 <code>IPC</code> 中使用共享内存的方式，取代了之前的 UNIX中进程间通信的方式，这样更高效，性能更优，扩展性更强</li>
<li>在 <code>sysrepo</code> 中几乎不存在 CPU 时间浪费，没有活动等待或者定期检查</li>
<li>完全可定制化的事件处理，从定期检查或者 <code>poll/select</code> 到自动线程处理</li>
<li>访问控制严格受制于文件系统的权限</li>
<li><code>sysrepo</code> 操作期间可以修改 <code>Yang</code> 模型</li>
</ul>
<h3 id="1-2-主要特点"><a href="#1-2-主要特点" class="headerlink" title="1.2 主要特点"></a>1.2 主要特点</h3><ul>
<li><code>sysrepo</code> 的主要功能是使用 <code>YANG</code> 模型对数据进行操作并订阅各种事件。但是，在执行任何操作时，都需要创建会话，连接会话，并要 <code>install</code> 所支持的各类 <code>Yang</code> 模型。假如设置了日志操作记录，<code>sysrepo</code> 在运行时，也可以保留它的行为记录。</li>
<li>通过 <code>Yang</code> 的 <code>xpath</code> 来修改与获取数据，所以要求了解 <code>xpath</code> 的基础知识。</li>
<li>最常见的操作订阅事件和修改订阅事件，订阅事件是允许应用程序根据特定的事件回调相应的数据执行，更改操作。操作执行成功后，会将对应配置操作保存，这样 <code>sysrepo</code> 可以充当更智能的配置文件，从而保证配置的可恢复性。</li>
<li>也支持 <code>Rpc/Action/Notify</code> 的订阅，这样可以通过执行特别的 <code>Rpc</code> ，就可以分别向其他 <code>sysrepo</code> 客户端通知各种生成的事件。</li>
</ul>
<h3 id="1-3-访问方法"><a href="#1-3-访问方法" class="headerlink" title="1.3 访问方法"></a>1.3 访问方法</h3><p>应用程序可以通过两种方法来访问 <code>sysrepo</code>，一种是直接的方法，即当应用程序需要配置数据或者执行相应的 <code>callback</code> 来响应配置变化时，可以通过 <code>sysrepo</code> 自带的应用程序来触发用 <code>sysrepo</code> 的功能函数来实现。这种方法一般用于开发人员自测或验证某个模块时使用；另一种是间接的方法，即应用程序通过创建 <code>Deamon</code> 进程的方法，该方法是通过将对 <code>sysrepo</code> 的调用转化为对应用程序的特定操作，该方法也最容易扩展，也无需为了使用 <code>sysrepo</code> 数据库而做相应的更改。如果有多个类似的 <code>Deamon</code> 进程，可以将这些进程合成一个 <code>plugind</code>，最后由一个进程统一纳管。可扩展性得到大大的提高。间接方法的使用如图所示：</p>
<img data-src="/2020/09/23/Netconf/sysrepo-note/sr_apps.png" class="" title="sr_apps">

<h3 id="1-4-数据库"><a href="#1-4-数据库" class="headerlink" title="1.4 数据库"></a>1.4 数据库</h3><p>数据库结构大多是遵循 <code>NMDA</code>（网络管理数据存储区体）所定义的体系架构。<code>sysrepo</code> 同样也不例外，<code>sysrepo</code> 中定义了四类数据库，分别是 <code>startup</code>，<code>running</code>，<code>candidate</code> 和 <code>operational</code>。</p>
<ol>
<li><code>startup</code> 库，是 <code>sysrepo</code> 中唯一的持久性数据存储库，它包含设备启动时的配置文件，系统启动后创建的第一个 <code>sysrepo</code> 连接（共享内存）时，会将配置文件从 <code>startup</code> 库 <code>copy</code> 到 <code>running</code> 库；</li>
<li><code>running</code> 数据库，是保存当前所运行时系统配置，当一个配置发生变化时并且设备需要重新配置时， <code>running</code> 数据库需要修改。系统重启时不会存在，如果需要，可以将配置 <code>copy</code> 到 <code>startup</code> 库。</li>
<li><code>candidate</code> 数据库，候选库，顾名思义，它是一个准备配置的数据但又不影响实际设备使用。虽然该库中的数据不限制设备的正常使用，可以不必严格按照 NETCONF协议的定义，但也是需要遵循一般的数据存储规则。该库正常是无效的，实际使用时，需要将该库 <code>mirror</code> 到 <code>running</code>，由 <code>running</code> 完成修改和配置下发，最后通过 <code>sr_copy_config()</code>, 将 <code>candidate</code> 库重置。整个会话的过程中可能需要相应的 <code>lock</code> 操作，来保证操作的一致与完整性。</li>
<li><code>operational</code> 库，维护当前使用的配置，并且该库只可读。它通常与对应的 <code>running</code> 库有所不同，而且，只包含任何状态数据结点。在默认的情况下，该库是空的，对于用户来说，全部的订阅数据和操作数据都存储于 <code>operational</code> 库中。并且 <code>Notificationg RPC/Action</code> 数据的校验都是在 <code>operational</code> 库是完成。</li>
</ol>
<h3 id="1-5-运行模式"><a href="#1-5-运行模式" class="headerlink" title="1.5 运行模式"></a>1.5 运行模式</h3><ul>
<li>对于连接与会话来说，会话是不同步的，所以不会在多个线程中共享一个会话。每个线程都需要建立属于自己的会话，来确保本线程运行的正确。</li>
<li>对于订阅来说，可以由应用程序对感兴趣的事件通过 <code>*_subscribe()</code> 函数来做相应的订阅。订阅在原则上是将全部的的事件一并处理，应用程序也可以将根据不同的事件类型拆分成多个不同的订阅，用于保证事件的并发处理。</li>
<li>每个订阅可以由不同的方式处理，这个由 <code>sysrepo</code> 做统一管理。<code>sysrepo</code> 创建一个单独的线程来捕获各种订阅事件的发生，然后通过订阅所注册的回调函数不处理它们。</li>
</ul>
<h2 id="2-sysrepo-常用操作命令"><a href="#2-sysrepo-常用操作命令" class="headerlink" title="2. sysrepo 常用操作命令"></a>2. sysrepo 常用操作命令</h2><p><code>sysrepo</code> 提供两个独立的，非常实用的程序。方便开发者便捷地使用 <code>sysrepo</code> 来开发与调试自己的应用。</p>
<h3 id="2-1-Sysrepoctl"><a href="#2-1-Sysrepoctl" class="headerlink" title="2.1 Sysrepoctl"></a>2.1 Sysrepoctl</h3><p><code>sysrepoctl</code>，它用于列出，安装，卸载或更新 <code>sysrepo</code> 模块，也能用于修改一个 <code>sysrepo</code> 模块的特性，权限等。开发过程中经常使用的命令如下</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">列出全部已经安装在 sysrepo 中的 Yang 模块，并包含模块的基本信息</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl -l, --list</span>     </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如：</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl -l</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装指定 Yang 模型</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl -i， --install</span>  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如：</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">以默认权限安装 ietf-interfaces.yang 模型</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --install /root/ietf-interfaces.yang</span>  </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">为特定 admin 用户安装可访问权限为 644 的 ietf-interfaces.yang 模型</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --install /root/ietf-interfaces.yang --owner=admin:admin --permissions=644</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">卸载已安装的 Yang 模型</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl -u, --uninstall</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如：</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --uninstall ietf-interfaces</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改 Yang 模型，常用的是设置模型支持的特性</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl -c, --chang</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如：</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --change ietf-interfaces --(<span class="built_in">disable</span>|<span class="built_in">enable</span>)-feature if-mib</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">更新 Yang 模型，如果已安装的 Yang 模型有更新，可以执行该命令</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl -U, --update</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如：</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepoctl --update /root/ietf-netconf@2013-09-29.yang</span></span><br></pre></td></tr></table></figure>

<p>更多 <code>sysrepoctl</code> 的使用，请参考 <code>sysrepoctl -h</code>。</p>
<h3 id="2-2-sysrepocfg"><a href="#2-2-sysrepocfg" class="headerlink" title="2.2 sysrepocfg"></a>2.2 sysrepocfg</h3><p><code>sysrepocfg</code> 是用于 <code>importing</code>，<code>exporting</code>，<code>editing</code>，<code>replacing</code> 配置到指定的数据库中。命令默认是操作 <code>running</code> 库，也支持多种数据格式，<code>json</code> , <code>xml</code> , <code>lyb</code> ，除非通过 <code>–format</code> 特定指出，默认的采用 <code>xml</code> 格式。常用的命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">导入一个配置</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg -I, --import[=]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如：</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将 ietf-interfaces 配置导入默认 running 下的 ietf-interfaces 模块</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --import=/root/ietf-interfaces.xml</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将 json 格式的 ietf-interfaces 配置导入 startup 的 ietf-interfaces 模块</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --import=/root/ietf-interfaces_startup.json --datastore startup --module ietf-interfaces</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">导出一个配置</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg -X, --<span class="built_in">export</span>[=]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如：</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将 running 库 ietf-interfaces 的配置 xml 的格式导入，并以 ietf-interfaces_running.xml 名字命令配置文件</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --<span class="built_in">export</span>=ietf-interfaces_running.xml --format xml --module ietf-interfaces</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编辑或修改配置文件，应用到指定的数据库</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg -E, --edit[=/]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如：</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --edit=candidate.xml --datastore candidate</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果是修改 running 库，需要加相应的锁</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --edit=vim --lock</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">发一个 RPC 请求，RPC 返回的结果直接输出于终端</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg -R, --rpc[=/]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如：</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sysrepocfg --rpc=vim</span></span><br></pre></td></tr></table></figure>

<p>更多 <code>sysrepocfg</code> 的使用，请参考 <code>sysrepocfg -h</code>。</p>
<h2 id="3-sysrepo-plugind-源码分析"><a href="#3-sysrepo-plugind-源码分析" class="headerlink" title="3. sysrepo-plugind 源码分析"></a>3. sysrepo-plugind 源码分析</h2><p>应用程序通过将对 <code>sysrepo</code> 的调用通过 <code>sysrepo</code> 提供的相应的 API接口访问方法，称为 <code>syrepo</code> 的间接访问方法。该方法是应用程序通过创建 Deamon进程，通过 <code>IPC Shm</code> 机制与 <code>sysrepo</code> 通信。可以做到对 <code>sysrepo</code> 的即插即用，最后由 <code>sysrepo</code> 纳管，这就是 <code>Plugind</code>，命名为 <code>sysrepo-plugind</code>。要快速的使用 <code>sysrepo</code>，并快速开发出适配于 <code>sysrepo</code> 的插件，就要先了解 <code>sysrepo-plugind</code> 的实现原理与机制，就需要先从实现 <code>sysrepo-plugind</code> 的源码处着手。<code>sysrepo</code> 源码路径：<code>git clone https://github.com/sysrepo/sysrepo.git</code> 。 <code>Sysrepo-plugind</code> 实现的路径为 <code>sysrepo/src/executables/sysrepo-plugind.c</code> 。下面也就从该文件开始说。</p>
<h3 id="3-1-数据结构"><a href="#3-1-数据结构" class="headerlink" title="3.1 数据结构"></a>3.1 数据结构</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">srpd_plugin_s</span> &#123;</span><br><span class="line">    <span class="type">void</span> *handle;</span><br><span class="line">    <span class="type">srp_init_cb_t</span> init_cb;</span><br><span class="line">    <span class="type">srp_cleanup_cb_t</span> cleanup_cb;</span><br><span class="line">    <span class="type">void</span> *private_data;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/*结构参数说明*/</span></span><br><span class="line">handle: 动态库句柄,在load_plugin中细说</span><br><span class="line"> </span><br><span class="line"><span class="type">srp_init_cb_t</span>:</span><br><span class="line"><span class="comment">/*Sysrepo plugin initialization callback.*/</span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span> <span class="params">(*<span class="type">srp_init_cb_t</span>)</span><span class="params">(<span class="type">sr_session_ctx_t</span> *session, <span class="type">void</span> **private_data)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="type">srp_cleanup_cb_t</span> :</span><br><span class="line"><span class="comment">/*brief Sysrepo plugin cleanup callback.*/</span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*<span class="type">srp_cleanup_cb_t</span>)</span><span class="params">(<span class="type">sr_session_ctx_t</span> *session, <span class="type">void</span> *private_data)</span></span>;</span><br><span class="line"> </span><br><span class="line">private_data:  Private context opaque to sysrepo</span><br></pre></td></tr></table></figure>

<h3 id="3-2-main-函数实现"><a href="#3-2-main-函数实现" class="headerlink" title="3.2 main 函数实现"></a>3.2 main 函数实现</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">srpd_plugin_s</span> *plugins = <span class="literal">NULL</span>;       <span class="comment">/*plugin结构*/</span></span><br><span class="line">    <span class="type">sr_conn_ctx_t</span> *conn = <span class="literal">NULL</span>;                 <span class="comment">/*sysrepo连接的上下文，该结构定义于common.h.in*/</span></span><br><span class="line">    <span class="type">sr_session_ctx_t</span> *sess = <span class="literal">NULL</span>;              <span class="comment">/*sysrepo会话的上下文，该结构定义于common.h.in中*/</span></span><br><span class="line">    <span class="type">sr_log_level_t</span> log_level = SR_LL_ERR;       <span class="comment">/*输出log等级，默认是ERR*/</span></span><br><span class="line">    <span class="type">int</span> plugin_count = <span class="number">0</span>, i, r, rc = EXIT_FAILURE, opt, debug = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">option</span> options[] = &#123;</span><br><span class="line">        &#123;<span class="string">&quot;help&quot;</span>,      no_argument,       <span class="literal">NULL</span>, <span class="string">&#x27;h&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;version&quot;</span>,   no_argument,       <span class="literal">NULL</span>, <span class="string">&#x27;V&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;verbosity&quot;</span>, required_argument, <span class="literal">NULL</span>, <span class="string">&#x27;v&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;debug&quot;</span>,     no_argument,       <span class="literal">NULL</span>, <span class="string">&#x27;d&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="literal">NULL</span>,        <span class="number">0</span>,                 <span class="literal">NULL</span>, <span class="number">0</span>&#125;,</span><br><span class="line">    &#125;;                                          <span class="comment">/*命令行支持的参数*/</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* process options */</span></span><br><span class="line">    opterr = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/*整个while循环是解析命令的参数，例如，在调试时，输入“sysrepo-plugind -d -v 4” 是debug模式        </span></span><br><span class="line"><span class="comment">     *下log级别DBG级，将会打印全部的调试信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">while</span> ((opt = <span class="built_in">getopt_long</span>(argc, argv, <span class="string">&quot;hVv:d&quot;</span>, options, <span class="literal">NULL</span>)) != <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (opt) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;h&#x27;</span>:</span><br><span class="line">            <span class="built_in">version_print</span>();</span><br><span class="line">            <span class="built_in">help_print</span>();</span><br><span class="line">            rc = EXIT_SUCCESS;</span><br><span class="line">            <span class="keyword">goto</span> cleanup;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;V&#x27;</span>:</span><br><span class="line">            <span class="built_in">version_print</span>();</span><br><span class="line">            rc = EXIT_SUCCESS;</span><br><span class="line">            <span class="keyword">goto</span> cleanup;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;v&#x27;</span>:</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(optarg, <span class="string">&quot;none&quot;</span>)) &#123;</span><br><span class="line">                log_level = SR_LL_NONE;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(optarg, <span class="string">&quot;error&quot;</span>)) &#123;</span><br><span class="line">                log_level = SR_LL_ERR;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(optarg, <span class="string">&quot;warning&quot;</span>)) &#123;</span><br><span class="line">                log_level = SR_LL_WRN;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(optarg, <span class="string">&quot;info&quot;</span>)) &#123;</span><br><span class="line">                log_level = SR_LL_INF;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(optarg, <span class="string">&quot;debug&quot;</span>)) &#123;</span><br><span class="line">                log_level = SR_LL_DBG;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((<span class="built_in">strlen</span>(optarg) == <span class="number">1</span>) &amp;&amp; (optarg[<span class="number">0</span>] &gt;= <span class="string">&#x27;0&#x27;</span>) &amp;&amp; (optarg[<span class="number">0</span>] &lt;= <span class="string">&#x27;4&#x27;</span>)) &#123;</span><br><span class="line">                log_level = <span class="built_in">atoi</span>(optarg);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">error_print</span>(<span class="number">0</span>, <span class="string">&quot;Invalid verbosity \&quot;%s\&quot;&quot;</span>, optarg);</span><br><span class="line">                <span class="keyword">goto</span> cleanup;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">            debug = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="built_in">error_print</span>(<span class="number">0</span>, <span class="string">&quot;Invalid option or missing argument: -%c&quot;</span>, optopt);</span><br><span class="line">            <span class="keyword">goto</span> cleanup;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* check for additional argument */</span></span><br><span class="line">    <span class="keyword">if</span> (optind &lt; argc) &#123;</span><br><span class="line">        <span class="built_in">error_print</span>(<span class="number">0</span>, <span class="string">&quot;Redundant parameters&quot;</span>);</span><br><span class="line">        <span class="keyword">goto</span> cleanup;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* load plugins：将所有的pluginl加载，这是整个main第一处核心点，这关系用户开发的plugin能否正确加载*/</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">load_plugins</span>(&amp;plugins, &amp;plugin_count)) &#123;</span><br><span class="line">        <span class="keyword">goto</span> cleanup;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* daemonize, sysrepo-plugind no longer directly logs to stderr */</span></span><br><span class="line">    <span class="built_in">daemon_init</span>(debug, log_level);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* create connection (after we have forked so that our PID is correct) */</span></span><br><span class="line">    <span class="comment">/*调用sysrepo API(sr_connect)创建与sysrepo的连接，并将返回创建连接的上下发*/</span></span><br><span class="line">    <span class="keyword">if</span> ((r = <span class="built_in">sr_connect</span>(<span class="number">0</span>, &amp;conn)) != SR_ERR_OK) &#123;</span><br><span class="line">        <span class="built_in">error_print</span>(r, <span class="string">&quot;Failed to connect&quot;</span>);</span><br><span class="line">        <span class="keyword">goto</span> cleanup;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* create session */</span></span><br><span class="line">    <span class="comment">/*调用sysrepo API(sr_session_start)创建与sysrepo running库的会话，并启动该会话*/</span></span><br><span class="line">    <span class="keyword">if</span> ((r = <span class="built_in">sr_session_start</span>(conn, SR_DS_RUNNING, &amp;sess)) != SR_ERR_OK) &#123;</span><br><span class="line">        <span class="built_in">error_print</span>(r, <span class="string">&quot;Failed to start new session&quot;</span>);</span><br><span class="line">        <span class="keyword">goto</span> cleanup;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*sr_connect(), sr_session_start(),是连接sysrepo基础，这两点基础实现，在后面sysrepo源码 </span></span><br><span class="line"><span class="comment">     *分析做详细说明，不在sysrepo-plugin中说明</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* init plugins */</span></span><br><span class="line">    <span class="comment">/*对所有已加载的plugin通过调用init_cb注册的回调初始化，这是整个main第二处核心点，与用户是强 </span></span><br><span class="line"><span class="comment">     *相关用户开发的插件，注册，订阅，初始化都通过init_cb，否则不能将sysrepol通信连接*/</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; plugin_count; ++i) &#123;</span><br><span class="line">        r = plugins[i].<span class="built_in">init_cb</span>(sess, &amp;plugins[i].private_data);</span><br><span class="line">        <span class="keyword">if</span> (r != SR_ERR_OK) &#123;</span><br><span class="line">            <span class="built_in">SRP_LOG_ERR</span>(<span class="string">&quot;Plugin initialization failed (%s).&quot;</span>, <span class="built_in">sr_strerror</span>(r));</span><br><span class="line">            <span class="keyword">goto</span> cleanup;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* wait for a terminating signal */</span></span><br><span class="line">    <span class="built_in">pthread_mutex_lock</span>(&amp;lock);</span><br><span class="line">    <span class="keyword">while</span> (!loop_finish) &#123;</span><br><span class="line">        <span class="built_in">pthread_cond_wait</span>(&amp;cond, &amp;lock);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">pthread_mutex_unlock</span>(&amp;lock);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* cleanup plugins */</span></span><br><span class="line">    <span class="comment">/* sysrepo-plugindf正常结束后，回收plugin初始化时分配的资源*/</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; plugin_count; ++i) &#123;</span><br><span class="line">        plugins[i].<span class="built_in">cleanup_cb</span>(sess, plugins[i].private_data);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* success */</span></span><br><span class="line">    rc = EXIT_SUCCESS;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/*结束后，回收已分配的全部资源*/</span></span><br><span class="line">cleanup:</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; plugin_count; ++i) &#123;</span><br><span class="line">        <span class="built_in">dlclose</span>(plugins[i].handle);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(plugins);</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">sr_disconnect</span>(conn);</span><br><span class="line">    <span class="keyword">return</span> rc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-load-plugins"><a href="#3-3-load-plugins" class="headerlink" title="3.3 load_plugins"></a>3.3 load_plugins</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">static</span> <span class="type">int</span></span></span><br><span class="line"><span class="function"><span class="title">load_plugins</span><span class="params">(<span class="keyword">struct</span> srpd_plugin_s **plugins, <span class="type">int</span> *plugin_count)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">void</span> *mem, *handle;</span><br><span class="line">    DIR *dir;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">dirent</span> *ent;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *plugins_dir;</span><br><span class="line">    <span class="type">char</span> *path;</span><br><span class="line">    <span class="type">int</span> rc = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">    *plugins = <span class="literal">NULL</span>;</span><br><span class="line">    *plugin_count = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* get plugins dir from environment variable, or use default one */</span></span><br><span class="line">    <span class="comment">/* bin_common.h.in #define SRPD_PLUGINS_PATH &quot;@PLUGINS_PATH@&quot;</span></span><br><span class="line"><span class="comment">     * @PLUGINS_PATH@在CMakeList.txt中定义，在编译时也可以自定义</span></span><br><span class="line"><span class="comment">     * CMakeList.txt对其定义如下</span></span><br><span class="line"><span class="comment">     * if(NOT PLUGINS_PATH)</span></span><br><span class="line"><span class="comment">     * set(PLUGINS_PATH             </span></span><br><span class="line"><span class="comment">     *    &quot;$&#123;CMAKE_INSTALL_PREFIX&#125;/$&#123;CMAKE_INSTALL_LIBDIR&#125;/sysrepo/plugins/&quot; CACHE PATH</span></span><br><span class="line"><span class="comment">     *   &quot;Sysrepo plugin daemon plugins path.&quot;)</span></span><br><span class="line"><span class="comment">     *   endif()</span></span><br><span class="line"><span class="comment">     *  用户不指定plugin的路径时，debian系统默认将plugin的动态库文件*.so安装 </span></span><br><span class="line"><span class="comment">     *    于/usr/lib/x86_64-linux-gnu/sysrepo/plugins/目录下，</span></span><br><span class="line"><span class="comment">     *  而Centos系统的默认安装路径为/usr/lib/sysrepo/plugins，在开发plugind时，安装路径也需要 </span></span><br><span class="line"><span class="comment">     *  指定到该路径下，否则，*.so找不到，则load不成功。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    plugins_dir = <span class="built_in">getenv</span>(<span class="string">&quot;SRPD_PLUGINS_PATH&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!plugins_dir) &#123;</span><br><span class="line">        plugins_dir = SRPD_PLUGINS_PATH;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* create the directory if it does not exist */</span></span><br><span class="line">    <span class="comment">/* access函数，:检查调用进程是否可以对指定的文件执行某种操作， F_OK文件是否存在</span></span><br><span class="line"><span class="comment">     * 本段代码是检测SRPD_PLUGINS_PATH目录是否存在，如果不存在，调用sr_mkpath创建目录，并设置*            </span></span><br><span class="line"><span class="comment">     * 目录的访问权限000777。本段代码是安全性代码，确保指定的路径存在。对于实际开发中，是通过编 </span></span><br><span class="line"><span class="comment">     * 译是指定，不存在路径的动态库无法安装。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">access</span>(plugins_dir, F_OK) == <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (errno != ENOENT) &#123;</span><br><span class="line">            <span class="built_in">error_print</span>(<span class="number">0</span>, <span class="string">&quot;Checking plugins dir existence failed (%s).&quot;</span>, <span class="built_in">strerror</span>(errno));</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">sr_mkpath</span>(plugins_dir, <span class="number">00777</span>) == <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="built_in">error_print</span>(<span class="number">0</span>, <span class="string">&quot;Creating plugins dir \&quot;%s\&quot; failed (%s).&quot;</span>, plugins_dir, <span class="built_in">strerror</span>(errno));</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* opendir函数，找开指定的目录文件，并返回DIR*形态的目录流，</span></span><br><span class="line"><span class="comment">     * 目录的读取与搜查也都需要此目录流 </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    dir = <span class="built_in">opendir</span>(plugins_dir);</span><br><span class="line">    <span class="keyword">if</span> (!dir) &#123;</span><br><span class="line">        <span class="built_in">error_print</span>(<span class="number">0</span>, <span class="string">&quot;Opening \&quot;%s\&quot; directory failed (%s).&quot;</span>, plugins_dir, <span class="built_in">strerror</span>(errno));</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*readdir函数，读取目录，返回参数dir目录流的下个目录进入点</span></span><br><span class="line"><span class="comment">     * 返回的结果是struct dirent的内容*/</span></span><br><span class="line">    <span class="keyword">while</span> ((ent = <span class="built_in">readdir</span>(dir))) &#123;</span><br><span class="line">        <span class="comment">/*Linux系统中存在&quot;.&quot; &quot;..&quot;两类目录，这两类目录名结构，在实际是不需要使用，需要跳过。*/</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(ent-&gt;d_name, <span class="string">&quot;.&quot;</span>) || !<span class="built_in">strcmp</span>(ent-&gt;d_name, <span class="string">&quot;..&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* open the plugin */</span></span><br><span class="line">        <span class="comment">/*将SRPD_PLUGINS_PATH与也读取的目录文件名，组成一个完成的动态库路径，供后面操作。*/</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">asprintf</span>(&amp;path, <span class="string">&quot;%s/%s&quot;</span>, plugins_dir, ent-&gt;d_name) == <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="built_in">error_print</span>(<span class="number">0</span>, <span class="string">&quot;asprintf() failed (%s).&quot;</span>, <span class="built_in">strerror</span>(errno));</span><br><span class="line">            rc = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/*RTLD_LAZY:暂缓决定，等有需要时再解出符号 </span></span><br><span class="line"><span class="comment">         *以RTLD_LAZY模式打开动态库，返回一个句柄给调用进程，如果失败，则返回。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        handle = <span class="built_in">dlopen</span>(path, RTLD_LAZY);</span><br><span class="line">        <span class="keyword">if</span> (!handle) &#123;</span><br><span class="line">            <span class="built_in">error_print</span>(<span class="number">0</span>, <span class="string">&quot;Opening plugin \&quot;%s\&quot; failed (%s).&quot;</span>, path, <span class="built_in">dlerror</span>());</span><br><span class="line">            <span class="built_in">free</span>(path);</span><br><span class="line">            rc = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">free</span>(path);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* allocate new plugin */</span></span><br><span class="line">        <span class="comment">/* 分配一个新的plugin空间，并将新分配的men挂载plugins结构下*/</span></span><br><span class="line">        mem = <span class="built_in">realloc</span>(*plugins, (*plugin_count + <span class="number">1</span>) * <span class="keyword">sizeof</span> **plugins);</span><br><span class="line">        <span class="keyword">if</span> (!mem) &#123;</span><br><span class="line">            <span class="built_in">error_print</span>(<span class="number">0</span>, <span class="string">&quot;realloc() failed (%s).&quot;</span>, <span class="built_in">strerror</span>(errno));</span><br><span class="line">            <span class="built_in">dlclose</span>(handle);</span><br><span class="line">            rc = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        *plugins = mem;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">/* find required functions */</span></span><br><span class="line">        <span class="comment">/* plugins结构中有两个必须的回调函数，一个是init_cb,另一个是cleanup_cb</span></span><br><span class="line"><span class="comment">         * 通过 void *dlsym(void *handle, const char* symbol);，</span></span><br><span class="line"><span class="comment">         * handle是使用dlopen函数之后返回的句柄，</span></span><br><span class="line"><span class="comment">         * symbol是要求获取的函数的名称。</span></span><br><span class="line"><span class="comment">         * SRP_INIT_CB定义如下：#define SRP_INIT_CB     &quot;sr_plugin_init_cb&quot;</span></span><br><span class="line"><span class="comment">         * SRP_CLEANUP_CB定义下：#define SRP_CLEANUP_CB  &quot;sr_plugin_cleanup_cb&quot;</span></span><br><span class="line"><span class="comment">         * 此两个CB函数，也就是在开发插件中必须实现的两个入口函数，如果不存在，则加载失败。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        *(<span class="type">void</span> **)&amp;(*plugins)[*plugin_count].init_cb = <span class="built_in">dlsym</span>(handle, SRP_INIT_CB);</span><br><span class="line">        <span class="keyword">if</span> (!(*plugins)[*plugin_count].init_cb) &#123;</span><br><span class="line">            <span class="built_in">error_print</span>(<span class="number">0</span>, <span class="string">&quot;Failed to find function \&quot;%s\&quot; in plugin \&quot;%s\&quot;.&quot;</span>, SRP_INIT_CB, ent-&gt;d_name);</span><br><span class="line">            <span class="built_in">dlclose</span>(handle);</span><br><span class="line">            rc = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        *(<span class="type">void</span> **)&amp;(*plugins)[*plugin_count].cleanup_cb = <span class="built_in">dlsym</span>(handle, SRP_CLEANUP_CB);</span><br><span class="line">        <span class="keyword">if</span> (!(*plugins)[*plugin_count].cleanup_cb) &#123;</span><br><span class="line">            <span class="built_in">error_print</span>(<span class="number">0</span>, <span class="string">&quot;Failed to find function \&quot;%s\&quot; in plugin \&quot;%s\&quot;.&quot;</span>, SRP_CLEANUP_CB, ent-&gt;d_name);</span><br><span class="line">            <span class="built_in">dlclose</span>(handle);</span><br><span class="line">            rc = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* finally store the plugin */</span></span><br><span class="line">        <span class="comment">/*最后，本次so解析成功，保存本次so的解析结果，执行一下次目录文件的读取*/</span></span><br><span class="line">        (*plugins)[*plugin_count].handle = handle;</span><br><span class="line">        (*plugins)[*plugin_count].private_data = <span class="literal">NULL</span>;</span><br><span class="line">        ++(*plugin_count);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*目录文件读取结束，关闭目录读取流，返回的参考中有插件结构plugins。*/</span></span><br><span class="line">    <span class="built_in">closedir</span>(dir);</span><br><span class="line">    <span class="keyword">return</span> rc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-init-cb"><a href="#3-4-init-cb" class="headerlink" title="3.4 init_cb"></a>3.4 init_cb</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// srpd_plugin_s 结构中定义了 init 的回调函数</span></span><br><span class="line"><span class="comment">// 如下：</span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span> <span class="params">(*<span class="type">srp_init_cb_t</span>)</span><span class="params">(<span class="type">sr_session_ctx_t</span> *session, <span class="type">void</span> **private_data)</span></span>;</span><br><span class="line"><span class="comment">// 在 load plugin 时，</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SRP_INIT_CB     <span class="string">&quot;sr_plugin_init_cb&quot;</span></span></span><br><span class="line">init_cb = <span class="built_in">dlsym</span>(handle, SRP_INIT_CB);</span><br><span class="line"><span class="comment">// 在 sysrepo-plugind 的 main 实现时，需要对 plugin 的初始化，实际就是需要用户对sr_plugin_init_cb() 实现，是完成该 plugin 的资源分配，用户感兴趣的事情做订阅，Ｍodule change RPC/Action, Notify, get——items 等操作，均在此处完成。有如下例子，请参考。</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sr_plugin_init_cb</span><span class="params">(<span class="type">sr_session_ctx_t</span> *session, <span class="type">void</span> **private_ctx)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> rc;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">plugind_ctx</span> *ctx;</span><br><span class="line">    ctx = <span class="built_in">calloc</span>(<span class="number">1</span>, <span class="keyword">sizeof</span> *ctx);</span><br><span class="line">    <span class="keyword">if</span> (!ctx) </span><br><span class="line">    &#123;</span><br><span class="line">        rc = SR_ERR_NOMEM;</span><br><span class="line">        <span class="keyword">goto</span> error;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/*在下面初始与之有关的操作，例如，本地数据结构的初始化，sysrepo的订阅初始化*/</span></span><br><span class="line">    ...</span><br><span class="line">  </span><br><span class="line">    <span class="built_in">SRP_LOG_DBGMSG</span>(<span class="string">&quot;plugin initialized successfully.&quot;</span>);</span><br><span class="line">    ctx-&gt;session = session;</span><br><span class="line">    *private_ctx = ctx;</span><br><span class="line">    <span class="keyword">return</span> SR_ERR_OK;</span><br><span class="line"> </span><br><span class="line">error:</span><br><span class="line">    <span class="built_in">SRP_LOG_ERR</span>(<span class="string">&quot;plugin initialization failed (%s).&quot;</span>, <span class="built_in">sr_strerror</span>(rc));</span><br><span class="line">    <span class="built_in">sr_unsubscribe</span>(ctx-&gt;subscription);</span><br><span class="line">    <span class="built_in">free</span>(ctx);</span><br><span class="line">    <span class="keyword">return</span> rc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-5-cleanup-cb"><a href="#3-5-cleanup-cb" class="headerlink" title="3.5 cleanup_cb"></a>3.5 cleanup_cb</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// srpd_plugin_s 结构中定义了 cleanup 的回调函数</span></span><br><span class="line"><span class="comment">// 如下：</span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*<span class="type">srp_cleanup_cb_t</span>)</span><span class="params">(<span class="type">sr_session_ctx_t</span> *session, <span class="type">void</span> *private_data)</span></span>;</span><br><span class="line"><span class="comment">// 在 load plugin 时，</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SRP_CLEANUP_CB  <span class="string">&quot;sr_plugin_cleanup_cb&quot;</span></span></span><br><span class="line">cleanup_cb = <span class="built_in">dlsym</span>(handle, SRP_CLEANUP_CB);</span><br><span class="line"><span class="comment">// 所以，对于用户来就，是需要对 sr_plugin_cleanup_cb() 实现，回收 plugin 在初始化时分配的资源。例如下面的 cleanup 实现，可以参考</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">sr_plugin_cleanup_cb</span><span class="params">(<span class="type">sr_session_ctx_t</span> *session, <span class="type">void</span> *private_ctx)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    (<span class="type">void</span>)session;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">plugind_ctx</span> *ctx = (<span class="keyword">struct</span> plugind_ctx *)private_ctx;</span><br><span class="line">    <span class="built_in">sr_unsubscribe</span>(ctx-&gt;subscription);</span><br><span class="line">    <span class="built_in">free</span>(ctx);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">nb_terminate</span>();</span><br><span class="line">    <span class="built_in">yang_terminate</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">SRP_LOG_DBGMSG</span>(<span class="string">&quot;plugin cleanup finished.&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>整个 <code>sysrepo-plugind.c</code> 代码结构简单，注释丰富，没有使用复杂的语法，还是非常容易理解的。</p>
<h2 id="4-sysrepo-连接与会话"><a href="#4-sysrepo-连接与会话" class="headerlink" title="4. sysrepo 连接与会话"></a>4. sysrepo 连接与会话</h2><h3 id="4-1-何为连接与会话"><a href="#4-1-何为连接与会话" class="headerlink" title="4.1 何为连接与会话"></a>4.1 何为连接与会话</h3><p>开发者要开始使用 <code>sysrepo</code> ，首先必须创建一个连接。一个应用程序或者进程即使可以允许创建多个连接，但是一般情况只会创建一个连接。<code>sysrepo</code> 允许同时创建多个连接。简单的举个例子，通常情况下，<code>sysrepo-plugin</code> 在 <code>init_cb</code> 初始时就会创建一个连接，这是一个由 <code>sysrepo-plugin</code> 与 <code>sysrepo</code> 所创建的连接，只要发生异常不释放，该连接会一直存在整个 <code>sysrepo-plugin</code> 进程的生命周期，此外，例如用户通过 <code>sysrepoctl -l |grep ***</code>  看某个 <code>Yang</code> 模型是否已经加载，<code>sysrepoctl</code> 应用程序也创建一个短连接，该连接在命令执行结束后立即释放，假如是极端修改，不释放该连接，再使用 <code>sysrepocfg</code> 来配置 <code>runing</code> 库，这时有 3 个与 <code>sysrepo</code> 连接。并且 3 个连接不干扰，也不影响 <code>sysrepo</code> 的正常工作。</p>
<p>而会话，是建立在连接之下，一个连接下可以创建多个会话，每个会话都有一个唯一的标识，每个会话总是可以选择一个可随时更改的数据库，使用些会话的所有 API 调用都将在该数据库下操作。</p>
<p>连接与会话的关系如下所示，可能不是特别准备，但大概就是这个意思。</p>
<img data-src="/2020/09/23/Netconf/sysrepo-note/connect_session.png" class="" title="连接与会话关系">

<h3 id="4-2-核心数据结构"><a href="#4-2-核心数据结构" class="headerlink" title="4.2 核心数据结构"></a>4.2 核心数据结构</h3><p><code>connection</code> 的数据结构主要是存储 <code>sysrepo</code> 连接与 <code>Libyang</code> 的上下文，该连接所创建的共享内存结构。数据结构定义如下</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief Sysrepo connection.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">sr_conn_ctx_s</span> &#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">ly_ctx</span> *ly_ctx;          <span class="comment">/**&lt; Libyang context, also available to user. */</span></span><br><span class="line">    <span class="type">sr_conn_options_t</span> opts;         <span class="comment">/**&lt; Connection options. */</span></span><br><span class="line">    sr_diff_check_cb diff_check_cb; <span class="comment">/**&lt; Connection user diff check callback. */</span></span><br><span class="line"> </span><br><span class="line">    <span class="type">pthread_mutex_t</span> ptr_lock;       <span class="comment">/**&lt; Session-shared lock for accessing pointers to sessions. */</span></span><br><span class="line">    <span class="type">sr_session_ctx_t</span> **sessions;    <span class="comment">/**&lt; Array of sessions for this connection. */</span></span><br><span class="line">    <span class="type">uint32_t</span> session_count;         <span class="comment">/**&lt; Session count. */</span></span><br><span class="line"> </span><br><span class="line">    <span class="type">int</span> main_create_lock;           <span class="comment">/**&lt; Process-shared file lock for creating main/ext SHM. */</span></span><br><span class="line">    <span class="type">sr_rwlock_t</span> ext_remap_lock;     <span class="comment">/**&lt; Session-shared lock for remapping ext SHM. */</span></span><br><span class="line">    <span class="type">sr_shm_t</span> main_shm;              <span class="comment">/**&lt; Main SHM structure. */</span></span><br><span class="line">    <span class="type">sr_shm_t</span> ext_shm;               <span class="comment">/**&lt; External SHM structure (all stored offsets point here). */</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">sr_mod_cache_s</span> &#123;</span><br><span class="line">        <span class="type">sr_rwlock_t</span> lock;           <span class="comment">/**&lt; Session-shared lock for accessing the module cache. */</span></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">lyd_node</span> *data;      <span class="comment">/**&lt; Data of all cached modules, */</span></span><br><span class="line"> </span><br><span class="line">        <span class="keyword">struct</span> &#123;</span><br><span class="line">            <span class="type">const</span> <span class="keyword">struct</span> <span class="title class_">lys_module</span> *ly_mod;    <span class="comment">/**&lt; Libyang module in the cache. */</span></span><br><span class="line">            <span class="type">uint32_t</span> ver;           <span class="comment">/**&lt; Version of the module data in the cache, 0 is not valid */</span></span><br><span class="line">        &#125; *mods;                    <span class="comment">/**&lt; Array of cached modules. */</span></span><br><span class="line">        <span class="type">uint32_t</span> mod_count;         <span class="comment">/**&lt; Cached modules count. */</span></span><br><span class="line">    &#125; mod_cache;                    <span class="comment">/**&lt; Module running data cache. */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>cache</code> 需要特别说明：如果一个会话工作在 <code>running</code> 的数据库下操作，并且该会话的连接使能 <code>cache</code> 功能，则不会每次都从 <code>sysrepo</code> 中加载数据，可以从 <code>cache</code> 中复制数据，这样，可以大幅度提高 <code>sysrepo</code> 的处理性能。</p>
<p><code>session</code> 的主要数据结构</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief Sysrepo session.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">sr_session_ctx_s</span> &#123;</span><br><span class="line">    <span class="type">sr_conn_ctx_t</span> *conn;            <span class="comment">/**&lt; Connection used for creating this session. */</span></span><br><span class="line">    <span class="type">sr_datastore_t</span> ds;              <span class="comment">/**&lt; Datastore of the session. */</span></span><br><span class="line">    <span class="type">sr_sub_event_t</span> ev;              <span class="comment">/**&lt; Event of a callback session. ::SR_EV_NONE for standard user sessions. */</span></span><br><span class="line">    <span class="type">sr_sid_t</span> sid;                   <span class="comment">/**&lt; Session information. */</span></span><br><span class="line">    <span class="type">sr_error_info_t</span> *err_info;      <span class="comment">/**&lt; Session error information. */</span></span><br><span class="line"> </span><br><span class="line">    <span class="type">pthread_mutex_t</span> ptr_lock;       <span class="comment">/**&lt; Lock for accessing pointers to subscriptions. */</span></span><br><span class="line">    <span class="type">sr_subscription_ctx_t</span> **subscriptions;  <span class="comment">/**&lt; Array of subscriptions of this session. */</span></span><br><span class="line">    <span class="type">uint32_t</span> subscription_count;    <span class="comment">/**&lt; Subscription count. */</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">struct</span> &#123;</span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">lyd_node</span> *edit;      <span class="comment">/**&lt; Prepared edit data tree. */</span></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">lyd_node</span> *diff;      <span class="comment">/**&lt; Diff data tree, used for module change iterator. */</span></span><br><span class="line">    &#125; dt[SR_DS_COUNT];              <span class="comment">/**&lt; Session-exclusive prepared changes. */</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">sr_sess_notif_buf</span> &#123;</span><br><span class="line">        ATOMIC_T thread_running;    <span class="comment">/**&lt; Flag whether the notification buffering thread of this session is running. */</span></span><br><span class="line">        <span class="type">pthread_t</span> tid;              <span class="comment">/**&lt; Thread ID of the thread. */</span></span><br><span class="line">        <span class="type">sr_rwlock_t</span> lock;           <span class="comment">/**&lt; Lock for accessing thread_running and the notification buffer</span></span><br><span class="line"><span class="comment">                                         (READ-lock is not used). */</span></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">sr_sess_notif_buf_node</span> &#123;</span><br><span class="line">            <span class="type">char</span> *notif_lyb;        <span class="comment">/**&lt; Buffered notification to be stored in LYB format. */</span></span><br><span class="line">            <span class="type">time_t</span> notif_ts;        <span class="comment">/**&lt; Buffered notification timestamp. */</span></span><br><span class="line">            <span class="type">const</span> <span class="keyword">struct</span> <span class="title class_">lys_module</span> *notif_mod; <span class="comment">/**&lt; Buffered notification modules. */</span></span><br><span class="line">            <span class="keyword">struct</span> <span class="title class_">sr_sess_notif_buf_node</span> *next;    <span class="comment">/**&lt; Next stored notification buffer node. */</span></span><br><span class="line">        &#125; *first;                   <span class="comment">/**&lt; First stored notification buffer node. */</span></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">sr_sess_notif_buf_node</span> *last;    <span class="comment">/**&lt; Last stored notification buffer node. */</span></span><br><span class="line">    &#125; notif_buf;                    <span class="comment">/**&lt; Notification buffering attributes. */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从 <code>session</code> 结构中主要是用于该次 <code>session</code> 的连接，该次 <code>session</code> 要连接的数据库类型（4种，<code>runing</code> , <code>startup</code> , <code>candidate</code> , <code>operation</code>），以及重中之重的 <code>sr_subscription_ctx_t **subscriptions</code>， <code>sysrepo</code> 的所支持操作的订阅都在该结构中定义，不多说，直接看数据结构定义：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief Sysrepo subscription.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">sr_subscription_ctx_s</span> &#123;</span><br><span class="line">    <span class="type">sr_conn_ctx_t</span> *conn;            <span class="comment">/**&lt; Connection of the subscription. */</span></span><br><span class="line">    <span class="type">uint32_t</span> evpipe_num;            <span class="comment">/**&lt; Event pipe number of this subscription structure. */</span></span><br><span class="line">    <span class="type">int</span> evpipe;                     <span class="comment">/**&lt; Event pipe opened for reading. */</span></span><br><span class="line">    ATOMIC_T thread_running;        <span class="comment">/**&lt; Flag whether the thread handling this subscription is running. */</span></span><br><span class="line">    <span class="type">pthread_t</span> tid;                  <span class="comment">/**&lt; Thread ID of the handler thread. */</span></span><br><span class="line">    <span class="type">pthread_mutex_t</span> subs_lock;      <span class="comment">/**&lt; Session-shared lock for accessing specific subscriptions. */</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">modsub_change_s</span> &#123;</span><br><span class="line">        <span class="type">char</span> *module_name;          <span class="comment">/**&lt; Module of the subscriptions. */</span></span><br><span class="line">        <span class="type">sr_datastore_t</span> ds;          <span class="comment">/**&lt; Datastore of the subscriptions. */</span></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">modsub_changesub_s</span> &#123;</span><br><span class="line">            <span class="type">char</span> *xpath;            <span class="comment">/**&lt; Subscription XPath. */</span></span><br><span class="line">            <span class="type">uint32_t</span> priority;      <span class="comment">/**&lt; Subscription priority. */</span></span><br><span class="line">            <span class="type">sr_subscr_options_t</span> opts;   <span class="comment">/**&lt; Subscription options. */</span></span><br><span class="line">            sr_module_change_cb cb; <span class="comment">/**&lt; Subscription callback. */</span></span><br><span class="line">            <span class="type">void</span> *private_data;     <span class="comment">/**&lt; Subscription callback private data. */</span></span><br><span class="line">            <span class="type">sr_session_ctx_t</span> *sess; <span class="comment">/**&lt; Subscription session. */</span></span><br><span class="line"> </span><br><span class="line">            <span class="type">uint32_t</span> request_id;    <span class="comment">/**&lt; Request ID of the last processed request. */</span></span><br><span class="line">            <span class="type">sr_sub_event_t</span> event;   <span class="comment">/**&lt; Type of the last processed event. */</span></span><br><span class="line">        &#125; *subs;                    <span class="comment">/**&lt; Configuration change subscriptions for each XPath. */</span></span><br><span class="line">        <span class="type">uint32_t</span> sub_count;         <span class="comment">/**&lt; Configuration change module XPath subscription count. */</span></span><br><span class="line"> </span><br><span class="line">        <span class="type">sr_shm_t</span> sub_shm;           <span class="comment">/**&lt; Subscription SHM. */</span></span><br><span class="line">    &#125; *change_subs;                 <span class="comment">/**&lt; Change subscriptions for each module. */</span></span><br><span class="line">    <span class="type">uint32_t</span> change_sub_count;      <span class="comment">/**&lt; Change module subscription count. */</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">modsub_oper_s</span> &#123;</span><br><span class="line">        <span class="type">char</span> *module_name;          <span class="comment">/**&lt; Module of the subscriptions. */</span></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">modsub_opersub_s</span> &#123;</span><br><span class="line">            <span class="type">char</span> *xpath;            <span class="comment">/**&lt; Subscription XPath. */</span></span><br><span class="line">            sr_oper_get_items_cb cb;    <span class="comment">/**&lt; Subscription callback. */</span></span><br><span class="line">            <span class="type">void</span> *private_data;     <span class="comment">/**&lt; Subscription callback private data. */</span></span><br><span class="line">            <span class="type">sr_session_ctx_t</span> *sess; <span class="comment">/**&lt; Subscription session. */</span></span><br><span class="line"> </span><br><span class="line">            <span class="type">uint32_t</span> request_id;    <span class="comment">/**&lt; Request ID of the last processed request. */</span></span><br><span class="line">            <span class="type">sr_shm_t</span> sub_shm;       <span class="comment">/**&lt; Subscription SHM. */</span></span><br><span class="line">        &#125; *subs;                    <span class="comment">/**&lt; Operational subscriptions for each XPath. */</span></span><br><span class="line">        <span class="type">uint32_t</span> sub_count;         <span class="comment">/**&lt; Operational module XPath subscription count. */</span></span><br><span class="line">    &#125; *oper_subs;                   <span class="comment">/**&lt; Operational subscriptions for each module. */</span></span><br><span class="line">    <span class="type">uint32_t</span> oper_sub_count;        <span class="comment">/**&lt; Operational module subscription count. */</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">modsub_notif_s</span> &#123;</span><br><span class="line">        <span class="type">char</span> *module_name;          <span class="comment">/**&lt; Module of the subscriptions. */</span></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">modsub_notifsub_s</span> &#123;</span><br><span class="line">            <span class="type">char</span> *xpath;            <span class="comment">/**&lt; Subscription XPath. */</span></span><br><span class="line">            <span class="type">time_t</span> start_time;      <span class="comment">/**&lt; Subscription start time. */</span></span><br><span class="line">            <span class="type">int</span> replayed;           <span class="comment">/**&lt; Flag whether the subscription replay is finished. */</span></span><br><span class="line">            <span class="type">time_t</span> stop_time;       <span class="comment">/**&lt; Subscription stop time. */</span></span><br><span class="line">            sr_event_notif_cb cb;   <span class="comment">/**&lt; Subscription value callback. */</span></span><br><span class="line">            sr_event_notif_tree_cb tree_cb; <span class="comment">/**&lt; Subscription tree callback. */</span></span><br><span class="line">            <span class="type">void</span> *private_data;     <span class="comment">/**&lt; Subscription callback private data. */</span></span><br><span class="line">            <span class="type">sr_session_ctx_t</span> *sess; <span class="comment">/**&lt; Subscription session. */</span></span><br><span class="line">        &#125; *subs;                    <span class="comment">/**&lt; Notification subscriptions for each XPath. */</span></span><br><span class="line">        <span class="type">uint32_t</span> sub_count;         <span class="comment">/**&lt; Notification module XPath subscription count. */</span></span><br><span class="line"> </span><br><span class="line">        <span class="type">uint32_t</span> request_id;    <span class="comment">/**&lt; Request ID of the last processed request. */</span></span><br><span class="line">        <span class="type">sr_shm_t</span> sub_shm;           <span class="comment">/**&lt; Subscription SHM. */</span></span><br><span class="line">    &#125; *notif_subs;                  <span class="comment">/**&lt; Notification subscriptions for each module. */</span></span><br><span class="line">    <span class="type">uint32_t</span> notif_sub_count;       <span class="comment">/**&lt; Notification module subscription count. */</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">opsub_rpc_s</span> &#123;</span><br><span class="line">        <span class="type">char</span> *op_path;              <span class="comment">/**&lt; Subscription RPC/action path. */</span></span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">opsub_rpcsub_s</span> &#123;</span><br><span class="line">            <span class="type">char</span> *xpath;            <span class="comment">/**&lt; Subscription XPath. */</span></span><br><span class="line">            <span class="type">uint32_t</span> priority;      <span class="comment">/**&lt; Subscription priority. */</span></span><br><span class="line">            sr_rpc_cb cb;           <span class="comment">/**&lt; Subscription value callback. */</span></span><br><span class="line">            sr_rpc_tree_cb tree_cb; <span class="comment">/**&lt; Subscription tree callback. */</span></span><br><span class="line">            <span class="type">void</span> *private_data;     <span class="comment">/**&lt; Subscription callback private data. */</span></span><br><span class="line">            <span class="type">sr_session_ctx_t</span> *sess; <span class="comment">/**&lt; Subscription session. */</span></span><br><span class="line"> </span><br><span class="line">            <span class="type">uint32_t</span> request_id;    <span class="comment">/**&lt; Request ID of the last processed request. */</span></span><br><span class="line">            <span class="type">sr_sub_event_t</span> event;   <span class="comment">/**&lt; Type of the last processed event. */</span></span><br><span class="line">        &#125; *subs;                    <span class="comment">/**&lt; RPC/action subscription for each XPath. */</span></span><br><span class="line">        <span class="type">uint32_t</span> sub_count;         <span class="comment">/**&lt; RPC/action XPath subscription count. */</span></span><br><span class="line"> </span><br><span class="line">        <span class="type">sr_shm_t</span> sub_shm;           <span class="comment">/**&lt; Subscription SHM. */</span></span><br><span class="line">    &#125; *rpc_subs;                    <span class="comment">/**&lt; RPC/action subscriptions for each operation. */</span></span><br><span class="line">    <span class="type">uint32_t</span> rpc_sub_count;         <span class="comment">/**&lt; RPC/action operation subscription count. */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-connection-函数"><a href="#4-3-connection-函数" class="headerlink" title="4.3 connection 函数"></a>4.3 connection 函数</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*功能：连接sysrepo数据库</span></span><br><span class="line"><span class="comment"> *输入：默认的连接处理选项</span></span><br><span class="line"><span class="comment"> *输出：该连接的数据，用于该连接的后续的操作，最后由sr_disconnect释放</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">API <span class="type">int</span></span></span><br><span class="line"><span class="function"><span class="title">sr_connect</span><span class="params">(<span class="type">const</span> <span class="type">sr_conn_options_t</span> opts, <span class="type">sr_conn_ctx_t</span> **conn_p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">sr_error_info_t</span> *err_info = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="type">sr_conn_ctx_t</span> *conn = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">lyd_node</span> *sr_mods = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="type">int</span> created = <span class="number">0</span>, changed;</span><br><span class="line">    <span class="type">sr_main_shm_t</span> *main_shm;</span><br><span class="line">    <span class="type">uint32_t</span> conn_count;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">SR_CHECK_ARG_APIRET</span>(!conn_p, <span class="literal">NULL</span>, err_info);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* check that all required directories exist */</span></span><br><span class="line">    <span class="comment">/* 路径包括startup库的存储路径，notify的路径，sysrepo加载的Yang的路径。</span></span><br><span class="line"><span class="comment">     * 并且获取以上路径的访问权限。与路径有关的，都在CMakeLists.txt中的定义</span></span><br><span class="line"><span class="comment">     * 使用者可以修改路径，也可以使用定义的默认路径。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shmmain_check_dirs</span>())) &#123;</span><br><span class="line">        <span class="keyword">goto</span> cleanup;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* create basic connection structure */</span></span><br><span class="line">    <span class="comment">/*创建一个基础连接结构，包括，分配连接的存储空间，初始化YANG的上下文，</span></span><br><span class="line"><span class="comment">     * 互斥信号量初始化，共享内存文件锁权限打开，读写锁的初始化</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_conn_new</span>(opts, &amp;conn))) &#123;</span><br><span class="line">        <span class="keyword">goto</span> cleanup;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* CREATE LOCK */</span></span><br><span class="line">    <span class="comment">/*加锁*/</span></span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shmmain_createlock</span>(conn-&gt;main_create_lock))) &#123;</span><br><span class="line">        <span class="keyword">goto</span> cleanup;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* open the main SHM */</span></span><br><span class="line">    <span class="comment">/*初始化主SHM，打开主SHM,为主SHM分配合适的空间,并对主SHM做相应的初始化*/</span></span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shmmain_main_open</span>(&amp;conn-&gt;main_shm, &amp;created))) &#123;</span><br><span class="line">        <span class="keyword">goto</span> cleanup_unlock;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* open the ext SHM */</span></span><br><span class="line">     <span class="comment">/*初始化扩展SHM，打开扩展SHM,为扩展SHM分配合适的空间,并对扩展SHM做相应的初始化*/</span></span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shmmain_ext_open</span>(&amp;conn-&gt;ext_shm, created))) &#123;</span><br><span class="line">        <span class="keyword">goto</span> cleanup_unlock;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    ／*Sysrepo SHM使用主+扩展SHM机制,整体机制在后面细谈，此处主要是将连接的创建。先略过*／</span><br><span class="line">    <span class="comment">/*该行代码之前的操作,都是基本操作,权限获取,内存大小分配初始化.该行代码之后,需要将已加载的 </span></span><br><span class="line"><span class="comment">      YANG数据模型做解析，并更新存储到相应的结构中*/</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* update connection context based on stored lydmods data */</span></span><br><span class="line">    <span class="comment">/* 加载已经存储的YANG模型,并响应任意的调试变化,并要更新Connection的上下文</span></span><br><span class="line"><span class="comment">     * 根据前面所创建所保存的libyang的上下文ly_ctx,如果检测到lyd_node不存在,则为Sysrepo创建一 </span></span><br><span class="line"><span class="comment">     * 个新的YANG模型数据结构struct lyd_node,如果存在,则解析sysrepo Yang 模型数据.并对模块作上 </span></span><br><span class="line"><span class="comment">     * 下文件的更新.但是对于第一个连接,lyd_node一开始都是不存在的,所以,在完成创建与加载lyd_node </span></span><br><span class="line"><span class="comment">     *  后,需要将全部的YANG模型解析到lys_module-&gt;lyd_node中,一个YANG模型相当于lys_module- </span></span><br><span class="line"><span class="comment">     *  &gt;lyd_node下的一个节点,一个节点一个节点加载,挂载到lys_module的链表中.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_conn_lydmods_ctx_update</span>(conn, created || !(opts &amp; </span><br><span class="line">           SR_CONN_NO_SCHED_CHANGES), &amp;sr_mods, &amp;changed))) &#123;</span><br><span class="line">        <span class="keyword">goto</span> cleanup_unlock;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*这段代码不解读,看注释就能明白*/</span></span><br><span class="line">    <span class="keyword">if</span> (changed || created) &#123;</span><br><span class="line">        <span class="comment">/* clear all main SHM modules (if main SHM was just created, there aren&#x27;t any anyway) */</span></span><br><span class="line">        <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shm_remap</span>(&amp;conn-&gt;main_shm, <span class="built_in">sizeof</span>(<span class="type">sr_main_shm_t</span>)))) &#123;</span><br><span class="line">            <span class="keyword">goto</span> cleanup_unlock;</span><br><span class="line">        &#125;</span><br><span class="line">        main_shm = (<span class="type">sr_main_shm_t</span> *)conn-&gt;main_shm.addr;</span><br><span class="line">        main_shm-&gt;mod_count = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">/* clear ext SHM (there can be no connections and no modules) */</span></span><br><span class="line">        <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shm_remap</span>(&amp;conn-&gt;ext_shm, <span class="built_in">sizeof</span>(<span class="type">size_t</span>)))) &#123;</span><br><span class="line">            <span class="keyword">goto</span> cleanup_unlock;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* set wasted mem to 0 */</span></span><br><span class="line">        *((<span class="type">size_t</span> *)conn-&gt;ext_shm.addr) = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">/* add all the modules in lydmods data into main SHM */</span></span><br><span class="line">        <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shmmain_add</span>(conn, sr_mods-&gt;child))) &#123;</span><br><span class="line">            <span class="keyword">goto</span> cleanup_unlock;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* copy full datastore from &lt;startup&gt; to &lt;running&gt; */</span></span><br><span class="line">        <span class="comment">/*初始化时,完成将startup库的文件copy到running库中,常见的配置恢复是在此处完成*/</span></span><br><span class="line">        <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shmmain_files_startup2running</span>(conn, created))) &#123;</span><br><span class="line">            <span class="keyword">goto</span> cleanup_unlock;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">/* check data file existence and owner/permissions of all installed modules */</span></span><br><span class="line">        <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shmmain_check_data_files</span>(conn))) &#123;</span><br><span class="line">            <span class="keyword">goto</span> cleanup_unlock;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* remember connection count */</span></span><br><span class="line">    main_shm = (<span class="type">sr_main_shm_t</span> *)conn-&gt;main_shm.addr;</span><br><span class="line">    conn_count = main_shm-&gt;conn_state.conn_count;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* CREATE UNLOCK */</span></span><br><span class="line">    <span class="built_in">sr_shmmain_createunlock</span>(conn-&gt;main_create_lock);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* SHM LOCK (mainly to recover connections) */</span></span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shmmain_lock_remap</span>(conn, SR_LOCK_NONE, <span class="number">1</span>, <span class="number">0</span>, __func__))) &#123;</span><br><span class="line">        <span class="keyword">goto</span> cleanup;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (conn_count &amp;&amp; !(opts &amp; SR_CONN_NO_SCHED_CHANGES) &amp;&amp; !main_shm-&gt;conn_state.conn_count) &#123;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">/* SHM UNLOCK */</span></span><br><span class="line">        <span class="built_in">sr_shmmain_unlock</span>(conn, SR_LOCK_NONE, <span class="number">1</span>, <span class="number">0</span>, __func__);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">/* all the connections were stale so we actually can apply scheduled changes, recreate the whole connection */</span></span><br><span class="line">        <span class="built_in">assert</span>(!err_info);</span><br><span class="line"> </span><br><span class="line">        <span class="built_in">lyd_free_withsiblings</span>(sr_mods);</span><br><span class="line">        <span class="built_in">sr_conn_free</span>(conn);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sr_connect</span>(opts, conn_p);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* add connection into state */</span></span><br><span class="line">    err_info = <span class="built_in">sr_shmmain_conn_state_add</span>(conn);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* SHM UNLOCK */</span></span><br><span class="line">    <span class="comment">/*打开锁*/</span></span><br><span class="line">    <span class="built_in">sr_shmmain_unlock</span>(conn, SR_LOCK_NONE, <span class="number">1</span>, <span class="number">0</span>, __func__);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">goto</span> cleanup;</span><br><span class="line"> </span><br><span class="line">cleanup_unlock:</span><br><span class="line">    <span class="comment">/* CREATE UNLOCK */</span></span><br><span class="line">    <span class="built_in">sr_shmmain_createunlock</span>(conn-&gt;main_create_lock);</span><br><span class="line"> </span><br><span class="line">cleanup:</span><br><span class="line">    <span class="built_in">lyd_free_withsiblings</span>(sr_mods);</span><br><span class="line">    <span class="keyword">if</span> (err_info) &#123;</span><br><span class="line">        <span class="built_in">sr_conn_free</span>(conn);</span><br><span class="line">        <span class="keyword">if</span> (created) &#123;</span><br><span class="line">            <span class="comment">/* remove any created SHM so it is not considered properly created */</span></span><br><span class="line">            <span class="built_in">shm_unlink</span>(SR_MAIN_SHM);</span><br><span class="line">            <span class="built_in">shm_unlink</span>(SR_EXT_SHM);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        *conn_p = conn;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sr_api_ret</span>(<span class="literal">NULL</span>, err_info);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 功能:清除与释放由sr_connect分配的的连接上下文,</span></span><br><span class="line"><span class="comment"> * 在该连接下的所有session与订阅将自动停止并清理回收</span></span><br><span class="line"><span class="comment"> * 输入: 调用sr_connect中创建的连接上下文</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**其它不做解释,看注释,很清楚/</span></span><br><span class="line"><span class="comment">API int</span></span><br><span class="line"><span class="comment">sr_disconnect(sr_conn_ctx_t *conn)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    sr_error_info_t *err_info = NULL, *lock_err = NULL, *tmp_err;</span></span><br><span class="line"><span class="comment">    uint32_t i;</span></span><br><span class="line"><span class="comment">    int wr_lock = 0;</span></span><br><span class="line"><span class="comment">    sr_main_shm_t *main_shm;</span></span><br><span class="line"><span class="comment">    if (!conn) &#123;</span></span><br><span class="line"><span class="comment">        return sr_api_ret(NULL, NULL);</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    /* stop all subscriptions */</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; conn-&gt;session_count; ++i) &#123;</span><br><span class="line">        <span class="keyword">while</span> (conn-&gt;sessions[i]-&gt;subscription_count &amp;&amp; conn-&gt;sessions[i]-&gt;subscriptions[<span class="number">0</span>]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!wr_lock) &#123;</span><br><span class="line">                <span class="comment">/* SHM LOCK */</span></span><br><span class="line">                lock_err = <span class="built_in">sr_shmmain_lock_remap</span>(conn, SR_LOCK_WRITE, <span class="number">1</span>, <span class="number">0</span>, __func__);</span><br><span class="line">                <span class="built_in">sr_errinfo_merge</span>(&amp;err_info, lock_err);</span><br><span class="line"> </span><br><span class="line">                wr_lock = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            tmp_err = _sr_unsubscribe(conn-&gt;sessions[i]-&gt;subscriptions[<span class="number">0</span>]);</span><br><span class="line">            <span class="built_in">sr_errinfo_merge</span>(&amp;err_info, tmp_err);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* we need just remap lock or even no lock (no other threads can use the mapping)</span></span><br><span class="line"><span class="comment">     * would be fine, but be robust */</span></span><br><span class="line">    <span class="keyword">if</span> (!wr_lock) &#123;</span><br><span class="line">        <span class="comment">/* SHM LOCK */</span></span><br><span class="line">        lock_err = <span class="built_in">sr_shmmain_lock_remap</span>(conn, SR_LOCK_NONE, <span class="number">1</span>, <span class="number">0</span>, __func__);</span><br><span class="line">        <span class="built_in">sr_errinfo_merge</span>(&amp;err_info, lock_err);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* stop all the sessions */</span></span><br><span class="line">    <span class="keyword">while</span> (conn-&gt;session_count) &#123;</span><br><span class="line">        tmp_err = _sr_session_stop(conn-&gt;sessions[<span class="number">0</span>]);</span><br><span class="line">        <span class="built_in">sr_errinfo_merge</span>(&amp;err_info, tmp_err);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* free any stored operational data */</span></span><br><span class="line">    tmp_err = <span class="built_in">sr_shmmod_oper_stored_del_conn</span>(conn, conn, <span class="built_in">getpid</span>());</span><br><span class="line">    <span class="built_in">sr_errinfo_merge</span>(&amp;err_info, tmp_err);</span><br><span class="line"> </span><br><span class="line">    main_shm = (<span class="type">sr_main_shm_t</span> *)conn-&gt;main_shm.addr;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* CONN STATE LOCK */</span></span><br><span class="line">    tmp_err = <span class="built_in">sr_mlock</span>(&amp;main_shm-&gt;conn_state.lock, SR_CONN_STATE_LOCK_TIMEOUT, __func__);</span><br><span class="line">    <span class="built_in">sr_errinfo_merge</span>(&amp;err_info, tmp_err);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* remove from state */</span></span><br><span class="line">    <span class="built_in">sr_shmmain_conn_state_del</span>(main_shm, conn-&gt;ext_shm.addr, conn, <span class="built_in">getpid</span>());</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* CONN STATE UNLOCK */</span></span><br><span class="line">    <span class="built_in">sr_munlock</span>(&amp;main_shm-&gt;conn_state.lock);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (!lock_err) &#123;</span><br><span class="line">        <span class="comment">/* SHM UNLOCK */</span></span><br><span class="line">        <span class="keyword">if</span> (wr_lock) &#123;</span><br><span class="line">            <span class="built_in">sr_shmmain_unlock</span>(conn, SR_LOCK_WRITE, <span class="number">1</span>, <span class="number">0</span>, __func__);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">sr_shmmain_unlock</span>(conn, SR_LOCK_NONE, <span class="number">1</span>, <span class="number">0</span>, __func__);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* free attributes */</span></span><br><span class="line">    <span class="built_in">sr_conn_free</span>(conn);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sr_api_ret</span>(<span class="literal">NULL</span>, err_info);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-session"><a href="#4-4-session" class="headerlink" title="4.4 session"></a>4.4 session</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*功能:开始一个新的session</span></span><br><span class="line"><span class="comment"> *输入:conn: 由sr_connect所创建的连接</span></span><br><span class="line"><span class="comment"> *     datastore: 连接的数据库类型</span></span><br><span class="line"><span class="comment"> *输出: 用于后续的API调用的session上下文件  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">API <span class="type">int</span></span></span><br><span class="line"><span class="function"><span class="title">sr_session_start</span><span class="params">(<span class="type">sr_conn_ctx_t</span> *conn, <span class="type">const</span> <span class="type">sr_datastore_t</span> datastore, <span class="type">sr_session_ctx_t</span> **session)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">sr_error_info_t</span> *err_info = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="type">sr_main_shm_t</span> *main_shm;</span><br><span class="line">    <span class="type">uid_t</span> uid;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">SR_CHECK_ARG_APIRET</span>(!conn || !session, <span class="literal">NULL</span>, err_info);</span><br><span class="line">    <span class="comment">/*分配1个sizeof (**session)大小的内存空间,并初始化为0*/</span></span><br><span class="line">    *session = <span class="built_in">calloc</span>(<span class="number">1</span>, <span class="keyword">sizeof</span> **session);</span><br><span class="line">    <span class="keyword">if</span> (!*session) &#123;</span><br><span class="line">        <span class="built_in">SR_ERRINFO_MEM</span>(&amp;err_info);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sr_api_ret</span>(<span class="literal">NULL</span>, err_info);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* use new SR session ID and increment it (no lock needed, we are just reading and main SHM is never remapped) */</span></span><br><span class="line">    <span class="comment">/**使用了C++的atomic机制,在C中引入,需要增加编译选项,如何增加,参考CMakeFile.txt.*/</span></span><br><span class="line">    main_shm = (<span class="type">sr_main_shm_t</span> *)conn-&gt;main_shm.addr;</span><br><span class="line">    (*session)-&gt;sid.sr = <span class="built_in">ATOMIC_INC_RELAXED</span>(main_shm-&gt;new_sr_sid);</span><br><span class="line">    <span class="keyword">if</span> ((*session)-&gt;sid.sr == (<span class="type">uint32_t</span>)(ATOMIC_T_MAX - <span class="number">1</span>)) &#123;</span><br><span class="line">        <span class="comment">/* the value in the main SHM is actually ATOMIC_T_MAX and calling another INC would cause an overflow */</span></span><br><span class="line">        <span class="built_in">ATOMIC_STORE_RELAXED</span>(main_shm-&gt;new_sr_sid, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* remember current real process owner */</span></span><br><span class="line">    uid = <span class="built_in">getuid</span>();</span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_get_pwd</span>(&amp;uid, &amp;(*session)-&gt;sid.user))) &#123;</span><br><span class="line">        <span class="keyword">goto</span> error;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* add the session into conn */</span></span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_ptr_add</span>(&amp;conn-&gt;ptr_lock, (<span class="type">void</span> ***)&amp;conn-&gt;sessions, &amp;conn-&gt;session_count, *session))) &#123;</span><br><span class="line">        <span class="keyword">goto</span> error;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    (*session)-&gt;conn = conn;</span><br><span class="line">    (*session)-&gt;ds = datastore;</span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_mutex_init</span>(&amp;(*session)-&gt;ptr_lock, <span class="number">0</span>))) &#123;</span><br><span class="line">        <span class="keyword">goto</span> error;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_rwlock_init</span>(&amp;(*session)-&gt;notif_buf.lock, <span class="number">0</span>))) &#123;</span><br><span class="line">        <span class="keyword">goto</span> error;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">SR_LOG_INF</span>(<span class="string">&quot;Session %u (user \&quot;%s\&quot;) created.&quot;</span>, (*session)-&gt;sid.sr, (*session)-&gt;sid.user);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sr_api_ret</span>(<span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line"> </span><br><span class="line">error:</span><br><span class="line">    <span class="built_in">free</span>((*session)-&gt;sid.user);</span><br><span class="line">    <span class="built_in">free</span>(*session);</span><br><span class="line">    *session = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sr_api_ret</span>(<span class="literal">NULL</span>, err_info);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 功能:停止当前session并且释放与该session所维系的全部资源</span></span><br><span class="line"><span class="comment"> * 输入: sr_session_start中所创建的session上下文</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">####函数清晰,简单,注释丰富,一看就懂,就不多废话.</span><br><span class="line"><span class="function">API <span class="type">int</span></span></span><br><span class="line"><span class="function"><span class="title">sr_session_stop</span><span class="params">(<span class="type">sr_session_ctx_t</span> *session)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">sr_error_info_t</span> *err_info = <span class="literal">NULL</span>, *lock_err = <span class="literal">NULL</span>, *tmp_err;</span><br><span class="line">    <span class="type">sr_conn_ctx_t</span> *conn;</span><br><span class="line">    <span class="type">int</span> wr_lock = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (!session) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sr_api_ret</span>(<span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    conn = session-&gt;conn;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* stop all subscriptions of this session */</span></span><br><span class="line">    <span class="keyword">while</span> (session-&gt;subscription_count) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!wr_lock) &#123;</span><br><span class="line">            <span class="comment">/* SHM LOCK */</span></span><br><span class="line">            lock_err = <span class="built_in">sr_shmmain_lock_remap</span>(conn, SR_LOCK_WRITE, <span class="number">1</span>, <span class="number">0</span>, __func__);</span><br><span class="line">            <span class="built_in">sr_errinfo_merge</span>(&amp;err_info, lock_err);</span><br><span class="line"> </span><br><span class="line">            wr_lock = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        tmp_err = <span class="built_in">sr_subs_session_del</span>(session, session-&gt;subscriptions[<span class="number">0</span>]);</span><br><span class="line">        <span class="built_in">sr_errinfo_merge</span>(&amp;err_info, tmp_err);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* SHM UNLOCK */</span></span><br><span class="line">    <span class="keyword">if</span> (wr_lock &amp;&amp; !lock_err) &#123;</span><br><span class="line">        <span class="built_in">sr_shmmain_unlock</span>(conn, SR_LOCK_WRITE, <span class="number">1</span>, <span class="number">0</span>, __func__);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* no lock needed, we are just reading main SHM */</span></span><br><span class="line">    tmp_err = _sr_session_stop(session);</span><br><span class="line">    <span class="built_in">sr_errinfo_merge</span>(&amp;err_info, tmp_err);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sr_api_ret</span>(<span class="literal">NULL</span>, err_info);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>连接与会话核心处就是这 4 个 API 函数, 其它与连接与会话有关的 API 都是对相关的补充,想要进一步了解的.请阅读源码.</p>
<p>接下来会分析 <code>sysrepo</code> 的共享内存机制. <code>SHM</code> 机制是新 <code>sysrepo</code> 的核心，需要好好说道说道.</p>
<h2 id="5-sysrepo-共享内存机制"><a href="#5-sysrepo-共享内存机制" class="headerlink" title="5. sysrepo 共享内存机制"></a>5. sysrepo 共享内存机制</h2><h3 id="5-1-共享内存机制"><a href="#5-1-共享内存机制" class="headerlink" title="5.1 共享内存机制"></a>5.1 共享内存机制</h3><p><code>sysrepo0.X.X</code> 版本使用的进程间通信的机制，在实际的使用过程中，出现了诸如数据不同步、数据处理<code>TimeOut</code>、完成一次 <code>Get</code> 请求时，但实际处理的请求会较多，导致性能与规格上不去的各类问题。<code>sysrepo-devel</code> 分支开始引入共享机制后，合入到 <code>sysrepo</code> 的 <code>Master</code> 分支，也就是现在的 <code>sysrepo1.X.X</code> 版本。</p>
<p>简单说一说什么是共享内存，共享内存就是允许两个或多个进程共享一定的存储区，说白了，就是两个进程访问同一块内存区域，当一个进程改变了这块地址中的内容的时候，其它进程都会察觉到这个更改，所以数据不需要在客户机和服务器端之间复制，数据直接写到内存，不用若干次数据拷贝，是一种最快的 <code>IPC</code> 。原理图如下所示，需要注意的是，共享内存本向并没有任何的同步与互斥机制，所以必须使用信号量来实现对共享内存的存取的同步。其它有关的共享内存的概念使用，网上有很多，可自行查阅理解。本处这分析与 <code>sysrepo</code> 相关的共享内存机制的使用。</p>
<img data-src="/2020/09/23/Netconf/sysrepo-note/shm.png" class="" title="共享内存原理">

<h3 id="5-2-数据结构"><a href="#5-2-数据结构" class="headerlink" title="5.2 数据结构"></a>5.2 数据结构</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief Generic shared memory information structure.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//sysrepo 共享内存数据结构</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">sr_shm_s</span> &#123;</span><br><span class="line">    <span class="type">int</span> fd;                         <span class="comment">/**&lt; Shared memory file desriptor. */</span></span><br><span class="line">    <span class="type">size_t</span> size;                    <span class="comment">/**&lt; Shared memory mapping current size. */</span></span><br><span class="line">    <span class="type">char</span> *addr;                     <span class="comment">/**&lt; Shared memory mapping address. */</span></span><br><span class="line">&#125; <span class="type">sr_shm_t</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// sysrepo 定义了两个 SHM 分段，一个是 main SHM 和 ext SHM</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SR_MAIN_SHM <span class="string">&quot;/sr_main&quot;</span>              <span class="comment">/**&lt; Main SHM name. */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SR_EXT_SHM <span class="string">&quot;/sr_ext&quot;</span>                <span class="comment">/**&lt; External SHM name. */</span></span></span><br><span class="line"><span class="comment">// 除了定义定义的 main 和 ext 分段之外，还有用于 subscriptions 和 running 数据文件的单个的 SHM 分段。</span></span><br><span class="line"><span class="comment">// main SHM 是以 sr_main_shm_t 结构开始，结构定义如下：</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">sr_main_shm_s</span> &#123;</span><br><span class="line">    <span class="type">sr_rwlock_t</span> lock;  <span class="comment">/**&lt; Process-shared lock for accessing main and ext SHM. It is </span></span><br><span class="line"><span class="comment">                        * required only when  accessing attributes that can be changed </span></span><br><span class="line"><span class="comment">                        * (subscriptions, replay support) and do not have their own lock </span></span><br><span class="line"><span class="comment">                        * (conn state), otherwise not needed. */</span></span><br><span class="line">    <span class="type">pthread_mutex_t</span> lydmods_lock; <span class="comment">/**&lt; Process-shared lock for accessing sysrepo module </span></span><br><span class="line"><span class="comment">                                    *data. */</span></span><br><span class="line">    <span class="type">uint32_t</span> mod_count;  <span class="comment">/**&lt; Number of installed modules stored after this structure. */</span></span><br><span class="line">    <span class="type">off_t</span> rpc_subs;             <span class="comment">/**&lt; Array of RPC/action subscriptions. */</span></span><br><span class="line">    <span class="type">uint16_t</span> rpc_sub_count;     <span class="comment">/**&lt; Number of RPC/action subscriptions. */</span></span><br><span class="line">    ATOMIC_T new_sr_sid;        <span class="comment">/**&lt; SID for a new session. */</span></span><br><span class="line">    ATOMIC_T new_evpipe_num;    <span class="comment">/**&lt; Event pipe number for a new subscription. */</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">struct</span> &#123;</span><br><span class="line">        <span class="type">pthread_mutex_t</span> lock; <span class="comment">/**&lt; Process-shared lock for accessing connection state. */</span></span><br><span class="line">        <span class="type">off_t</span> conns;            <span class="comment">/**&lt; Array of existing connections. */</span></span><br><span class="line">        <span class="type">uint32_t</span> conn_count;    <span class="comment">/**&lt; Number of existing connections. */</span></span><br><span class="line">    &#125; conn_state;               <span class="comment">/**&lt; Information about connection state. */</span></span><br><span class="line">&#125; <span class="type">sr_main_shm_t</span>;</span><br><span class="line"><span class="comment">// 后面是是所有安装的模块，每个安装的模块都会带 sr_mod_t 结构直接到 main SHM 的定义结构。</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">sr_mod_s</span> <span class="type">sr_mod_t</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief Main SHM module.</span></span><br><span class="line"><span class="comment"> * (typedef sr_mod_t)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">sr_mod_s</span> &#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">sr_mod_lock_s</span> &#123;</span><br><span class="line">        <span class="type">sr_rwlock_t</span> lock; <span class="comment">/**&lt; Process-shared lock for accessing module instance data. */</span></span><br><span class="line">        <span class="type">uint8_t</span> write_locked;   <span class="comment">/**&lt; Whether module data are WRITE locked (lock itself may not be WRITE locked to allow data reading). */</span></span><br><span class="line">        <span class="type">uint8_t</span> ds_locked;      <span class="comment">/**&lt; Whether module data are datastore locked (NETCONF locks). */</span></span><br><span class="line">        <span class="type">sr_sid_t</span> sid;           <span class="comment">/**&lt; Session ID of the locking session (user is always NULL). */</span></span><br><span class="line">        <span class="type">time_t</span> ds_ts;           <span class="comment">/**&lt; Timestamp of the datastore lock. */</span></span><br><span class="line">    &#125; data_lock_info[SR_DS_COUNT]; <span class="comment">/**&lt; Module data lock information for each datastore. */</span></span><br><span class="line">    <span class="type">sr_rwlock_t</span> replay_lock;    <span class="comment">/**&lt; Process-shared lock for accessing stored notifications for replay. */</span></span><br><span class="line">    <span class="type">uint32_t</span> ver;               <span class="comment">/**&lt; Module data version (non-zero). */</span></span><br><span class="line"> </span><br><span class="line">    <span class="type">off_t</span> name;                 <span class="comment">/**&lt; Module name. */</span></span><br><span class="line">    <span class="type">char</span> rev[<span class="number">11</span>];               <span class="comment">/**&lt; Module revision. */</span></span><br><span class="line">    <span class="type">uint8_t</span> flags;              <span class="comment">/**&lt; Module flags. */</span></span><br><span class="line"> </span><br><span class="line">    <span class="type">off_t</span> features;             <span class="comment">/**&lt; Array of enabled features (off_t *). */</span></span><br><span class="line">    <span class="type">uint16_t</span> feat_count;        <span class="comment">/**&lt; Number of enabled features. */</span></span><br><span class="line">    <span class="type">off_t</span> data_deps;            <span class="comment">/**&lt; Array of data dependencies. */</span></span><br><span class="line">    <span class="type">uint16_t</span> data_dep_count;    <span class="comment">/**&lt; Number of data dependencies. */</span></span><br><span class="line">    <span class="type">off_t</span> inv_data_deps;        <span class="comment">/**&lt; Array of inverse data dependencies (off_t *). */</span></span><br><span class="line">    <span class="type">uint16_t</span> inv_data_dep_count;    <span class="comment">/**&lt; Number of inverse data dependencies. */</span></span><br><span class="line">    <span class="type">off_t</span> op_deps;              <span class="comment">/**&lt; Array of operation dependencies. */</span></span><br><span class="line">    <span class="type">uint16_t</span> op_dep_count;      <span class="comment">/**&lt; Number of operation dependencies. */</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">struct</span> &#123;</span><br><span class="line">        <span class="type">off_t</span> subs;             <span class="comment">/**&lt; Array of change subscriptions. */</span></span><br><span class="line">        <span class="type">uint16_t</span> sub_count;     <span class="comment">/**&lt; Number of change subscriptions. */</span></span><br><span class="line">    &#125; change_sub[SR_DS_COUNT];  <span class="comment">/**&lt; Change subscriptions for each datastore. */</span></span><br><span class="line"> </span><br><span class="line">    <span class="type">off_t</span> oper_subs;            <span class="comment">/**&lt; Array of operational subscriptions. */</span></span><br><span class="line">    <span class="type">uint16_t</span> oper_sub_count;    <span class="comment">/**&lt; Number of operational subscriptions. */</span></span><br><span class="line"> </span><br><span class="line">    <span class="type">off_t</span> notif_subs;           <span class="comment">/**&lt; Array of notification subscriptions. */</span></span><br><span class="line">    <span class="type">uint16_t</span> notif_sub_count;   <span class="comment">/**&lt; Number of notification subscriptions. */</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 全部的 off_t 标识这些结构是指向 ext SHM 的偏移指针。</span></span><br><span class="line"><span class="comment">// 所以，通过 install 将模块安装后，这结构就是初始化与注册上。</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// Ext shm 是以一个 size_t 单位开始，这值表示在该 SHM 分段使用的字节大小。它是由 main SHM 的 `off_t` 指所指向的数组和字符串表示。首先，在 sysrepo 有一个 sr_conn_state_t 结构，它是表示所有全部运行的连接状态，其次是 sr_mod_t 结构，它是包括安装的各个模块名，依赖，各类订阅，最后是 sr_rpc_t。</span></span><br></pre></td></tr></table></figure>

<h3 id="5-3-源码分析"><a href="#5-3-源码分析" class="headerlink" title="5.3 源码分析"></a>5.3 源码分析</h3><img data-src="/2020/09/23/Netconf/sysrepo-note/shmmain_add.png" class="" title="shmmain_add">

<p>此添加 <code>shm main</code> 的入口代码，将全部模块以 <code>lydmod</code> 数据形式添加到 <code>main SHM</code> 中。参考前一章的 <code>sr_connect</code> 函数，这就是将在与 <code>sysrepo</code> 连接时，会将全部模块的加载到共享内存中。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">sr_error_info_t</span> *</span></span><br><span class="line"><span class="function"><span class="title">sr_shmmain_add</span><span class="params">(<span class="type">sr_conn_ctx_t</span> *conn, <span class="keyword">struct</span> lyd_node *sr_mod)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">sr_error_info_t</span> *err_info = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">lyd_node</span> *next;</span><br><span class="line">    <span class="type">sr_mod_t</span> *shm_mod;</span><br><span class="line">    <span class="type">sr_main_shm_t</span> *main_shm;</span><br><span class="line">    <span class="type">off_t</span> main_end, ext_end;</span><br><span class="line">    <span class="type">size_t</span> *wasted_ext, new_ext_size, new_mod_count;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* count how many modules are we going to add */</span></span><br><span class="line">    <span class="comment">//计算有多少个新的模块需要添加，如果模块在其它的连接已经添加过，该不会计算的/</span></span><br><span class="line">    new_mod_count = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">LY_TREE_FOR</span>(sr_mod, next) &#123;</span><br><span class="line">        ++new_mod_count;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* remember current SHM and ext SHM end (size) */</span></span><br><span class="line">    <span class="comment">//记录main SHM与ext SHM的大小 </span></span><br><span class="line">    main_end = conn-&gt;main_shm.size;</span><br><span class="line">    ext_end = conn-&gt;ext_shm.size;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* enlarge main SHM for the new modules */</span></span><br><span class="line">    <span class="comment">//为新的模块扩大man SHM的空间，这部分很棒，算的是一种自扩大袜。</span></span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shm_remap</span>(&amp;conn-&gt;main_shm, conn-&gt;main_shm.size + new_mod_count * <span class="keyword">sizeof</span> *shm_mod))) &#123;</span><br><span class="line">        <span class="keyword">return</span> err_info;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* enlarge ext SHM */</span></span><br><span class="line">    <span class="comment">//为新的模块扩大ext SHM 空间</span></span><br><span class="line">    wasted_ext = (<span class="type">size_t</span> *)conn-&gt;ext_shm.addr; <span class="comment">//已使用的空间</span></span><br><span class="line">    new_ext_size = <span class="built_in">sizeof</span>(<span class="type">size_t</span>) + <span class="built_in">sr_shmmain_ext_get_size_main_shm</span>(&amp;conn-&gt;main_shm, conn-&gt;ext_shm.addr) +</span><br><span class="line">            <span class="built_in">sr_shmmain_ext_get_lydmods_size</span>(sr_mod-&gt;parent);  <span class="comment">//需要扩大的空间大小</span></span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shm_remap</span>(&amp;conn-&gt;ext_shm, new_ext_size + *wasted_ext))) &#123;</span><br><span class="line">        <span class="keyword">return</span> err_info;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//sr_shm_remap，将空间映射到连接的SHM分段上。</span></span><br><span class="line">    wasted_ext = (<span class="type">size_t</span> *)conn-&gt;ext_shm.addr;  <span class="comment">//新扩大的空间大小。</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* add all newly implemented modules into SHM */</span></span><br><span class="line">    <span class="comment">//添加所有的新的需要实现的模块到SHM中的地址中</span></span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shmmain_add_modules</span>(conn-&gt;ext_shm.addr, sr_mod, (<span class="type">sr_mod_t</span> *)(conn-&gt;main_shm.addr + main_end),</span><br><span class="line">                &amp;ext_end))) &#123;</span><br><span class="line">        <span class="keyword">return</span> err_info;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* add the new modules number */</span></span><br><span class="line">    main_shm = (<span class="type">sr_main_shm_t</span> *)conn-&gt;main_shm.addr;</span><br><span class="line">    main_shm-&gt;mod_count += new_mod_count;</span><br><span class="line">    <span class="built_in">assert</span>(main_shm-&gt;mod_count == (conn-&gt;main_shm.size - <span class="keyword">sizeof</span> *main_shm) / <span class="keyword">sizeof</span> *shm_mod);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * Dependencies of old modules are rebuild because of possible</span></span><br><span class="line"><span class="comment">     * 1) new inverse dependencies when new modules depend on the old ones;</span></span><br><span class="line"><span class="comment">     * 2) new dependencies in the old modules in case they were added by foreign augments in the new modules.</span></span><br><span class="line"><span class="comment">     * Checking these cases would probably be more costly than just always rebuilding all dependencies.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* remove all dependencies of all modules from SHM */</span></span><br><span class="line">    <span class="comment">//处理模块间的依赖，要重构各模块间的依赖，先将之前的依赖关系解除，</span></span><br><span class="line">    <span class="comment">//然后，为新的模块计算并扩大ext SHM 空间计算</span></span><br><span class="line">    <span class="comment">//最后，在SHM中为所有的模块添加建立新的依赖。</span></span><br><span class="line">    <span class="comment">//经过这个处理，各模块间的依赖建立成功。</span></span><br><span class="line">    <span class="built_in">sr_shmmain_del_modules_deps</span>(&amp;conn-&gt;main_shm, conn-&gt;ext_shm.addr, <span class="built_in">SR_FIRST_SHM_MOD</span>(conn-&gt;main_shm.addr));</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* enlarge ext SHM to account for the newly wasted memory */</span></span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shm_remap</span>(&amp;conn-&gt;ext_shm, new_ext_size + *wasted_ext))) &#123;</span><br><span class="line">        <span class="keyword">return</span> err_info;</span><br><span class="line">    &#125;</span><br><span class="line">    wasted_ext = (<span class="type">size_t</span> *)conn-&gt;ext_shm.addr;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* add all dependencies for all modules in SHM */</span></span><br><span class="line">    <span class="keyword">if</span> ((err_info = <span class="built_in">sr_shmmain_add_modules_deps</span>(&amp;conn-&gt;main_shm, conn-&gt;ext_shm.addr, sr_mod-&gt;parent-&gt;child,</span><br><span class="line">                <span class="built_in">SR_FIRST_SHM_MOD</span>(conn-&gt;main_shm.addr), &amp;ext_end))) &#123;</span><br><span class="line">        <span class="keyword">return</span> err_info;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* check expected size */</span></span><br><span class="line">    <span class="built_in">SR_CHECK_INT_RET</span>((<span class="type">unsigned</span>)ext_end != new_ext_size + *wasted_ext, err_info);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 还有两个核心函数:</span></span><br><span class="line"><span class="built_in">sr_shmmain_add_modules</span>(<span class="type">char</span> *ext_shm_addr, <span class="keyword">struct</span> lyd_node *first_sr_mod, <span class="type">sr_mod_t</span> *first_shm_mod, <span class="type">off_t</span> *ext_end)</span><br><span class="line"><span class="comment">//实现将全部的模块以及模块的全部特性都保存于main SHM中。这个函数不会添加data/op/inverse三类依赖</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">sr_shmmain_add_modules_deps</span>(<span class="type">sr_shm_t</span> *shm_main, <span class="type">char</span> *ext_shm_addr, <span class="keyword">struct</span> lyd_node </span><br><span class="line">          *first_sr_mod, <span class="type">sr_mod_t</span> *first_shm_mod,  <span class="type">off_t</span> *ext_end)</span><br><span class="line"><span class="comment">//该函数就是添加各模块间的data/op/inverse 依赖，并保存到manin SHM中。</span></span><br></pre></td></tr></table></figure>

<p>共享内存间在初始操作，包括信号的创建与初始化，也是在 <code>sr_connet</code> 函数中处理。&#96;&#96;sr_connet<code>是</code>plugind<code>与</code>sysrepo<code> 的连接入口，</code>SHM<code>是在入口中初始的一种机制，用来保证</code>sysrepo<code>与</code>plugind&#96; 的通信高效，快速。</p>
<p>先用 <code>sysrepo</code> 共享内存机制为后面的各类订阅打个底。先了解一下 <code>sysrepo</code> 的共享内存机理的实现。</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><blockquote>
<p><a href="https://github.com/CESNET/libyang">libyang – GitHub</a></p>
<p><a href="https://github.com/CESNET/netopeer2">netopeer2 – GitHub</a></p>
<p><a href="https://github.com/sysrepo/sysrepo">sysrepo – GitHub</a></p>
<p><a href="https://github.com/mbj4668/pyang">pyang – GitHub</a></p>
</blockquote>
<blockquote>
<p><a href="https://netopeer.liberouter.org/doc/libyang/master/index.html">libyang – Doc</a></p>
<p><a href="https://netopeer.liberouter.org/doc/libnetconf2/devel/index.html">libnetconf2 – Doc</a></p>
<p><a href="https://netopeer.liberouter.org/doc/sysrepo/master/index.html">sysrepo – Doc</a></p>
<p><a href="http://66.218.245.39/doc/html/rn01re08.html">pyang – Doc</a></p>
<p><a href="https://www.runoob.com/xpath/xpath-tutorial.html">XPath 教程 – RUNOOB.COM</a></p>
<p><a href="https://www.yiibai.com/xpath">XPath教程 – 易百教程</a></p>
</blockquote>
<blockquote>
<p><a href="https://blog.csdn.net/xuguozheng110/article/details/104043039">netopeer2 + sysrepo研究总结</a></p>
<p><a href="https://blog.csdn.net/qq_27923047/article/details/108069409">sysrepo简单使用</a></p>
<p><a href="https://blog.csdn.net/m0_47413019/article/details/105867406">第三章 sysrepo-plugind源码分析</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Netconf</category>
      </categories>
      <tags>
        <tag>Netconf</tag>
      </tags>
  </entry>
</search>
